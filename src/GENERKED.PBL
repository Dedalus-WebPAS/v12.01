.----------------------------------------------------------------------
. Program       : GENERKED
.
. Function      : Generate Emergency Diagnosis KeyWord Table
.
. Modifications :
.----------------------------------------------------------------------
. V11.02.01 16/08/2022 Alina Bhari      TSK 0923131
.           Recompile for EMRICDPR - Emergency diagnosis maintenance keyword
.           search field by 70 character
. V9.02.02  05/04/2002  Pat Dirito
.           Recompiled for EMRICDPR
. V9.02.01  27/03/2002  Bronko Sosic
.           Recompiled for EMRICDFD 
.----------------------------------------------------------------------
.  data includes
.----------------------------------------------------------------------
.
          INC       STDGENDF
          INC       EMRICDFD/INC
          INC       EMRKEDFD/INC
.
.----------------------------------------------------------------------
.  local variables
.----------------------------------------------------------------------
.
.
PRGID     INIT      "GENERKED"
PRGNAM    INIT      "Fix emrkedaf"
VERSION   INIT      "V12.01.00"
.
.----------------------------------------------------------------------
.  program code
.----------------------------------------------------------------------
.
.---- initialise screen and confirm desire to execute program ----
.
ML0000    CALL      DISPHEAD
.
          DISPLAY   *P1:10,"This file generate emricdaf Keyword records."
          CALL      CONTQST
          SUB       ONE,CEXIT
          BRANCH    CEXIT,ML9999,ML9999
.
.---- open files ----
.
          OPEN      EMRICDA1,"emricdaf"
          OPEN      EMRKEDA1,"emrkedaf"
          OPEN      EMRKEDA2,"emrkedaf"
.
.---- loop through emrkedaf ----
.
          PACK      KEY10,SP70
          MOVE      ZERO,SECTOR
.
ML1000    CALL      RSEMICD1           * read next record
.
ML1100    CALL      RKEMICD1
          BRANCH    OVRCD,ML9999
.
          ADD       ONE,SECTOR         * display every 100th record
          IF        SECTOR%100=1
            DISPLAY   *P1:24,*V2LON,SECTOR," - ",EMIC10CD,*EF;
          ENDIF
.
          PROC      EMRICDUP
          GOTO      ML1100
.
.---- exit program ----
.
ML9999    CHAIN     PGM
.----------------------------------------------------------------------
.  code includes
.----------------------------------------------------------------------
.
          INC       EMRICDIO/INC
          INC       EMRKEDIO/INC
          INC       EMRICDPR
          INC       STDGENCD
.
