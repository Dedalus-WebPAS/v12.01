.----------------------------------------------------------------------
.   Program       : GENERDKI
.   CAR Number    : 22680 
.   Modifications : 
.         V10.11.01 08/08/2017  Tracey Nguyen TSK 0299206
.                   Recompiled for PATDKIPR - Added Sound-Ex key for
.                   Doctor Surname and Given Name
.         V10.05.01 25/07/2014  Ebon Clements CAR 295504
.                   Recompiled for PATDKIPR - Preferred name to keywords
.         V9.09.01  07/01/2008  Ebon Clements CAR 146550
.                   Recompiled for PATDKIPR - Doctor code added to keywords
.         V9.05.00  12/05/2005  Davin S
.                   Created program
.----------------------------------------------------------------------
.
.----------------------------------------------------------------------
.  data includes
.----------------------------------------------------------------------
.
          INC       STDGENDF
          INC       PATCODFD/INC
          INC       PATDO1FD/INC
          INC       PATDKIFD/INC
.
.----------------------------------------------------------------------
.  local variables
.----------------------------------------------------------------------
.
.
PRGID     INIT      "GENERDKI"
PRGNAM    INIT      "Fix patdkiaf"
VERSION   INIT      "V12.01.00"
.
.----------------------------------------------------------------------
.  program code
.----------------------------------------------------------------------
.
.---- initialise screen and confirm desire to execute program ----
.
ML0000    CALL      DISPHEAD
.
          DISPLAY   *P1:10,"This file generate Doctor Keyword records."
          CALL      CONTQST
          SUB       ONE,CEXIT
          BRANCH    CEXIT,ML9999,ML9999
.
.---- open files ----
.
          OPEN      PATCODE1,"patcodes"
          OPEN      PATDO1A1,"patdo1af"
          OPEN      PATDKIA1,"patdkiaf"
          OPEN      PATDKIA2,"patdkiaf"
.
.---- loop through patdo1af ----
.
          MOVE      ZERO,SECTOR
.
          PACK      KEY6,SP70
ML1000    CALL      RDSDOCT1           * read next record
ML1100    CALL      RDKDOCT1
          BRANCH    OVRCD,ML9999
.
          ADD       ONE,SECTOR
          IF        SECTOR%100=1
            DISPLAY   *P1:24,*V2LON,SECTOR," - ",DCODE,*EF;
          ENDIF
.
          PROC      PATDKIUP
          GOTO      ML1100
.
.---- exit program ----
.
ML9999    CHAIN     PGM
.----------------------------------------------------------------------
.  code includes
.----------------------------------------------------------------------
.
          INC       PATCODIO/INC
          INC       PATDO1IO/INC
          INC       PATDKIIO/INC
          INC       PATDKIPR
          INC       STDGENCD
.
