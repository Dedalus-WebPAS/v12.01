.******************************************************************************
.*  DGSRVADT  :  Wait for & Read an incoming ADT message & determine what     *
.*               kind of message it is.                                       *
.*                                                                            *
.*  Author    :  Mike Laming - Cloned from DGSRVADT (18/06/2001)              *
.*  Mods      :                                                               *
.*                                                                            *
.******************************************************************************
.*  V12.01.01 05/02/2026  Zumin Yu       TSK 0972419                          *
.*            Updated PTCNMRPN to read from the new location                  *
.*  V12.00.01 20/05/2025  Ebon Clements  TSK 0955096                          *
.*            Alphanueric visit number changes                                *
.*  V11.04.04 15/03/2024  J.Tan          TSK 0919335                          *
.*            Added PATDDHRD - Read HF History file                           *
.*  V11.04.03 29/01/2024  Jacob Jackson  TSK 0919335                          *
.*            Add HF History includes                                         *
.*  V11.04.02 29/01/2024  Jacob Jackson  TSK 0919335                          *
.*            Add new local variable and recompile for GETTFEES               *
.*  V11.04.01 11/12/2023 Thanh T                TSK 0935728                   *
.*            Recompiled for OPRQUEFD changes                                 *
.*  V11.03.04 23/10/2023  Nikitha B      TSK 0938566                          *
.*            Recompiled for changes to PATDEATH                              *
.*  V11.03.03 28/07/2023  Ebon Clements TSK 0935527                           * 
.*            Recompiled for OPRQUEFD - Theatre booking hospital              *
.*  V11.03.02 05/04/2023  Bella Turco   TSK 0911166                           *
.*            Recompiled for PATIPERH - Hold Invoice Audit                    *
.*  V11.03.01 09/02/2023  Ebon Clements TSK 0909393                           *
.*            Added SAVOHOSP                                                  *
.*  V11.02.02 24/08/2022  Ebon Clements TSK 0904278                           *
.*            Recompiled for OPMAKBOK                                         *
.*            Added SAVPRV4, SAVPRV5 and SAVPRV6                              *
.*  V11.02.01 09/02/2022  Thanh T       TSK 0905641                           *
.*            Recompiled as OUTMA1FD/WATTR1FD changes                         *
.*  V11.01.02 10/11/2021 J.Tan           TSK 0880410                          *
.*            Recompiled for DRGDTADM - added Hospital and System HF Hold Inv.*
.*  V11.01.01 18/02/2021  J.Tan          TSK 0888639                          *
.*            Increased record counter for patmmb                             *
.*  V11.00.02 22/10/2020  J.Tan           TSK 0898866                         *
.*            Recompiled for PATIPERH - on hold invoice                       *
.*  V11.00.01 11/03/2020  J.Tan          TSK 0838262                          *
.*            Added Effective from and to date to MBS Item file (OPRDEA01)    *
.*  V10.14.01 24/05/2019  Peter Vela       TSK 0872587                        *
.*            Recompiled for OPMAKBOK                                         *
.*  V10.13.01 24/08/2018  Steve Armstrong  TSK 0845563                        *
.*            Recompiled for changes to PATDEATH                              *
.******************************************************************************
.*  V10.12.02 26/06/2018  Ebon Clements    TSK 0845295                        *
.*            Recompiled for PATCHPRE - eReferral update                      *
.*  V10.12.01 19/06/2018  Ebon Clements    TSK 0845588                        *
.*            Recompiled for OPMAKBOK - Fasting dates                         *
.******************************************************************************
.*  V10.11.03 27/12/2017  Steve Armstrong  TSK 0850165                        *
.*            Recompiled for changes to DGCLICAC.                             *
.*  V10.11.02 16/10/2017  Thanh T.         TSK 0846191                        *
.*            Recomplied for OPTHETAT                                         *
.*  V10.11.01 05/10/2017  Thanh T.         TSK 0821710                        *
.*            Recomplied for DGHOS31V                                         *
.******************************************************************************
.*  V10.08.02 12/09/2016  Steve Armstrong  TSK 0825587                        *
.*            Recompiled for changes to PATDEATH                              *
.*  V10.08.01 15/04/2016  Ebon Clements    TSK 0313944                        *
.*            Added var SAVMHRC                                               *
.******************************************************************************
.*  V10.07.01 04/01/2016  Ebon Clements    TSK 0294154                        *
.*            Recompiled for DGADTADM and DGADTPRE opt out of SMS             *
.******************************************************************************
.*  V10.06.04 28/08/2015  Steve Armstrong  CAR 311864                         *
.*            Recompiled for changes to OPWEBCAN                              *
.*  V10.06.03 10/06/2015  Steve Armstrong  CAR 313856                         *
.*            Recompiled for changes to PATCHPRE & DGADTPCA                   *
.*  V10.06.02 05/05/2015  Don Nguyen       CAR 299117                         *
.*            Recompiled for OPMAKBOK - clear OPDAACPD & OPDARICM before write*
.*  V10.06.01 12/03/2015  Steve Armstrong  CAR 314108                         *
.*            Removed reference to PATCGPFD (No longer in use)                *
.******************************************************************************
.*  V10.05.01 15/08/2014  Jill Parkinson   CAR 299980                         *
.*            Added calls to OPTHETAT to write new theatre audit records      *
.*            31/07/2014  Ebon Clements    CAR 283332                         *
.*            Added vars SAVPCOM to SAVAPRC                                   *
.******************************************************************************
.*  V10.04.03 16/06/2014  Steve Armstrong  CAR 301639                         *
.*            Moved call to TFILENAM from DGADTORD (CRET0000) to DGINI000.    *
.*            Recompiled for changes to DGADTORD.                             *
.*  V10.04.02 28/04/2014  Steve Armstrong  CAR 261630                         *
.*            Removed references to PATAUEFD, PATAULFD & PATAUTFD             *
.*            (No longer in use).                                             *
.*            Recompiled for changes to DGADTLVE & DGADTORD.                  *
.*  V10.04.01 06/03/2014  Peter Vela       CAR 218689                         *
.*            Recompiled OPMAKBOK                                             *
.******************************************************************************
.*  V10.03.10 25/11/2013  Ebon Clements    CAR 293746                         *
.*            Added open of patunaaf - required for OPWEBCAN                  *
.*  V10.03.09 14/10/2013  Ania P           CAR 278232                         *
.*            Recompiled for PATDEATH                                         *
.*  V10.03.08 10/09/2013  Steve Armstrong  CAR 291089                         *
.*            Recompiled for changes to PMSQVIIO.                             *
.*  V10.03.07 26/07/2013  Steve Armstrong  CAR 287787                         *
.*            Recompiled for changes to DGCLICUA.                             *
.*  V10.03.06 18/05/2013  Steve Armstrong   CAR 268961                        *
.*            Recompiled for changes to PMSQVIFD                              *
.*  V10.03.05 01/05/2013  Steve Armstrong   CAR 284376                        *
.*            Recompiled for changes to BRHLCOMN so that PMI messages         *
.*            can use H7CIHOSP for Facility Code.                             *
.*            Recompiled for changes to DGCLICUP.                             *
.*  V10.03.04 15/04/2013  Steve Armstrong  CAR 267329                         *
.*            Recompiled for changes to PATDEATH                              *
.*  V10.03.03 23/07/2012 Patrick Adair     CAR 269159                         *
.*            Recompiled for changes to PATCOMN2                              *
.*  V10.03.02 19/07/2012  Steve Armstrong CAR 268870                          *
.*            Recompiled for changes to PATCOMN2                              *
.*  V10.03.01 09/07/2012  Steve Armstrong CAR 267675                          *
.*            Recompiled for changes to PATCOMN2                              *
.******************************************************************************
.*  V10.02.04 27/10/2011  Steve Armstrong CAR 251323                          *
.*            Recompiled for PMSQVIFD changes                                 *
.*  V10.02.03 27/06/2011  Steve Armstrong   CAR 240722                        *
.*            Recompiled for changes to DGADTDIS & DGADTADM for PATLOCFD.     *
.*            Recompiled for changes to DGADTADM & DGADTPRE for PATGSRFD.     *
.*            Recompiled for changes to PMSCURFD.                             *
.*            Recompiled for changes to PATCHADT.                             *
.*  V10.02.02 05/05/2011  Mike Laming       CAR 240720                        *
.*            Recompiled for PATDEATH - added O/P Appointment Request table   *
.*  V10.02.01 23/03/2011  Mike Laming       CAR 240107                        *
.*            Remove PTCNUCEP PATCEDFD/IO                                     *
.*  V10.01.03 02/02/2011  Steve Armstrong   CAR 237520                        *
.*            Mods to remove Detente interface (PATDETNT).                    *
.*            Also recompiled for changes to DGADTADM, DGADTDIS, DGADTLVE,    *
.*            DGADTPRE, DGADTRET, DGADTTRN, DGADTPCA & DGADTPCA.              *
.*  V10.01.02 15/12/2010  Mike Laming      CAR 233046                         *
.*            Re-compiled for DGADTORD - Mods to Misc.Charges PATMCHFD        *
.*            also added PMSCIDFD & IO
.*  V10.01.01 06/12/2010  Ebon Clements    CAR 233927                         *
.*            Added reason for hold update to invoice pending                 *
.******************************************************************************
.*  V10.00.03 12/04/2010 Steve Armstrong   CAR 219111                         *
.*            Recompiled for changes to PATUNAFD & PATCHADT.                  *
.*  V10.00.02 09/04/2010 Steve Armstrong   CAR 219045                         *
.*            Recompiled for changes PATMRGFD.                                *
.*            Recompiled for changes to MEHDIAFD                              *
.*  V10.00.01 03/03/2010  Steve Armstrong  CAR 135505                         *
.*            Recompiled for PATDEATH - DGCLII13 added                        *
.******************************************************************************
.*  V9.12.01  26/10/2009  J.Tan           CAR 206764                          *
.*            Recompiled for CHNADMTP - Suggested classification              *
.******************************************************************************
.*  V9.09.02  22/11/2007  Peter Vela   CAR 132264                             *
.*            Recompiled for PATCHCFD                                         *
.*  V9.09.01  27/08/2007  Peter Vela   CAR 147747                             *
.*            Added variables for PATCOMN2 Cabrini Health UR format           *
.*  V9.08.05  08/05/2007  Mike Laming  CAR 137125 HDP 2007 DRG 5.2            *
.*            Re-compile for DGADTORD et al. - Mods to PATDGWFD               *
.*  V9.08.04  02/02/2007  Ebon Clements CAR 120001                            *
.*            Added nz private billing files                                  *
.*  V9.08.03  31/01/2007  Peter Vela    CAR 127930                            *
.*            Recompled for MRTCONFD                                          *
.*  V9.08.02  14/11/2006  Peter Vela    CAR 124547                            *
.*            Added reads for PTCNDEES, PTCNDDES                              *
.*  V9.08.01  23/10/2006  Peter Vela    CAR 118228                            *
.             Recompiled for OPMAKBOK                                         *
.*  V9.07.01  20/09/2006  Peter Vela    CAR 118228                            *
.*            Recompiled for OPRRALFD                                         *
.*  V9.05.B02 31/01/2006  Peter Vela    CAR 89644                             *
.*            Recompiled for OPWEBCAN                                         *
.*  V9.04.08  22/11/2005  Peter Vela    CAR 81907                             *
.*            Recompiled for PATDEATH                                         *
.*  V9.04.07  27/09/2005  Peter Vela    CAR 76782                             *
.*            Recompiled for OPWEBCAN                                         *
.*  V9.04.06  16/06/2005  Mike Laming   CAR 61746                             *
.*            Add routine WSAD0000 for ESIS extract requirement               *
.*            Recompiled for CLPATDTR - add clear PTDTTIME & PTDTCRST         *
.*  V9.04.05  29/04/2005  Peter Vela         CAR 55214                        *
.             Recompiled for MRTCONFD                                         *
.*  V9.04.04  07/03/2005  Steve Armstrong    CAR 59137                        *
.*            Recompiled for changes to CISINADT, HL7CISIN & HL7CISVR         *
.*  V9.04.03  01/03/2005  Peter Vela    CAR 57547                             *
.*            Recompiled for PATVADFD and PATVADIO                            *
.*  V9.04.02  29/11/2004  Mike Laming   CAR 54534                             *
.*            Re-comple for PATCMSTP - fix Addit.Charge Description           *
.*  V9.04.01  05/10/2004 J.Tan  CAR 53798                                     *
.*            Recompiled for DGADTLVE, DGADTRET                               *
.******************************************************************************
.*  V9.03.10  28/06/2004  Steve Armstrong   CAR 51167                         *
.*            Recompiled for changes to HL7CISIN.                             *
.*            25/06/2004  Peter Vela           CAR 50402                      *
.*            Recompiled for PATDEATH                                         *
.*  V9.03.09  13/05/2004  Steve Armstrong      CAR 49679                      *
.*            PAS-CIS Product Integration                                     *
.*            Recompiled for WRTUR in PATCOMN2 (added call to CISA28BR)       *
.*  V9.03.08  22/03/2004  Guomin Fu         CAR 48171                         *
.*            Recompiled for PATDEATH                                         *
.*  V9.03.07  17/03/2004  Steve Armstrong   CAR 13395                         *
.*            Recompiled for changes to DGADTORD                              *
.*  V9.03.06  16/02/2004  Steve Armstrong   CAR 47516                         *
.*            Recompiled for changes to DGADTPRE                              *
.*  V9.03.05  07/11/2003  Steve Armstrong   CAR 44931                         *
.*            Recompiled for DGADTADM & DGADTPRE                              *
.*  V9.03.04  18/12/2003  Peter Vela        CAR 43134                         *
.*            Recompiled for MRTCONFD                                         *
.*  V9.03.03  24/10/2003  J.Tan        CAR 44172                              *
.*            Recompiled for CHNADMTP                                         *
.*            29/10/2003 Sandra Barcham   43783                                *
.*            Recompiled for NZHISIIO and NZHISIUP                             *
.*  V9.03.02  16/09/2003  J.Tan        CAR 36504                              *
.*            Recompiled for CHNADMTP                                         *
.*  V9.03.01  11/09/2003  Sandra Barcham    43010                             *
.*            Recompiled for PATDEATH (outpreaf open without file prefix)     *
.******************************************************************************
.*  V9.02.01  27/02/2003  Jill Habasque SRF 34660                             *
.*            Added WTCNBRSR                                                  *
.*  V9.02.14  13/12/2002  Davin                                               *
.*            Initialise some variables                                       *
.*  V9.02.13  09/12/2002  Davin                                               *
.*            Added some reads on pmspx2af                                    *
.*  V9.02.12  07/12/2002  Lina Vo                                             *
.*            Recompiled for PATDEATH                                         *
.*  V9.02.11  14/11/2002  Davin                                               *
.*            Removed reference to $$DBASE WEB compile option                 *
.*  V9.02.10  27/08/2002  Davin  SRF 13395                                    *
.*            Recompiled for DGADTORD                                         *
.*  V9.02.09  04/09/2002  Jill Habasque SRF 17573                             *
.*            Changed to use RTIODAYS                                         *
.*  V9.02.08  05/07/2002  Jill Habasque SRF 19273                             *
.*            Recompiled for PATCOMN2                                         *
.*  V9.02.07  30/05/2002  Steve Armstrong       srf 18200                     *
.*            Mods to allow a pre-admission without a previous                *
.*            booking.                                                        *
.*  V9.02.06  24/04/2002 Mike Laming  hanges to PATWEB96 SRF 3566             *
.*            1) Add code for new APIs DGADTACA, DGADTACH, DGADTDCA,          *
.*     ~      11/04/2002 Mike Laming  New DG APIs                             *
.*            1) Add code for new APIs DGADTACA, DGADTACH, DGADTDCA,          *
.*                        DGADTDCH, DGADTTCA, DGADTPCA                        *
.*            2) Replace PMEDI with Composite variable PMEDIXX (which         *
.*            contains PMEDI+PTMXMCCD) Add call (SPLTPMED)to split these      *
.*  V9.02.05  02/02/2002 Ebon Clements                                        *
.*            Recompiled for WLHISSUB - WATHI002 effective date set           *
.*  V9.02.04  24/01/2002 Ebon Clements                                        *
.*            Recompiled for WLHISSUB - effective date set                    *
.*  V9.02.03  15/01/2002 Sai SRF 14169                                        *
.*            Recompiled after PATMDIFD/IO & PATMOPFD/IO                      *
.*            being removed from DGADTDIS,DGHOS31V,DGADTADM,DGADTPRE          *
.*  V9.02.02  01/11/2001  Greg Horvat                                         *
.*            Recompiled for ACTCOMN1 - Added xtra option to the              *
.*            parameter PNSWRACE                                              *
.*  V9.02.01  29/08/2001  Mike Laming                                         *
.*            Add Web User INCs WEBSECFD and WEBSECIO                         *
.*            Add OPCNDGCB and INC for DGCLICCB                               *
.******************************************************************************
.*  V9.00.00  18/06/2001  Mike Laming                                         *
.*            Add new Data Fields to the following Message Types:             *
.*            ADM - DGADGADM - 109 fields from PMSPX2 & PMSVX1                *
.*            PRE - DGADGPRE - 109 fields from PMSPX2 & PMSVX1                *
.*            VEN - DGADGENQ - 40 fields from PMSVX1                          *
.*            Add PMSPX2FD/IO & PMSVX2FD/IO - Using $$DBASE compile           *
.*                option for WEB use only.                                    *
.******************************************************************************
.*        V5.10.B01 27/03/2001  Glenn Saunders                                *
.*                  Remove access to PTCNSNDX and associated processing.      *
.*                  Remove all references to PATSUR file (old surname file).  *
.*        V5.09.B01 04/01/2001  Jill Habasque                                 *
.*                  Casemix Mods - recompiled for PATDYCAS                    *
.*        V5.08.05  14/09/2000 Caleb Sharman                                  *
.*                  Health fund change mods                                   *
.*        V5.08.04  16/08/2000  Caleb Sharman                                 *
.*                  Changed Health Fund variables to be 8 chars 
.*        V5.08.03  19/07/2000  Steve Armstrong   srf 647004                  *
.*                  Recompiled for DGADTADM                                   *
.*        V5.08.02  27/06/2000  Greg Horvat                                   *
.*                  Recompiled for PATICOKY - Validating ICD10 version 2 codes*
.*        V5.08.B08 10/04/2000  Greg Horvat                                   *
.*                  Removed MATADAFD MATADAIO MATADBFD & MATADBIO             *
.*        V5.08.B07 06/04/2000  Steve Armstrong                               *
.*                  Recompiled for DGADTTRN changes                           *
.*        V5.08.B06 30/03/2000  Greg Horvat      SRF 646507                   *
.*                  Recompiled for OPRDEA01 - Changed to open the bokrc1af    *
.*                  file before reading it                                    *
.*        V5.08.B05 08/03/2000  Steve Downing                                 *
.*                  Fixed read position for IBCNUGST                          *
.*        V5.08.B04 25/02/2000  Greg Horvat                                   *
.*                  Recompiled for DGADT??? - Removed PATADJFD PATADJIO       *
.*                  PATMMRFD PATMMRIO & PATPRADJ                              *
.*                  25/02/2000  Greg Horvat      SRF 637565                   *
.*                  Recompiled for DGADTDIS & DGADTLVE                        *
.*        V5.08.B03 08/02/2000  Steve Armstrong                               *
.*                  Recompiled for DGADTADM CHANGES                           *
.*        V5.08.B02 28/01/2000  Steve Armstrong                               *
.*                  Recompiled for DGCOMMFD (Y2K changes)                     *
.*        V5.08.B01 14/01/2000  Steve Armstrong                               *
.*                  Recompiled for DGADTADM (ward/bed validation before adm)  *
.******************************************************************************
.*        V5.07.09  01/11/1999  Steve Armstrong                               *
.*                  Recompiled for changes to DGADTADM                        *
.*        V5.07.08  20/10/1999  Steve Armstrong                               *
.*                  Removed SP70 definition                                   *
.*                  15/10/1999  Steve Armstrong                               *
.*                  Removed reference to CSTRTYR (not used)                   *
.*        V5.07.07  02/08/1999  Steve Armstrong                               *
.*                  Recompiled for changes to PATDETNT                        *
.*        V5.07.06  20/07/1999  Steve Downing                                 *
.*                  Recompiled for changes to DGADTADM & DGADTDIS             *
.*        V5.07.04  09/07/1999  Caleb Sharman  SRF 644740                     *
.*                  Recompiled for DGADTADM & DGADTPRE                        *
.*        V5.07.03  08/07/1999  Nicole Harrington                             *
.*                  Recompiled for changes to DGCLIREG and DGCLIUAL           *
.*        V5.07.02  07/07/1999  Steve Armstrong                               *
.*                  Recompiled for changes to DGADTADM (ALACDTE)              *
.*        V5.07.01  25/06/1999  Steve Armstrong                               *
.*                  Fixed recompile errors for casemix mods                   *
.*        V5.07.B02 14/01/1999  Davin                                         *
.*                  Fixed errors for global recompile                         *
.*        V5.07.B01 22/12/1998  Davin                                         *
.*                  Y2K mods                                                  *
.*        V5.07.B00 26/10/1998  Davin                                         *
.*                  Mods for 507                                              *
.******************************************************************************
.*        V5.05.09  13/03/1998  Steve Armstrong    506                        *
.*                  Recompiled for changes to MEDRECRQ (to use mrtreqaf)      *
.*        V5.05.08  16/01/1998  Steve Armstrong    SRF 642548  (AUS)          *
.*                  Recompiled for changes to DGADTDIS                        *
.*        V5.05.07  12/01/1998  Steve Armstrong    SRF 643822                 *
.*                  Recompiled for changes to PATDEATH                        *
.*        V5.05.06  03/11/1997  Steve Armstrong                               *
.*                  Recompiled for changes to PATAA1FD, PATAA1FD & PATIOADA   *
.*        V5.05.05  27/10/1997  Steve Armstrong                               *
.*                  Recompiled for changes to WRTUR for DGCLIREG              *
.*        V5.05.04 13/10/1997  Steve Armstrong                                *
.*                 Recompiled for nhi master variables and new master         *
.*                 extension file variables.                                  *
.*        V5.05.03 01/10/1997  Steve Armstrong                                *
.*                 Added call to SETX0000 to set up common variables          *
.*        V5.05.02 22/09/1997  Steve Armstrong                                *
.*                 Mods for AXIS V to be a free text description.             *
.*                 (MEHRVDIA)                                                 *
.*        V5.05.01  09/09/1997  Steve Armstrong                               *
.*                  Mods to use MRTREQFD instead of TRKREQFD                  *
.******************************************************************************
.*        V5.04.06  03/07/1997  Steve Armstrong                               *
.*                  Recompiled for changes to DGADTPRE and also changed READG *
.*                  to READ                                                   *
.*        V5.04.05  16/06/1997  Steve Armstrong                               *
.*                  Fixed bugs in global recompile                            *
.*        V5.04.04  17/04/1997  Steve Armstrong                               *
.*                  Mods for inbound and outbound comms client (DGATEIN &     *
.*                  DGATEOUT).                                                *
.*        V5.04.03  17/01/1997  Steve Armstrong                               *
.*                  Fixed bugs from global recompile (TBC 7)                  *
.*        V5.04.02  12/07/1996    Justin Coates  (SUHT mods)                  *
.*                  recompile for watmtrtl                                    *
.******************************************************************************
.
 IFGE     $$VER,7
          INC       IBAWEBDF
.         INC       STD002FD
.         INC       STDKWSDF
          INC       STDHLPDF
          INC       ALLAUDFD/INC
          INC       ALLENCFD/INC
          INC       BOKRC1FD/INC
          INC       COMDEPFD/INC
          INC       COMERHFD/INC
          INC       DGCOMMFD/INC                  * datagate common vars
          INC       EMRVISFD/INC
          INC       IBAPOLFD/INC
          INC       MEHCONFD/INC
          INC       MEHCJAFD/INC                                       *I-90206
          INC       MEHCJRFD/INC                                       *I-90206
          INC       MEHDIAFD/INC                                       *I-90206
          INC       MEHDL1FD/INC                                       *I-90206
          INC       MEHDS1FD/INC
          INC       MEHLEGFD/INC                                       *I-90206
          INC       MEHLERFD/INC                                       *I-90206
          INC       MEHREVFD/INC                                       *I-90206
          INC       MEHVI1FD/INC
          INC       MRTCONFD/INC                                       *I-90206
          INC       MRTLOCFD/INC 
          INC       MRTMASFD/INC                                       *I-90206
          INC       MRTPDSFD/INC                                       *I-90206
          INC       MRTVISFD/INC                                       *I-90206
          INC       NZPBFEFD/INC
          INC       NHIMASFD/INC
          INC       NZHISIFD/INC
          INC       OPRCONFD/INC
          INC       OPRDEAFD/INC
          INC       OPRQUEFD/INC
          INC       OPRRALFD/INC
          INC       OPROPRFD/INC
          INC       OUTBOAFD/INC                                       *I-50402
          INC       OUTCLIFD/INC                                       *I-90206
          INC       OUTHEDFD/INC
          INC       OUTPREFD/INC
          INC       PATAA1FD/INC                                       *I-90206
          INC       PATADBFD/INC                                       *I-90206
          INC       PATACHFD/INC                                       *I-90206
          INC       PATAFEFD/INC
          INC       PATAK1FD/INC
          INC       PATAM1FD/INC
          INC       PATALRFD/INC
          INC       PATASFFD/INC                                       *I-90206
          INC       PATASDFD/INC
          INC       PATAXEFD/INC                                       *I-90206
          INC       PATBFEFD/INC
          INC       PATCALAG/INC
          INC       PATCHCFD/INC                                       *I-90206
          INC       PATCFAFD/INC
          INC       PATCMXFD/INC                                       *I-90206
.         INC       PATCODFD/INC
          INC       PATCOMM/INC
          INC       PATCONFD/INC
          INC       PATCTFFD/INC
          INC       PMSCIDFD/INC                                * Jeni's
          INC       PATDADFD/INC                                       *I-90206
          INC       PATDAYFD/INC                                       *I-90206
          INC       PATDGWFD/INC
          INC       PATDHEAD/INC
          INC       WEBDINVS/INC
          INC       PATDO1FD/INC
          INC       PATDRGFD/INC
          INC       PATDSCFD/INC
          INC       PATDTRFD/INC
          INC       PATFN1FD/INC
          INC       PATFX1FD/INC
          INC       PATFHIFD/INC
          INC       PATGSRFD/INC
          INC       PATHDFFD/INC
          INC       PATHLFFD/INC
          INC       PATHSPFD/INC
          INC       PATONHFD/INC
          INC       PATICOFD/INC
          INC       PATINVFD/INC
          INC       PATIPEFD/INC                                       *I-90206
          INC       PATITMFD/INC
          INC       PATLDFFD/INC
          INC       PATLOCFD/INC
          INC       PATLSDFD/INC
          INC       PATMA1FD/INC
          INC       PATMRGFD/INC                                       *I-90206
          INC       PMSMTIFD/INC
          INC       PMSPX2FD/INC            * PMI Master Extn 2            I900
          INC       PATMI1FD/INC
          INC       PATNIDFD/INC
          INC       PATNOBFD/INC                                       *I-90206
          INC       PATNUMFD/INC                                       *I-90206
          INC       PATNURFD/INC                                       *I-90206
          INC       PATOICFD/INC
          INC       PATONLFD/INC                                       *I-90206
          INC       PATPR1FD/INC
          INC       PATRATFD/INC                                       *I-90206
          INC       PATRCAUD/INC                                       *I-90206
          INC       PATRE1FD/INC
          INC       PATSTAFD/INC                                       *I-90206
          INC       PATTFEFD/INC
          INC       PATTRDAT/INC
          INC       PATTRNFD/INC
          INC       PATUNAFD/INC                                       *I-90206
          INC       PATURAFD/INC
          INC       PATVISFD/INC
          INC       PATWR1FD/INC
          INC       PMSBRQFD/INC            * Visit Master Extn 1          I900
          INC       PMSVX1FD/INC            * Visit Master Extn 1          I900
          INC       PMSCURFD/INC
          INC       PMSHCPFD/INC
          INC       SCRPSTFD/INC
          INC       SCRSBGFD/INC
          INC       SCRSLTFD/INC
          INC       TFILEVAR/INC
          INC       WATCHAFD/INC
          INC       WATESEFD/INC
          INC       WATESNFD/INC
          INC       WATHISFD/INC
          INC       WATPNPFD/INC                                       *I-90206
          INC       WATPROFD/INC
          INC       WATNBRFD/INC
          INC       WATRTDFD/INC
          INC       WATTR1FD/INC
          INC       WATTX1FD/INC
.         INC       WEBSECFD/INC
          INC       WATCONFD/INC
          INC       PATDDHFD/INC
.
. ----------------------------------------------- * Start of addition   I-90206
. ----------------------------------------------- * reqd for PATCHADT  *I-90206
.
ADMISNO   DIM       8
ADMTYP    DIM       3
ADMTYPFG  FORM      1
AUDIFLAG  FORM      1                       * audit type
CANTYPE   FORM      1
CHECKSUS  FORM      1
CHGCARE   FORM      1
CHKGRPIN  FORM      1
CHRGFLAG  FORM      1
CODEA     INIT      "A "
CODEB     INIT      "B"
CPADM008  DIM       8
CURSTAT   DIM       1
DELESN    INIT      "DELETE"
DAYCOL    FORM      4
DCEASE    DIM       3
DISPDTTM  DIM       18                      * Display Date and Time
DELKEY30  DIM       30
DISPVAR   DIM       127
DOAGAIN   FORM      1
ENDDATE   DIM       8
ERR1      DIM       50
ERR2      DIM       50
FLAGCOL   FORM      3
FLAGDESC  DIM       127
FLAGROW   FORM      3
FNAME     DIM       8
FNDLFLG   FORM      3
FORM5     FORM      5
FORM8     FORM      8
FORM10    FORM      10
FTYPE     FORM      1
HFPORT    FORM      6.2
INDEX     FORM      2
KEYWRD00  DIM       60
LASTFLAG  FORM      1
LASTTRAN  DIM       1                       * last tran recd cancelled
LEAVEFLG  FORM      1
LOOPFLG   FORM      3
LCHGDATE  DIM       8
LCHGTIME  DIM       8
LCHGURNO  DIM       8
LSTADOC   DIM       6
LSTATYP   DIM       3
LSTBED    DIM       3
LSTDATE   DIM       8
LSTEPNO   FORM      2
LSTTIME   DIM       8
LSTUNIT   DIM       3
LSTWARD   DIM       3
MEHKEY24  DIM       24                      * key for MEHDLVFD record
NOATYPUP  FORM      1
NOCHANGE  FORM      1
OLDADATE  DIM       8                       * original admission date c
ONLEAVE   FORM      1
OLDUNIQ   DIM       10
PMEDIXX   DIM       12                      * Composite for PMEDI+PTMXCCD
PREAD002  DIM       1
PREAD003  DIM       3
PREVBED   DIM       3
PREVWARD  DIM       3
PTDSC001  DIM       8
PTDSC002  DIM       8
PTMIS001  DIM       8
PTMIS002  DIM       8
RTDAYS    FORM      4
REQUESTN  DIM       10
SALACDAT  DIM       8
SAVADMN   DIM       8
SAVASRC   DIM       3
SAVEPREV  DIM       9
SAVUNIT   DIM       3
SAVADMNO  DIM       8
SAVCONT   DIM       2
SAVCRDT   DIM       8
SAVCSDT   DIM       8
SAVCSST   DIM       1
SAVCTIM   DIM       8
SAVDOCT   DIM       6
SAVEVDT   DIM       8
SAVEXTR   FORM      6.2
SAVKEY9   DIM       9
SAVKEY21  DIM       21
SAVKEY28  DIM       28
SAVOCDAT  DIM       8
SAVPROC   DIM       9
SAVUDAT   DIM       8
SAVURNO   DIM       8
SAVUTIM   DIM       8
SAVWEBC   DIM       10
SAVWEBU   DIM       10
SAVPCOM   DIM       1
SAVVUN1   DIM       10
SAVVUN2   DIM       10
SAVPHMN   DIM       10
SAVREQN   DIM       10
SAVDES4   DIM       80
SAVDES5   DIM       80
SAVDES6   DIM       80
SAVFAST   DIM       8
SAVAPRC   DIM       1
SAVMHRC   DIM       1
SAVPOWD   DIM       3
SAVTYPP   DIM       3
SAVTYCL   DIM       3
SAVDTFF   DIM       8
SAVDTFL   DIM       8
SAVPRV4   DIM       9
SAVPRV5   DIM       9
SAVPRV6   DIM       9
SAVOHOSP  DIM       3
SDCEASE   DIM       3
SEARCHTY  FORM      1
SELITMNO  FORM      2
SHOWSUSP  FORM      1
SMONDAY   DIM       4
STBYFLAG  FORM      1
STRTDATE  DIM       8
SVTRATEF  FORM      6.2
SVTEXTRA  FORM      6.2
SYEAR     DIM       4
TADTTYPE  DIM       3  * Theatre Audit type
THISYEAR  DIM       4
TRANDATE  DIM       8
TRANWARD  DIM       3
TRANBEDS  DIM       3
TRANTIME  DIM       8
TRNACARE  DIM       3
TYEARR    DIM       4
UPCANBOK  FORM      1
URCHKDGT  FORM      4
URWTARAY  INIT      "234567"
URNLNGTH  FORM      2
URCHKPRD  FORM      2
URNOWGHT  FORM      1
WATTRKEY  DIM       19
WDATE     DIM       8
WORK      FORM      6
WORKDATE  DIM       8
.
CODECL    INIT      "CL"
CODED     INIT      "D"
Z10       INIT      "zzzzzzzzzz"
ZEDS      INIT      "zzzzzzzzzzzzzzzzzzzzzzzzzzzzzz"
.
. ----------------------------------------------- * End of addition     I-90206
.
ADDWLFLG  FORM      1
WATHI002  DIM       8      * Date of change
ACTION    DIM       1
DIM3      DIM       3
DIM4      DIM       4
DIM18     DIM       18
DIM18A    DIM       18
DIM26A    DIM       26
DIM30     DIM       30
OPERCODE  DIM       4
ADD       DIM       2
AMM       DIM       2
AYY       DIM       2
ACC       DIM       2
CALDAYS   FORM      3
EFTADMIN  DIM       8                       * Effective admission number
EFTATYPE  DIM       3                       * Effective admission type
EFTDATE   DIM       8                       * Effective date (ccyymmdd)
EFTTIME   DIM       8                       * Effective time
FNAMEA    DIM       8
HFHIFUND  FORM      2
MHLVEEND  DIM       3
.
SCRID     DIM       2
SDATE     DIM       8
LLCNT     FORM      5
NMPNUMB   DIM       20
DIM80     DIM       80
SAVALLW   FORM      6.2
SAVDISC   FORM      6.2
.
. vars required for DGADTDIS (discharge)
.
CBOOK     FORM      1
CODEBC    INIT      "BC"
DIM1A     DIM       1
HBWAIT    FORM      1
HINVDES   DIM       30
HSTANDM   FORM      1
MESSPROC  INIT      "DGSRVADT - Message Processed"   * dummy processed message
NEWBFTYP  DIM       3
NEWBFAMT  FORM      6.2
NEWBFDAM  FORM      6.2
NEWBFAAM  FORM      6.2
NEWATDOC  DIM       6
NEWDITEM  FORM      2
NEWDPART  DIM       3
ONAME     DIM       30
SAVKEY24  DIM       24
SHUTDOWN  FORM      1
SP14      INIT      "              "
SUPRSQST  FORM      1
THCFLG    FORM      2
Z20       INIT      "zzzzzzzzzzzzzzzzzzzz"
.
. vars required by this include
.
OTCNUPVS  FORM      1
CTCNCGDT  FORM      1
.
DGNUMLVE  FORM      5       * no. leave requests
DGNUMDIS  FORM      5       * no. discharge requests
DGNUMADM  FORM      5       * no. admission requests
DGNUMRET  FORM      5       * no. return from leave requests
DGNUMTRN  FORM      5       * no. transfer requests
DGNUMPRE  FORM      5       * no. pre-admission requests
DGNUMENQ  FORM      5       * no. enquiry requests
DGNUMORD  FORM      5       * no. order/billing requests
.
DGNUMACA  FORM      5       * no. cancel admission requests            *I-90206
DGNUMACH  FORM      5       * no. change admission requests            *I-90206
DGNUMDCA  FORM      5       * no. cancel discharge requests            *I-90206
DGNUMDCH  FORM      5       * no. change discharge requests            *I-90206
DGNUMTCA  FORM      5       * no. cancel transfer requests             *I-90206
DGNUMPCA  FORM      5       * no. cancel pre-admission requests        *I-90206
.
WARNINGL  DIM       20
WDATE1    DIM       8
WDATE2    DIM       8
.
ZERO8     INIT      "0000    "
.
.-----------------------------------------------------------------------
PRGID     INIT      "DGSRVADT"
PRGNAM    INIT      "Process Datagate Message Requests"
VERSION   INIT      "V12.01.01"
.-----------------------------------------------------------------------
+
.*************************************************************************
.*  Start of Program                                                     *
.*************************************************************************
DGRED000  MOVE      ZERO,ADDWLFLG
          MOVE      Z70,WATHI002
          CALL      SETX0000                      * set common variables
.
          CALL      DISPHEAD
          CALL      DGINI000                      * initialisation
          BRANCH    EXIT,DGRED900                 * initialisation failure
          CALL      DRAW0000                      * draw box & screen layout
.
DGRED010  CALL      USTAT000                      * update stats on screen
.
.         sit & wait for an incoming message from the outbound comms client
.
          READ      DGATEOUT;CCENCODE:            * cc encoded fields
                             DGMISC1,DGMISC2,DGMISC3;
          GOTO      DGRED900 IF OVER              * Shutdown performed?
          UNPACK    CCENCODE,CCDATE,CCSRC,CCDST,CCNAME,MESSTYPE
.
.>>>>>    BEGIN                                   * start of rollback
.
          DISPLAY   *P23:10,*V2LON,*HON,"Processing":
                    *HOFF,SP1,*V2LON,"(",MESSTYPE,")"
.
. check for ADT messages
.
          MATCH     "ADM",MESSTYPE                * Admit?
          GOTO      DGRED110 IF EQUAL
          MATCH     "PRE",MESSTYPE                * Pre-Admit?
          GOTO      DGRED120 IF EQUAL
          MATCH     "DSC",MESSTYPE                * Discharge?
          GOTO      DGRED130 IF EQUAL
          MATCH     "LVE",MESSTYPE                * On Leave?
          GOTO      DGRED140 IF EQUAL
          MATCH     "RET",MESSTYPE                * Return from Leave?
          GOTO      DGRED150 IF EQUAL
          MATCH     "TRN",MESSTYPE                * Transfer?
          GOTO      DGRED160 IF EQUAL
          MATCH     "VEN",MESSTYPE                * Enquiry?
          GOTO      DGRED170 IF EQUAL
          MATCH     "ORD",MESSTYPE                * Order/Bill?
          GOTO      DGRED180 IF EQUAL
. ----------------------------------------------- * Start of addition   I-90206
          MATCH     "ACA",MESSTYPE                * Cancel Admission
          GOTO      DGRED210 IF EQUAL
          MATCH     "ACH",MESSTYPE                * Change Admission
          GOTO      DGRED220 IF EQUAL
          MATCH     "DCA",MESSTYPE                * Cancel Discharge
          GOTO      DGRED230 IF EQUAL
          MATCH     "DCH",MESSTYPE                * Change Discharge
          GOTO      DGRED240 IF EQUAL
          MATCH     "TCA",MESSTYPE                * Cancel Transfer 
          GOTO      DGRED250 IF EQUAL
          MATCH     "PCA",MESSTYPE                * Cancel Pre-Admission
          GOTO      DGRED260 IF EQUAL
. ----------------------------------------------- * End of addition     I-90206
.
. invalid message type sent
.     NB.  SP1 at end of reply has been added because the interpreter does
.     not place a "|" after the last field, and Datagate requires this.  By
.     putting an extra field on the end (which is blank), a "|" will then
.     be added after the last field.
.
          READ      DGATEOUT;CDGMBUFF             * clear message buffer
.
          MOVE      "00010",RPLYCODE
          MOVE      "Invalid Message type",RPLYDESC
          PACK      CCENCODE,CCDATE,CCDST,CCSRC,CCNAME,REPLYRPL
          WRITE     DGATEIN;CCENCODE:
                          RPLYHEAD,RPLYCODE,RPLYDESC,DGMISC1:
                          DGMISC2,DGMISC3,SP1
.
          WRITE     DGATEOUT;MESSPROC       * tell Dgate that message processed
          GOTO      DGRED010                * get next message
.
. --- process each message type ---
.
DGRED110  PROC      DGADTADM                      * Admit patient
          ADD       ONE,DGNUMADM                  * # admit counter
          GOTO      DGRED600
.
DGRED120  PROC      DGADTPRE                      * Pre-Admit patient
          ADD       ONE,DGNUMPRE                  * # admit counter
          GOTO      DGRED600
.
DGRED130  PROC      DGADTDIS                      * Discharge patient
          ADD       ONE,DGNUMDIS                  * # discharge counter
          GOTO      DGRED600
.
DGRED140  PROC      DGADTLVE                      * Put patient on Leave 
          ADD       ONE,DGNUMLVE                  * # leave counter
          GOTO      DGRED600
.
DGRED150  PROC      DGADTRET                      * Return patient from Leave
          ADD       ONE,DGNUMRET                  * # return counter
          GOTO      DGRED600
.
DGRED160  PROC      DGADTTRN                      * transfer patient
          ADD       ONE,DGNUMTRN                  * # transfers counter
          GOTO      DGRED600
.
DGRED170  PROC      DGADTENQ                      * enquiry visit dets patient
          ADD       ONE,DGNUMENQ                  * # transfers counter
          GOTO      DGRED600
.
DGRED180  PROC      DGADTORD                      * order/bill patient
          ADD       ONE,DGNUMORD                  * # order counter
          GOTO      DGRED600
.
. ----------------------------------------------- * Start of addition   I-90206
DGRED210  PROC      DGADTACA                      * Cancel Admission
          ADD       ONE,DGNUMACA                  * # cancel admit counter
          GOTO      DGRED600
.
DGRED220  PROC      DGADTACH                      * Change Admission
          ADD       ONE,DGNUMACH                  * # change admit counter
          GOTO      DGRED600
.
DGRED230  PROC      DGADTDCA                      * Cancel Discharge
          ADD       ONE,DGNUMDCA                  * # cancel disch counter
          GOTO      DGRED600
.
DGRED240  PROC      DGADTDCH                      * Change Discharge
          ADD       ONE,DGNUMDCH                  * # change disch counter
          GOTO      DGRED600
.
DGRED250  PROC      DGADTTCA                      * Cancel Transfer  
          ADD       ONE,DGNUMTCA                  * # cancel transfer counter
          GOTO      DGRED600
.
DGRED260  PROC      DGADTPCA                      * Cancel Pre-Admission 
          ADD       ONE,DGNUMPCA                  * # cancel pre-admiss counter
          GOTO      DGRED600
.
. ----------------------------------------------- * End of addition     I-90206
.
. if all is ok write/update (COMMIT), else if error along the way (ROLLBACK)
.
DGRED600  
.>>>>>>   MATCH     "00000",RPLYCODE              * successful?
.>>>>>>   IF        @EQUAL
.>>>>>>     COMMIT                                * write/update all files
.>>>>>>   ELSE
.>>>>>>     ROLLBACK                              * error. DONT write/update
.>>>>>>   ENDIF
          WRITE     DGATEOUT;MESSPROC       * tell Dgate that message processed
          GOTO      DGRED010                * get next message
.
. finished
.
DGRED900  CALL      SHUTM000                * shutdown message if shutdown
          TRAPCLR   INT                     * clear traps
          CLOSE     DGATEIN                 * close inbound datagate file
          CLOSE     DGATEOUT                * close outbound datagate file
.
DGRED999  STOP
+
.***********************************************************************
.*  DGINI000  :  initialisation                                        *
.***********************************************************************
DGINI000  DISPLAY   *P1:4,*EF
.
          BOX       16,23,10,57,14
          DISPLAY   *P26:12,"Opening Server... Please Wait"
.
          OPEN      CONTROLF,"controlf"
.
. read system parameters
.
          READ      CONTROLF,ZERO;*43,IBCNMHOS,*85,IBCNUGST
          READ      CONTROLF,TEN;*13,PTCNTLVE,PTCNP2SC,PTCNDLVE,*22,PTCNMHBK:
                                 PTCNA2SC,PTCNICAD,PTCNVKCA,*32,PTCNUBRD:
                                 *37,CMOPRT,*53,CPCONT,*54,CFILENO:
                                 *79,CAPPRVNO,*126,CLABPG,CLABPRT:
                                 *161,CMIDWIF,*164,CSPECCO,CIDENT,CMEMB,CSECURA:
                                 CSECURD,*184,CPRIMOP,CPRIMDS,*188,CCHKRAT:
                                 CSURGIC,*192,CACCFEE,*194,CDIETCD,*196,CGENRUR:
                                 CASSOCD,CDIETDF,*201,CAUDA,CAUDB,*211,CAUDK:
                                 *213,CAUDM,*217,CAUDQ,*244,CHOSPNUM
          READ      CONTROLF,TEN3;CHADD1,CHADD2,CHPOST,CHPADD1,CHPADD2,CHPPOST:
                                  CHTELEB,*143,CSIZLAB,*154,CUSEMBS,*163,BEDTYP:
                                  *186,CMBSOPR,*188,CMABINS,CVETINS:
                                  *211,CINV1ST,*213,CHCSCOD,*216,CUSR1,CUSRDS1:
                                  CUSR2,CUSRDS2,*242,CCLMCHN,CACCLSS,CHCS:
                                  CHOSTYP
          READ      CONTROLF,TEN4;CNOCLMS,CINMES1,CINMES2:
                                  *227,CIDLAY,*229,CUSMAN1,CUSMAN2,CATDMAN:
                                  *245,CMAXINV
          READ      CONTROLF,TEN5;*187,CBOOK,*190,CKMBS,CMUSR1,CMUSDS1:
                                  CMUSR2,CMUSDS2,CMUSR3,CMUSDS3,CMUSMAN1:
                                  CMUSMAN2,CMUSMAN3,*233,CUSR3,CUSRDS3,CUSMAN3:
                                  *247,CSTDOWN,*249,CRDRTYP
          READ      CONTROLF,TEN8;*17,CUSR4,CUSRDS4,CUSMAN4,CUSR5,CUSRDS5:
                                  CUSMAN5,CUSR6,CUSRDS6,CUSMAN6,CUSR7,CUSRDS7:
                                  CUSMAN7,*73,CDUSR1,*86,CDUSMAN1,CDUSR2:
                                  *100,CDUSMAN2,CDUSR3,*114,CDUSMAN3,CDUSR4:
                                  *128,CDUSMAN4,CDUSR5,*142,CDUSMAN5,CLOWMBS:
                                  CLOWADM,CHIGHMBS,CHIGHADM,CTOPADM,*205,CPRINV:
                                  CFINAN,*215,CPRDLB,*225,CCHGST1,CCHGST2:
                                  *246,CMAXAGE
          READ      CONTROLF,TEN9;*75,CCNOTES,*208,CPMIAD,CSRESP,*212,CFEETYP:
                                  CDYCASE,CWRDSCN,*214,CWRDSCN,*216,CINVRIP
          READ      CONTROLF,TWENTY;*1,CMUSR4,CMUSDS4,CMUSR5,CMUSDS5,CMUSR6:
                                    CMUSDS6,CMUSMAN4,CMUSMAN5,CMUSMAN6:
                                    *50,PTCNADBF,PTCNPRSB,PTPCLRES,*73,PTCNDEPM:
                                    PTCNVALD,*164,PTRESDAY,PTCNDFBO:
                                    *186,PTCNUCSL,*190,PTCNIR31,*192,PTALRH31:
                                    PTCNDCLM,PTCNUCRD,PTCNUFML,PTCNPIOP:
                                    PTCNBCUT,PTCNBDOM,PTCNDKCL,PTCNCDEF:
                                    PTCNCNDY,*214,PTCNSQD3,PTCNSQU3:
                                    *225,PTCNNMDX,*238,PTCNURCO,PTCNMXCH
          READ      CONTROLF,TWENTY1;*13,PTCNUNAK,*46,PTCNBAGE,*51,PTCNINVL:
                                     *54,SRCHPCKL,*56,PTCNDEFT:
                                     *60,PTCNCCRR,*63,PTCNCLOR,*66,PTCNABBL:
                                     *118,PTCNUCEP,PTCNRPIK,PTCNADDC:
                                     *132,PTCNCADD,*136,PTCNMITM:
                                     *138,PTCNNHII,PTCNNHID,PTCNDONR,PTCNMEDW:
                                     PTCNUDNG,*178,PTCNMPTR,PTCNLNCD:
                                     *183,PTCNLH31,*189,PTCNUONL,PTCNPCON:
                                     PTCNNHIF,*199,PTCNDBWB,PTCNICRA:
                                     *204,PTCNAWRN,*216,PTCNDTRF,*235,PTCNDPL8:
                                     *237,PTCNPAOF,PTCNAGEC
          READ      CONTROLF,TWENTY2;*30,STCNIPPM,STCNIPAD,STCNIPDS
          READ      CONTROLF,TWENTY7;*46,HBWAIT
          READ      CONTROLF,THIRTY;*132,HSTANDM,HINVDES
          READ      CONTROLF,THIRTY1;*158,OTCNUPVS
          READ      CONTROLF,THIRTY7;*137,HWDSOUR
          READ      CONTROLF,THIRTY9;*106,CTCNCGDT    * Dietary System parameter
          READ      CONTROLF,FORTY;*112,OPCNCODE  
          READ      CONTROLF,FORTY2;*101,OPCNSGCL
          READ      CONTROLF,FIFTY9;*1,CDLSTEP,*6,CLUNTNO,*23,CFUTINV:
                                 *34,CTYPEUR,CTYPLAB:
                                 *37,CTYPCHG,CRESIDT,*41,CNONRES,*44,CYRSRES:
                                 *64,CUSENOTE,*66,CGSTPERC,CGSTITEM:
                                 *79,CYRESMAN,CBIRTHCN:
                                 *86,CDETENTE,*92,CDETPATH,*129,CCHGCMN,CADDLAB:
                                 *132,CALRDESC,CPIDCOD,*171,PTCNSTAU,PTCNNUMM:
                                 *174,PTCNNDAT,*182,PTCNORNO,*192,PTCNURCF:
                                 *193,PTCNRQCF,*194,PTCNDPCF,*195,PTCNRLAY:
                                 *196,PTCNUCOD:
                                 *208,PTWRDLAB,PTCNDAYF,*216,PTPRVALS:
                                 *220,PTCNUADT,*226,CCARECL:
                                 CADMCAT,*231,PTCNRGNS,*233,PTCNADOC:
                                 PTCNNMPI,PTCNPREG
          READ      CONTROLF,SEVENTY9;*248,PTCNIPEN
          READ      CONTROLF,SIXTY9;*43,MHCNAUDA,MHCNAUDB,MHCNAUDC:
                                    *69,MHCNUSE,MHCNSUPL,MHCNMINH,MHCNMINT:
                                    *79,MHCNKLER
          READ      CONTROLF,SEVENTY7;*95,PTCNDSHL,*199,PTCNPCDS,*214,PTCNBTNM:
                                      *229,PTCNCFDS,*232,PTCNTMIN,*240,PTCNAXEU:
                                      *202,PTCNOCSC 
          READ      CONTROLF,SEVENTY9;*68,PTCNMFEE,PTCNJFEE,*79,PTCNPREV:
                                      *199,PTCNDASI,*219,PTCNDASO,*248,PTCNIPEN
          READ      CONTROLF,EIGHTY;*1,PTCNMEAB,*138,PTCNNZUR,*143,PTCNAURN:
                                    *240,PTCNDORP,PTCNUCGP,*245,PTCNDFCL:
                                    *248,PTCNPEFR
          READ      CONTROLF,EIGHTY8;*116,CHCSDTE
          READ      CONTROLF,HUND03;*220,PTCNDEES,*221,PTCNDDES
          READ      CONTROLF,HUND19;*182,PTCNEPIS
          READ      CONTROLF,HUND30;*180,PTCNMRPN
.
. open files
.
          OPEN      NZPBFEA1,"nzpbfeaf"
          OPEN      PATMA1A1,"patma1af"
          OPEN      PATMI1A1,"patmi1af"
          OPEN      PATMX1A1,"patmx1af"
          OPEN      PMSPX2A1,"pmspx2af"     * PMI Master Extn.2          * I900
          OPEN      PATWR1A1,"patwr1af"
          OPEN      BOKRC1A1,"bokrc1af"
          OPEN      PMSCIDA1,"pmscidaf"                            * Jeni's
          OPEN      PATCODE1,"patcodes"
          OPEN      PATCFAA1,"patcfaaf"
          OPEN      PATDTRA1,"patdtraf"
          OPEN      PATFX1A1,"patfx1af"
          OPEN      PATUNAA1,"patunaaf"
          OPEN      PATVISA1,"patvisaf"
          OPEN      PMSVX1A1,"pmsvx1af"     * Visit Extn.1               * I900
          OPEN      PATVISA2,"patvisaf"
          OPEN      PATDSCH1,"patdschf"
          OPEN      PATTRAN1,"pattranf"
          OPEN      PATTRAN2,"pattranf"
          OPEN      PATDO1A1,"patdo1af"
          OPEN      PATRE1A1,"patre1af"
          OPEN      PMSMTIA1,"pmsmtiaf"
          OPEN      PATHSPA1,"pathspaf"
          OPEN      MRTLOCA1,"mrtlocaf"
          OPEN      WATESEA1,"wateseaf"
          OPEN      WATTX1A1,"wattx1af"
.
          IF        CAUDM<>1
            OPEN      PATAM1A1,"patam1af"
            OPEN      PMSAUDPX,"paudpxaf"                                * I900
          ENDIF
.
          PACK      OPICDDTE,CCC,CYY,CMM,CDD
          REP       " 0",OPICDDTE
.
. init vars
.
          MOVE      ZERO,SUCCPROC
          MOVE      ZERO,ERRRPROC
          MOVE      ZERO,DGNUMDIS
          MOVE      ZERO,DGNUMENQ
          MOVE      ZERO,DGNUMPRE
          MOVE      ZERO,DGNUMADM
          MOVE      ZERO,DGNUMTRN
          MOVE      ZERO,DGNUMLVE
          MOVE      ZERO,DGNUMRET
          MOVE      ZERO,DGNUMACA
          MOVE      ZERO,DGNUMACH
          MOVE      ZERO,DGNUMDCA
          MOVE      ZERO,DGNUMDCH
          MOVE      ZERO,DGNUMTCA
          MOVE      ZERO,DGNUMPCA
.
          MOVE      CDATE,APSTDATE                * application start date
          CLOCK     TIME,APSTTIME                 * application start time
.
          TRANM     MANUAL                        * set trans mang mode=manual
.
. open the inbound data gate file
.
          MOVE      ZERO,OVRCD              * assume open succeeds
          STRIP     PTCNDASI
          TRAP      OVERCOND IF IO          * trap if open fails
          OPEN      DGATEIN,PTCNDASI
          TRAPCLR   IO
          BRANCH    OVRCD,DGINI900
.
. open the outbound data gate file
.
          MOVE      ZERO,OVRCD              * assume open succeeds
          STRIP     PTCNDASO
          TRAP      OVERCOND IF IO          * trap if open fails
          OPEN      DGATEOUT,PTCNDASO
          TRAPCLR   IO
          BRANCH    OVRCD,DGINI910
.
          MOVE      ZERO,SHUTDOWN                 * assume no shutdown
          TRAP      FINDE000 NORESET IF INT       * check for Control C interupt
.
. trap IO errors (ie. I*C, I*D, I*L etc...& PARITY & SPOOL & CHAIN,etc...)
.
          TRAP      ADTER000 NORESET GIVING RPLYDESC IF ALL
.
          CALL      TFILENAM                     * get new tempfile name
          MOVE      TFILNAME,FNAME
.
          MOVE      ZERO,EXIT                    * initialisation succeeded
          GOTO      DGINI999
.
.         Initialisation failure - datagate inbound service
.
DGINI900  DISPLAY   *P1:24,*EL,*B,"Service [",*+,PTCNDASI:
                    "] not currently available.  ";
          CALL      HITENTER
          MOVE      ONE,EXIT
          GOTO      DGINI9999
.
.         Initialisation failure - datagate outbound service
.
DGINI910  DISPLAY   *P1:24,*EL,*B,"Service [",*+,PTCNDASO:
                    "] not currently available.  ";
          CALL      HITENTER
          MOVE      ONE,EXIT
          GOTO      DGINI9999
.
DGINI999  RETURN
+
.************************************************************************
.*  ADTER000  :  send general error reply and shutdown                  *
.************************************************************************ 
.
. this routine will be executed when there is a TBL error, ie. I*C...
. and send an error reply to datagate and then exit the TBL application
.
ADTER000  ROLLBACK
.
          ENDSET    RPLYDESC
          APPEND    SP4,RPLYDESC
          APPEND    PRGID,RPLYDESC
          APPEND    SP2,RPLYDESC
          APPEND    VERSION,RPLYDESC
          APPEND    SP2,RPLYDESC
          APPEND    "(",RPLYDESC
          APPEND    MESSTYPE,RPLYDESC
          APPEND    ")",RPLYDESC
          RESET     RPLYDESC
.
          MOVE      "00100",RPLYCODE             * general error (TBL error)
          PACK      CCENCODE,CCDATE,CCDST,CCSRC,CCNAME,REPLYRPL
          WRITE     DGATEIN;CCENCODE:
                            RPLYHEAD,RPLYCODE,RPLYDESC:
                            DGMISC1,DGMISC2,DGMISC3,SP1
.
          RESET     ANS
          BOXCLR    8,9,72,15
          BOX       16,10,10,70,14
          DISPLAY   *P19:11,*V2LON,"FATAL ERROR!   Transaction not processed.":
                    *P15:12,*ULON,RPLYDESC:
                    *P17:13,*HOFF,*V2LON,"Please Contact IBA Support.  ":
                    "<< Hit any key >>";
          KEYIN     *ESON,*+,ANS
.
          CLOSE     DGATEIN                 * close inbound datagate file
          CLOSE     DGATEOUT                * close inbound datagate file
.
ADTER999  STOP
+
.************************************************************************
.*  DRAW0000  :  draw box & display stats                               *
.************************************************************************ 
DRAW0000  DISPLAY   *P1:4,*EF
          BOX       16,3,6,78,23
          DISPLAY   *P30:6,*HON,*V2LON," MESSAGE STATISTICS "
.
          DISPLAY   *P5:8,"Application Activated on ",*V2LON,APSTDATE,*HOFF:
                    "  @  ",*V2LON,APSTTIME,*HOFF:
                    *P5:10,"Current status... ",*V2LON,*HON,"Waiting"
          HLINE     *G37,11,3,78
          HLINE     *G33,11,3,3
          HLINE     *G34,11,78,78
          DISPLAY   *P5:12,*V2LON,*ULON,"Number of requests       ",*HOFF:
                    *P41:12,*V2LON,*ULON,"Number of requests       ",*HOFF:
                    *P5:13,"Admissions        : ",*V2LON,DGNUMADM,*HOFF:
                    *P5:14,"Discharges        : ",*V2LON,DGNUMDIS,*HOFF:
                    *P5:15,"On Leave          : ",*V2LON,DGNUMLVE,*HOFF:
                    *P5:16,"Return from Leave : ",*V2LON,DGNUMRET,*HOFF:
                    *P5:17,"Transfers         : ",*V2LON,DGNUMTRN,*HOFF:
                    *P5:18,"Pre-Admissions    : ",*V2LON,DGNUMPRE,*HOFF:
                    *P5:19,"Enquiry           : ",*V2LON,DGNUMENQ,*HOFF
. ----------------------------------------------- * Start of addition   I-90206
          DISPLAY   *P41:13,"Cancel Admissions: ",*V2LON,DGNUMACA,*HOFF:
                    *P41:14,"Change Admissions: ",*V2LON,DGNUMACH,*HOFF:
                    *P41:15,"Cancel Discharge : ",*V2LON,DGNUMDCA,*HOFF:
                    *P41:16,"Change Discharge : ",*V2LON,DGNUMDCH,*HOFF:
                    *P41:17,"Cancel Transfers : ",*V2LON,DGNUMTCA,*HOFF:
                    *P41:18,"Cancel Pre-Admiss: ",*V2LON,DGNUMPCA,*HOFF 
. ----------------------------------------------- * End of addition     I-90206
.
          MOVE      ZERO,SUCCPERC
          IF        !(SUCCPROC=0 & ERRRPROC=0)
            ASSIGN    (SUCCPROC/SUCCPROC+ERRRPROC),SUCCPERC
          ENDIF
.
          DISPLAY   *P5:21,"Successfully Processed   : ",*V2LON,SUCCPROC,*HOFF:
                    *P5:22,"Unsuccessfully Processed : ",*V2LON,ERRRPROC,*HOFF:
                    *P45:22,"Successful % = ",*V2LON,SUCCPERC
DRAW9999  RETURN
+
.************************************************************************
.*  FINDE000  :  draw box & display stats                               *
.************************************************************************ 
FINDE000  MOVE      ONE,SHUTDOWN                  * shutdown recieved
.
FINDE999  RETURN
+
.************************************************************************
.*  SHUTM000  :  give user shutdown messgae if server has gone down     *
.************************************************************************
SHUTM000  IF        SHUTDOWN=0
            DISPLAY   *P1:24,*EL,*B,"Server has been shutdown.  ";
            CALL      HITENTER
          ENDIF
.
SHUTM999  RETURN
+
.************************************************************************
.*  USTAT000  :  update stats on screen                                 *
.************************************************************************ 
USTAT000  DISPLAY   *P23:10,*V2LON,*HON,"Waiting",*HOFF,SP30:
                    *P25:13,*V2LON,DGNUMADM:
                    *P25:14,DGNUMDIS:
                    *P25:15,DGNUMLVE:
                    *P25:16,DGNUMRET:
                    *P25:17,DGNUMTRN:
                    *P25:18,DGNUMPRE:
                    *P25:19,DGNUMENQ:                                  *C-90206
                    *P60:13,DGNUMACA:                                  *I-90206
                    *P60:14,DGNUMACH:                                  *I-90206
                    *P60:15,DGNUMDCA:                                  *I-90206
                    *P60:16,DGNUMDCH:                                  *I-90206
                    *P60:17,DGNUMTCA:                                  *I-90206
                    *P60:18,DGNUMPCA                                   *I-90206
.
          MOVE      ZERO,SUCCPERC
          IF        !(SUCCPROC=0 & ERRRPROC=0)
            ASSIGN    (SUCCPROC/(SUCCPROC+ERRRPROC)*100.0),SUCCPERC
          ENDIF
.
          DISPLAY   *P34:21,*V2LON,SUCCPROC:
                    *P34:22,ERRRPROC:
                    *P60:22,SUCCPERC
USTAT999  RETURN
+
.****************************************************************************
.*  ACTMSAV   :  Subroutine to save master variables                        *
.****************************************************************************
ACTMSAV   MOVE      PMICRO,SPMICRO
          MOVE      PUSR1,SPUSR1
          MOVE      PUSR2,SPUSR2
          MOVE      PUSR3,SPUSR3
          MOVE      PUSR4,SPUSR4
          MOVE      PUSR5,SPUSR5
          MOVE      PUSR6,SPUSR6
          MOVE      PUYN1,SPUYN1
          MOVE      PUYN2,SPUYN2
          MOVE      PUYN3,SPUYN3
.
          MOVE      PURNO,SPURNO
          MOVE      PTITL,SPTITL
          MOVE      PSNAME,SPSNAME
          MOVE      PGNAME,SPGNAME
          MOVE      PPSNAME,SPPSNAME
          MOVE      PSMOK,SPSMOK
          MOVE      PSEX,SPSEX
          MOVE      PMSTAT,SPMSTAT
          MOVE      PBDATE,SPBDATE
          MOVE      PSAGE,SPSAGE
          MOVE      PCONT,SPCONT
          MOVE      PREG,SPREG
          MOVE      PTYPE,SPTYPE
          MOVE      POCCUP,SPOCCUP
          MOVE      PMEDI,SPMEDI
          MOVE      PPENNO,SPPENNO
          MOVE      PPNDTE,SPPNDTE
          MOVE      PREPAT,SPREPAT
          MOVE      PSMOK,SPSMOK
          MOVE      PCHGDTE,SPCHGDTE
.
          MOVE      PNKNAME,SPNKNAME
          MOVE      PNKADD1,SPNKADD1
          MOVE      PNKADD2,SPNKADD2
          MOVE      PNKSUBR,SPNKSUBR
          MOVE      PNKADD4,SPNKADD4
          MOVE      PNKPOST,SPNKPOST
          MOVE      PNKTELP,SPNKTELP
          MOVE      PNKTELB,SPNKTELB
          MOVE      PNKRELP,SPNKRELP
.
          CALL      PRAV0000                * Person Responsible A/C variables
.
AMSV1000  MOVE      PADD1,SPADD1
          MOVE      PADD2,SPADD2
          MOVE      PSUBRB,SPSUBRB
          MOVE      PADD4,SPADD4
          MOVE      PPOST,SPPOST
          MOVE      PTELEP,SPTELEP
          MOVE      PTELEB,SPTELEB
          MOVE      PTMXDOFR,SPDOR
          MOVE      PMPXRHC1,SPREGP
          MOVE      PMPXRH1G,SPGPPC
          MOVE      PMPXR1GC,SPGPPT
.
AMSV9999  RETURN
+
.****************************************************************************
.*  PRAV0000  :  Subroutine to save person responsible for account variables*
.****************************************************************************
PRAV0000  MOVE      PKNAME,SPKNAME
          MOVE      PKADD1,SPKADD1
          MOVE      PKADD2,SPKADD2
          MOVE      PKSUBR,SPKSUBR
          MOVE      PKADD4,SPKADD4
          MOVE      PKPOST,SPKPOST
          MOVE      PKTELEP,SPKTELP
          MOVE      PKTELEB,SPKTELB
          MOVE      PKRELP,SPKRELP
          RETURN
.
.****************************************************************************
.*  SPLTPMED  :  Routine to split PMEDI & PTMXCCD from PMEDIXX              *
.****************************************************************************
SPLTPMED  UNPACK    PMEDIXX,PMEDI,PTMXMCCD  *
          RJUSTIFY  PTMXMCCD                * Right justify PTMXMCCD
.
SPLT9999  RETURN
.
.******************************************** start of addition        *I-61746
.****************************************************************************
.*  WSAD0000  :  Write ESIS SAD record as called in OPRDEA01                *
.****************************************************************************
WSAD0000  READ      CONTROLF,EIGHTY;*250,PTCNHDPS
          COMPARE   THREE,PTCNHDPS
          GOTO      WSAD9999 IF NOT EQUAL
.
          PACK      WTENUNIQ,WTWMECNT,SP70
          PACK      WTENEDAT,SP70
          PACK      WTENWEBC,SP70
          CALL      IBACLOCK
          PACK      WTENCDAT,CCC,CYY,CMM,CDD
          REP       " 0",WTENCDAT
          CLOCK     TIME,WTENCTIM
          REP       " 0",WTENCTIM
          PACK      WTENWEBU,SP70
          PACK      WTENUDAT,SP70
          PACK      WTENUTIM,SP70
.
          PACK      KEY36,WTENUNIQ,WTENETYP,WTENEVDT,WTENEDAT,SP70
          CALL      RAWTESN1
          IF        OVRCD=1
            CALL      WRWTESN1
          ELSE
            CALL      UPWTESN1
          ENDIF
.
WSAD9999  RETURN
.
.********************************************   end of addition        *I-61746
.****************************************************************************
.*  WEBERR00  :  Dummy routine to bypass WEB Browser                        *
.****************************************************************************
WEBERR00  MOVE      ZERO,OVRCD
          RETURN
.
.****************************************************************************
.*
.****************************************************************************
.
ADDWRN00
OPEN0000
CLOS0000
GETSVAR   
DISPVARS
SPCK0000
          RETURN
.
.
. End of Program
.
          INC       STD002IO
          INC       BOKRC1IO/INC
          INC       CALCAGE
          INC       CLALLAUD
          INC       CLMRTMAS
          INC       CLPATMAS
          INC       CLPMSPX2                                             * I900
          INC       CLPATDTR                                           *I-90206
          INC       CLPATMIS                                           *I-90206
          INC       CALCDAYS                                           *I-90206
          INC       CALCDLOS                                           *I-90206
          INC       CHKCMXPT                                           *I-90206
          INC       CHNADMTP
          INC       CINVPEND
          INC       DGADTACA                                           *I-90206
          INC       DGADTACH                                           *I-90206
          INC       DGADTDCA                                           *I-90206
          INC       DGADTDCH                                           *I-90206
          INC       DGADTTCA                                           *I-90206
          INC       DGADTDIS
          INC       DGADTLVE
          INC       DGADTADM
          INC       DGADTPRE
          INC       DGADTENQ
          INC       DGADTORD
          INC       DGADTRET
          INC       DGADTTRN
          INC       DGADTPCA
          INC       DGCLICCB
          INC       DGCLIS12
          INC       DGCLIS14
          INC       DGCLIS15
          INC       VALCONTR
          INC       VALCMXFN
          INC       GETCNEFF
          INC       GETTFEES
          INC       PATITMRD
          INC       PATDDHRD
          INC       EMRVISIO/INC
          INC       EOCDELEV
          INC       GENBOKNO
          INC       IBAPOLIO/INC
          INC       KCODNQST
          INC       COMDEPIO/INC
          INC       COMERHIO/INC
          INC       GENANVIS
          INC       MEHCJAIO/INC                                       *I-90206
          INC       MEHCJRIO/INC                                       *I-90206
          INC       MEHDIAIO/INC                                       *I-90206
          INC       MEHDL1IO/INC                                       *I-90206
          INC       MEHDS1IO/INC                                       *I-90206
          INC       MEHLEGIO/INC                                       *I-90206
          INC       MEHLERIO/INC            * ?                        *I-90206
          INC       MEHREVIO/INC                                       *I-90206
          INC       MEHVI1IO/INC
          INC       MHAUDDLV                                           *I-90206
          INC       MHAUDDSC                                           *I-90206
          INC       MHAUDVIS                                           *I-90206
          INC       MRTLOCIO/INC
          INC       MRTMASIO/INC                                       *I-90206
          INC       MRTPDSIO/INC                                       *I-90206
          INC       MRTVISIO/INC                                       *I-90206
          INC       MRTVISCD                                           *I-90206
          INC       NHIMASIO/INC
          INC       RTIODAYS                                           *I-90206
          INC       NHOSPDAY                                           *I-90206
          INC       NZPBFEIO/INC
          INC       NZHISIIO
          INC       NZIBSRCH
          INC       OUTCLIIO/INC                                       *I-90206
          INC       OUTPREIO/INC
          INC       OUTHEDIO/INC
          INC       OPTHETAT    * Theatre Audit
          INC       OPRQUEIO/INC
          INC       OPRRALIO/INC
          INC       PATAA1IO/INC                                       *I-90206
          INC       PATADBIO/INC                                       *I-90206
          INC       PATACHIO/INC                                       *I-90206
          INC       PATAFEIO/INC
          INC       PATALERT
          INC       PATALRIO/INC
          INC       PATAM1IO/INC
          INC       PATASDIO/INC
          INC       PATASFIO/INC                                       *I-90206
          INC       PATAXEIO/INC                                       *I-90206
          INC       PATBFEIO/INC
          INC       PATCHADT                * Standard code for APIs   *I-90206
          INC       PATCHCIO/INC                                       *I-90206
          INC       PATCMSTP
          INC       PATCMXIO/INC                                       *I-90206
          INC       PATCODIO/INC
          INC       PATCODKY
          INC       PATCOMN1
          INC       PATCOMN2
          INC       PATCOMN3
          INC       PATCTFIO/INC
          INC       PMSCIDIO/INC                                * Jeni's
          INC       PATDADIO/INC                                       *I-90206
          INC       PATDAYIO/INC                                       *I-90206
          INC       PATDAYUP                                           *I-90206
          INC       PATDEATH
          INC       PATDGWIO/INC
          INC       PATDO1IO/INC
          INC       PATDRGIO/INC
          INC       PATDSBFE                                           *I-90206
          INC       PATDSCIO/INC
          INC       PATDTRIO/INC
          INC       PATDYCAS
          INC       PATECDIO/INC
          INC       PATFN1IO/INC
          INC       PATFX1IO/INC
          INC       PATFHIIO/INC
          INC       PATCFAIO/INC
          INC       PATGNCMX                                           *I-90206
          INC       PATGSRIO/INC
          INC       PATHDFIO/INC
          INC       PATHLFIO/INC                                       *I-90206
          INC       PATHSPIO/INC
          INC       PATICOKY
          INC       PATICOIO/INC
          INC       PATINVIO/INC
          INC       PATIPERH
          INC       PATIPEIO/INC                                       *I-90206
          INC       PATITMDS
          INC       PATITMIO/INC
          INC       PATLDFIO/INC
          INC       PATLOCIO/INC
          INC       PATLSDIO/INC
          INC       PATMA1IO/INC
          INC       PMSPX2IO/INC            * PMI Master Extn 2            I900
          INC       PATMRGIO/INC                                       *I-90206
          INC       PATMI1IO/INC
          INC       PATNIDIO/INC                                        D-90206
          INC       PATNOBIO/INC                                       *I-90206
          INC       PATNUMIO/INC                                       *I-90206
          INC       PATNURIO/INC                                       *I-90206
          INC       PATONHIO/INC
          INC       PATOICIO/INC
          INC       PATONLIO/INC                                       *I-90206
          INC       PATPR1IO/INC
          INC       PATRATIO/INC                                       *I-90206
          INC       PATRE1IO/INC
          INC       PATSTAIO/INC                                       *I-90206
          INC       PATTFEIO/INC
          INC       PATTRNIO/INC
          INC       PATSTRYR
          INC       PATTRRAT
          INC       PATVISIO/INC
          INC       PATUNAIO/INC                                       *I-90206
          INC       PATURAIO/INC
          INC       PATWR1IO/INC
          INC       PMIGTNID
          INC       PMIHEAD
          INC       PMSHCPIO/INC
          INC       PMSMTIIO/INC
          INC       PMSVX1IO/INC            * Visit Master Extn 1          I900
          INC       PMSCURIO/INC
          INC       PATDEFCL                * routine DCLM0000   
          INC       SCRCKMAN
          INC       SCRPSTIO/INC
          INC       SCRSLTIO/INC
          INC       TFILENAM
          INC       WATPROIO/INC
          INC       WATHISIO/INC
          INC       WATPNPIO/INC                                       *I-90206
          INC       WRWATNBR
          INC       WATNBRIO/INC                                       *I-90206
          INC       WATTR1IO/INC                                       *I-90206
          INC       WATESNIO/INC                                       *I-61746
          INC       WATESEIO/INC
          INC       WATTX1IO/INC
          INC       WEBERRIO/INC
          INC       WEBSECIO/INC
          INC       PATDDHIO/INC
          INC       WLHISSUB
          INC       STDKWSCD
.
. ----------------------------------------------- * Start of addition   I-90206
.*****************************************************************************
.*                        DUMMY DG Broadcast Procedures
.*      This allows use of standard Production code to update Databases, but
.*      to stop that code re-broadcasting the change back to Datagate
.*****************************************************************************
          DEFPROC   DGCLICAC                * Change Admission Broadcast Msg
          ENDPROC
.
          DEFPROC   DGCLICCA                * Cancel Admission Broadcast Msg
          ENDPROC
.
          DEFPROC   DGCLICDC                * Change Discharge Broadcast Msg
          ENDPROC
.
          DEFPROC   DGCLICCD                * Cancel Admission Broadcast Msg
          ENDPROC
.
          DEFPROC   DGCLICUP                * Change PMI Master Broadcast Msg
          ENDPROC
.
          DEFPROC   DGCLICCT                * Cancel Transfer  Broadcast Msg
          ENDPROC
.
          DEFPROC   DGCLICPA                * Cancel Pre-Admission Broadcast Msg
          ENDPROC
.
. ----------------------------------------------- * End of addition     I-90206

 XIF
