.----------------------------------------------------------------------
.   Program       : GENERSNI
.   Modifications :
.
.        V10.06.01  20/04/2015  Steve Armstrong  CAR 290369
.                   Recompiled for changes to PMSSNPFD
.        V10.03.00  07/03/2012  Patrick Adair CAR 257776
.                   AN-SNAP Classification Code Keywords
.
.----------------------------------------------------------------------
.  data includes
.----------------------------------------------------------------------
.
          INC       STDGENDF
          INC       PMSSNPFD/INC
          INC       PMSSKIFD/INC
.
.----------------------------------------------------------------------
.  local variables
.----------------------------------------------------------------------
.
.
PRGID     INIT      "GENERSNI"
PRGNAM    INIT      "Generate AN-SNAP Classification Code Keywords"
VERSION   INIT      "V12.01.00"
.
.----------------------------------------------------------------------
.  program code
.----------------------------------------------------------------------
.
.---- initialise screen and confirm desire to execute program ----
.
ML0000    CALL      DISPHEAD
.
          DISPLAY   *P1:10,"This file generates Impairment Code Keyword":
                           " records."
          CALL      CONTQST
          SUB       ONE,CEXIT
          BRANCH    CEXIT,ML9999,ML9999
.
.---- open files ----
.
          OPEN      PMSSNPA1,"pmssnpaf"
          OPEN      PMSSKIA1,"pmsskiaf"
          OPEN      PMSSKIA2,"pmsskiaf"
.
.---- loop through pmssnpaf ----
.
          PACK      KEY7,SP70
          MOVE      ZERO,SECTOR
.
ML1000    CALL      RSPMSNP1           * read record positon
.
ML1100    CALL      RKPMSNP1           * read next record
          BRANCH    OVRCD,ML9999
.
          ADD       ONE,SECTOR         * display every 100th record
          IF        SECTOR%1000=1
            DISPLAY   *P1:24,*V2LON,SECTOR," - ",PMSNCLCD,PMSNVERS,*EF;
          ENDIF
.
          PROC      PMSSKIUP
          GOTO      ML1100
.
.---- exit program ----
.
ML9999    CHAIN     PGM
.----------------------------------------------------------------------
.  code includes
.----------------------------------------------------------------------
.
          INC       PMSSNPIO/INC
          INC       PMSSKIIO/INC
          INC       PMSSKIPR
          INC       STDGENCD
.
