.----------------------------------------------------------------------
.   Program       : GENERMKC
.   Modifications : 
.         V9.02.00  27/02/2003  Tracey Nguyen  SRF 34658
.                   Created new generation program to perform initial 
.                   load of keywords to nhimkcaf file for keywords 
.                   search 

.----------------------------------------------------------------------
.
.----------------------------------------------------------------------
.  data includes
.----------------------------------------------------------------------
.
          INC       STDGENDF
          INC       NHIMCCFD/INC
          INC       NHIMKCFD/INC
.
.----------------------------------------------------------------------
.  local variables
.----------------------------------------------------------------------
.
.
PRGID     INIT      "GENERMKC"
PRGNAM    INIT      "Fix nhimkcaf"
VERSION   INIT      "V12.01.00"
.
.----------------------------------------------------------------------
.  program code
.----------------------------------------------------------------------
.
.---- initialise screen and confirm desire to execute program ----
.
ML0000    CALL      DISPHEAD
.
.         DISPLAY   *P1:10,"This file generates Medical Warning ";
.                    "Keyword records."
          CALL      CONTQST
          SUB       ONE,CEXIT
          BRANCH    CEXIT,ML9999,ML9999
.
.---- open files ----
.
          OPEN      NHIMCCA1,"nhimccaf"     * Open Medical Warning code table
          OPEN      NHIMKCA1,"nhimkcaf"     * Open Med.Warning keyword srch tbl
          OPEN      NHIMKCA2,"nhimkcaf"
.
.---- loop through nhimccaf ----
.
          PACK      KEY8,SP70
          MOVE      ZERO,SECTOR
.
ML1000    CALL      RSNHMC1                 * read next record
.
ML1100    CALL      RKNHMC1
          BRANCH    OVRCD,ML9999
.
          ADD       ONE,SECTOR              * display every 100th record
          IF        SECTOR%1000=1
            DISPLAY   *P1:24,*V2LON,SECTOR," - ",NHMCCSYS,NHMCCOD,*EF;
          ENDIF
.
          PROC      NHIMKCUP
          GOTO      ML1100
.
.---- exit program ----
.
ML9999    CHAIN     PGM
.----------------------------------------------------------------------
.  code includes
.----------------------------------------------------------------------
.
          INC       NHIMCCIO/INC            * Medical Warning Code Table
          INC       NHIMKCIO/INC            * Med.Warning keyword srch tbl
          INC       NHIMKCPR                * PROC to update NHIMKCFD
          INC       STDGENCD
.
