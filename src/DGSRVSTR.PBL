.******************************************************************************
.* System    :   Datagate                                                     *
.* Program   :   DGSRVSTR                                                     *
.* Desc      :   HL7 Message Storing Server                                   *
.******************************************************************************
.* Date      :   29/10/2001                                                   *
.* Author    :   Steve Armstrong                                              *
.* Function  :   This program will poll the hl7bmtaf file and for each record *
.*               found, will use the appropriate key to retrieve data and     *
.*               store on the message holding files prior to sending to       *
.*               datagate.                                                    *
.* Mods      :                                                                *
.*                                                                            *
.******************************************************************************
.*  V12.00.01    30/05/2025 Jacob Jackson     TSK 0955096                     *
.*               Alphanumerical changes                                       *
.*  V11.04.01    09/01/2024 Thanh T           TSK 0936263                     *
.*               Added OPEN PMSQPXA1 index                                    *
.******************************************************************************
.*  V11.02.01    09/02/2022  Thanh T       TSK 0905641                        *
.*               Recompiled as OUTMA1FD/WATTR1FD changes                      *
.*  V10.15.01    13/11/2019  Davin            TSK 0861253                     *
.*               Added OUTTHIFD for O/P telehealth fields                     *
.******************************************************************************
.*  V10.06.02    25/06/2015  Steve Armstrong   CAR 318558                     *
.*               Recompiled for changes to BOKQUEFD & BOKQUEIO                *
.*  V10.06.01    12/03/2015  Steve Armstrong   CAR 314108                     *
.*               Removed definition of PTCGDATE as PATCGPFD is no longer in   *
.*               use.                                                         *
.******************************************************************************
.*  V10.03.03    18/05/2013  Steve Armstrong   CAR 268961                     *
.*               Recompiled for changes to PMSQVIFD                           *
.*  V10.03.02    17/04/2013  Davin             CAR 280425                     *
.*               Recompiled for HL7 - added edi options for trigger parameter *
.*  V10.03.01    28/06/2012  Steve Armstrong   CAR 267352                     *
.*               Recompiled for changes to HL7WEXFD.                          *
.******************************************************************************
.*  V10.02.01    21/09/2011  Steve Armstrong   CAR 251515                     *
.*               Recompiled for changes to WATQUEFD.                          *
.******************************************************************************
.*  V10.00.01    11/03/2010  Steve Armstrong  CAR 135505                      *
.*               Removed message types CEA & CED - no longer handled by this  *
.*               server.                                                      *
.******************************************************************************
.*  V9.12.01     11/09/2009  Davin            CAR 205945                      *
.*               Mods to Allied Health encounter message - Use encounter      *
.*               number to retrieve allerc record rather than just referral   *
.*               number (ceam0000)                                            *
.******************************************************************************
.*  V9.09.01     04/12/2007  Steve Armstrong  CAR 155887                      *
.*               Removed message type CUB - no longer handled by this server. *
.******************************************************************************
.*  V9.08.01     25/01/2007  Peter Vela CAR 127930                            *
.*               Recompiled for DGMRTMRM                                      *
.******************************************************************************
.*  V9.05.B04:   03/03/2006  Steve Armstrong   CAR 88829                      *
.*               Recompiled for changes to OUTQUEFD                           *
.*  V9.05.B03:   20/02/2006  Ebon Clements     CAR 76341                      *
.*               Added referral and encounter file audit                      *
.*  V9.05.B02:   29/12/2005  Steve Armstrong  CAR 88829                       *
.*               Removed message types no longer handled by this server:      *
.*               CAE, CCE, CEC, CPA, CPO & CPR.                               *
.*  V9.05.B01:   19/12/2005  Ebon Clements    CAR 76341                       *
.*               Key length changes for encounter number                      *
.******************************************************************************
.*  V9.04.02 :   27/09/2005  Steve Armstrong  CAR 64087                       *
.*               Removed message types no longer handled by this server.      *
.*  V9.04.01 :   02/09/2005  Davin            CAR 64087                       *
.*               Check cis header file (hl7cisaf) for existing message ids    *
.******************************************************************************
.*  V9.03.06 :   06/07/2004  Steve Armstrong  CAR 51409                       *
.*               Removed COR references as this now writes directly           *
.*               to the hl7inbaf nad related tables.                          *
.*  V9.03.05 :   01/06/2004  Steve Armstrong  CAR 50353                       *
.*               Fixed check on PPSNAME for CMR message                       *
.*               27/05/2004  Steve Armstrong   CAR 48778                      *
.*               Removed CUA and CRM references as these now write directly   *
.*               to the hl7inbaf and related tables.                          *
.*  V9.03.04 :   05/02/2004  Steve Armstrong   CAR 47245                      *
.*               Mods to record an error message for rejected messages in     *
.*               hl7bmtaf.                                                    *
.*  V9.03.03 :   23/12/2003  Steve Armstrong  CAR 45916                       *
.*               Recompiled for OUTQUEFD/IO - OTBBCIND
.*  V9.03.02 :   10/10/2003  Sandra Barcham    43422                          *
.*               Recompiled for CLBOKRX1                                      *
.*  V9.03.01 :   21/08/2003  Steve Armstrong   CAR 37356                      *
.*               Mods to include additional fields from ALLAEFFD & ALLERCFD in*
.*               CEA message.                                                 *
.******************************************************************************
.*  V9.02.06 :   17/02/3004  Davin  CAR 19525                                 *
.*               Changed CEA message to read allrefaf to get referral details *
.*  V9.02.05 :   10/02/2003  Davin  CAR 33610                                 *
.*               Changed CON message to read outma1af to get location type    *
.*  V9.02.04 :   17/04/2002  Steve Armstrong                                  *
.*               Recompiled for changes to PMSQPTFD (PTMXMCCD).               *
.*  V9.02.03 :   10/02/2002  Steve Armstrong                                  *
.*               Mods to wait for 2 secs if no records on hl7bmtaf.           *
.*               Also added check for existing message id before processing   *
.*               each new message.                                            *
.*  V9.02.02 :   07/01/2002  Davin                                            *
.*               Add logic to write 'CAE' 'CEC' and 'CCE' messages to holding *
.*               file 'emrqueaf'.                                             *
.*               Display 'sent' counters after writing to the holding files   *
.*  V9.02.01 :   11/12/2001 Mike Laming                                       *
.*               Add logic to write 'CRM' 'CEA' and 'CED' messages to holding *
.*               files 'mrtqueaf' and 'allqueaf'.                             *
.******************************************************************************
.
          INC       STD002FD
.
          INC       BOKQUEFD/INC
          INC       BOKRC1FD/INC
          INC       BOKRX1FD/INC
          INC       EMRQUEFD/INC
          INC       EMRVISFD/INC
          INC       HL7BMTFD/INC
          INC       HL7CISFD/INC
          INC       HL7INBFD/INC
          INC       HL7WEXFD/INC
          INC       MEHLERFD/INC
          INC       MRTQUEFD/INC                                       *I-90201
          INC       MRTHISFD/INC                                       *I-90201
          INC       MRTMASFD/INC                                       *I-90201
          INC       NHIMASFD/INC
          INC       OUTBOAFD/INC
          INC       OUTBB1FD/INC
          INC       OUTCANFD/INC
          INC       OUTMA1FD/INC
          INC       OUTRSHFD/INC
          INC       OUTSITFD/INC
          INC       OUTQUEFD/INC
          INC       OUTTHIFD/INC
          INC       PATCONFD/INC
          INC       PATDSCFD/INC
          INC       PATGSRFD/INC
          INC       PATMA1FD/INC
          INC       PATMI1FD/INC
          INC       PATNIDFD/INC
          INC       PATONLFD/INC
          INC       PATRE1FD/INC
          INC       PATTRNFD/INC
          INC       PATWR1FD/INC
          INC       PMSBRQFD/INC
          INC       PMSPX2FD/INC
          INC       PMSQPTFD/INC
          INC       PMSQVIFD/INC
          INC       PMSVX1FD/INC
          INC       WATQUEFD/INC
          INC       WATTR1FD/INC
          INC       WATTX1FD/INC
.
. LOCAL VARIABLES
. ---------------
.
COBSENT   FORM      8
CONSENT   FORM      8
COCSENT   FORM      8
CODSENT   FORM      8
COASENT   FORM      8
CCBSENT   FORM      8
CWASENT   FORM      8
CWCSENT   FORM      8
.
COBFAIL   FORM      8
CONFAIL   FORM      8
COCFAIL   FORM      8
CODFAIL   FORM      8
COAFAIL   FORM      8
CCBFAIL   FORM      8
CWAFAIL   FORM      8
CWCFAIL   FORM      8
.
ERORMESS  DIM       40
.
FORM8     FORM      8
.
NMPNUMB   DIM       20
.
SAVKEY20  FORM      20
SAVKEY35  DIM       35
SAVTXWRD  DIM       3
.
.
. PROGRAM CONSTANTS
. -----------------
ZED22     INIT      "zzzzzzzzzzzzzzzzzzzzzz"
ZERONUM   FORM      "       0"
.
.
PRGID     INIT      "DGSRVSTR"
PRGNAM    INIT      "HL7 Message Storing Server"
VERSION   INIT      "V12.01.00"
+
.******************************************************************************
.*                                   ML0000                                   *
.*                       Controlling Logic (Mainline code)                    *
.******************************************************************************
.
ML0000    CALL      SETX0000                * Setup common variables
          CALL      INIT0000                * Initialise variables & open files
.
          CALL      BACK0000                * Display background screen
          CALL      RDIN0000                * Read HL7 inbound file
.
ML9999    STOP
+
.******************************************************************************
.*                                  INIT0000              Called by: ML0000   *
.*                      Initialise Variables & Open Files                     *
.******************************************************************************
.
INIT0000  CALL      DISPHEAD                     * Display screen heading
.
          DISPLAY   *P56:24,"Opening hl7bmtaf";
          OPEN      HL7BMTA1,"hl7bmtaf"
.
          DISPLAY   *P64:24,"hl7cisaf";
          OPEN      HL7CISA1,"hl7cisaf"
.
          DISPLAY   *P64:24,"hl7inbaf";
          OPEN      HL7INB01,"hl7inbaf"
.
          DISPLAY   *P64:24,"hl7wexaf";
          OPEN      HL7WEXA1,"hl7wexaf"
.
          DISPLAY   *P64:24,"bokqueaf";
          OPEN      BOKQUEA1,"bokqueaf"
.
          DISPLAY   *P64:24,"bokrc1af";
          OPEN      BOKRC1A1,"bokrc1af"
.
          DISPLAY   *P64:24,"bokrx1af";
          OPEN      BOKRX1A1,"bokrx1af"
.
          DISPLAY   *P64:24,"emrqueaf";
          OPEN      EMRQUEA1,"emrqueaf"
.
          DISPLAY   *P64:24,"emrvisaf";
          OPEN      EMRVISA1,"emrvisaf"
.
          DISPLAY   *P64:24,"mehleraf";
          OPEN      MEHLERA1,"mehleraf"
.
          DISPLAY   *P64:24,"mrtqueaf";                                *I-90201
          OPEN      MRTQUEA1,"mrtqueaf"                                *I-90201
.
          DISPLAY   *P64:24,"mrtmasaf";                                *I-90201
          OPEN      MRTMASA1,"mrtmasaf"                                *I-90201
.
          DISPLAY   *P64:24,"mrthisaf";                                *I-90201
          OPEN      MRTHISA1,"mrthisaf"                                *I-90201
.
          DISPLAY   *P64:24,"outsitaf";
          OPEN      OUTSITA1,"outsitaf"
.
          DISPLAY   *P64:24,"outqueaf";
          OPEN      OUTQUEA1,"outqueaf"
.
          DISPLAY   *P64:24,"outthiaf";
          OPEN      OUTTHIA1,"outthiaf"
.
          DISPLAY   *P64:24,"patdschf";
          OPEN      PATDSCH1,"patdschf"
.
          DISPLAY   *P64:24,"patgsrnf";
          OPEN      PATGSRN1,"patgsrnf"
.
          DISPLAY   *P64:24,"patma1af";
          OPEN      PATMA1A1,"patma1af"
          OPEN      PATMX1A1,"patmx1af"
.
          DISPLAY   *P64:24,"patmi1af";
          OPEN      PATMI1A1,"patmi1af"
.
          DISPLAY   *P64:24,"patonlvf";
          OPEN      PATONLV1,"patonlvf"
.
          DISPLAY   *P64:24,"pattranf";
          OPEN      PATTRAN2,"pattranf"
.
          DISPLAY   *P64:24,"pmspx2af";
          OPEN      PMSPX2A1,"pmspx2af"
.
          DISPLAY   *P64:24,"pmsqptaf";
          OPEN      PMSQPTA1,"pmsqptaf"
          OPEN      PMSQPXA1,"pmsqpxaf"
.
          DISPLAY   *P64:24,"pmsqviaf";
          OPEN      PMSQVIA1,"pmsqviaf"
.
          DISPLAY   *P64:24,"pmsvx1af";
          OPEN      PMSVX1A1,"pmsvx1af"
.
          DISPLAY   *P64:24,"watqueaf";
          OPEN      WATQUEA1,"watqueaf"
.
          DISPLAY   *P64:24,"wattr1af";
          OPEN      WATTR1A1,"wattr1af"
.
          DISPLAY   *P64:24,"wattx1af";
          OPEN      WATTX1A1,"wattx1af"
.
          DISPLAY   *P64:24,"controlf";
          OPEN      CONTROLF,"controlf"
          READ      CONTROLF,ZERO;*133,IBCNUCIS
          READ      CONTROLF,TEN9;*225,CSALIAS
.
INIT9999  RETURN
+
.******************************************************************************
.*                                  BACK0000              Called by: ML0000   *
.*                          Display Background Screen                         *
.******************************************************************************
.
BACK0000  DISPLAY   *P1:4,*EF
          BOX       16,2,2,79,24
          HLINE     *G37,6,3,78
          HLINE     *G33,6,2,2
          HLINE     *G34,6,79,79
          DISPLAY   *P30:3,*HON,*V2LON," MESSAGE STATISTICS ";
.
          CALL      IBACLOCK
          PACK      KEY8,CCC,CYY,CMM,CDD
          UNPACK    KEY8,CCENT,CYEAR,CMON,CDAY
          CALL      PACDATE
          REP       " 0",CPCDATE
          CLOCK     TIME,CTIMEIS
.
          DISPLAY   *P4:4,"Application Activated on ",*V2LON,CPCDATE,*HOFF:
                    "  @  ",*V2LON,CTIMEIS,*HOFF:
                    *P4:5,"Current status... ",*V2LON,*HON,"Waiting";
.
          DISPLAY   *P4:7,*V2LON,*ULON,"Message":
                    *P12:7,"  Sent  ",*P21:7," Failed ":
                    *P39:7,*V2LON,*ULON,"Message":
                    *P47:7,"  Sent  ",*P56:7," Failed "
.
          DISPLAY   *P6:8,"CUA - No longer in use":
                    *P6:9,"CMR - No longer in use":
                    *P6:10,"CUP - No longer in use":
                    *P6:11,"CAD - No longer in use":
                    *P6:12,"CAC - No longer in use":
                    *P6:13,"CCA - No longer in use":
                    *P6:14,"CDS - No longer in use":
                    *P6:15,"CDC - No longer in use":
                    *P6:16,"CCD - No longer in use":
                    *P6:17,"CTR - No longer in use":
                    *P6:18,"CCT - No longer in use":
                    *P6:19,"CRG - No longer in use":
                    *P6:20,"CPE - No longer in use":
                    *P6:21,"COB":
                    *P6:22,"CAE - No longer in use":
                    *P6:23,"CCE - No longer in use":
                    *P41:8,"CON":
                    *P41:9,"COR - No longer in use":
                    *P41:10,"COC":
                    *P41:11,"COD":
                    *P41:12,"COA":
                    *P41:13,"CUB - No longer in use":
                    *P41:14,"CCB":
                    *P41:15,"CPO - No longer in use":
                    *P41:16,"CPR - No longer in use":
                    *P41:17,"CPA - No longer in use":
                    *P41:18,"CWA":
                    *P41:19,"CWC":
                    *P41:20,"CRM - No longer in use":
                    *P41:21,"CEA - No longer in use":
                    *P41:22,"CED - No longer in use":
                    *P41:23,"CEC - No longer in use";
.
.         Initialise counters
.
          MOVE      ONE,FORM2
          REPEAT
            STORE     ZERO,FORM2,COBSENT,CONSENT,COCSENT,CODSENT,COASENT:
                                 CCBSENT,CWASENT,CWCSENT,COBFAIL,CONFAIL:
                                 COCFAIL,CODFAIL,COAFAIL,CCBFAIL,CWAFAIL:
                                 CWCFAIL
            ADD       ONE,FORM2
          UNTIL     FORM2>16
.
BACK9999  RETURN
+
.******************************************************************************
.*                                  RDIN0000              Called by: ML0000   *
.*                            Read HL7 Inbound File                           *
.******************************************************************************
.
RDIN0000  PACK      KEY35,ANST,SP70
          CALL      RSHLBMT1                     * Position in file
RDIN1000  CALL      RKHLBMT1                     * Read next record
          IF        OVRCD = 1
            DISPLAY   *P22:5,*W2;                * eof
            GOTO      RDIN0000
          ENDIF
.
.         Check to see if message id already exists on hl7inbaf.  If it does,
.         then we need to get a new id and use this instead.
.
          MOVE      HLBMMESG,SAVKEY20            * save current message id
          CALL      DGMESS00                     * check message id
.
          MATCH     "1",IBCNUCIS                 * using CIS interface ?
          IF        !@LESS
            CALL      CISMES00                   * check message id
          ENDIF
.
          DISPLAY   *P22:5,*V2LON,*HON,"Processing":
                    *HOFF,*V2LON," (",HLBMTYPE,")"
.
          PACK      ERORMESS,SP20,SP20
.
          MATCH     "CON",HLBMTYPE               * New O/P Appointment ?
          IF        @EQUAL
            CALL      CONM0000                   * yes
            GOTO      RDIN9000
          ENDIF
.
          MATCH     "COB",HLBMTYPE               * Change O/P Appointment ?
          IF        @EQUAL
            CALL      COBM0000                   * yes
            GOTO      RDIN9000
          ENDIF
.
          MATCH     "COC",HLBMTYPE               * Cancel O/P Appointment ?
          IF        @EQUAL
            CALL      COCM0000                   * yes
            GOTO      RDIN9000
          ENDIF
.
          MATCH     "COD",HLBMTYPE               * O/P Appointment DNA ?
          IF        @EQUAL
            CALL      CODM0000                   * yes
            GOTO      RDIN9000
          ENDIF
.
          MATCH     "COA",HLBMTYPE               * Confirm O/P Appointment ?
          IF        @EQUAL
            CALL      COAM0000                   * yes
            GOTO      RDIN9000
          ENDIF
.
          MATCH     "CCB",HLBMTYPE               * Cancel Booking ?
          IF        @EQUAL
            CALL      CCBM0000                   * yes
            GOTO      RDIN9000
          ENDIF
.
          MATCH     "CWA",HLBMTYPE               * Put on Waiting List ?
          IF        @EQUAL
            CALL      CWAM0000                   * yes
            GOTO      RDIN9000
          ENDIF
.
          MATCH     "CWC",HLBMTYPE               * Cancel Waiting List entry ?
          IF        @EQUAL
            CALL      CWCM0000                   * yes
            GOTO      RDIN9000
          ENDIF
.
.         Processing is complete so check if there were any errors
.
RDIN9000  COMPARE   ZERO,EXIT                    * any errors ?
          IF        @EQUAL
            COMPARE   HLBMMESG,SAVKEY20
            IF        !@EQUAL
              MOVE      SAVKEY20,HLBMMESG
            ENDIF
            PACK      KEY35,HLBMSTAT,HLBMDATE,HLBMTIME,HLBMMESG
            CALL      DEHLBMT1                   * no - delete record
.
            PACK      KEY20,HLBMMESG
            CALL      RAHLWEX1                   * wait list ext. record exists?
            IF        OVRCD<>1
              PACK      KEY20,HLBMMESG
              CALL      DEHLWEX1                 * yes - delete record
            ENDIF
          ELSE
            MOVE      ANSR,HLBMSTAT              * yes - set status to rejected
            PACK      ERORMESS,ERORMESS,SP30,SP10
            MOVE      ERORMESS,HLBMEROR          * load rejection error message
            CALL      UPHLBMT1                   * update record
          ENDIF
.
          DISPLAY   *P22:5,SP20,*P22:5,*V2LON,*HON,"Waiting";
          GOTO      RDIN0000
.
RDIN9999  RETURN
+
.*****************************************************************************
.*                           CONM0000              Called by: RDIN0000       *
.*             Process a New O/P Appointment                                 *
.* Returns:  EXIT  0 = record successfully written to holding files          *
.*                 1 = error occurred                                        *
.*****************************************************************************
.
.         Read outbokaf record using key
.
CONM0000  MOVE      HLBMTKEY,KEY6
          CALL      RDSITA1                      * site prefix found ?
          IF        OVRCD = 1
            MOVE      "Site record not found",ERORMESS
            GOTO      CONM9500
          ENDIF
.
          PACK      CFNAME,OSTFILE,FILBOKA1
          TRAP      OVERCOND IF IO
          OPEN      OUTBOKA1,CFNAME              * open outbokaf
          TRAPCLR   IO
          IF        OVRCD = 1
            CLEAR     ERORMESS
            MOVE      OSTFILE,ERORMESS
            ENDSET    ERORMESS
            APPEND    FILBOKA1,ERORMESS
            APPEND    " table not found",ERORMESS
            RESET     ERORMESS
            GOTO      CONM9500
          ENDIF
.
          MOVE      HLBMTKEY,KEY28
          CALL      RDBOKA1                      * outbokaf record found ?
          IF        OVRCD = 1
            CLEAR     ERORMESS
            MOVE      OSTFILE,ERORMESS
            ENDSET    ERORMESS
            APPEND    FILBOKA1,ERORMESS
            APPEND    " record not found",ERORMESS
            RESET     ERORMESS
            GOTO      CONM9500
          ENDIF
.
          MATCH     ZEROVISN,OBAOUTNO            * O/P number found ?
          IF        @EQUAL
            MOVE      "Zero O/P number",ERORMESS
            GOTO      CONM9500
          ENDIF
.
          PACK      CFNAME,OSTFILE,FILBB1A1
          TRAP      OVERCOND IF IO
          OPEN      OUTBB1A1,CFNAME              * open outbb1af
          TRAPCLR   IO
          IF        OVRCD = 1
            CLEAR     ERORMESS
            MOVE      OSTFILE,ERORMESS
            ENDSET    ERORMESS
            APPEND    FILBB1A1,ERORMESS
            APPEND    " table not found",ERORMESS
            RESET     ERORMESS
            GOTO      CONM9500
          ENDIF
.
          MOVE      OBAOUTNO,KEY8
          CALL      RDBOKB1                      * outbb1af record found ?
          IF        OVRCD = 1
            CLEAR     ERORMESS
            MOVE      OSTFILE,ERORMESS
            ENDSET    ERORMESS
            APPEND    FILBB1A1,ERORMESS
            APPEND    " record not found",ERORMESS
            RESET     ERORMESS
            GOTO      CONM9500
          ENDIF
.
          PACK      CFNAME,OSTFILE,FILMA1A1
          TRAP      OVERCOND IF IO
          OPEN      OUTMA1A1,CFNAME              * open outma1af
          TRAPCLR   IO
          IF        OVRCD = 1
            CLEAR     ERORMESS
            MOVE      OSTFILE,ERORMESS
            ENDSET    ERORMESS
            APPEND    FILMA1A1,ERORMESS
            APPEND    " table not found",ERORMESS
            RESET     ERORMESS
            GOTO      CONM9500
          ENDIF
.
          PACK      KEY18,OBASITE,OBACLIN,OBADAY,OBASTRT
          CALL      RDMASA1                      * outma1af record found ?
          IF        OVRCD = 1
            CLEAR     ERORMESS
            MOVE      OSTFILE,ERORMESS
            ENDSET    ERORMESS
            APPEND    FILMA1A1,ERORMESS
            APPEND    " record not found",ERORMESS
            RESET     ERORMESS
            GOTO      CONM9500
          ENDIF
.
.         Get PMI details
.
          MOVE      OBAURNO,KEY8
          CALL      GPMI0000                     * get PMI details
          BRANCH    EXIT,CONM9500                * error
.
.         Write a record to pmsqptaf (holding patient details)
.
          MOVE      HLBMMESG,PMQPMESI
          MOVE      SP8,PMQPOURN
          PACK      PMQPSPAR,SP30,SP30,SP20
          CALL      WRPMQPT1
.
.         Write a record to outqueaf (holding O/P details)
.
          CALL      CLOUTCAN                     * clear outcanaf fields
          CALL      CLOUTRSH                     * clear outrshaf fields
.
          MATCH     ZEROVISN,OBAOUTNO
          IF        @EQUAL
            CALL      CLOUTTHI
          ELSE
            PACK      KEY8,OBAOUTNO,SP70         * Outpatient Telehealth Info
            CALL      RDOTTHI1
            IF        OVRCD=1
              CALL      CLOUTTHI
            ENDIF
          ENDIF
.
          MOVE      HLBMMESG,OTQUMESG
          PACK      OTQUSPAR,SP30,SP30
          CALL      WROTQUE1
.
          CALL      WHFL0000                     * write holding file record
.
          ADD       ONE,CONSENT
          DISPLAY   *P47:8,CONSENT;
          MOVE      ZERO,EXIT
          GOTO      CONM9999
.
CONM9500  ADD       ONE,CONFAIL
          DISPLAY   *P56:8,CONFAIL;
          MOVE      ONE,EXIT
.
CONM9999  RETURN
+
.*****************************************************************************
.*                           COBM0000              Called by: RDIN0000       *
.*             Process a Change O/P Appointment                              *
.* Returns:  EXIT  0 = record successfully written to holding files          *
.*                 1 = error occurred                                        *
.*****************************************************************************
.
.         Read outbokaf record using key
.
COBM0000  MOVE      HLBMTKEY,KEY6
          CALL      RDSITA1                      * site prefix found ?
          IF        OVRCD = 1
            MOVE      "Site record not found",ERORMESS
            GOTO      COBM9500
          ENDIF
.
          PACK      CFNAME,OSTFILE,FILBOKA1
          TRAP      OVERCOND IF IO
          OPEN      OUTBOKA1,CFNAME              * open outbokaf
          TRAPCLR   IO
          IF        OVRCD = 1
            CLEAR     ERORMESS
            MOVE      OSTFILE,ERORMESS
            ENDSET    ERORMESS
            APPEND    FILBOKA1,ERORMESS
            APPEND    " table not found",ERORMESS
            RESET     ERORMESS
            GOTO      COBM9500
          ENDIF
.
          MOVE      HLBMTKEY,KEY28
          CALL      RDBOKA1                      * outbokaf record found ?
          IF        OVRCD = 1
            CLEAR     ERORMESS
            MOVE      OSTFILE,ERORMESS
            ENDSET    ERORMESS
            APPEND    FILBOKA1,ERORMESS
            APPEND    " record not found",ERORMESS
            RESET     ERORMESS
            GOTO      COBM9500
          ENDIF
.
          MATCH     ZEROVISN,OBAOUTNO             * O/P number found ?
          IF        @EQUAL
            MOVE      "Zero O/P number",ERORMESS
            GOTO      COBM9500
          ENDIF
.
          PACK      CFNAME,OSTFILE,FILBB1A1
          TRAP      OVERCOND IF IO
          OPEN      OUTBB1A1,CFNAME              * open outbb1af
          TRAPCLR   IO
          IF        OVRCD = 1
            CLEAR     ERORMESS
            MOVE      OSTFILE,ERORMESS
            ENDSET    ERORMESS
            APPEND    FILBB1A1,ERORMESS
            APPEND    " table not found",ERORMESS
            RESET     ERORMESS
            GOTO      COBM9500
          ENDIF
.
          MOVE      OBAOUTNO,KEY8
          CALL      RDBOKB1                      * outbb1af record found ?
          IF        OVRCD = 1
            CLEAR     ERORMESS
            MOVE      OSTFILE,ERORMESS
            ENDSET    ERORMESS
            APPEND    FILBB1A1,ERORMESS
            APPEND    " record not found",ERORMESS
            RESET     ERORMESS
            GOTO      COBM9500
          ENDIF
.
.         Get PMI details
.
          MOVE      OBAURNO,KEY8
          CALL      GPMI0000                     * get PMI details
          BRANCH    EXIT,COBM9500                * error
.
.         Write a record to pmsqptaf (holding patient details)
.
          MOVE      HLBMMESG,PMQPMESI
          MOVE      SP8,PMQPOURN
          PACK      PMQPSPAR,SP30,SP30,SP20
          CALL      WRPMQPT1
.
.         Write a record to outqueaf (holding O/P details)
.
          CALL      CLOUTCAN                     * clear outcanaf fields
          CALL      CLOUTRSH                     * clear outrshaf fields
.
          MATCH     ZEROVISN,OBAOUTNO
          IF        @EQUAL
            CALL      CLOUTTHI
          ELSE
            PACK      KEY8,OBAOUTNO,SP70         * Outpatient Telehealth Info
            CALL      RDOTTHI1
            IF        OVRCD=1
              CALL      CLOUTTHI
            ENDIF
          ENDIF
.
          MOVE      HLBMMESG,OTQUMESG
          PACK      OTQUSPAR,SP30,SP30
          CALL      WROTQUE1
.
          CALL      WHFL0000                     * write holding file record
.
          ADD       ONE,COBSENT
          DISPLAY   *P12:21,COBSENT;
          MOVE      ZERO,EXIT
          GOTO      COBM9999
.
COBM9500  ADD       ONE,COBFAIL
          DISPLAY   *P21:21,COBFAIL;
          MOVE      ONE,EXIT
.
COBM9999  RETURN
+
.*****************************************************************************
.*                           COCM0000              Called by: RDIN0000       *
.*             Process a Cancel O/P Appointment                              *
.* Returns:  EXIT  0 = record successfully written to holding files          *
.*                 1 = error occurred                                        *
.*****************************************************************************
.
.         Read outcanaf record using key
.
COCM0000  MOVE      HLBMTKEY,KEY6
          CALL      RDSITA1                      * site prefix found ?
          IF        OVRCD = 1
            MOVE      "Site record not found",ERORMESS
            GOTO      COCM9500
          ENDIF
.
          PACK      CFNAME,OSTFILE,FILCANA3
          TRAP      OVERCOND IF IO
          OPEN      OUTCANA3,CFNAME              * open outcanaf
          TRAPCLR   IO
          IF        OVRCD = 1
            CLEAR     ERORMESS
            MOVE      OSTFILE,ERORMESS
            ENDSET    ERORMESS
            APPEND    FILCANA3,ERORMESS
            APPEND    " table not found",ERORMESS
            RESET     ERORMESS
            GOTO      COCM9500
          ENDIF
.
          MOVE      HLBMTKEY,KEY33
          CALL      RDOTCAN3                     * outcanaf record found ?
          IF        OVRCD = 1
            CLEAR     ERORMESS
            MOVE      OSTFILE,ERORMESS
            ENDSET    ERORMESS
            APPEND    FILCANA3,ERORMESS
            APPEND    " record not found",ERORMESS
            RESET     ERORMESS
            GOTO      COCM9500
          ENDIF
.
.         Get PMI details
.
          MOVE      OPCNURNO,KEY8
          CALL      GPMI0000                     * get PMI details
          BRANCH    EXIT,COCM9500                * error
.
.         Write a record to pmsqptaf (holding patient details)
.
          MOVE      HLBMMESG,PMQPMESI
          MOVE      SP8,PMQPOURN
          PACK      PMQPSPAR,SP30,SP30,SP20
          CALL      WRPMQPT1
.
.         Write a record to outqueaf (holding O/P details)
.
          CALL      CLOUTBOA                     * clear outbokaf fields
          CALL      CLOUTBB1                     * clear outbb1af fields
          CALL      CLOUTRSH                     * clear outrshaf fields
.
          MATCH     ZEROVISN,OBAOUTNO
          IF        @EQUAL
            CALL      CLOUTTHI
          ELSE
            PACK      KEY8,OBAOUTNO,SP70         * Outpatient Telehealth Info
            CALL      RDOTTHI1
            IF        OVRCD=1
              CALL      CLOUTTHI
            ENDIF
          ENDIF
.
          MOVE      HLBMMESG,OTQUMESG
          PACK      OTQUSPAR,SP30,SP30
          CALL      WROTQUE1
.
          CALL      WHFL0000                     * write holding file record
.
          ADD       ONE,COCSENT
          DISPLAY   *P47:10,COCSENT;
          MOVE      ZERO,EXIT
          GOTO      COCM9999
.
COCM9500  ADD       ONE,COCFAIL
          DISPLAY   *P56:10,COCFAIL;
          MOVE      ONE,EXIT
.
COCM9999  RETURN
+
.*****************************************************************************
.*                           CODM0000              Called by: RDIN0000       *
.*             Process an O/P Appointment DNA                                *
.* Returns:  EXIT  0 = record successfully written to holding files          *
.*                 1 = error occurred                                        *
.*****************************************************************************
.
.         Read outbokaf record using key
.
CODM0000  MOVE      HLBMTKEY,KEY6
          CALL      RDSITA1                      * site prefix found ?
          IF        OVRCD = 1
            MOVE      "Site record not found",ERORMESS
            GOTO      CODM9500
          ENDIF
.
          PACK      CFNAME,OSTFILE,FILBOKA1
          TRAP      OVERCOND IF IO
          OPEN      OUTBOKA1,CFNAME              * open outbokaf
          TRAPCLR   IO
          IF        OVRCD = 1
            CLEAR     ERORMESS
            MOVE      OSTFILE,ERORMESS
            ENDSET    ERORMESS
            APPEND    FILBOKA1,ERORMESS
            APPEND    " table not found",ERORMESS
            RESET     ERORMESS
            GOTO      CODM9500
          ENDIF
.
          MOVE      HLBMTKEY,KEY28
          CALL      RDBOKA1                      * outbokaf record found ?
          IF        OVRCD = 1
            CLEAR     ERORMESS
            MOVE      OSTFILE,ERORMESS
            ENDSET    ERORMESS
            APPEND    FILBOKA1,ERORMESS
            APPEND    " record not found",ERORMESS
            RESET     ERORMESS
            GOTO      CODM9500
          ENDIF
.
          MATCH     ZEROVISN,OBAOUTNO             * O/P number found ?
          IF        @EQUAL
            MOVE      "Zero O/P number",ERORMESS
            GOTO      CODM9500
          ENDIF
.
.         Get PMI details
.
          MOVE      OBAURNO,KEY8
          CALL      GPMI0000                     * get PMI details
          BRANCH    EXIT,CODM9500                * error
.
.         Write a record to pmsqptaf (holding patient details)
.
          MOVE      HLBMMESG,PMQPMESI
          MOVE      SP8,PMQPOURN
          PACK      PMQPSPAR,SP30,SP30,SP20
          CALL      WRPMQPT1
.
.         Write a record to outqueaf (holding O/P details)
.
          CALL      CLOUTBB1                     * clear outbb1af fields
          CALL      CLOUTCAN                     * clear outcanaf fields
          CALL      CLOUTRSH                     * clear outrshaf fields
.
          MATCH     ZEROVISN,OBAOUTNO
          IF        @EQUAL
            CALL      CLOUTTHI
          ELSE
            PACK      KEY8,OBAOUTNO,SP70         * Outpatient Telehealth Info
            CALL      RDOTTHI1
            IF        OVRCD=1
              CALL      CLOUTTHI
            ENDIF
          ENDIF
.
          MOVE      HLBMMESG,OTQUMESG
          PACK      OTQUSPAR,SP30,SP30
          CALL      WROTQUE1
.
          CALL      WHFL0000                     * write holding file record
.
          ADD       ONE,CODSENT
          DISPLAY   *P47:11,CODSENT;
          MOVE      ZERO,EXIT
          GOTO      CODM9999
.
CODM9500  ADD       ONE,CODFAIL
          DISPLAY   *P56:11,CODFAIL;
          MOVE      ONE,EXIT
.
CODM9999  RETURN
+
.*****************************************************************************
.*                           COAM0000              Called by: RDIN0000       *
.*             Process an O/P Appointment Confirmation                       *
.* Returns:  EXIT  0 = record successfully written to holding files          *
.*                 1 = error occurred                                        *
.*****************************************************************************
.
.         Read outbokaf record using key
.
COAM0000  MOVE      HLBMTKEY,KEY6
          CALL      RDSITA1                      * site prefix found ?
          IF        OVRCD = 1
            MOVE      "Site record not found",ERORMESS
            GOTO      COAM9500
          ENDIF
.
          PACK      CFNAME,OSTFILE,FILBOKA1
          TRAP      OVERCOND IF IO
          OPEN      OUTBOKA1,CFNAME              * open outbokaf
          TRAPCLR   IO
          IF        OVRCD = 1
            CLEAR     ERORMESS
            MOVE      OSTFILE,ERORMESS
            ENDSET    ERORMESS
            APPEND    FILBOKA1,ERORMESS
            APPEND    " table not found",ERORMESS
            RESET     ERORMESS
            GOTO      COAM9500
          ENDIF
.
          MOVE      HLBMTKEY,KEY28
          CALL      RDBOKA1                      * outbokaf record found ?
          IF        OVRCD = 1
            CLEAR     ERORMESS
            MOVE      OSTFILE,ERORMESS
            ENDSET    ERORMESS
            APPEND    FILBOKA1,ERORMESS
            APPEND    " record not found",ERORMESS
            RESET     ERORMESS
            GOTO      COAM9500
          ENDIF
.
          MATCH     ZEROVISN,OBAOUTNO             * O/P number found ?
          IF        @EQUAL
            MOVE      "Zero O/P number",ERORMESS
            GOTO      COAM9500
          ENDIF
.
          PACK      CFNAME,OSTFILE,FILBB1A1
          TRAP      OVERCOND IF IO
          OPEN      OUTBB1A1,CFNAME              * open outbb1af
          TRAPCLR   IO
          IF        OVRCD = 1
            CLEAR     ERORMESS
            MOVE      OSTFILE,ERORMESS
            ENDSET    ERORMESS
            APPEND    FILBB1A1,ERORMESS
            APPEND    " table not found",ERORMESS
            RESET     ERORMESS
            GOTO      COAM9500
          ENDIF
.
          MOVE      OBAOUTNO,KEY8
          CALL      RDBOKB1                      * outbb1af record found ?
          IF        OVRCD = 1
            CLEAR     ERORMESS
            MOVE      OSTFILE,ERORMESS
            ENDSET    ERORMESS
            APPEND    FILBB1A1,ERORMESS
            APPEND    " record not found",ERORMESS
            RESET     ERORMESS
            GOTO      COAM9500
          ENDIF
.
.         Get PMI details
.
          MOVE      OBAURNO,KEY8
          CALL      GPMI0000                     * get PMI details
          BRANCH    EXIT,COAM9500                * error
.
.         Write a record to pmsqptaf (holding patient details)
.
          MOVE      HLBMMESG,PMQPMESI
          MOVE      SP8,PMQPOURN
          PACK      PMQPSPAR,SP30,SP30,SP20
          CALL      WRPMQPT1
.
.         Write a record to outqueaf (holding O/P details)
.
          CALL      CLOUTCAN                     * clear outcanaf fields
          CALL      CLOUTRSH                     * clear outrshaf fields
.
          MATCH     ZEROVISN,OBAOUTNO
          IF        @EQUAL
            CALL      CLOUTTHI
          ELSE
            PACK      KEY8,OBAOUTNO,SP70         * Outpatient Telehealth Info
            CALL      RDOTTHI1
            IF        OVRCD=1
              CALL      CLOUTTHI
            ENDIF
          ENDIF
.
          MOVE      HLBMMESG,OTQUMESG
          PACK      OTQUSPAR,SP30,SP30
          CALL      WROTQUE1
.
          CALL      WHFL0000                     * write holding file record
.
          ADD       ONE,COASENT
          DISPLAY   *P47:12,COASENT;
          MOVE      ZERO,EXIT
          GOTO      COAM9999
.
COAM9500  ADD       ONE,COAFAIL
          DISPLAY   *P56:12,COAFAIL;
          MOVE      ONE,EXIT
.
COAM9999  RETURN
+
.*****************************************************************************
.*                           CCBM0000              Called by: RDIN0000       *
.*             Process a Cancel Booking Message                              *
.* Returns:  EXIT  0 = record successfully written to holding files          *
.*                 1 = error occurred                                        *
.*****************************************************************************
.
.         Read bokrc1af record using key
.
CCBM0000  MOVE      HLBMVISN,KEY8
          CALL      RDBKREC1                     * booking record found ?
          IF        OVRCD = 1
            MOVE      "Booking record not found",ERORMESS
            GOTO      CCBM9500
          ENDIF
.
.         Write a record to bokqueaf (holding booking details)
.
          MOVE      HLBMMESG,BKQUMESI
          PACK      BKQUSPAR,SP30,SP30,SP20
          CALL      WRBKQUE1
.
          CALL      WHFL0000                     * write holding file record
.
          ADD       ONE,CCBSENT
          DISPLAY   *P47:14,CCBSENT;
          MOVE      ZERO,EXIT
          GOTO      CCBM9999
.
CCBM9500  ADD       ONE,CCBFAIL
          DISPLAY   *P56:14,CCBFAIL;
          MOVE      ONE,EXIT
.
CCBM9999  RETURN
+
.*****************************************************************************
.*                           CWAM0000              Called by: RDIN0000       *
.*             Process a Waiting List Addition Message                       *
.* Returns:  EXIT  0 = record successfully written to holding files          *
.*                 1 = error occurred                                        *
.*****************************************************************************
.
.         Get W/L record using key
.
CWAM0000  MOVE      HLBMTKEY,KEY19
          CALL      RDTREA1                      * W/L Record found ?
          IF        OVRCD = 1
            MOVE      "W/L record not found",ERORMESS
            GOTO      CWAM9500
          ENDIF
.
.         See if a wattx1af record exists
.
          MOVE      HLBMTKEY,KEY19
          CALL      RDWTTX11                     * W/L ext. record found ?
          IF        OVRCD = 1
            CALL      CLWATTX1                   * cleat W/L ext. variables
          ENDIF
.
.         Get PMI details
.
          MOVE      WMURNO,KEY8
          CALL      GPMI0000                     * get PMI details
          BRANCH    EXIT,CWAM9500                * error
.
.         Write a record to pmsqptaf (holding patient details)
.
          MOVE      HLBMMESG,PMQPMESI
          MOVE      SP8,PMQPOURN
          PACK      PMQPSPAR,SP30,SP30,SP20
          CALL      WRPMQPT1
.
.         Write a record to watqueaf (holding W/L details)
.
          MOVE      HLBMMESG,WTQUMESI
          PACK      WTQUSPAR,SP30,SP30
          CALL      WRWTQUE1
.
          CALL      WHFL0000                     * write holding file record
.
          ADD       ONE,CWASENT
          DISPLAY   *P47:18,CWASENT;
          MOVE      ZERO,EXIT
          GOTO      CWAM9999
.
CWAM9500  ADD       ONE,CWAFAIL
          DISPLAY   *P56:18,CWAFAIL;
          MOVE      ONE,EXIT
.
CWAM9999  RETURN
+
.*****************************************************************************
.*                           CWCM0000              Called by: RDIN0000       *
.*             Process a Waiting List Cancellation Message                   *
.* Returns:  EXIT  0 = record successfully written to holding files          *
.*                 1 = error occurred                                        *
.*****************************************************************************
.
CWCM0000  CALL      CLWATTR1                     * clear W/L variables
.
.         Get W/L details from the extension file (as the cancel
.         removed the W/L record).
.
          COMPARE   HLBMMESG,SAVKEY20
          IF        !@EQUAL
            MOVE      SAVKEY20,KEY20
          ELSE
            MOVE      HLBMMESG,KEY20
          ENDIF
          CALL      RDHLWEX1                     * record found ?
          IF        OVRCD = 1
            MOVE      "W/L extension record not found",ERORMESS
            GOTO      CWCM9500
          ENDIF
.
.         Write a record to watqueaf (holding W/L details)
.
          CALL      CLWATTX1                     * clear W/L extn. variables
.
          MOVE      HLBMMESG,WTQUMESI
          PACK      WTQUSPAR,SP30,SP30
          CALL      WRWTQUE1
.
          CALL      WHFL0000                     * write holding file record
.
          ADD       ONE,CWCSENT
          DISPLAY   *P47:19,CWCSENT;
          MOVE      ZERO,EXIT
          GOTO      CWCM9999
.
CWCM9500  ADD       ONE,CWCFAIL
          DISPLAY   *P56:19,CWCFAIL;
          MOVE      ONE,EXIT
.
CWCM9999  RETURN
+
.*****************************************************************************
.*                             GPMI0000            Called by: lots           *
.*                Get the PMI details                                        *
.* Requires: KEY8 (U/R number)                                               *
.* Returns:  EXIT   0 = PMI data successfully retrieved                      *
.*                  1 = Error in retrieving PMI data                         *
.*****************************************************************************
.
GPMI0000  CALL      RDMAST1                      * record on file ?
          BRANCH    OVRCD,GPMI9500               * no - error
.
          MOVE      PURNO,KEY8
          CALL      RDPMPX21                     * record on file ?
          IF        OVRCD = 1
            CALL      CLPMSPX2                   * no - clear variables
          ENDIF
.
          CALL      CLNT0000                     * clear national variables
          CALL      PMIGTNID                     * load national fields
          MOVE      NMPNUMB,PTNINMPI
.
GPMI9000  MOVE      ZERO,EXIT
          GOTO      GPMI9999
.
GPMI9500  MOVE      "PMI record not found on patmastf",ERORMESS
          MOVE      ONE,EXIT
.
GPMI9999  RETURN
+
.******************************************************************************
.*                                 DGMESS00                                   *
.*                  Check if we need to get a new message ID                  *
.******************************************************************************
DGMESS00  MOVE      HLBMMESG,KEY20                * check if message id exists
          CALL      RAH7INB1
          BRANCH    OVRCD,DGMESS99
.
          MOVE      "  0",PRXCODE                 * System Lock Sector 0
          CALL      GETSLK00                      * Get System Lock-Sector 0
          READ      CONTROLF,ZERO;*87,IBCNMESI    * next message id
          MOVE      IBCNMESI,HLBMMESG
          ADD       ONE,IBCNMESI
          WRITAB    CONTROLF,ZERO;*87,IBCNMESI
          CALL      RELSLK00                      * Release System Lock-Sector 0
          GOTO      DGMESS00                      * check again
.
DGMESS99  RETURN
+
.******************************************************************************
.*                                 CISMES00                                   *
.*                  Check if we need to get a new message ID                  *
.******************************************************************************
CISMES00  MOVE      HLBMMESG,KEY20                * check if message id exists
          CALL      RAH7CIS1
          BRANCH    OVRCD,CISMES99
.         
          MOVE      "  0",PRXCODE                 * System Lock Sector 0
          CALL      GETSLK00                      * Get System Lock-Sector 0
          READ      CONTROLF,ZERO;*87,IBCNMESI    * next message id
          MOVE      IBCNMESI,HLBMMESG
          ADD       ONE,IBCNMESI
          WRITAB    CONTROLF,ZERO;*87,IBCNMESI    
          CALL      RELSLK00                      * Release System Lock-Sector 0
          GOTO      CISMES00                      * check again
.
CISMES99  RETURN
+
.*****************************************************************************
.*                             WHLF0000            Called by: lots           *
.*        Write a record to the holding header file as the final task        *
.*****************************************************************************
.
WHFL0000  MOVE      HLBMMESG,H7INMESI
          MOVE      ANST,H7INSTAT
          CALL      IBACLOCK
          PACK      H7INDTTM,CCC,CYY,CMM,CDD,CTIMEIS
          REP       " 0",H7INDTTM
          MOVE      HLBMTYPE,H7INMETP
          MOVE      PASSCODE,H7INOPER
          MOVE      PORT,H7INPORT
          MOVE      PRGID,H7INPGID
          PACK      H7INSPAR,SP30,SP20
          CALL      WRH7INB1
.
WHFL9999  RETURN
+
.*****************************************************************************
.*                           CLNT0000              Called by: lots           *
.*                   Clear all the national variable fields                  *
.*****************************************************************************
.
CLNT0000  MOVE      SP20,PTNINMPI
          MOVE      SP30,NHMASURN
          MOVE      SP20,NHMAGIV1
          MOVE      SP20,NHMAGIV2
          MOVE      SP20,NHMAGIV3
          MOVE      SP1,NHMAPREI
          PACK      NHMAADD1,SP30,SP5
          MOVE      SP30,NHMAADD2
          MOVE      SP30,NHMAADD3
          MOVE      SP30,NHMAADD4
          MOVE      SP30,NHMAADD5
          MOVE      SP8,NHMADOB
          MOVE      SP8,NHMADDTH
          MOVE      SP4,NHMADOMC
          MOVE      SP1,NHMARES
          MOVE      SP2,NHMAETH
          MOVE      SP1,NHMASEX
          MOVE      SP8,NHMADAT
          MOVE      SP8,NHMATIM
          MOVE      SP2,NHMAETH2
          MOVE      SP2,NHMAETH3
.
CLNT9999  RETURN
+
.==============================================================================
.
          INC       STD002IO
.
          INC       CLBOKRX1
          INC       CLOUTBOA
          INC       CLOUTBB1
          INC       CLOUTCAN
          INC       CLOUTRSH
          INC       CLOUTTHI
          INC       CLPATDSC
          INC       CLPATMIS
          INC       CLPATTRN
          INC       CLPMSQPX
          INC       CLPMSPX2
          INC       CLPMSVX1
          INC       CLWATTR1
          INC       CLWATTX1
          INC       PMIGTNID
.
          INC       BOKQUEIO/INC
          INC       BOKRC1IO/INC
          INC       BOKRX1IO/INC
          INC       EMRQUEIO/INC
          INC       EMRVISIO/INC
          INC       HL7BMTIO/INC
          INC       HL7CISIO/INC
          INC       HL7INBIO/INC
          INC       HL7WEXIO/INC
          INC       MEHLERIO/INC
          INC       MRTQUEIO/INC                                       *I-90201
          INC       MRTHISIO/INC                                       *I-90201
          INC       MRTMASIO/INC                                       *I-90201
          INC       NHIMASIO/INC
          INC       OUTBOAIO/INC
          INC       OUTBB1IO/INC
          INC       OUTCANIO/INC
          INC       OUTMA1IO/INC
          INC       OUTRSHIO/INC
          INC       OUTSITIO/INC
          INC       OUTQUEIO/INC
          INC       OUTTHIIO/INC
          INC       PATDSCIO/INC
          INC       PATGSRIO/INC
          INC       PATMA1IO/INC
          INC       PATMI1IO/INC
          INC       PATNIDIO/INC
          INC       PATONLIO/INC
          INC       PATTRNIO/INC
          INC       PMSPX2IO/INC
          INC       PMSQPTIO/INC
          INC       PMSQVIIO/INC
          INC       PMSVX1IO/INC
          INC       WATQUEIO/INC
          INC       WATTR1IO/INC
          INC       WATTX1IO/INC
+
