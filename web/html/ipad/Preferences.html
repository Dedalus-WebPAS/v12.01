<!DOCTYPE HTML>
<head>
<title>Change Hospital/Ward</title>
<meta name="Template"          content="Preferences.html">
<meta name="TemplateHome"      content="html/ipad">
<meta name="TemplateVersion"   content="V12.00.00">
<meta name="HelpFileName"      content="NoContextSet.html">
<script type="text/javascript" src="ipad.js"> </script>
<link rel="stylesheet"         href="ipad.css" type="text/css">
<link rel="stylesheet"         href="TabMenu.css" type="text/css">
<meta name="HelpFileName"      content="NoContextSet.html">
<script type="text/javascript">
var ProcessKeyName;
function ShowTabs() {
   ProcessKeyName=top.getCookie("ProcessKey");
   if(typeof(Storage)!=="undefined") {
    var tabPosition=localStorage.getItem(ProcessKeyName+"-tabPosition");
    if (tabPosition==null) {
      tabPosition="R"; 
      var elFrame=window.top.document.getElementById("iphone-frame")
      el=elFrame.contentDocument.getElementById("PatientTabMenu");
      var ulClass=el.getElementsByTagName("UL");
      for (i=0;i<ulClass.length;i++) {   //  Set Default Position Based on UL element
        if (ulClass[i].className=="tabMenuLeft") {
           tabPosition="L"; 
        }
      }
    }
    var tabColor=localStorage.getItem(ProcessKeyName+"-tabColor");
    var el=document.getElementById("showPosition");
    for (i=0;i<el.options.length;i++) {
      if (el.options[i].value==tabPosition) el.selectedIndex=i;
    }
    var el=document.getElementById("showColor");
    for (i=0;i<el.options.length;i++) {
      if (el.options[i].value==tabColor) el.selectedIndex=i;
    }
   }
   else {
     alertify.alert("Sorry Your Browser Does Not Support the Preferences Model");
     location.back();
   }
  var tabLocation=document.getElementById('tabMenuLocation');
  var elFrame=window.top.document.getElementById("iphone-frame")
  el=elFrame.contentDocument.getElementById("PatientTabMenu");
  var tabs=el.getElementsByTagName("LI");
  for (i=0;i<tabs.length;i++) {
    var tabC=tabs[i].className;
    tabClass="tabLeft"
    if (tabPosition=="R") tabClass="tabRight"
    if (tabColor!="N") {
      tabColorClass=localStorage.getItem(ProcessKeyName+"-"+tabs[i].id);
      if (tabColorClass==null) tabColorClass=tabC.replace(/tabRight /,"").replace(/tabLeft /,"");
      tabClass+=" "+tabColorClass;
    }
    ColorSelect=SelectColor(tabs[i].id)
    tabLocation.innerHTML+="<li class=sectionItem"+
                           "><span id=SPAN-"+tabs[i].id+" class='labelText "+tabClass+"'>"+
                           tabs[i].innerHTML+"</span><span style='line-height:45px;'>"+
                           ColorSelect+"</span></li>";
  }
}
function SelectColor(tabID) {
  var returnStr;
  returnStr="<select name="+tabID+" onchange=SetTabColorValue(this); style='width:200px'>"+
            "<option value=''>Change Color</option>"+
            "<option value=TA01>White No Tab</option>"+
            "<option value=TB01>Blue Level 1</option>"+
            "<option value=TB02>Blue Level 2</option>"+
            "<option value=TB03>Blue Level 3</option>"+
            "<option value=TB04>Blue Level 4</option>"+
            "<option value=TB05>Blue Level 5</option>"+
            "<option value=TC01>Green Level 1</option>"+
            "<option value=TC02>Green Level 2</option>"+
            "<option value=TC03>Green Level 3</option>"+
            "<option value=TC04>Green Level 4</option>"+
            "<option value=TC05>Green Level 5</option>"+
            "<option value=TR01>Red Level 1</option>"+
            "<option value=TR02>Red Level 2</option>"+
            "<option value=TR03>Red Level 3</option>"+
            "<option value=TR04>Red Level 4</option>"+
            "<option value=TR05>Red Level 5</option>"+
            "<option value=TG01>Gray Level 1</option>"+
            "<option value=TG02>Gray Level 2</option>"+
            "<option value=TG03>Gray Level 3</option>"+
            "<option value=TG04>Gray Level 4</option>"+
            "<option value=TG05>Gray Level 5</option>"+
            "<option value=TP01>Purple Level 1</option>"+
            "<option value=TP02>Purple Level 2</option>"+
            "<option value=TP03>Purple Level 3</option>"+
            "<option value=TP04>Purple Level 4</option>"+
            "<option value=TP05>Purple Level 5</option>"+
            "<option value=TY01>Yellow Level 1</option>"+
            "<option value=TY02>Yellow Level 2</option>"+
            "<option value=TY03>Yellow Level 3</option>"+
            "<option value=TY04>Yellow Level 4</option>"+
            "<option value=TY05>Yellow Level 5</option>"+
            "<option value=TO01>Orange Level 1</option>"+
            "<option value=TO02>Orange Level 2</option>"+
            "<option value=TO03>Orange Level 3</option>"+
            "<option value=TO04>Orange Level 4</option>"+
            "<option value=TO05>Orange Level 5</option>"+
            "</select>"
  return returnStr;
}
function SetTabColorValue(el) {
  var ColorClass=el.options[el.selectedIndex].value;
  var setItem=document.getElementById("SPAN-"+el.name);
  var tabP=document.getElementById("showPosition");
  var tabPosition=tabP.options[tabP.selectedIndex].value;
  TabLocation=" tabLeft"
  if (tabPosition=="R") TabLocation=" tabRight"
  setItem.className="labelText "+ColorClass+TabLocation;
  localStorage.setItem(ProcessKeyName+"-"+el.name,ColorClass);
}
function ResetMenu() {
  localStorage.removeItem(ProcessKeyName+"-tabPosition");
  localStorage.removeItem(ProcessKeyName+"-tabColor");
  var elFrame=window.top.document.getElementById("iphone-frame")
  el=elFrame.contentDocument.getElementById("PatientTabMenu");
  var tabs=el.getElementsByTagName("LI");
  for (i=0;i<tabs.length;i++) {
      localStorage.removeItem(ProcessKeyName+"-"+tabs[i].id);
  }
  top.location.reload();
}
function SetTabPosition(el) {
  var tabPosition=el.options[el.selectedIndex].value;
  var setItems=document.getElementsByTagName("SPAN");
  for (i=0;i<setItems.length;i++) {
    if (tabPosition=="R") {
      setItems[i].className=setItems[i].className.replace(/tabLeft/,"tabRight");
    } else {
      setItems[i].className=setItems[i].className.replace(/tabRight/,"tabLeft");
    }
  }
  localStorage.setItem(ProcessKeyName+"-tabPosition",tabPosition);
}
function SetTabColor(el) {
  var showColor=el.options[el.selectedIndex].value;
  localStorage.setItem(ProcessKeyName+"-tabColor",showColor);
  var tabP=document.getElementById("showPosition");
  var tabPosition=tabP.options[tabP.selectedIndex].value;
  TabLocation=" tabLeft"
  if (tabPosition=="R") TabLocation=" tabRight"
  var setItems=document.getElementsByTagName("SPAN");
  for (i=0;i<setItems.length;i++) {
    if (setItems[i].className.match(/labelText tab/)) {
      if (showColor=="N") {
        setItems[i].className="labelText TA01 "+TabLocation;
      } else {
        setItems[i].className="labelText "+ColorClass+TabLocation;
      }
    }
  }
}
</script>
</head>
<body onload='ShowTabs();'>
<ul class=sectionList>
<li class=sectionItem>
<span class='labelText'>Medical Record Tab Position </span>
<span class='sectionText'>
<select id=showPosition name=tabposition onchange=SetTabPosition(this) style='width:150px;'>
<option value='R'>Show on Right</option>
<option value='L'>Show on Left</option>
</select>
</span></li>

<li class=sectionItem><span class='labelText'>Show Colored Tabs</span>
<span class='sectionText'>
<select id=showColor name=tabColor onchange=SetTabColor(this) style='width:150px;'>
<option value='Y'>Yes</option>
<option value='N'>No</option>
</select>
</span></li>

<li class=sectionItem><span class='labelText'>Reset to Default Layout</span>
<span class='sectionText'>
<span class=stdButton onclick='ResetMenu();'>Reset</span> 
</span></li>

</ul>
<ul class=sectionList id=tabMenuLocation></ul>
</body>
</html>
