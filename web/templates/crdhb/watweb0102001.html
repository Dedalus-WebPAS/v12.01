<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="crdhb">
<meta name="HelpFileName" content="NoContextSet.html">
<script type="text/javascript">
function PacBooking() {
  Left=(document.body.clientWidth-920)/2
  DFrameSubmit(PacForm,0,Left,920,850)
}
function PasBooking() {
  Left=(document.body.clientWidth-920)/2
  DFrameSubmit(PasForm,0,Left,920,850)
}
<!-- TAS 04: 230117 : Task 0845727 Update function-->
function MedBooking() {
  if (PatientLinks.BookingStatus.value == "1") {
     if (LinkForm.rfcstats.value == "1") {
        if (!confirm("Warning: This patient is listed as not Ready For Care." +
           "\n\nDate NRFC       " + document.PatientLinks.suspstrtdate.value +
           "\nDate RFC          " + document.PatientLinks.suspenddate.value +
           "\nListing Status   " + document.PatientLinks.listingstat.value +
           "\nReason              " + document.PatientLinks.reason.value +
           "\n\nPress OK to continue with Booking or Cancel to return.")) {
           return;}}
}
  if (PatientLinks.BookingStatus.value != "1") {
     MedForm.template.value="202"
  }
  Left=(document.body.clientWidth-800)/2
  DFrameSubmit(MedForm,0,Left,800,500)
}
<!-- TAS 04:  Task 0845727 Update function-->
function CallBooking() {
  if (LinkForm.BookingStatus.value == "1") {
     if (LinkForm.rfcstats.value == "1") {
        if (!confirm("Warning: This patient is listed as not Ready For Care." +
           "\n\nDate NRFC       " + document.PatientLinks.suspstrtdate.value +
           "\nDate RFC          " + document.PatientLinks.suspenddate.value +
           "\nListing Status   " + document.PatientLinks.listingstat.value +
           "\nReason              " + document.PatientLinks.reason.value +
           "\n\nPress OK to continue with Booking or Cancel to return.")) {
           return;}}
     LinkForm.casekeys.value=""
     PatientLinkTo("oprweb01.pbl",2,4,1,750,400) }
  else {
     LinkForm.casekeys.value=LinkForm.TheatreKey.value;
     LinkForm.action="oprweb01.pbl"
     LinkForm.reportno.value="11"
     LinkForm.template.value="006"
     DFrameSubmit(LinkForm,90,25,900,700)
     }
}
function CallRemove() {
  PatientLinkTo("watweb01.pbl",2,4,1,900,500)
}
function CallSus() {
   if (document.LinkForm.Stat.value.substring(0,11)!= "Unscheduled") {
      alert("Patient status is not Unscheduled ")
   } else {
      PatientLinkTo("watweb01.pbl",5,1,1,900,500)
   }
}
function setProcCodes() {
   document.getElementById('ProcCodes').innerHTML = concatProcCodes();
}
function protectBooking() {
  var status = PatientLinks.BookingStatus.value
  var bktype = PatientLinks.BookingType.value
  TheButton.disabled=false;
  MedButton.disabled=false;
  if (status == "2" || status == "3" || status == "4" || status == "5") {
    if (bktype == "THE ") {
      MedButton.disabled=true;
    }
    else {
      TheButton.disabled=true;
    }
  }
}
</script>
</head>
%START.OF.PAGE
<!-- 01 : CTAS : disable ESIS procedure check
<body onload="PageLoad(event);setProcCodes();">
-->
<body onload="PageLoad(event);setProcCodes();setProcDescs();protectBooking();">
<!-- end of change -->
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%WATWEB01.02.003";
PatientVIS="%WATWEB01.02.081";
PatientNAM="%WATWEB01.02.002";
PatientSTA="%WATWEB01.02.086.078";
PatientALT="%WATWEB01.02.084";
PatientSEX="%WATWEB01.02.019";
PatientDOB="%WATWEB01.02.020";
PatientAGE="%WATWEB01.02.021";
PatientLOC="%WATWEB01.02.083";
DoctorCOD="%WATWEB01.02.082.003";
DoctorNAM="%WATWEB01.02.082.002";
PatientAID="%WATWEB01.02.086.090";
PatientIND="%WATWEB01.02.086.091";
PatientCUR="%WATWEB01.02.086.092";
PatientCLC="%WATWEB01.02.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%WATWEB01.02.086.094";
PatientCDM="%WATWEB01.02.086.095";
PatientVDH="%WATWEB01.02.086.099.015";
PatientUNT="%WATWEB01.02.066.0";
PatientPRI="%WATWEB01.02.086.066.1";
InsertPatientHeader()
</script>

<div id=PatientMenu></div>
<table cellspacing=0 cellpadding=1 width=100% >
  <tr><td class=HeadingCell align=center>
          Waiting List Details - Event Number %WATWEB01.02.125</td>
  </tr>
</table>

<table cellspacing=0 cellpadding=1 width=95% align=center>
  <tr><td class=DataLabel width="20%">Status</td>
      <td class=DataField width="45%"><font color=red size=2>
                          %WATWEB01.02.108</font></td>
      <td class=DataLabel width="15%">Event Number</td>
      <td class=DataField>%WATWEB01.02.125</td></tr>

  <tr><td class=DataLabel>Referral Date</td>
      <td class=DataField>%WATWEB01.02.109</td>
      <td class=DataLabel>Days Since Certainty Given</td>
      <td class=DataField>%WATWEB01.02.192</td></tr>

  <tr><td class=DataLabel>Procedure Codes</td>
      <td class=DataField id="ProcCodes">&nbsp;</td>
      <td class=DataLabel>Days Not Ready for Care</td>
      <td class=DataField> %WATWEB01.02.163</td></tr>

  <tr><td class=DataLabel>Procedure</td>
      <td class=DataField id="d_ProcDesc1">&nbsp;</td>
      <td class=DataLabel>Preadmission Date</td>
      <td class=DataLabel><b>%WATWEB01.02.127</b> Time
         <class=DataField><b>%WATWEB01.02.528</b></td></tr>

  <tr><td class=DataLabel>&nbsp;</td>
      <td class=DataField id="d_ProcDesc2">&nbsp;</td>
      <td class=DataLabel>Pre-Anaesthetic Date</td>
      <td class=DataLabel><b>%WATWEB01.02.152</b> Time
         <class=DataField><b>%WATWEB01.02.531</b></td></tr>
</table>

<span id="dispProcDescHead" style="display:none">
  <table cellspacing="0" cellpadding="1" width="95%" align="center">
     <tr><td class="DataLabel" width="20%">&nbsp;</td>
         <td class="DataField" width="45%" id="d_ProcDesc3">&nbsp;</td>
         <td colspan="2">&nbsp;</td></tr>
  </table>
</span>

<table cellspacing="0" cellpadding="1" width="95%" align="center">
  <tr><td class=DataLabel width="20%">&nbsp;</td>
      <td class=DataField width="45%">%WATWEB01.02.106</td>
      <td class=DataLabel width="15%">Patient Confirmed</td>
      <td class=DataField>%WATWEB01.02.128</td></tr>
  
  <tr>
  	  <td class=DataLabel>Duration of Procedure</td>
      <td class=DataField>%WATWEB01.02.105</td>
      <td class=DataLabel>Proposed Operation Date</td>
	  <td class=DataLabel><b>%WATWEB01.02.135</b> Time
         <class=DataField><b>%WATWEB01.02.529</b></td>
	</tr>
	<tr>
	  <td class=DataLabel>%STANDARD.01.017.TP</td>
      <td class=DataField>%WATWEB01.02.117.0</td>
      
	  <td class=DataLabel>Scheduled Admission Date</td>
      <td class=DataLabel><b>%WATWEB01.02.706</b> Time
         <class=DataField><b>%WATWEB01.02.707</b></td></tr>

  <tr><td class=DataLabel>Score</td>
      <td class=DataField>%WATWEB01.02.157</td>
      <td class=DataLabel>Change Date</td>
      <td class=DataField>%WATWEB01.02.110</td></tr>

  <tr><td class=DataLabel>%STANDARD.01.017.X9</td>
      <td class=DataField>%WATWEB01.02.553.0</td>
      <td class=DataLabel>LBI</td>
      <td class=DataField>%WATWEB01.02.191</td></tr>

  <tr><td class=DataLabel>%STANDARD.01.017.P   </td>
      <td class=DataField>%WATWEB01.02.131.0</td>
      <td class="DataLabel">Booking Status</td>
      <td class="DataField">%WATWEB01.02.198</td></tr>

  <tr><td class=DataLabel>Admitting Point</td>
      <td class=DataField>%WATWEB01.02.506.0</td>
      <td class=DataLabel>FSA Referral Date</td>
      <td class=DataField>%WATWEB01.02.188</td></tr>

  <tr><td class=DataLabel>Expected Post Op Ward</td>
      <td class=DataField>%WATWEB01.02.505.0</td>
      <td class=DataLabel>FSA Date</td>
      <td class=DataField>%WATWEB01.02.189</td></tr>

  <tr><td class=DataLabel>Planned Length of Stay</td>
      <td class=DataField>%WATWEB01.02.116 Days</td>
      <td class=DataLabel>Pre-Anaesthetic Status</td>
      <td class=DataField>%WATWEB01.02.530.0</td></tr>

  <tr><td class=DataLabel>Consultant</td>
      <td class=DataField>
      <a href='javascript:DoctorViewFrame("%WATWEB01.02.115.003")'>
               %WATWEB01.02.115.002</a></td>
      <td class=DataLabel>%STANDARD.01.017.OA</td>
      <td class=DataField>%WATWEB01.02.533.0</td></tr>

  <tr><td class=DataLabel>Unit</td>
      <td class=DataField >%WATWEB01.02.114.0</td>
<!--	03 : DXC : Add Referral Number
      <td colspan=2>&nbsp;</td></tr>
-->
      <td class=DataLabel>Referral Number</td>
      <td class=DataField>%WATWEB01.02.380</td></tr>
<!-- End of Change -->

  <tr><td class=DataLabel>%WATWEB01.02.187.8</td>
      <td class=DataField>%WATWEB01.02.187.0</td>
      <td colspan=2>&nbsp;</td></tr>

  <tr><td class=DataLabel>%STANDARD.01.017.CL</td>
      <td class=DataField>%WATWEB01.02.526.0</td>
      <td colspan=2>&nbsp;</td></tr>

  <tr><td class=DataLabel>Certainty Date</td>
      <td class=DataField>%WATWEB01.02.132</td>
      <td colspan=2>&nbsp;</td></tr>

  <tr><td class=DataLabel>Purchaser</td>
      <td class=DataField>%WATWEB01.02.190.0</td>
      <td colspan=2>&nbsp;</td></tr>

  <tr><td class=DataLabel>Assessor</td>
      <td class=DataField>%WATWEB01.02.197.0</td></tr>

  <tr><td colspan=4><hr /></td></tr>

  <tr valign=top>
      <td class=DataLabel>Comments</td>
      <td class=DataField colspan=3><pre>%WATWEB01.02.161</pre></td></tr>

  <tr><td colspan=4><hr /></td></tr>

  <tr><td class=DataLabel>Preadmission Notes</td>
      <td class=DataField colspan=3>%WATWEB01.02.172</td></tr>

  <tr><td class=DataLabel>Date Keyed</td>
      <td class=DataField colspan=3>%WATWEB01.02.126</td></tr>
</table>

<table cellspacing=0 cellpadding=1 width=100%>
  <tr><td align=center>
      <input type=button class="button" value="Summary"
             onclick='PatientLinkTo("watweb01.pbl",2,10,0,0,0);' />
      <input type=button class="button" value="Update"
             onclick='PatientLinkTo("watweb01.pbl",2,3,0,0,0);' />
      <input type=button class="button" value="History"
             onclick='PatientLinkTo("watweb01.pbl",2,6,0,0,0);' />
      <input type=button class="button" value="Letters"
             onclick='PatientLinkTo("watweb01.pbl",2,5,1,750,400);' />
      <input type=button class="button" value="Remove"
             onclick='CallRemove();' />
      <input type=button class="button" value="Suspend"
             onclick='CallSus();' />
       <input type=button class="button" value="Booking"
             name="TheButton" id="TheButton" onclick='CallBooking();' />
       <input type=button class="button" value="Med Booking"
              name="MedButton" id="MedButton" onclick='MedBooking();' />
       <input type=button class="button" value="NBRS History"
              onclick='PatientLinkTo("watweb04.pbl",1,1,0,0,0);' />
       <input type=button class="button" value="PAC Appt"
              name="PacButton" id="PacButton" onclick='PacBooking();' />
       <input type=button class="button" value="PAS Appt"
              name="PasButton" id="PasButton" onclick='PasBooking();' /></td></tr>
</table>

<form name=PatientLinks method=get>
  <input type=hidden name=reportno value=1 />
  <input type=hidden name=template value=004 />
  <input type=hidden name=urnumber value="%WATWEB01.02.003" />
  <input type=hidden name=admissno value="%WATWEB01.02.125" />
  <input type=hidden name=MenuType value="%WATWEB01.02.088" />
  <input type=hidden name=casekeys value="%WATWEB01.02.101" />
  <input type=hidden name=wattrkey value="%WATWEB01.02.101" />
  <input type=hidden name=sesskeys value="" />
  <input type=hidden name=BookingStatus value="%WATWEB01.02.175" />
  <input type=hidden name=batchnum value="%WATWEB01.02.618"/>
  <input type=hidden name=BookingType value="%WATWEB01.02.199.007" />
  <!-- TAS : 04 : Task 0845727 add below values-->
  <input type=hidden name=suspstrtdate value="%WATWEB01.02.199.008.1"/>
  <input type=hidden name=suspenddate value="%WATWEB01.02.199.008.2"/>
  <input type=hidden name=listingstat value="%WATWEB01.02.199.008.3"/>
  <input type=hidden name=reason value="%WATWEB01.02.199.008.4"/>
  <!-- End Change -->
</form>

<form name=LinkForm method=get action=oprweb01.pbl />
  <input type=hidden name=reportno value=09 />
  <input type=hidden name=template value=002 />
  <input type=hidden name=urnumber value="%WATWEB01.02.003" />
  <input type=hidden name=admissno value="%WATWEB01.02.081" />
  <input type=hidden name=wattrkey value="%WATWEB01.02.101" />
  <input type=hidden name=MenuType value="%WATWEB01.02.088" />
  <input type=hidden name=casekeys value="%WATWEB01.02.101" />
  <input type=hidden name=sesskeys value="%WATWEB01.02.801" />
  <input type=hidden name=TheatreKey value="%WATWEB01.02.801" />
  <input type=hidden name=BookingStatus value="%WATWEB01.02.175" />
  <input type=hidden name=Stat value="%WATWEB01.02.108" />
  <input type=hidden name=datelist value="%WATWEB01.02.323" />
  <input type=hidden name=rfcstats value=%WATWEB01.02.614 />
</form>

<form name=ProcDescsForm />
  <input type=hidden name=proccde1 id=proccde1 value=%WATWEB01.02.103 />
  <input type=hidden name=procdsc1 id=procdsc1 value="" />
  
<!-- 01 : CTAS : add hidden fields for procedure descriptions -->

  <input type=hidden name=proccde2 id=proccde2 value="%WATWEB01.02.150.0" />
  <input type=hidden name=proccde3 id=proccde3 value="%WATWEB01.02.151.0" />
  <input type=hidden name=procdsc2 id=procdsc2 value="" />
  <input type=hidden name=procdsc3 id=procdsc3 value="" />
<!-- end of change -->  
</form>

<form name=PacForm method=get action=outweb02.pbl />
  <input type=hidden name=reportno value=05 />
  <input type=hidden name=template value=002 />
  <input type=hidden name=urnumber value="%WATWEB01.02.003" />
  <input type=hidden name=admissno value="%WATWEB01.02.081" />
  <input type=hidden name=waitlkey value="%WATWEB01.02.101" />
  <input type=hidden name=waitflag value="1" />
  <input type=hidden name=MenuType value="%WATWEB01.02.088" />
</form>

<form name=PasForm method=get action=outweb02.pbl />
  <input type=hidden name=reportno value=05 />
  <input type=hidden name=template value=002 />
  <input type=hidden name=urnumber value="%WATWEB01.02.003" />
  <input type=hidden name=admissno value="%WATWEB01.02.081" />
  <input type=hidden name=waitlkey value="%WATWEB01.02.101" />
  <input type=hidden name=waitflag value="2" />
  <input type=hidden name=MenuType value="%WATWEB01.02.088" />
</form>

<form name=MedForm method=get action=watweb01.pbl>
  <input type=hidden name=reportno value=02 />
  <input type=hidden name=template value=201 />
  <input type=hidden name=urnumber value="%WATWEB01.02.003" />
  <input type=hidden name=admissno value="%WATWEB01.02.081" />
  <input type=hidden name=waitlkey value="%WATWEB01.02.101" />
  <input type=hidden name=waitflag value="1" />
  <input type=hidden name=MenuType value="%WATWEB01.02.088" />
  <input type=hidden name=casekeys value="%WATWEB01.02.101" />
</form>

<script type="text/javascript">
  ListStat="%WATWEB01.02.175";
  PreAdmStat="%WATWEB01.02.326";
  PreAnaesStat="%WATWEB01.02.331";
  if (ListStat == "5"|| ListStat == "6") {
       PacButton.disabled=true;
       PasButton.disabled=true;
  } else {
      if (PreAdmStat == "0") {
          PacButton.disabled=true;
      } else {
          PacButton.disabled=false;
      }
      if (PreAnaesStat == "0") {
          PasButton.disabled=true;
      } else {
          PasButton.disabled=false;
      }
  }
function concatProcCodes() {
  var ProcCode1="%WATWEB01.02.103";
  var ProcCode2="%WATWEB01.02.150.0";
  var ProcCode3="%WATWEB01.02.151.0";
  if (!isWhitespace(ProcCode2)) {
      ProcCode1 += "&nbsp;:&nbsp; " + ProcCode2;
  } else {
     if (!isWhitespace(ProcCode3)) {
        ProcCode1 += "&nbsp;:&nbsp;";
     }
  }
  if (!isWhitespace(ProcCode3)) {
      ProcCode1 += "&nbsp;:&nbsp; " + ProcCode3;
  }
  return ProcCode1;
}

// 01 : CTAS : modify valProc() to validate ICD10 descriptions
/*
function setProcDescs() {
  valProc(ProcDescsForm.proccde1,ProcDescsForm.procdsc1);
  if (!isWhitespace(ProcDescsForm.procdsc1.value)) {
      ProcDesc1 = ProcDescsForm.procdsc1.value.replace(/^\s+|\s+$/g, "");
      document.getElementById('d_ProcDesc1').innerHTML = ProcDesc1;
  }
  var ProcDesc2="%WATWEB01.02.150.1";
  if (!isWhitespace(ProcDesc2)) {
      ProcDesc2 = ProcDesc2.replace(/^\s+|\s+$/g, "");
      document.getElementById('d_ProcDesc2').innerHTML = ProcDesc2;
  }
  var ProcDesc3="%WATWEB01.02.151.1";
  if (!isWhitespace(ProcDesc3)) {
      ProcDesc3 = ProcDesc3.replace(/^\s+|\s+$/g, "");
      dispProcDescHead.style.display='';
      document.getElementById('d_ProcDesc3').innerHTML = ProcDesc3;
  }
}
function valProc(thefield,thedesc) {
   validateCode(27,thefield,thedesc,"");
}
*/
function setProcDescs() {
  valProc(ProcDescsForm.proccde1,ProcDescsForm.procdsc1);
  valProc(ProcDescsForm.proccde2,ProcDescsForm.procdsc2);
  valProc(ProcDescsForm.proccde3,ProcDescsForm.procdsc3);
  
 if (!isWhitespace(ProcDescsForm.procdsc1.value)) {
      ProcDesc1 = ProcDescsForm.procdsc1.value.replace(/^\s+|\s+$/g, "");
      document.getElementById('d_ProcDesc1').innerHTML = ProcDesc1;
  }
  
  if (!isWhitespace(ProcDescsForm.procdsc2.value)) {
      ProcDesc2 = ProcDescsForm.procdsc2.value.replace(/^\s+|\s+$/g, "");
      document.getElementById('d_ProcDesc2').innerHTML = ProcDesc2;
  }
  
  if (!isWhitespace(ProcDescsForm.procdsc3.value)) {
      ProcDesc3 = ProcDescsForm.procdsc3.value.replace(/^\s+|\s+$/g, "");
      dispProcDescHead.style.display='';
      document.getElementById('d_ProcDesc3').innerHTML = ProcDesc3;
  }
}

function valProc(thefield,thedesc) {
   validateCode(7,thefield,thedesc);
}
// end of change

</script>
