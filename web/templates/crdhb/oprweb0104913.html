<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="crdhb">
<meta name="HelpFileName"    content="NoContextSet.html">
<script type="text/javascript">
function Rebooking() {
 if(RebookForm.casekeys.value.substr(22,1)!=3) {
   alert("Booking will be reinstated if Patient has Cancelled status");
   return;
  }
 RebookForm.submit();
}

function RecoveryDetails() {
  PatientLinks.teamnumb.value = document.all.thteamno.value;
  PatientLinkTo("oprweb06.pbl",10,1,0,0,0);
}

function TeamDetails() {
  PatientLinks.teamnumb.value = document.all.thteamno.value;
  PatientLinkTo("oprweb01.pbl",04,13,0,0,0);
}
function UnusagePatSess() {
  if (confirm("Do you want to cancel the above Usage record.")) {
    UsageForm.redirect.value="oprweb01.pbl?reportno=4&template=013&casekeys="
                             + UsageForm.casekeys.value;
    UsageForm.submit();
  }
}

// 01 : CTAS : add openTourniquet function to open Tourniquet in popup
function openTourniquet() {
    linkurl="oprweb06.pbl?reportno=9&template=001"
		+ "&urnumber="+PatientLinks.urnumber.value.replace(/ /g,"+")
		+ "&admissno="+PatientLinks.admissno.value.replace(/ /g,"+")
		+ "&casekeys="+PatientLinks.casekeys.value;
    Left=(document.body.clientWidth-950)/2
    DFrameLink(linkurl,100,Left,900,350)
}
// end of change

// 01 : CTAS : New validation for PACU, DSU, Unplanned Return buttons
// 02 : CTAS : Allow validation bypass if case is abandoned.
function checkTheatreFields() {

	var surgstart = document.PatientLinks.surgstart.value;
	var surgend = document.PatientLinks.surgend.value;
	var ptlefttheatre = document.PatientLinks.ptlefttheatre.value;
	var opsrg010 = document.PatientLinks.opsrg010.value;
	var origproc = document.PatientLinks.origproc.value;
	var caseabdn = document.PatientLinks.opsrg074.value;

	if((!trim(surgstart) || !trim(surgend) || !trim(ptlefttheatre) || 
		!trim(opsrg010) || !trim(origproc)) && (caseabdn != "Yes"))  {
		alert("Please populate/review the values in Theatre.\n"  +
				"1. Surgery Start - " + checkField(surgstart) + "\n" +
				"2. Surgery End - " + checkField(surgend) + "\n" +
				"3. Patient Left Theatre - " + checkField(ptlefttheatre) + "\n" +
				"4. Patient Transferred To - " + checkField(opsrg010) + "\n" +
				"5. Original Procedure done - " + checkField(origproc) +
		"");
		
		return false;
	}
	return true;
}

function checkField(field) {
	if(!trim(field)) {
		return "Required";
	} else {
		return field;
	}
}

function PACU() {
	if(checkTheatreFields()) {
		PatientLinkTo("oprweb06.pbl",10,901,1,950,300);
	}
}

function DSUPostOp() {
	if(checkTheatreFields()) {
		PatientLinkTo("oprweb06.pbl",10,902,1,950,300);
	}
}
// end of change
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%OPRWEB01.04.003";
PatientVIS="%OPRWEB01.04.081";
PatientNAM="%OPRWEB01.04.002";
PatientSTA="%OPRWEB01.04.086.078";
PatientALT="%OPRWEB01.04.084";
PatientSEX="%OPRWEB01.04.019";
PatientDOB="%OPRWEB01.04.020";
PatientAGE="%OPRWEB01.04.021";
PatientLOC="%OPRWEB01.04.083";
PatientPRI="%OPRWEB01.04.086.066.1";
PatientUNT="%OPRWEB01.04.066.0";
DoctorCOD="%OPRWEB01.04.082.003";
DoctorNAM="%OPRWEB01.04.082.002";
PatientAID="%OPRWEB01.04.086.090";
PatientIND="%OPRWEB01.04.086.091";
PatientCUR="%OPRWEB01.04.086.092";
PatientCLC="%OPRWEB01.04.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%OPRWEB01.04.086.094";
PatientCDM="%OPRWEB01.04.086.095";
PatientVDH="%OPRWEB01.04.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>
<table border=1 width=100% cellspacing=0>
<tr><td>
<table border="0" cellpadding="2" cellspacing="0" width="100%" >
<tr><td colspan=4 align=center class=HeadingCell>
    Supervisor Corrections</td>
<td class=HeadingCell align=right><font color=red>
      %OPRWEB01.04.601</font></td></tr>

<tr><td width=15% class=DataLabel>Team No. </td>
    <td class=DataField>
      <select name=thteamno title="Theatre Team" class=Mandatory
       onchange="TeamDetails();">
       %OPRWEB01.04.148
      </select></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td></tr>


<tr><td width=15% class=DataLabel>Consultant   </td>
    <td class=DataField>
    <a href='javascript:DoctorViewFrame("%OPRWEB01.04.304.003")'>
    %OPRWEB01.04.304.002 </a></td>
    <td class=DataLabel>Operating Surgeon</td>
    <td class=DataField>
    <a href='javascript:DoctorViewFrame("%OPRWEB01.04.604.003")'>
    %OPRWEB01.04.604.002 </a></td></tr>
<tr><td width=15% class=DataLabel>Anaesthetist   </td>
    <td class=DataField>
    <a href='javascript:DoctorViewFrame("%OPRWEB01.04.316.003")'>
    %OPRWEB01.04.316.002 </a></td></tr>
<tr><td class=DataLabel>Unit</td>
    <td class=DataField>%OPRWEB01.04.313.0 </td>
    <td class=DataLabel>Session Type</td>
    <td class=DataField>%OPRWEB01.04.369.0</td>
<tr><td class=DataLabel>Theatre</td>
    <td class=DataField>%OPRWEB01.04.314.0</td>
    <td class=DataLabel>Actual Theatre</td>
    <td class=DataField>%OPRWEB01.04.130</td>
<tr><td class=DataLabel>Date </td>
    <td class=DataField>%OPRWEB01.04.306 %OPRWEB01.04.302</td>
    <td class=DataLabel>Time </td>
    <td class=DataField>%OPRWEB01.04.303 to %OPRWEB01.04.308 </td>
<tr><td class=DataLabel>Time Called For</td>
    <td class=DataField>%OPRWEB01.04.439</td>
    <td class=DataLabel>Recovery Front</td>
    <td class=DataField>%OPRWEB01.04.471</td>
<tr><td class=DataLabel>Time Arrived </td>
    <td class=DataField><font color=green>%OPRWEB01.04.402</td>
    <td class=DataLabel>Recovery Back</td>
    <td class=DataField><font color=green>%OPRWEB01.04.474</td></tr>
<tr><td class=DataLabel>Anaesthetic Prep </td>
    <td class=DataField>%OPRWEB01.04.441 </td>
    <td class=DataLabel>Recovery Day Procedure</td>
    <td class=DataField>%OPRWEB01.04.477</td>
<tr><td class=DataLabel>Anaesthetic Comm.</td>
    <td class=DataField><font color=green>%OPRWEB01.04.442 </td>
    <td class=DataLabel>Ready to Depart</td>
    <td class=DataField><font color=green>%OPRWEB01.04.485</td>
<tr><td class=DataLabel>Prep Start Time</td>
    <td class=DataField>%OPRWEB01.04.703 </td>
    <td class=DataLabel>Exit Theatre Complex</td>
    <td class=DataField>%OPRWEB01.04.480</td></tr>
<tr><td class=DataLabel>Surgery Start Time</td>
    <td class=DataField><font color=green>%OPRWEB01.04.705 </td>
    <td class=DataLabel>Time to ICU</td>
    <td class=DataField><font color=green>%OPRWEB01.04.483</td>
<tr><td class=DataLabel>Surgery End Time  </td>
    <td class=DataField>%OPRWEB01.04.706 </td>
    <td class=DataLabel>Time of Death</td>
    <td class=DataField>%OPRWEB01.04.482</td></tr>
<tr><td class=DataLabel>Time Dressing</td>
    <td class=DataField><font color=green>%OPRWEB01.04.704 </td></tr>
</table>
</td></tr>
</table>


<!-- 01 : CTAS : change button labels and targets to workflow screens
<table border="0" cellpadding="0" cellspacing="0" width="100%" >
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td width=15%></td>
	<input type=button value="Arrival" class="button"
      onclick=PatientLinkTo("oprweb01.pbl",4,3,1,650,280)></td>
     <td><input type=button value="Anaesthetic" class="button"
      onclick=PatientLinkTo("oprweb01.pbl",4,4,1,650,280)></td>
     <td><input type=button value="Surgery" class="button"
      onclick=PatientLinkTo("oprweb06.pbl",1,1,0,0,0)></td>
-->
<table border="0" cellpadding="0" cellspacing="0" width="100%" >
<tr><td colspan=8>&nbsp;</td></tr>
<tr><td width=2%></td>
	<td><input type=button value="Peri-Operative Details" class=bigbutton
		onclick='PatientLinkTo("oprweb01.pbl",4,1,0,0,0)'></td>
	<td><input type=button value="Check In" class="button"
      onclick=PatientLinkTo("oprweb01.pbl",4,3,1,650,280)></td>
     <td><input type=button value="Patient Into Theatre" class="bigbutton"
      onclick=PatientLinkTo("oprweb01.pbl",4,4,1,650,280)></td>
     <td><input type=button value="Theatre" class="button"
      onclick=PatientLinkTo("oprweb06.pbl",1,1,1,950,450)></td>
<!-- end of change -->
     <td><input type=button value="Other Theatre" class="button"
      onclick=PatientLinkTo("oprweb06.pbl",8,1,0,0,0)></td>
     <td><input type=button value="Un-Usage" class="button"
      onclick='UnusagePatSess();'></td>
<!-- 01 : CTAS : add staff details button -->
     <td><input type=button value="Staff Details" class="button"
      onclick='PatientLinkTo("oprweb06.pbl",1,901,0,0,0);'></td>
<!-- end of change -->
</tr>

<!-- 01 : CTAS : change button labels and targets to workflow screens
<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td width=15%></td><td><input type=button value="Tourniquet" class="button"
      onclick=PatientLinkTo("oprweb06.pbl",9,1,0,0,0)></td>
     <td><input type=button value="Recovery" class="button"
      onclick="RecoveryDetails();"></td>
-->
<tr><td colspan=8>&nbsp;</td></tr>
<tr><td colspan=2></td>

<!-- 01 : CTAS : modify Tourniquet button to call openTourniquet on click
	<td><input type=button value="Tourniquet" class="button"
      onclick=PatientLinkTo("oprweb06.pbl",9,1,0,0,0)></td>
-->
	<td><input type=button value="Tourniquet" class="button"
      onclick="openTourniquet();"></td>
<!-- end of change -->
	  <!-- 01 : CTAS : Call function for PACU and DSU-Post-Op 
     <td><input type=button value="PACU" class="button"
      onclick=PatientLinkTo("oprweb06.pbl",10,901,1,950,300)>
	  &nbsp;&nbsp;
	  <input type=button value="DSU Post-Op" class="button"
      onclick=PatientLinkTo("oprweb06.pbl",10,902,1,950,300)></td>
	  -->	
	  <td><input type=button value="PACU" class="button"
      onclick="PACU();">
	  &nbsp;&nbsp;
	  <input type=button value="DSU Post-Op" class="button"
      onclick="DSUPostOp();"></td>
	  <!-- end of change
<!-- end of change -->
  <!--     onclick=PatientLinkTo("oprweb06.pbl",10,1,0,0,0)></td> -->
     <td><input type=button value="Change Theatre" class="button"
      onclick=PatientLinkTo("oprweb01.pbl",4,14,1,350,180)></td>
     <td><input type=button value="Reinstate Booking" class="button"
      onclick=Rebooking();></td></td>
     <td><input type=button value="Change UR" class="button"
      onclick=PatientLinkTo("patweb98.pbl",1,41,1,350,380)></td>
     <td><input type=button value="Merge Booking" class="button"
      onclick=PatientLinkTo("oprweb01.pbl",4,21,1,750,400)></td></tr>
</table>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%OPRWEB01.04.003">
<input type=hidden name=admissno value="%OPRWEB01.04.081">
<input type=hidden name=casekeys value="%OPRWEB01.04.101">
<input type=hidden name=MenuType value="%OPRWEB01.04.088">
<input type=hidden name=suprlevl value="S">
<input type=hidden name=teamnumb value="1">
<!-- 01 : CTAS : Add additional values -->
<input type=hidden name=surgstart value="%OPRWEB01.04.705">
<input type=hidden name=surgend value="%OPRWEB01.04.706">
<input type=hidden name=ptlefttheatre value="%OPRWEB01.04.783">
<input type=hidden name=opsrg010 value="%OPRWEB01.04.710.0">
<input type=hidden name=origproc value="%OPRWEB01.04.776">
<!-- 02 : CTAS : Add case abandoned variable -->
<input type=hidden name=opsrg074 value="%OPRWEB01.04.774">
<!-- end of change -->
</form>
<form name=RebookForm method=post action="oprweb01.pbl">
<input type=hidden name=reportno value=18>
<input type=hidden name=casekeys value="%OPRWEB01.04.101">
<input type=hidden name=urnumber value="%OPRWEB01.04.003">
<input type=hidden name=admissno value="%OPRWEB01.04.081">
<input type=hidden name=nextpage value="1">
</form>
<form name=UsageForm method=post action="oprweb01.pbl">
<input type=hidden name=reportno value=5>
<input type=hidden name=casekeys value="%OPRWEB01.04.101">
<input type=hidden name=urnumber value="%OPRWEB01.04.003">
<input type=hidden name=admissno value="%OPRWEB01.04.081">
<input type=hidden name=updttype value="R">
<input type=hidden name=nextpage value="1">
<input type=hidden name=redirect value="oprweb01.pbl?reportno=4&template=013">
</form>
