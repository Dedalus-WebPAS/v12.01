<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="crdhb">
<meta name="HelpFileName"    content="NoContextSet.html">
<script type="text/javascript" src="../js/patweb90.js"></script>
<script type="text/javascript">
function SetSearch() {
  if(document.search.urnumber.value!="") {
    search.action="emrweb02.pbl"
    search.reportno.value="02"
    search.template.value="002"
  }
}
function ProcessSubmit() {
  search.srchsnam.value.replace(/\'/g,"~")
  setUR("emrweb02.pbl","02","002");
  checkDate(search.srchpdob,'Date of Birth');
  setBirth(search.srchpdob);
//  setMedicare(search.srchmedi);
}
// 01 : CTAS : Overloaded checkType() from patweb90.jsp
// assumption - search type up to 4 values only
function checkType() {
  if(document.search.srchtype.value==3) {
    document.search.action="patweb90.pbl";
    document.search.reportno.value="01";
    document.search.urnumber.value="";
    document.search.srchsnam.disabled=1;
    document.search.srchgnam.disabled=1;
    document.search.srchpsex[0].disabled=1;
    document.search.srchpsex[1].disabled=1;
    document.search.srchpsex[2].disabled=1;
    document.search.srchpdob.disabled=0;
    document.search.srchpage.disabled=1;
    document.search.srcharan.disabled=1;
    document.search.srchpdob.focus();
  }
  else if(document.search.srchtype.value==4) {
         document.search.action="patweb98.pbl";
         document.search.reportno.value="01";
         document.search.srchsnam.disabled=1;
         document.search.srchsnam.value="";
         document.search.srchgnam.disabled=1;
         document.search.srchgnam.value="";
         document.search.srchpsex[0].disabled=1;
         document.search.srchpsex[1].disabled=1;
         document.search.srchpsex[2].disabled=1;
         document.search.srchpdob.disabled=1;
         document.search.srchpdob.value="";
         document.search.srchpage.disabled=1;
         document.search.srchpage.value="";
         document.search.srcharan.disabled=1;
         document.search.srcharan.value="";
         document.search.urnumber.disabled=0;
         document.search.urnumber.focus();
         }
 else if(document.search.srchtype.value==5) {
          document.search.action="patweb90.pbl";
          document.search.reportno.value="01";
          document.search.urnumber.value="";
          document.search.srchsnam.disabled=0;
          document.search.srchgnam.disabled=0;
          document.search.srchpsex[0].disabled=0;
          document.search.srchpsex[1].disabled=0;
          document.search.srchpsex[2].disabled=0;
          document.search.srchpage.disabled=0;
          document.search.srchpdob.disabled=0;
          document.search.srcharan.disabled=0;
          document.search.srchmedi.disabled=0;
          document.search.srchmedi.focus();
          }
        else if(document.search.srchtype.value==7) {
          document.search.admissno.focus();
        }
  // add for sound-ex st
   else if(document.search.srchtype.value==2) {
         document.search.action="patweb90.pbl";
        document.search.reportno.value="01";
        document.search.urnumber.value="";
        document.search.srchsnam.disabled=0;
        document.search.srchgnam.disabled=0;
        document.search.srchpsex[0].disabled=0;
        document.search.srchpsex[1].disabled=0;
        document.search.srchpsex[2].disabled=0;
        document.search.srchpage.disabled=0;
        document.search.srchpdob.disabled=0;
        document.search.srcharan.disabled=0;
		document.search.urnumber.focus();
          }
  // add for sound-ex en
  else {
        document.search.action="patweb90.pbl";
        document.search.reportno.value="01";
        document.search.urnumber.value="";
        document.search.srchsnam.disabled=0;
        document.search.srchgnam.disabled=0;
        document.search.srchpsex[0].disabled=0;
        document.search.srchpsex[1].disabled=0;
        document.search.srchpsex[2].disabled=0;
        document.search.srchpage.disabled=0;
        document.search.srchpdob.disabled=0;
        document.search.srcharan.disabled=0;
		document.search.srchsnam.focus();
        }
}
// end of change
</script>
</head>
%START.OF.PAGE
<body onload=PageLoad(event);setUR();checkType();>
<table align="center" width=100% border=1 
 cellspacing=0 cellpadding=1 bgcolor=#CCCCCC>

 <form name=nhisrch method=get action=nhiweb96.pbl
  onsubmit='return validateMandatory(this)'>
 <input type=hidden name=reportno value=1>
<!--  <input type=hidden name=template value=001>   replaced for EMR  -->
 <input type=hidden name=template value=011>
 <input type=hidden name=norecord value=10>
 <input type=hidden name=nzsrh001 value=0>
 <input type=hidden name=nzsrh002 value="">
 <input type=hidden name=nzsrh003 value="">
 <input type=hidden name=nzsrh004 value="">
 <input type=hidden name=nzsrh005 value="">
 <input type=hidden name=nzsrh006 value="">
 <input type=hidden name=nzsrh007 value="">
 <input type=hidden name=nzsrh008 value="">
 <input type=hidden name=nzsrh009 value="">
 </form>

<form name=Registration method=post action=emrweb02.pbl>
<input type=hidden name=reportno value=02>
<input type=hidden name=template value=005>
<input type=hidden name=srchsnam value="">
<input type=hidden name=srchgnam value="">
<input type=hidden name=srchpdob value="">
<input type=hidden name=srchpage value="">
<input type=hidden name=srchpsex value="">
</form>
<tr><td>
   <form name=search method=get action=patweb90.pbl onsubmit="ProcessSubmit();">
   <input type=hidden name=reportno value="1">
   <input type=hidden name=template value="004">
   <input type=hidden name=norecord value="%PATWEB90.01.032">
   <table width=100% border=0 cellpadding=0 cellspacing=0 bgcolor=#CCCCCC>
   <tr><td class=HeadingCell align=center colspan=6>
       Emergency Registration Patient Search</td></tr>
   <tr><td class=DataLabel>U/R Number<br>
       <input type=text name=urnumber onblur="setUR()" size=10
        maxlength=8></td>
       <td class=DataLabel>Surname<br>
       <input type=text name=srchsnam onblur="UpCaseSearch(this)" size=15></td>
       <td class=DataLabel colspan=2>Given Name<br>
       <input type=text name=srchgnam onblur="UpCaseSearch(this)" size=15></td>
       <td rowspan=2>
         <input type=radio name=srchpsex value=" " checked> All <br>
         <input type=radio name=srchpsex value="M"> Male <br>
         <input type=radio name=srchpsex value="F"> Female</td>
       <td align=center valign=middle rowspan=2>

    <input type=button value="NHI Search" class="button"
      onClick="nhiSearch()"><br>

         <input type=submit value=Search class="button"><br>
         <input type=reset value="Reset" class="button"></td></tr>
   <tr><td class=DataLabel>Date of Birth<br>
           <input type="text" size="12" name="srchpdob"
           onblur="checkDate(this,'Date of Birth')" >
        <img src=../images/DateLookup.gif border=0 hspace=4 align=absmiddle
        onclick="DateLookupFrame(srchpdob);">
       </td>
       <td class=DataLabel>Age<br>
           <input type=text name=srchpage size=4 ></td>
       <td class=DataLabel>Range<br>
           <select name=srcharan > 
            <option value=2 selected>2 years</option>
            <option value=4>4 years</option>
            <option value=6>6 years</option>
            <option value=8>8 years</option>
            <option value=10>10 years</option>
           </select></td>
       <td class=DataLabel>Search Type<br>
           <select name=srchtype onchange="checkType()">
           <option value=1>Surname</option>
           <option value=2>Sound-Ex</option>
           <option value=3>Date of Birth</option>
           <option value=4>U/R Number</option>
           </select></td></tr>
   </table>

%PATWEB90.01.010.300.0.0.emrweb02.02.002

<table width=100% border=1 cellspacing=0 cellpadding=0>
<tr><td>
<table width=100% bgcolor=#CCCCCC>
  <tr><td align=center>
  <input type=button value="<< Previous" class="button"
   onClick='location.href="%PATWEB90.01.002.004"'></td>
  <td align=center width=20%>
  <div id=RegOption></div>
  </td>
  <td align=center colspan=2>
  <input type=button value="Next >>" class="button"
   onclick='location.href="%PATWEB90.01.001.004"'></td></tr>
</table>
</td></tr>
</table>
</td></tr>
</table>
</form>
<!--
<div id=YesReg style="display:none">
  <input type=button value="New Registration" class="button"
  onClick="newRegistration()">
</div>
-->
<script type="text/javascript">
   document.search.srchsnam.value="%PATWEB90.01.003";
   document.search.srchgnam.value="%PATWEB90.01.004";
   document.search.srchpage.value="%PATWEB90.01.006";
   document.search.srchpdob.value="%PATWEB90.01.007";
   for (var i =0 ; i < document.search.srcharan.length; i++) {
     if (document.search.srcharan.options[i].value==trim("%PATWEB90.01.008")) {
         document.search.srcharan.selectedIndex=i } };
   for (var i =0 ; i < document.search.srchtype.length; i++) {
     if (document.search.srchtype.options[i].value=="%PATWEB90.01.009.2") {
         document.search.srchtype.selectedIndex=i } };
   for (var i =0 ; i < document.search.srchpsex.length; i++) {
     if (document.search.srchpsex[i].value=="%PATWEB90.01.005") {
         document.search.srchpsex[i].checked="1" } };
   if (isWhitespace(document.search.srchsnam.value)) {
     RegOption.innerHTML=""; } 
//   else {
//     RegOption.innerHTML=YesReg.innerHTML; } 
  
function nhiSearch() {
  document.nhisrch.nzsrh003.value=document.search.srchtype.value;
  document.nhisrch.nzsrh004.value=document.search.srchsnam.value;
  document.nhisrch.nzsrh005.value=document.search.srchgnam.value;
  document.nhisrch.nzsrh006.value=document.search.srchpdob.value;
  document.nhisrch.nzsrh007.value=document.search.srchpage.value;
  document.nhisrch.nzsrh008.value=document.search.srcharan.value;
  for (var i =0 ; i < document.search.srchpsex.length; i++) {
    if (document.search.srchpsex[i].checked=="1" ) {
      document.nhisrch.nzsrh009.value=document.search.srchpsex[i].value;
    }
  }
  document.nhisrch.submit();
}
</script>
