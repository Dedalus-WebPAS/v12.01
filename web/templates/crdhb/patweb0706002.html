<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="crdhb">
<meta name="HelpFileName"    content="NoContextSet.html">
<link rel="stylesheet" href="../html/postcode.css" type="text/css">
<script type="text/javascript" src=../js/IBA_Category_C_.js></script>
<script type="text/javascript" src=../js/patweb0706.js></script>
<!-- 01 : CTAS : added link to CTAS custom javascript file -->
<script type="text/javascript" src="../js/ctascustom.js"></script>
<!-- end of change -->
<script  type="text/javascript">
// 04 : Stop copy of post code value
function defaultValues(){
  p=document.AddForm;
  p.pmcex007.value=trim(p.padd1.value);
  p.pmcex008.value=trim(p.padd2.value);
  p.pmcex009.value=trim(p.padd3.value);
  p.pmcex010.value=trim(p.padd4.value);
//p.pmcex011.value=trim(p.ppost.value);
  p.pmcex012.value=trim(p.ptelep.value);
}

function SubmitAddContact() {
  p=document.AddForm
  p.pmcex017.value="0";
  if(p.d_pmcex017.checked==true){
    p.pmcex017.value="1";
  }
  p.pmcex018.value="0";
  if(p.d_pmcex018.checked==true){
    p.pmcex018.value="1";
  }
  
  SetSendSMS();
  ValidateContactTypeAdd(p.pmcex001,p.pmcex002,p.pmcex018,PostAddContact);
}

function PostAddContact() {
  SubmitHidden(AddForm);
}
function showSendSmsDet() {
  if(document.getElementById("ptcnsmsn").value == "1") {
    document.getElementById("ssmslabel").innerHTML="Send SMS";
    if(document.getElementById('pmcex026').value=="1") {
      document.getElementById('d_pmcex026').checked=true;
    }
    mobPhoneField.innerHTML = mobPhoneSendSms.innerHTML;
  }
  else {
    document.getElementById("ssmsfield").innerHTML="";
    mobPhoneField.innerHTML = mobPhoneNoSendSms.innerHTML;
  }
}
function SetSendSMS() {
  if(document.getElementById("ptcnsmsn").value == "1") {
    if(document.getElementById('d_pmcex026').checked==true) {
      document.getElementById('pmcex026').value="1";
    } else {
      document.getElementById('pmcex026').value="0";
    }
  }
}
function MobSMS() {
  var checkbox = document.getElementById('d_pmcex026');
  if (checkbox && (checkbox.checked==true)) {
    document.AddForm.pmcex014.className="Mandatory";
  } else {
    document.AddForm.pmcex014.className="";
  }
}
// TAS : 04 : CWSNM-77 Make suburb and post code non-mandatory
//Overloaded from patweb0706.js

function ContactMandatory(theForm) {
  var type=theForm.pmcex002.value.substr(3,1);
  var userHosp = GetCookieData("IBAUserHosp");
//
  if(type=="1" || type=="C" || type=="3" || type=="9" || 
     type=="8" || type=="6") {
// TAS : 06 : Remove mandatory class assignment for title.
     theForm.pmcex004.className="";          // Title
     theForm.pmcex004.disabled=false;                
     theForm.pmcex005.className="Mandatory";          // Surname
     theForm.pmcex005.disabled=false;                
     theForm.pmcex006.className="Mandatory";          // Given
     theForm.pmcex006.disabled=false;                
     theForm.pmcex019.className="";                   // Given 2
     theForm.pmcex019.disabled=false;                
     theForm.pmcex015.className="Mandatory";          // Relationship
     theForm.pmcex015.disabled=false;                
     theForm.pmcex007.className="";                   // Address Line 1
//   theForm.pmcex009.className="";                   // Address Line 3
//   theForm.pmcex011.className="";                   // Post Code
  } else if(type=="7" || type=="2" || type=="A") {
     theForm.pmcex004.value="";                       // Title
     theForm.pmcex004.disabled=true;                
     theForm.pmcex004.className="Readonly";         
     theForm.pmcex005.value="";                       // Surname
     theForm.pmcex005.disabled=true;                
     theForm.pmcex005.className="Readonly";         
     theForm.pmcex006.value="";                       // Given
     theForm.pmcex006.disabled=true;                
     theForm.pmcex006.className="Readonly";         
     theForm.pmcex019.value="";                       // Given 2
     theForm.pmcex019.disabled=true;                
     theForm.pmcex019.className="Readonly";         
     theForm.pmcex015.value="";                       // Relationship
     theForm.pmcex015.disabled=true;                
     theForm.pmcex015.className="Readonly";         
     theForm.pmcex007.className="Mandatory";          // Address Line 1
//   theForm.pmcex009.className="Mandatory";          // Address Line 3
//   theForm.pmcex011.className="Mandatory";          // Post Code
  } else {
     theForm.pmcex004.className="";                   // Title
     theForm.pmcex004.disabled=false;
     theForm.pmcex005.className="";                   // Surname
     theForm.pmcex005.disabled=false;
     theForm.pmcex006.className="";                   // Given
     theForm.pmcex006.disabled=false;
     theForm.pmcex019.className="";                   // Given 2
     theForm.pmcex019.disabled=false;
     theForm.pmcex015.className="";                   // Relationship
     theForm.pmcex015.disabled=false;
     theForm.pmcex007.className="";                   // Address Line 1
 //  theForm.pmcex009.className="";                   // Address Line 3
 //  theForm.pmcex011.className="";                   // Post Code
  }
 }

</script>
</head>

%START.OF.PAGE
<!--03 : Make Mobile field mandatory if SMS checked --> 
<body onload="PageLoad(event);InactiveDate(AddForm);
              showSendSmsDet();MobSMS();">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon"
 src="../images/ExitIcon.gif" onclick="DFrameExitRefresh();">
Add Contact
</span>

<div id=PageBodySection>
<form name=AddForm method=post action=patweb07.pbl style="margin:0">
<table align=center width=90% border=0>
 <input type=hidden name=reportno value="6">
 <input type=hidden name=template value="002">
 <input type=hidden name=urnumber value="%PATWEB07.06.003">
 <input type=hidden name=updttype value="A">
 <input type=hidden name=pmcex001 value="%PATWEB07.06.003">
 <input type=hidden name=padd1 value="%PATWEB07.06.012">
 <input type=hidden name=padd2 value="%PATWEB07.06.013">
 <input type=hidden name=padd3 value="%PATWEB07.06.014">
 <input type=hidden name=padd4 value="%PATWEB07.06.015">
 <input type=hidden name=ppost value="%PATWEB07.06.016">
 <input type=hidden name=ptelep value="%PATWEB07.06.017">
 <input type=hidden name=ptcnsmsn id=ptcnsmsn
        value="%STANDARD.01.025.120.243.0.1">
 <input type=hidden name=pmcex026 id=pmcex026 value="">

<tr><td class=DataLabel>Contact Type</td>
    <td><select name=pmcex002 class=Mandatory title="Contact Type"
         tabindex=1 onchange="ContactMandatory(AddForm);
                              setMandTitle(AddForm);">
        <option></option>
        %PATWEB07.06.102.2
        </select></td>
    <td class=DataLabel>Relationship</td>
    <td><select name=pmcex015 title="Relationship" tabindex=20>
        <option value=""></option>
         %STANDARD.01.030
        </select></td>
    </tr>

<tr><td class=DataLabel>Title</td>
    <td><select title="Title" name=pmcex004 id=pmcex004 tabindex=2>
        <option></option>
        %STANDARD.01.029
        </select></td>
<!-- 01 : CTAS : added Phone class attribute
    <td class=DataLabel>Home Phone</td>
    <td><input type=text name=pmcex012 title="Home Ph" size=22
         maxlength=20 tabindex=21></td>
-->
    <td class=DataLabel>Home Phone</td>
    <td><input type=text name=pmcex012 title="Home Phone" size=15
         maxlength=15 tabindex=21 class="Phone"></td>
<!-- end of change -->
    </tr>

<tr><td class=DataLabel>Surname</td>
    <td><input type=text name=pmcex005 title="Surname"
         size=37 maxlength=35 tabindex=3
         onChange="UpCase(this);">
    </td>
<!-- 01 : CTAS : added Phone class attribute
    <td class=DataLabel>Work Phone</td>
    <td><input type=text name=pmcex013 title="Work Ph" size=22
         maxlength=20 tabindex=22></td>
-->
    <td class=DataLabel>Work Phone</td>
    <td><input type=text name=pmcex013 title="Work Phone" size=15
         maxlength=15 tabindex=22 class="Phone"></td>
<!-- end of change -->
    </tr>

<tr><td class=DataLabel>Given Name</td>
    <td><input type=text name=pmcex006 title="Given Name"
         size=37 maxlength=35 tabindex=4
         onChange="UpCase(this);">
    </td>
<!-- 01 : CTAS : added Phone class attribute
    <td class=DataLabel>Mobile Phone</td>
    <td><input type=text name=pmcex014 title="Mobile Ph" size=22
         maxlength=20 tabindex=23></td>
-->
    <td class=DataLabel>Mobile Phone</td>
 <!--   <td><input type=text name=pmcex014 title="Mobile Phone" size=15
         maxlength=15 tabindex=23 class="Phone"></td>
<!-- end of change -->
    <td><div id=mobPhoneField></div></td>
    </tr>


<tr><td class=DataLabel>Second Given Name</td>
    <td><input type=text size=37 maxlength=35 tabindex=4
        name=pmcex019 title="Second Given Name"
        onChange="UpCase(this);"></td>
    <td class=DataLabel>Email</td>
    <td><input type=text name=pmcex016 title="Email" size=30
         maxlength=80 tabindex=24></td>
    </tr>

<tr><td class=DataLabel>Address Line 1</td>
    <td><input type=text size=37 maxlength=35 tabindex=5
        name=pmcex007 title="Address Line 1"
        onChange="UpCase(this);"></td>
    <td class=DataLabel>Send Letter</td>
    <input type=hidden name=pmcex017>
    <td><input type=checkbox name=d_pmcex017 value="1" tabindex=25></td>
    </tr>
<!-- 03 : TAS : Make Mobile phone field mandatory if SMS checked -->
<tr><td class=DataLabel>Address Line 2</td>
    <td><input type=text size=37 maxlength=35 tabindex=6
        name=pmcex008 title="Address Line 2"
        onChange="UpCase(this);"></td>
	<td id="ssmslabel" class="DataLabel">&nbsp;</td>
    <td id="ssmsfield">	
<!--     <input type=checkbox name="d_pmcex026" id="d_pmcex026" tabindex=26 
        value=""> -->
		<input type=checkbox name="d_pmcex026" id="d_pmcex026" tabindex=26 
        onclick="MobSMS();" value="">
    </td>
</tr>

<tr><td class=DataLabel>Suburb</td>
    <td><input type=text size=37 maxlength=35
       name=pmcex009 title="Address Line 3" tabindex=7 onblur="UpCase(this)">
    </td>
    <td class=DataLabel>Inactive</td>
    <input type=hidden name=pmcex018>
    <td><input type=checkbox name=d_pmcex018 value="1" tabindex=25
         onclick="InactiveDate(AddForm);"></td>
    </tr>
<!-- 04 Change label to Town/City/Post Code
<tr><td class=DataLabel>Town/City/Country</td> -->
<tr><td class=DataLabel>Town/City/Post Code</td>
    <td><input type=text size=37 maxlength=35
       name=pmcex010 title="Address Line 4" tabindex=8 onBlur="UpCase(this)">
	</td>
    <td class=DataLabel>Date Inactive</td>
    <td><input type=text name=pmcex021 size=12 tabindex=28
     onblur="checkDate(this,'Date')" value=""
     class="PastDate" title="Date Inactivate">
    <img src=../images/DateTimeStamp.gif class=Icon
     date=AddForm.pmcex021 time=null>
    <img src=../images/DateLookup.gif class=Icon
     date=AddForm.pmcex021>
    </td>
</tr>
<!-- 06 : CTAS : Rename postcode field to Domicile and hide
<tr><td class=DataLabel>Domicile</td>
    <td>
      <input type=text size=6 maxlength=8 tabindex=9 name=pmcex011 
       id="pmcex011" title="Domicile">
    </td>
</tr>
-->

<tr><td colspan=4 align=center><br>
<!-- 01 : CTAS : changed Add button onclick
   <input type=button value="Add" class="button" tabindex=30
    onClick="SubmitAddContact();">&nbsp;
-->
   <input type=button value="Add" class="button" tabindex=30
    onClick="if (CheckPhoneFields()) {SubmitAddContact();}">&nbsp;
<!-- end of change -->
   <input type=button value="Copy Patients Address" class="Largebutton" 
    tabindex=31 onClick=defaultValues();>&nbsp;
   <input type=button value="Cancel" class="button" tabindex=31
    onClick=DFrameCloseRefresh();>
   </td></tr>
</table>
</form>
</div>

<span id=mobPhoneSendSms style="display:none">
  <input type=text name=pmcex014 title="Mobile Ph" size=22
    class=MobilePhone maxlength=20 tabindex=23
    value="">
</span>
<span id=mobPhoneNoSendSms style="display:none">
  <input type=text name=pmcex014 title="Mobile Ph" size=22
    maxlength=20 tabindex=23
    value="">
</span>
