<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="crdhb">
<meta name="HelpFileName"    content="NoContextSet.html">
<script type="text/javascript" src="../js/patweb90.js"></script>
<style type=text/css>
input.[Alphabet] {
text-align: center;
width: 22px;
font-family: MS Sans Serif;
font-size: 10pt;
}
</style>
<SCRIPT LANGUAGE=javascript>
function srchsnamonkeydown() {
  if(event.keyCode=='13') {
    postSearch();
  }
}
function UpCase(str) {
  str.value=str.value.toUpperCase();
}
function ProcessSearch(){
  UpCase(document.search.srchsnam);
  UpCase(document.search.srchgnam);
}
function ResetNames(){

  SetCookie("currentPatientCookie","0");

  location.href="patweb90.pbl?reportno=1&template=22"
}
function select_button(cell,srchsnam) {

  if (document.search.d_pattypef.value == " ") {
    SetCookie("currentPatientCookie","1");
  }

  srch=document.search.srchsyst.value
  srhosp=document.search.srchhosp.value
  pattypef = document.search.d_pattypef.value;
  
  location.href="patweb90.pbl?reportno=1&template=22&norecord=" +
                document.search.norecord.value +
                "&srchsnam="+srchsnam+"&srchsyst="+srch +
                "&srchhosp=" + srhosp +
                "&filtflag=1"+"&pattypef="+escape(pattypef)
}

function PageLoadExtended()
{
  var ON = "1";
  var disTitle = document.getElementById("disTitle");
  var ptcndrsm = document.getElementById("ptcndrsm");


  PageLoad();


  if(ptcndrsm.value == ON)
  {
    if(disTitle)
    {
      disTitle.innerText = "Disc.Status/                      Condition";
    }

  }

  defaultType();
  document.search.srchsnam.focus();
}


function defaultType()
{
  var pattypef = document.getElementById("d_pattypef");
  var cgi_pattypef = document.getElementById("pattypef");
  var indexB = 0;

  var cpCookie = GetCookieData("currentPatientCookie");
  SetCookie("currentPatientCookie","0");

  if(cgi_pattypef.value == " ")
  {
    pattypef.selectedIndex = 3;  // default to inpatient

    if (cpCookie == "1") {
      pattypef.selectedIndex = 0;     // default to All
    }

    return;;
  }
  else
    indexB = parseInt(cgi_pattypef.value.replace(/ /g,""),10);


  for(var i = 0; i < pattypef.length; i++)
  {
     if(parseInt(pattypef[i].value.replace(/ /g,""),10) == indexB)
     {
        pattypef.selectedIndex = i;
        return;;
     }
  }

}

function postSearch()
{
  ProcessSearch();
  var pattypef = document.getElementById("pattypef");
  var d_pattypef = document.getElementById("d_pattypef");

  pattypef.value = d_pattypef[d_pattypef.selectedIndex].value;

  if (pattypef.value == " ") {
    SetCookie("currentPatientCookie","1");
  }

  search.submit();

}

function nextPage()
{
  if (document.search.d_pattypef.value == " ") {
    SetCookie("currentPatientCookie","1");
  }

  var d_pattype = escape(search.d_pattypef[search.d_pattypef.selectedIndex].value);
  var url = search.nexturl.value + "&pattypef=" + d_pattype;
  location.href = url;
}

function previousPage()
{
  if (document.search.d_pattypef.value == " ") {
    SetCookie("currentPatientCookie","1");
  }
  var d_pattype = escape(search.d_pattypef[search.d_pattypef.selectedIndex].value);
  var url = search.prevurl.value + "&pattypef=" + d_pattype;
  location.href = url;

}

</SCRIPT>
</head>
%START.OF.PAGE
<body onload=PageLoadExtended();>
<table align="center" width=100% border=1 cellspacing=1 
 cellpadding=0 >
<form name=search method=get onsubmit="ProcessSearch();" action=patweb90.pbl>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=022>
<input type=hidden name=norecord value="%PATWEB90.01.032">
<input type=hidden name=redirect value="patweb98.pbl?reportno=1&template=001">
<input type=hidden name=srchsyst value=0>
<input type=hidden name=filtflag value="1">
<input type=hidden name=nexturl value="%PATWEB90.01.001.022">
<input type=hidden name=prevurl value="%PATWEB90.01.002.022">
<input type=hidden name=ptcndrsm value="%STANDARD.01.025.021.045.1.1" />
<input type=hidden name=pattypef value="%PATWEB90.01.031" />

<tr><td>
<table width=100% border=0 cellpadding=2 cellspacing=1 bgcolor=#CCCCCC>
<tr><td align=center colspan=7 class=HeadingCell>Current Patient Search
            </td></tr>
<tr><td align=right class=DataField >Hospital
    <select class=PMenuSelectList name=srchhosp onchange="postSearch();"
     onkeydown="srchsnamonkeydown();">
    <option value="   ">All</option>
    %PATWEB90.01.027
    </select>

    &nbsp;Select Surname&nbsp;
    <input type=text name=srchsnam size=15 value="%PATWEB90.01.003"
     onkeydown="srchsnamonkeydown();" >
    <input type=text name=srchgnam size=15 value="%PATWEB90.01.004"
     onkeydown="srchsnamonkeydown();" >
    &nbsp;Type&nbsp;
    <select id="d_pattypef" name="d_pattypef" onkeydown="srchsnamonkeydown();">
      <option value=" ">All</option>
      <option value="1">ED</option>
      <option value="2">OP</option>
      <option value="3">IP</option>
<!-- 01 : DXC : Remove option -->
<!--
      <option value="9">RF/COM</option>
-->
<!-- end of change -->
    </select>

    </td>
    <td align=right class=DataField>&nbsp;
    <input type=button class="button" value=Search 
           onblur='srchsnam.focus();'
           onclick="postSearch();">
    <input type=button class="button" value=Reset 
           onclick='ResetNames();'>
</td></tr>
</table>
<table width=100% border=1 cellpadding=2 cellspacing=1 bgcolor=#CCCCCC>
<tr align=center colspan=7 width=100%><td>
   <input type=button class=Alphabet onclick="select_button(this,'A');" value=A>
   <input type=button class=Alphabet onclick="select_button(this,'B');" value=B>
   <input type=button class=Alphabet onclick="select_button(this,'C');" value=C>
   <input type=button class=Alphabet onclick="select_button(this,'D');" value=D>
   <input type=button class=Alphabet onclick="select_button(this,'E');" value=E>
   <input type=button class=Alphabet onclick="select_button(this,'F');" value=F>
   <input type=button class=Alphabet onclick="select_button(this,'G');" value=G>
   <input type=button class=Alphabet onclick="select_button(this,'H');" value=H>
   <input type=button class=Alphabet onclick="select_button(this,'I');" value=I>
   <input type=button class=Alphabet onclick="select_button(this,'J');" value=J>
   <input type=button class=Alphabet onclick="select_button(this,'K');" value=K>
   <input type=button class=Alphabet onclick="select_button(this,'L');" value=L>
   <input type=button class=Alphabet onclick="select_button(this,'M');" value=M>
   <input type=button class=Alphabet onclick="select_button(this,'N');" value=N>
   <input type=button class=Alphabet onclick="select_button(this,'O');" value=O>
   <input type=button class=Alphabet onclick="select_button(this,'P');" value=P>
   <input type=button class=Alphabet onclick="select_button(this,'Q');" value=Q>
   <input type=button class=Alphabet onclick="select_button(this,'R');" value=R>
   <input type=button class=Alphabet onclick="select_button(this,'S');" value=S>
   <input type=button class=Alphabet onclick="select_button(this,'T');" value=T>
   <input type=button class=Alphabet onclick="select_button(this,'U');" value=U>
   <input type=button class=Alphabet onclick="select_button(this,'V');" value=V>
   <input type=button class=Alphabet onclick="select_button(this,'W');" value=W>
   <input type=button class=Alphabet onclick="select_button(this,'X');" value=X>
   <input type=button class=Alphabet onclick="select_button(this,'Y');" value=Y>
   <input type=button class=Alphabet onclick="select_button(this,'Z');" value=Z>
   </td>
   </tr>
</table>

%PATWEB90.01.021.patweb98.01.001
<table width=100% border=1 cellspacing=1 cellpadding=1 bgcolor=#CCCCCC>
  <tr><td>
  <table width=100% bgcolor=#CCCCCC><tr>
     <td align=center>
     <input type=button value="<< Previous" class="button"
      onClick='previousPage()'>
     </td>
     <td align=center>
     <input type=button value="Next >>" class="button"
     onclick='nextPage()'>
  </td></tr>
  </table>
</td></tr>
</table>
</td></tr>
</table>
</form>
<form name=linkForm action=patweb98.pbl method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=1>
<input type=hidden name=urnumber value="">
<input type=hidden name=admissno value="">
</form>

