<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="crdhb">
<meta name="HelpFileName" content="NoContextSet.html">
<script type="text/javascript" src=../js/TableSort.js></script>
<script type="text/javascript" src="../js/OutpatientSelect.js"></script>
<script type="text/javascript" src="../js/OutpatientTypeClinic.js"></script>
<!-- 03 : Merge Task 0883895 -->
<script type="text/javascript" src="../js/allweb0201.js"></script>
<!-- 03 End of Change -->																  
<script type="text/javascript">
function FilterSubmit() {
  Filter.submit();
}
function AddNewReferral(urn,adn,dpc) {
  AddReferral.doctcode.value=Filter.doctcode.value;
  Left=(document.body.clientWidth-1100)/2;
  DFrameSubmit(AddReferral,0,Left,1100,900);
}
function AddUserReferral() {
  if(isWhitespace(document.PatientLinks.wbsedall.value)) {
     alert("User does not have a default department.");
     return;
  }
  document.AddReferral.allrf001.value=document.PatientLinks.wbsedall.value;
  Left=(document.body.clientWidth-900)/2;
  DFrameSubmit(AddReferral,0,Left,900,900);
}
function UpdateReferral(urn,adn,dpc) {
  PatientLinks.urnumber.value=urn;
  PatientLinks.admissno.value=adn;
  PatientLinks.deptcode.value=dpc;
  PatientLinks.submit();
}
function ListReferral(urn) {
  linkUrl="allweb02.pbl?reportno=02&template=021&urnumber="+urn.replace(/ /g,"+");
  Left=(document.body.clientWidth-750)/2;
  DFrameLink(linkUrl,50,Left,750,900);
}
/* 03 : Merge Task 0883895 - these functions moved to allweb201.js
function SetClinicTypeList() {
  p=Filter;
  SetClinicType(p.filtctyp,p.defctype.value,p.usersite.value);
  if(isWhitespace(p.deftclid.value)) {
     p.deftclid.value=p.wbseclid.value;
  }
  SetClinicIDList();
}
function SetClinicIDList() {
  p=Filter;
  p.filtclid.options.length=1;
  SetTypeClinic(p.filtclid,p.deftclid.value,p.usersite.value,p.filtctyp.value);
}*/
function HospitalFilter() {
  if(document.Filter.alcndhos.value=="1") {
     HospTitle.innerHTML=DisplayHospitalTitle.innerHTML;
     HospField.innerHTML=DisplayHospitalField.innerHTML;
     SiteTitle.innerHTML=DisplaySiteTitle.innerHTML;
     SiteField.innerHTML=DisplaySiteField.innerHTML;
     showAllHospOption();
  }
}
function showAllHospOption() {
  if(document.Filter.ovrdhosp.value != "1") {
    document.getElementById('id_filthosp').remove(0);
    document.getElementById('id_tabColhd').deleteCell(11);
  }
}
//03 : Merge Task 0883895 
function adjustRowHeight()
{
  var els = document.getElementById("TableLocation").getElementsByTagName("tr");
  var rowHeight = 30; //change this to change desired minimum row height
//  for (var i=0; i < els.length; i++)
//  {
//    var el = els[i];
//    if (el.offsetHeight > rowHeight) {
//      rowHeight = el.offsetHeight;
//    }
//  }

  for (var i=0; i < els.length; i++) {
    var el = els[i];
    if(el.offsetHeight < rowHeight)
    {
      el.height = rowHeight;
    }
  }
}
</script>
</head>
%START.OF.PAGE
<!-- 03 : Merge Task 0883895 - Add adjustRowHeight, update setTimeout -->
<body onload="PageLoad(event);HospitalFilter();adjustRowHeight();
             setTimeout('SetClinicTypeList(document.Filter);',100);">
<div id="HeadingSection"></div>
<div id="PHeadingSection">

<form name=PatientLinks action=allweb02.pbl method=get>
<input type=hidden name=reportno value=2>
<input type=hidden name=template value=2>
<input type=hidden name=norecord value=5>
<input type=hidden name=urnumber>
<input type=hidden name=admissno>
<input type=hidden name=deptcode>
<input type=hidden name=wbsedall value="%STANDARD.01.028">
</form>

<form name=Filter action=allweb02.pbl method=get style="margin:0">
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=1>
<input type=hidden name=indexkey value="">
<input type=hidden name=usersite value="%STANDARD.01.023">
<input type=hidden name=wbseclid value="%STANDARD.01.026">
<input type=hidden name=defctype value="%ALLWEB02.01.028">
<input type=hidden name=deftclid value="%ALLWEB02.01.027">
<input type=hidden name=alcndhos value="%STANDARD.01.025.106.224.0.1">
<input type=hidden name=ovrdhosp value="%ALLWEB02.01.045">
<input type=hidden name=alcndtrg value="%STANDARD.01.025.121.125.0.1">

<table width=100% cellspacing=0 border=0 bgcolor=#cccccc>
<tr>
  <td>Department</td>
  <td>
    <select class=PMenuSelectList name=deptcode onchange="FilterSubmit()">
      <option></option>     
      %ALLWEB02.01.012.2
    </select>
  </td>
  <td class=DataLabel>HCP</td>
  <td>
    <input type=text name=doctcode value="%ALLWEB02.01.020.0" class=DataField 
     size=10 maxlength=10 onchange="UpCase(this);
     ValidateHCP(18,14,doctcode,psevt000,FilterSubmit);">
    <input type=text name=psevt000 title="Attending HCP" readonly size=24 
     value="%ALLWEB02.01.020.1">
    <img src="../images/SearchIcon.gif" class=Icon
     onClick="HCPSearchFrame(doctcode,psevt000,1,FilterSubmit);">
    <img src="../images/ClearIcon.gif" class=Icon
     onClick="clrFields(doctcode,psevt000,FilterSubmit);">
  </td>
  <td>Priority</td>
  <td>
    <select name=priority onchange="Filter.submit()">
      <option value="  ">All</option>
      %ALLWEB02.01.010.2
    </select>
  </td>
</tr>
<tr>
  <td class=DataLabel>Clinic Type</td>
  <td>
    <select name=filtctyp class=SelectBig
     onchange="SetClinicIDList(document.Filter);FilterSubmit();">
      <option value="  ">Select Clinic Type</option>
    </select>
  </td>
  <td class=DataLabel>Clinic ID</td>
  <td>
    <select name=filtclid onchange="FilterSubmit()" class=SelectBig>
      <option value="zzzzzz">Select Clinic ID</option>
    </select>
  </td>
  <td class=DataLabel>Case Team</td>
  <td>
    <input type=text name=filtteam size=10 maxlength=10 title="Case Team"
     value="%ALLWEB02.01.025.1"
     onblur="validateCode2(7,filtteam,n_filtteam,FilterSubmit)">
    <input type=text name=n_filtteam size=25 value="%ALLWEB02.01.025.0"
     class=Readonly tabindex=-1 title="Team Description" readonly>
    <img src="../images/SearchIcon.gif" class=Icon
     onclick="TeamSearchFrame(filtteam,n_filtteam,FilterSubmit)">
    <img src="../images/ClearIcon.gif" class=Icon
     onClick="clrFields(filtteam,n_filtteam,FilterSubmit);">
  </td>
</tr>
<tr>
  <td><div id="HospTitle"></div></td>
  <td><div id="HospField"></div></td>
  <td><div id="SiteTitle"></div></td>
  <td><div id="SiteField"></div></td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
</tr>
</table>
</form>
</div>

<form name=AddReferral method=get action=allweb02.pbl style="margin:0">
<input type=hidden name=reportno value=3>
<input type=hidden name=template value=2>
<input type=hidden name=doctcode value="">

<table width=100% cellspacing=0 border=1>
<!-- 01 : CTAS : remove Add Referral option (non-UR)
<tr>
  <td colspan=2 align=right class=HeadingCell>Add Referral
    <input type=button class=SlimButton value="Add"
     title="Add referral for users department" onclick="AddUserReferral();">
    <select class=PMenuSelectList name=allrf001 
     onmouseover='MenuOver(event, this)' onchange="AddNewReferral();">
      <option></option>
      ALLWEB02.01.012
    </select>
  </td>
</tr>
-->
<!-- end of change -->
<tr>
  <td width=95% class=HeadingCell align=center> 
    %ALLWEB02.01.023.0 Referrals - On Waiting List
  </td>
  <td class=HeadingCell align=right>
    <img src='../images/PrinterIcon.gif' class=Icon alt='Print Page' 
     onclick='print()'>
  </td>
</tr>
</table>
</form>
</div>

<div id=TableLocation>
<table width=100% cellspacing=0 border=1 id=referralTable>
  <tr id=id_tabColhd>
    <td class=HeadingCell>Patient</td>
<!-- 01 : CTAS : swap date of referral and date referral received labels	
    <td class=HeadingCell>Referral Date</td>
-->
    <td class=HeadingCell>Referral Received Date</td>
<!-- end of change -->
    <td class=HeadingCell>Healthcare Professional</td>
    <td class=HeadingCell>Problem</td>
    <td class=HeadingCell>Referral Comments</td>
	<script type="text/javascript">
	if(document.Filter.alcndtrg.value=="1") {
		document.write("<td class=HeadingCell>Triage Status</td>");
	}
	</script>
    <td class=HeadingCell>Priority</td>
    <td class=HeadingCell>Outcome of Priority</td>
    <td class=HeadingCell>List Days</td>
    <td class=HeadingCell>Must Be Seen By Date</td>
    <td class=HeadingCell>Active Refs</td>
    <td class=HeadingCell>Appointment<br>Type</td>
    <td class=HeadingCell>Hospital</td>
  </tr>
  %ALLWEB02.01.013.0.NZ
</table>
</div>

<table width=100% bgcolor=#CCCCCC>
<tr>
  <td align=center>
    <input type=button value="<< Previous" class="button"
     onClick='location.href="%ALLWEB02.01.019.001"'>
    <input type=button value="Next >>" class="button"
     onClick='location.href="%ALLWEB02.01.018.001"'>
  </td>
</tr>
</table>

<div id=DisplayHospitalTitle style="display: none">
<table align=center width=100% border=0 cellspacing=0>
<tr>
  <td>Preferred Hospital</td>
</tr>
</table>
</div>

<div id=DisplayHospitalField style="display: none">
<table align=center width=100% border=0 cellspacing=0>
<tr>
  <td>
    <select name=filthosp id="id_filthosp"
      onchange="FilterSubmit()">
      <option value="   ">All</option>
      %ALLWEB02.01.039
    </select>
  </td>
</tr>
</table>
</div>

<div id=DisplaySiteTitle style="display: none">
<table align=center width=100% border=0 cellspacing=0>
<tr>
  <td>Preferred Site</td>
</tr>
</table>
</div>

<div id=DisplaySiteField style="display: none">
<table align=center width=100% border=0 cellspacing=0>
<tr>
  <td>
    <select name=filtpsit onchange="FilterSubmit()">
      <option></option>
      %ALLWEB02.01.040
    </select>
  </td>
</tr>
</table>
</div> 
