<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="crdhb">
<meta name="HelpFileName"    content="NoContextSet.html">
<script type="text/javascript" src="../js/mehweb0109006.js"></script>
<!-- 01 : CTAS : Overloaded from ../js/mehweb0109006.js -->
<script type="text/javascript">
function SetCourtData(indicators) {
if (indicators.substr(5,1)=="C") {
    CnsDate1.innerHTML=CrtNotice1.innerHTML;
    CnsDate2.innerHTML=CrtNotice2.innerHTML;
	/* Remove unused fields
    TriDate1.innerHTML=TribunalD1.innerHTML;
    TriDate2.innerHTML=TribunalD2.innerHTML;
    LogDate1.innerHTML=LodgedDat1.innerHTML;
    LogDate2.innerHTML=LodgedDat2.innerHTML;
    CrtTime1.innerHTML=CourtTime1.innerHTML;
    CrtTime2.innerHTML=CourtTime2.innerHTML;
	*/
  } else {
    CnsDate1.innerHTML="";
    CnsDate2.innerHTML="";
	/* Remove unused fields
    TriDate1.innerHTML="";
    TriDate2.innerHTML="";
    LogDate1.innerHTML="";
    LogDate2.innerHTML="";
    CrtTime1.innerHTML="";
    CrtTime2.innerHTML="";
	*/
  }
  if (document.getElementById("courtdat").value.substr(28,1)=="M") {
      document.UpdateForm.mhdls010.className="Mandatory";
  }
}
</script>
</head>

%START.OF.PAGE
<body onload="PageLoad(event);SetCourtData(document.UpdateForm.courtdat.value);ShowLS();">
<span class=DFrameTitleBar>
<img align=right alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
Legal Status
</span>
<form name=UpdateForm action="mehweb01.pbl" method=post 
 onsubmit='return validateMandatory(this);'>
<input type=hidden name=reportno value="9">
<input type=hidden name=updttype value="C">
<input type=hidden name=urnumber value="%MEHWEB01.09.003">
<input type=hidden name=admissno value="%MEHWEB01.09.081">
<input type=hidden name=uniqnumb value="%MEHWEB01.09.201">
<input type=hidden name=opendate value="%MEHWEB01.09.303">
<input type=hidden name=opentime value="%MEHWEB01.09.203">
<input type=hidden name=resident value="%MEHWEB01.09.213.0">
<input type=hidden name=mhhlsend value="%MEHWEB01.09.104">
<input type=hidden name=mhdls002 value="%MEHWEB01.09.202">
<input type=hidden name=mhdls003 value="%MEHWEB01.09.203">
<input type=hidden name=mhdls012 value="">
<input type=hidden name=mhdls013 value="">
<input type=hidden name=mhdls015 value="">
<input type=hidden name=mhcnphed value="%MEHWEB01.09.333">
<input type=hidden name=courtdat id=courtdat value="%MEHWEB01.09.204.3">
<input type=hidden name=nextpage value="0">
<input type=hidden name=revidate value="%MEHWEB01.09.206">
<input type=hidden name=revitime value="%MEHWEB01.09.207">
<input type=hidden name=currdate>
<input type=hidden name=currtime>

<table align=center cellspacing=0 cellpadding=1 border=0 width=95%>
<tr><td width=12% class=DataLabel>Start Date</td>
    <td><input class="readonly DataLabel" readonly size=12
         value="%MEHWEB01.09.202">&nbsp; &nbsp; &nbsp; &nbsp; Time
        <input class=readonly readonly value="%MEHWEB01.09.203" size=8>
    </td>
    <td><div id=InsertLSID1></div></td>
    <td><div id=InsertLSID2></div></td>
</tr>

<tr><td class=DataLabel>End Date</td>
    <td class=DataLabel>
      <input type=text name=mhdls017 title="End Date" class="NotFuturEdate"
       size=12 value="%MEHWEB01.09.217" onblur="setEndTime();validateTime(mhdls017,mhdls018);";>
      <img src="../images/DateLookup.gif" class=Icon date=date1
       align=absmiddle onclick="DateLookupFrame(mhdls017);">
       Time  
      <input type=text size=8  title="End Time" name=mhdls018
       value="%MEHWEB01.09.218" class="Time"
       onblur="validateTime(mhdls017,mhdls018);">
      <img src="../images/DateTimeStamp.gif" class=Icon
       onclick="SetCurrentDateTime(mhdls017,mhdls018);">
      <img src="../images/TimeLookup.gif" class=Icon 
       onclick="TimeLookupFrame(mhdls018);">
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
</tr>

<tr><td class=DataLabel>Legal Status</td>
    <td><input type=text class=Readonly title="Legal Status" readonly
         value="%MEHWEB01.09.204.0" size=20 maxlength=22>
    </td>
	<!-- 01 : CTAS : Remove field
    <td width=15% class=DataLabel>Supp. Legal Status</td>
    <td><select name=mhdls019 title="Supp. Legal Status"
         value="MEHWEB01.09.219.0">
        <option></option>
        MEHWEB01.09.219.2
        </select>
    </td>
	-->
	<td colspan=2></td>
	<!-- end of change -->
</tr>

<tr>
	<!-- 01 : CTAS : rename Review Status as s7A Consultation 
	Remove Supp. LS Effective Date
	<td class=DataLabel>Review Status</td>
    <td><select name=mhdls005 title="Review Status"
         value="MEHWEB01.09.205.0">
        <option></option>
        MEHWEB01.09.205.2
        </select>
    </td>
    <td class=DataLabel>Supp. LS Effective Date</td>
    <td class=DataLabel>
      <input type=text name=mhdls020 title="Supp. LS Effective Date"
       value="%MEHWEB01.09.220" class="Date" onblur="checkDate(this,'Date');">
      <img src="../images/DateLookup.gif" class=Icon date=date1
       align=absmiddle onclick="DateLookupFrame(mhdls020);">
    </td>
	-->
	<td class=DataLabel>S7A Consultation</td>
    <td><select name=mhdls005 title="S7A Consultation"
         value="%MEHWEB01.09.205.0">
        <option></option>
        %MEHWEB01.09.205.2
        </select>
    </td>
	<td colspan=2></td>
	<!-- end of change -->
</tr>
<!-- end of change -->
<!-- 05 : TAS : Change name to Responsible Clinician and make mandatory 
<tr><td class=DataLabel>Review HCP</td> -->
<tr><td class=DataLabel>Responsible Clinician</td>
    <td><input type="text" size=10 maxlength=10 name="mhdls008" tabindex=13
         title="Responsible Clinician" class="Mandatory" value="%MEHWEB01.09.208.1" 
         onblur="UpCase(this);ValidateHCP(18,18,mhdls008,doctnam1);">
       <input type="text" size=25 notab readonly name="doctnam1" 
         value="%MEHWEB01.09.208.0">
       <img src="../images/SearchIcon.gif" class=Icon
        onclick="HCPSearchFrame(UpdateForm.mhdls008,UpdateForm.doctnam1,9);">
    </td>
	<!-- end of change -->
	<!-- 01 : CTAS : Remove field
    <td class=DataLabel>Date Review performed</td>
    <td class=DataLabel>
      <input type=text name=mhdls021 title="Date Review Performed"
       value="MEHWEB01.09.221" class="Date">
      <img src="../images/DateLookup.gif" class=Icon date=date1
       align=absmiddle onclick="DateLookupFrame(mhdls021);">
    </td>
	-->
	<td colspan=2></td>
	<!-- end of change -->
</tr>

<tr><td class=DataLabel>Review Location</td>
    <td><select name=mhdls010 title="Review Location"
         value="%MEHWEB01.09.210.0">
        <option></option>
        %MEHWEB01.09.210.9.1.01.1.L
        </select>
    </td>
    <td colspan=1><div id=CnsDate1></div></td>
    <td colspan=1><div id=CnsDate2></div></td>
</tr>

<tr><td class=DataLabel>Review Due Date</td>
    <td class=DataLabel>
      <input type=text name=mhdls006 title="Review Due Date" 
       value="%MEHWEB01.09.206" class="Date">
      <img src="../images/DateLookup.gif" class=Icon date=date1
       align=absmiddle onclick="DateLookupFrame(mhdls006);">
       Time
      <input type=text size=8 title="Review Due Time" name=mhdls007
       value="%MEHWEB01.09.207" class="Time">
      <img src="../images/DateTimeStamp.gif" class=Icon
       onclick="SetCurrentDateTime(mhdls006,mhdls007);">
      <img src="../images/TimeLookup.gif" class=Icon
       onclick="TimeLookupFrame(mhdls007);">
    </td>
    <td colspan=1><div id=TriDate1></div></td>
    <td colspan=1><div id=TriDate2></div></td>
</tr>

<tr><td class=DataLabel>Reminder Date</td>
    <td><input type=text name=mhdls011 title="Reminder Date"
         value="%MEHWEB01.09.211" class="Date">
        <img src="../images/DateLookup.gif" class=Icon date=date1
         align=absmiddle onclick="DateLookupFrame(mhdls011);">
    </td>
    <td colspan=1><div id=LogDate1></div></td>
    <td colspan=2><div id=LogDate2></div></td>
</tr>

<tr><td class=DataLabel>Active</td>
    <td align=left>
    <input type="checkbox" name=statactv value="0" tabindex=15
     onchange="checkActive()";>
    </td>
    <td colspan=1><div id=CrtTime1></div></td>
    <td colspan=1><div id=CrtTime2></div></td>
</tr>
</table>

<table align=center cellspacing=0 cellpadding=1 border=0 width=95%>
<tr><td width=12% class=DataLabel>Comments 1</td>
    <td><input type="text" size="120" maxlength="100" name=mhdls016
         title="Comments" value="%MEHWEB01.09.216" tabindex=18>
    </td>
</tr>
<tr><td width=12% class=DataLabel>Comments 2</td>
    <td><input type="text" size="120" maxlength="100" name=mhdls026
         title="Comments" value="%MEHWEB01.09.226" tabindex=18>
    </td>
</tr>

<tr><td colspan=4 align=center><br>
    <input tabindex=31 type=button value="Update" class="button"
     onclick="chkenddatetime();">
    <input type=button Value="Cancel" class="button" 
     onClick="DFrameClose();">
    </td>
</tr>
</table>

</form>

<span id=CrtNotice1 style="display:none">
	<!-- 01 : CTAS : Rename field
    <td class=DataLabel>Court Notice Sent Date</td>
	-->
	<td class=DataLabel>Court Date</td>
	<!-- end of change -->
</span> 

<span id=CrtNotice2 style="display:none">
    <td>
	<!-- 01 : CTAS : Rename field
	<input type=text name=mhdls022 title="Court Notice Sent Date"
     class="Date" value="MEHWEB01.09.222" 
      onblur="checkDate(this,'Date');">
	-->
	<input type=text name=mhdls022 title="Court Date"
     class="Date" value="%MEHWEB01.09.222" 
      onblur="checkDate(this,'Date');">
	<!-- end of change -->
    <img src="../images/DateLookup.gif" class=Icon date=date1
     align=absmiddle onclick="DateLookupFrame(mhdls022);">
    </td>
</span>

<span id=TribunalD1 style="display:none">
    <td class=DataLabel>Tribunal Date</td>
</span>

<span id=TribunalD2 style="display:none">
    <td><input type=text name=mhdls023 title="Tribunal Date"
     class="Date" value="%MEHWEB01.09.223">
    <img src="../images/DateLookup.gif" class=Icon date=date1
     align=absmiddle onclick="DateLookupFrame(mhdls023);">
    </td>
</span>

<span id=LodgedDat1 style="display:none">
    <td class=DataLabel>Lodged with Court Date</td>
</span>

<span id=LodgedDat2 style="display:none">
    <td><input type=text name=mhdls024 title="Lodged with Court Date"
     class="Date" value="%MEHWEB01.09.224">
    <img src="../images/DateLookup.gif" class=Icon date=date1
     align=absmiddle onclick="DateLookupFrame(mhdls024);">
    </td>
</span>

<span id=CourtTime1 style="display:none">
    <td class=DataLabel>%STANDARD.01.017.xy</td>
</span>

<span id=CourtTime2 style="display:none">
    <td><select name=mhdls025 title="Court Type" value="%MEHWEB01.09.225.0">
        <option></option>
        %MEHWEB01.09.225.2
        </select></td>
</span>

<span id=LSID1 style="display: none;">
    <td class=DataLabel>PRIMHD Legal Status ID</td>
    </td>
</span>

<span id=LSID2 style="display: none;">
    <td><input class="readonly DataLabel" readonly size=23
         value="%MEHWEB01.09.334">
    </td>
</span>
    
<script type="text/javascript">
if ("%MEHWEB01.09.215.0"==0) {
  document.UpdateForm.statactv.checked="1";
}

function setEndTime() {
  checkDate(document.UpdateForm.mhdls017,'Date');
  if (!isWhitespace(document.UpdateForm.mhdls017.value)) {
    document.UpdateForm.mhdls018.className="Mandatory";
  } else {
    document.UpdateForm.mhdls018.className="";
  }
}
 
function checkActive() {
  if (document.UpdateForm.statactv.checked == false) {
    if (isWhitespace(document.UpdateForm.mhdls017.value)) {
      alert("End Date/Time must be entered before this can be inactivated");
      document.UpdateForm.statactv.checked=true;
      return;
    }
  }
}

if(document.UpdateForm.statactv.checked == true) {
  document.UpdateForm.mhdls015.value="0";
} else {
  document.UpdateForm.mhdls015.value="1";
}

function chkenddatetime() {
 strtDate=UpdateForm.mhdls002;
 strtTime=UpdateForm.mhdls003;
 endDate=UpdateForm.mhdls017;
 endTime=UpdateForm.mhdls018;

 if (!ChkDateTime(strtDate,strtTime,endDate,endTime)) {
   alert("Start Date/Time must be before End Date/Time.");
   document.UpdateForm.mhdls017.value="";
   document.UpdateForm.mhdls018.value="";
   document.UpdateForm.mhdls018.className="";
   return;
 }
 if ((document.getElementById("courtdat").value.substr(28,1)=="M") &&
     isWhitespace(document.UpdateForm.mhdls010.value)) {
       document.UpdateForm.mhdls010.className="Mandatory";
       alert("Review Location is a required field .\nPlease enter it now.");
       return;
  }


 FormSubmit();
}
</script>
