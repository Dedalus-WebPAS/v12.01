<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="sjog-standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/EmergencyTableFull.js"></script>
<script type="text/javascript" src="../js/emrweb0101032.js"></script>
<script type="text/javascript">
function displayManNot(emviurno,demviadm) {
  linkURL="emrweb02.pbl?reportno=1&template=123&urnumber=" +
          emviurno + "&admissno=" + demviadm;
  Left=(document.body.clientWidth-700)/2;
  DFrameLink(linkURL,100,Left,700,500);
}
function TriagePatient(urnumber,admissno,triageIcon) {
    if (triageIcon == "000") {
      location.href="emrweb02.pbl?reportno=1&template=011&urnumber=" +
                     urnumber + "&admissno=" + admissno;
    } else {
      alert("Patient Already Triaged");
    }
}
function SelectPatient(urnumber,admissno) {
  if (top.TogglePanel != undefined) {

    SetCookie("sjogmidlandtogglepanel",location.href);

    var url = "../cgi-bin/patweb98.pbl?reportno=1&template=001" 
    if(document.getElementById("TableView")) {
      if(document.getElementById("TableView").value=="4") {
        url="../cgi-bin/emrweb02.pbl?reportno=1&template=004";
      }
    }
    url+= "&urnumber=" + urnumber.replace(/ /g,"+") +
          "&admissno=" + admissno.replace(/ /g,"+");
    top.EmergencyFrameLink(url,1,1,1008,744);
  } else {
    theURL="patweb98.pbl?reportno=1&template=001"
    if(document.getElementById("TableView")) {
      if(document.getElementById("TableView").value=="4") {
        theURL="emrweb02.pbl?reportno=1&template=004";
      }
    }
    theURL+="&urnumber=" + urnumber + "&admissno=" + admissno;
    location.href=theURL;
  }
}
function NextByStream() {
  var Streams=document.getElementById('filtstrm');
  var NextCount=0;
  for (var j = 0; j < obj.rows.length; j++) {
    obj.rows[j][68]="";
  }
  for (var i = 0; i < Streams.options.length; i++) {
    NextCount=0;
    for (var j = 0; j < obj.rows.length; j++) {
      if(obj.rows[j][62] != "999999999") {
        if (trim(Streams.options[i].value.substr(0,3))== trim(obj.rows[j][67])) {
          StreamCode=obj.rows[j][67];
          if (StreamCode=="") StreamCode='W';
          if (NextCount==0) {
            obj.rows[j][68]=obj.rows[j][67]+" - Next";
          } else {
            obj.rows[j][68]=obj.rows[j][67]+" - "+NextCount;
          }
          NextCount++
        }
      }
    }
  }
}
function initTable() {
  RefreshTime=GetCookieData("EMRWEB0101032RT");
  if (isNaN(RefreshTime)) RefreshTime=180;
  RefreshTime=parseInt(RefreshTime,10)
  el=document.SelectFilter.RefreshTime
  for (var i=0;i<el.options.length;i++) {
    if (el.options[i].value==RefreshTime) el.selectedIndex=i;
  }
 
  RemoveViewTypes();

  TableView=GetCookieData("EMRWEB0101032VT");
  if (isNaN(TableView)) TableView=0;
  TableView=parseInt(TableView,10)
  el=document.SelectFilter.TableView
  viewselected=false;
  for (var i=0;i<el.options.length;i++) {
    if (el.options[i].value==TableView) {
       el.selectedIndex=i;
       viewselected=true;
    }
  }
  if(viewselected==false) {                      // If view not available
    TableView=parseInt(el.options[0].value,10);  // default to the first view
  }

  document.title="Current Patient List"
  immediate = 0
  emergency = 0
  urgent = 20
  semi = 50
  non = 110
  template = 32
  obj = new Table(1,0,1,"100%","center",25,30,immediate,emergency,urgent,semi,non);

  ShowWaitScreen();

  window.setTimeout(function() {
    //
    // Add Columns in Order Required
    // Heading,Type,Display Column,Sort Column,Align
    //
    switch (TableView) {
     case 0: {
      obj.addColumn("ATS","Image",5,5,"center","","3",40)
      obj.addColumn("Stream","Number",68,62,"left","","",50)
      obj.addColumn("Patient","ImageText",39,39,"left","PatientFolder","1",180,37)
      obj.addColumn("Arrival","DateTime",7,7,"center","","",100)
      obj.addColumn("LOS","Minutes",31,31,"right","","",40)
      obj.addColumn("Triage Nurse","String",64,64,"left","","",100)
      obj.addColumn("Complaint/Diagnosis","String",57,57,"left","","",200)
      obj.addColumn("Loc","String",2,2,"left","","2",100)
      obj.addColumn(document.HiddenFields.emvistrm.value,"String",60,60,"left","","",100)
      OrderColumn=1;
      AscDsc=1;
      lastOrderColumn=OrderColumn;
      AddTableRows()
      obj.sortTable(1,1);    // By Stream
      NextByStream();
      TableOutput(OrderColumn,AscDsc)
      break;
     }
     case 1: {
      obj.addColumn("ATS","Image",5,5,"center","","",50)
      obj.addColumn("Patient","ImageText",39,39,"left","PatientFolder","1",180,37)
      obj.addColumn("Age","String",9,45,"right","","",40)
      obj.addColumn("Sex","String",8,8,"center","","",40)
      obj.addColumn("Arrival","DateTime",7,7,"center","","",100)
      obj.addColumn("LOS","Minutes",31,31,"right","","",50)
      obj.addColumn("Treating Doctor","String",35,35,"left","","",100)
      obj.addColumn("Senior Doctor","String",65,65,"left","","",100)
      obj.addColumn("Nurse","String",36,36,"left","","",100)
      obj.addColumn("Complaint/Diagnosis","String",57,57,"left","","",200)
      obj.addColumn("Loc","String",2,2,"left","","2",100)
      obj.addColumn(document.HiddenFields.emvistrm.value,"String",60,60,"left","","",100)
      obj.addColumn("Unit","String",32,32,"left","","",100)
      obj.addColumn("Triage Nurse","String",64,64,"left","","",100)
      OrderColumn=0;
      AscDsc=1;
      lastOrderColumn=OrderColumn;
      AddTableRows()
      TableOutput(OrderColumn,AscDsc)
      break;
     }
     case 2: {
      obj.addColumn("ATS","Image",5,5,"center","","",50)
      obj.addColumn("Patient","ImageText",39,39,"left","PatientFolder","1",180,37)
      obj.addColumn("Complaint/Diagnosis","String",57,57,"left","","",200)
      obj.addColumn("Treating Doctor","String",35,35,"left","","",100)
      obj.addColumn("Senior Doctor","String",65,65,"left","","",100)
      obj.addColumn("Nurse","String",36,36,"left","","",100)
      obj.addColumn("LOS","Minutes",31,31,"right","","",50)
      obj.addColumn("Bed Request","String",43,43,"left","","",50)
      obj.addColumn("Arr","Time",7,7,"center","","",35)
      obj.addColumn("Location","String",2,2,"left","","2",100)
      obj.addColumn(document.HiddenFields.emvistrm.value,"String",60,60,"left","","",100)
      obj.addColumn("MH Practitioner","String",66,66,"left","","",100)
      TableSortOrder="3,1|"
      OrderColumn=3;
      AscDsc=1;
      lastOrderColumn=OrderColumn;
      AddTableRows()
      TableOutput(OrderColumn,AscDsc)
      break;
     }
     case 3: {
      obj.addColumn("ATS","Image",5,5,"center","","",50)
      obj.addColumn("Patient","ImageText",39,39,"left","PatientFolder","1",180,37)
      obj.addColumn("Complaint/Diagnosis","String",57,57,"left","","",200)
      obj.addColumn("Nurse","String",36,36,"left","","",100)
      obj.addColumn("Treating Doctor","String",35,35,"left","","",100)
      obj.addColumn("Senior Doctor","String",65,65,"left","","",100)
      obj.addColumn("LOS","Minutes",31,31,"right","","",50)
      obj.addColumn("Bed Request","String",43,43,"left","","",50)
      obj.addColumn("Arr","Time",7,7,"center","","",35)
      obj.addColumn("Location","String",2,2,"left","","2",100)
      obj.addColumn(document.HiddenFields.emvistrm.value,"String",60,60,"left","","",100)
      obj.addColumn("MH Practitioner","String",66,66,"left","","",100)
      TableSortOrder="3,1|"
      OrderColumn=3;
      AscDsc=1;
      lastOrderColumn=OrderColumn;
      AddTableRows()
      TableOutput(OrderColumn,AscDsc)
      break;
     }
     case 4: {
      obj.addColumn("ATS","Image",5,5,"center","","",50)
      obj.addColumn("Patient","ImageText",93,93,"left","PatientFolder","1",180,37)
      obj.addColumn("Age","String",9,45,"center","","",40)
      obj.addColumn("Complaint/Diagnosis","String",57,57,"left","","",180)
      obj.addColumn("Initial<br>Assessor","String",89,89,"left","","",75)
      obj.addColumn("Treating Doctor","String",35,35,"left","","",100)
      obj.addColumn("Senior Doctor","String",65,65,"left","","",100)
      obj.addColumn("LOS","MinutesDelay",31,31,"right","","",50,95)
      obj.addColumn("Consults","String",91,90,"center","","",60)
      obj.addColumn("WBR","String",96,96,"center","","",50)
      obj.addColumn("Dep Ready","String",92,92,"center","","",50)
      obj.addColumn("AH RAG","String",97,97,"center","","",35,95)
      obj.addColumn("Arr","Time",7,7,"center","","",35)
      obj.addColumn("Location","String",2,2,"left","","2",100,"","","",98)
      obj.addColumn(document.HiddenFields.emvistrm.value,"String",88,87,"center","","",80)
      obj.addColumn("Management Comments","String",71,71,"left nowrap","","",180)
      obj.addColumn("Full Note","String",72,86,"center","","",40)
      TableSortOrder="16,1|"
      OrderColumn=16;
      AscDsc=1;
      lastOrderColumn=OrderColumn;
      AddTableRows();
      TableOutput(OrderColumn,AscDsc);
  //  Restore Full note sort order column after sorting view by
  //  86 management order
      obj.columns[16][3]=72;
  //  targeted style changes for LOS values being misaligned for 
  //  patient view
      inlineStyles=document.styleSheets[2];
      inlineRules=inlineStyles.cssRules || inlineStyles.rules;
      inlineRules[3].style.marginLeft="-4.5px";
      inlineRules[4].style.borderColor="white";
      inlineRules[5].style.borderColor="green";
      inlineRules[6].style.borderColor="orange";
      inlineRules[3].style.borderStyle="solid solid hidden solid";
      break;
     }
    }
    if (initTblTimeout != null) {
      window.clearTimeout(initTblTimeout);
    }
    initTblTimeout = window.setTimeout(function() { AJAXRefresh() },RefreshTime * 1000);
    startDate = new Date();
    endTime = startDate.getTime();
    pb=document.getElementById("ProgressBar")
    pb.style.backgroundImage='url()';
    pb.innerHTML='Load Time: '+((endTime-startTime)/1000)+' sec';

    HideWaitScreen();
  },50);
}
</script>
<style type=text/css>
body {
 overflow:auto;
 overflow-y:auto;
}
.ProgressBar {
 color:black;
 background-image:url("../images/ProgressBar.gif");
 height:10px;
 width:150px;
 text-align:left;
}
.emArrival0, .emArrival1, .emArrival2, .emArrival3, .emArrival4 {
 padding-right:5px;
 height:35px;
 width:100%;
 background-color:white;
 display:inline-block;
}
.emArrival0, .emArrival1, .emArrival2 {}
.emArrival0 {}
.emArrival1 {
 color:white;
 background-color:green;
}
.emArrival2 {
 color:white;
 background-color:orange;
}
.emArrival3 {
 color:white;
 background-color:red;
}
.emArrival4 {
 color:white;
 background-color:purple;
}
.emArrivalBorder {
 border-color:black;
 border-style:solid;
 margin-left: -4.5px;
}
.AdmitIcon {
}
.HomeIcon {
}
.triage1, .triage2, .triage3, .triage4, .triage5, .triage0, 
.triage1f, .triage2f, .triage3f, .triage4f, .triage5f, .triage0f {
 color:black;
 font-size:16px;
 line-height:25px;
 height:35px;
 width:100%;
 background-color:purple;
 display:inline-block;
 padding-top:8px;
}
.triage1f, .triage2f, .triage3f, .triage4f, .triage5f, .triage0f {
 font-weight:bold;
}
.triage1 { background: url("../images/new-triage1.gif"); }
.triage2 { background: url("../images/new-triage2Y.gif"); }
.triage3 { background: url("../images/new-triage3.gif"); }
.triage4 { background: url("../images/new-triage4.gif"); }
.triage5 { background: url("../images/new-triage5.gif");color:black; }
.triage1f { background: url("../images/new-triage1f.gif"); }
.triage2f { background: url("../images/new-triage2fY.gif"); }
.triage3f { background: url("../images/new-triage3f.gif"); }
.triage4f { background: url("../images/new-triage4f.gif"); }
.triage5f { background: url("../images/new-triage5f.gif");color:black; }
</style>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);ProcessMenuOptions();InitPage();
             SetReturnPathCookie();">
<div id=HeadingSection>
<form name=SelectFilter action=emrweb01.pbl method=get style="margin:0">
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=8>
<table cellpadding=3 cellspacing=0 bgcolor=#CCCCCC border=0 width=100%>
<tr><td><span id=ProgressBar class=ProgressBar>Loading Page... </span></td>
    <td>Refresh Time</td><td>
     <select name=RefreshTime class=SelectBig title="Select Refresh" 
      onchange="SelectRefreshTime(this);">
     <option value=60>1 Minute</option>
     <option value=120>2 Minutes</option>
     <option value=180>3 Minutes</option>
     <option value=240>4 Minutes</option>
     <option value=300>5 Minutes</option>
     <option value=600>10 Minutes</option>
     <option value=999999>Turn Off</option>
    </select></td>
    <td>View Type </td><td>
     <select name=TableView id="TableView" class=SelectBig
      title="Select View Type" onchange="SelectViewType(this);">
     <option value=0>Next Patient</option>
     <option value=1>Triage View</option>
     <option value=2>Clinician View</option>
     <option value=3>Nurse View</option>
     <option value=4>Patient List</option>
    </select>
  </td>
    <td align="right">%STANDARD.01.017.eh</td>
    <td>
    <div id="StreamFilter" style="display:none">
    <select name="filtstrm" id=filtstrm class=SelectBig>
    <option value="">&nbsp;</option>
    </select>
    </div>
    <select name="multstrm" id=multstrm class="SelectMultipleLarge"
     multiple=true onchange="FilterMultiple(this);">
    <option value="   ">All</option>
    %EMRWEB01.01.058.2
    </select>
    <br>Press CTRL to select multiple streams
  </td>
</tr>
<tr><td colspan=7 align=center class="HeadingCell">%EMRWEB01.01.066</td>
    </tr>
</table>
</form>
</div>

<div id=TableLocation></div>

<span id=WaitBoxDisplay class=WaitBox style="display:none">
<img class=WaitImage src="../images/wait.gif">
<p>Please Wait ...</p>
</span>

<div id=PageLayer class=DimmedLayer style="display:none"></div>

<form name="HiddenFields" style="margin:0">
<input type="hidden" name="venquiry" value="%EMRWEB01.01.056">
<input type="hidden" name="emvistrm" value="%STANDARD.01.017.eh">
<input type="hidden" name="d_emviuc28" value="%STANDARD.01.017.et">
<input type="hidden" name="tscookie" value="emrweb0101032TS">
<input type="hidden" name="deftview" id="deftview" value="%EMRWEB01.01.084">
<input type="hidden" name="slctvtyp" id="slctvtyp" value="%EMRWEB01.01.085">
</form>
