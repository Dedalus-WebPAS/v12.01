<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="stv">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<link rel="stylesheet" href="../html/postcode.css" type="text/css">
<script type="text/javascript" src=../js/IBA_Category_C_.js>  </script>
<script type="text/javascript" src=../js/IBA_Category_LA.js>  </script>
<script type="text/javascript" src=../js/AutoPostCode.js>  </script>
<script type="text/javascript" src=../js/patweb89.js>  </script>
<script type="text/javascript">
function clickRegisterButton() {
  if(!CheckValPostCode()){
     return;
  }

  var af = document.AddForm;

  af.ptmas006.value = af.ptmas006.value.replace(/^\s+|\s+$/g,'');
  af.pmpmi084.value = af.pmpmi084.value.replace(/^\s+|\s+$/g,'');
  checkSecondName(af.ptcnusgn,af.ptmas006,af.pmpmi084,af.pmpmi085);

  if (document.AddForm.pmpmi062.value=="1") {
    document.AddForm.redirect.value="patweb07.pbl?reportno=4&template=002";
  }
  if (document.AddForm.d_pmpmi006.checked==true) {
    document.AddForm.pmpmi006.value="1";
  } else {
    document.AddForm.pmpmi006.value="0";
  }
  if (!isValidNum(document.AddForm.ptmas023)) {
    return;
  }

  //Redirect if NDIS Flag Set
  if(AddForm.ptmsx051.value==" 1"){

     NDISAlert = "Warning: NDIS Participant selected -\n"
     NDISAlert += "Please enter NDIS Identifier Number in Concession"
     NDISAlert += " Card Maintenance"

     alert(NDISAlert);
     AddForm.redirect.value="patweb07.pbl?reportno=4&template=002&newregfl=1";
  }

  if (checkMedicare(document.AddForm.ptmas023)) {
    DisButton();
    SetCookie('TheatreRequestRedirect',document.AddForm.requestr.value);
    SubmitHidden05(document.AddForm);
  }
}
function isValidNum(theField) {
  if (theField == undefined)
    return false;

  if (theField.value == "")
    return true;

  return checkInteger(theField,theField.title);
}
function DisButton() {
  AddForm.RegisterButton.disabled=true;
  setInterval('AddForm.RegisterButton.disabled=false',6000);
}
function clrMandatory(Sname,Gname,Sex,Dob) {
  if (document.AddForm.quickreg.checked==true) {
    for (i=0; i<document.AddForm.elements.length; i++) {
      el=document.AddForm.elements[i];
      if (el.className.match(/Mandatory/)) {
        el.className="";
      }
    }
    if (isWhitespace(document.AddForm.ptmas017.value)){
      checkDefDOB(document.AddForm.ptmas017,document.AddForm.d_cwebDDOB);
      document.AddForm.ptmas017.focus();
      document.AddForm.ptmas017.blur();
      document.AddForm.ptmas017.className="Mandatory";
    }

    if (!isWhitespace(Sex)) {
      //document.AddForm.ptmas015.value=Sex.substr(0,1);
    }

    if (isWhitespace(Sname)) {
      if (isWhitespace(document.AddForm.ptmas005.value)) {
      document.AddForm.ptmas005.value="Unknown";
      }
    }  
    if (isWhitespace(Gname)) {
      if (isWhitespace(document.AddForm.ptmas006.value)) {
      document.AddForm.ptmas006.value="Unknown";
      }  
    }

    if (isWhitespace(Dob)) {
      if (isWhitespace(document.AddForm.ptmas017.value)) {
      document.AddForm.ptmas017.value="";
      }
    }  
    else {
      document.AddForm.ptmas017.value=Dob;
    }
  } else {
    location.reload();
  }
}
   
function init() {
  SetPostCode05();
  InitPostCodes();
  SetCategoryC_(document.AddForm.ptmas019,"");
  SetCategoryLA(document.AddForm.pmpmi002,"");
  SetCategoryLA(document.AddForm.pmpmi003,"");
}
function GetRequestCookie() {
  if (GetCookieData("TheatreRequestNumber")!="unknown") {
    document.AddForm.requestn.value=GetCookieData("TheatreRequestNumber");
  }
  ExpireCookiePath("TheatreRequestNumber");


  if (GetCookieData("TheatreRequestRedirect")!="unknown") {
    document.AddForm.requestr.value=GetCookieData("TheatreRequestRedirect");
  }
  ExpireCookiePath("TheatreRequestRedirect");
}
function validateAdvanceCarePlan() {

  if (isWhitespace(document.getElementById('ptmas017').value)) {
    return;
  }

  dateOfBirth = SetDateYYYYMMDD(document.getElementById('ptmas017').value);

  todayDate = new Date();
  todayYear = todayDate.getFullYear();
  todayMonth = todayDate.getMonth();
  todayDay = todayDate.getDate();
  age = todayYear - dateOfBirth.substr(0,4);;

  if (todayMonth < dateOfBirth.substr(4,2) - 1)
  {
    age--;
  }

  if (dateOfBirth.substr(4,2) - 1 == todayMonth &&
      todayDay < dateOfBirth.substr(6,2))
  {
    age--;
  }

//if (age > 15) {
    document.getElementById('pmpmi074').className='Mandatory';
    if (isWhitespace(document.getElementById('pmpmi074').value)) {
      for (var i=0; i < document.getElementById('pmpmi074').length; i++) {
        if (document.getElementById('d_pmpmi074')[i].selected) {
          document.getElementById('pmpmi074').selectedIndex=i;
        }
      }
    }
//} else {
//  document.getElementById('pmpmi074').className='';
//}

}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);
              turnOnSecondGivenName(document.AddForm.ptcnusgn.value,
                                    document.AddForm.ptmas006,
                                    document.AddForm.pmpmi084,
                                    document.AddForm.pmpmi085);
              GetRequestCookie();
              validateAdvanceCarePlan();
              displayPrefNames(document.AddForm.ptcnnmpr.value);">
<form name=AddForm action="patweb89.pbl" method=post
 onsubmit='return validateMandatory(this)'>
<input type=hidden name=reportno value="05">
<input type=hidden name=formactn value="NR">
<input type=hidden name=updttype value="">
<input type=hidden name=chckname>
<input type=hidden name=redirflg value="1">
<input type=hidden name=nextpage value="3">
<input type=hidden name=updateky value="%PATWEB89.05.700">
<input type=hidden name=redirect value="patweb98.pbl?reportno=1&template=001">
<input type=hidden name=dummy    value="">
<input type=hidden name=pmpmi076 value="">
<input type=hidden name=praflag  value="0">
<input type=hidden name=temporar value="1">
<input type=hidden name=sesskeys value="%PATWEB89.05.918">
<input type=hidden name=noofdays value="%PATWEB89.05.919">
<input type=hidden name=theaflag value="%PATWEB89.05.920">
<input type=hidden name=admissno value="%PATWEB89.05.081">
<input type=hidden name=otptflag value="%PATWEB89.05.942">
<input type=hidden name=casekeys value="%PATWEB89.05.907">
<input type=hidden name=ptcnusgn value="%STANDARD.01.025.114.219.0.1">
<input type=hidden name=requestn value=" ">
<input type=hidden name=requestr value=" ">
<input type=hidden name=ptcnnmpr value="%STANDARD.01.025.128.226.1.1">
<input type=hidden name="d_cwebDDOB" value="%STANDARD.01.025.101.098.0.8">
<input type=hidden name=ptcnhdps id=ptcnhdps 
       value="%STANDARD.01.025.080.250.1.1">
<table align=center width=100% border=1 cellspacing=0 cellpadding=0>
<tr><td class=HeadingCell colspan=6 align=center>
     New Patient Details </td></tr>
</table>

<table align=center width=100% border=0 cellspacing=0 cellpadding=1>
<tr><td colspan=4>&nbsp;</td>
    <td class=DataLabel><font color=red> QUICK REGISTRATION </font></td>
    <td><input type=checkbox name=quickreg tabindex=1 value="1" 
         onclick='clrMandatory("%PATWEB89.05.009","%PATWEB89.05.010",
         "%PATWEB89.05.019","%PATWEB89.05.020");'></td></tr>

<tr><td class=DataLabel>Title</td>
    <td><select title="Patient Title"
        name=ptmas001 id=ptmas001 tabindex=1>
        <option></option>
        %STANDARD.01.029
        </select>
        </td>
    <td class=DataLabel>Address</td>
    <td><input type=text size=25 maxlength=25  tabindex=6
        name="ptmas008" title="Address Line 1" class=Mandatory 
        onblur="UpCase(this)"></td>
    <td class=DataLabel>Home Phone</td>
    <td><input type=text size=23 maxlength=20
        name=ptmas013 title="Home Phone Number" tabindex=9></td></tr>

<tr><td class=DataLabel> Surname</td>
    <td><input type=text size=40 name=ptmas005 value="%PATWEB89.05.009"
        title="Patient Surname" maxlength=40 class=Mandatory
        tabindex=2 onblur="UpCase(this)"></td>
    <td class=DataLabel></td>
    <td><input type=text size=25 maxlength=25
        name=ptmas009 title="Address Line 2" tabindex=7 
        onblur="UpCase(this)"></td>
    <td class=DataLabel>Work Phone</td>
    <td><input type=text size=23 maxlength=20
        name=ptmas014 title="Work Phone Number" tabindex=10></td></tr>

<tr id=PrefSurname style="display:none">
  <td class=DataLabel>Preferred Surname</td>
  <td><input type=text size=20 maxlength=20 name=pmpmi082
       title="Preferred Surname"
       tabindex=2 onchange="UpCase(this);"></td>
  <td>&nbsp;</td><td>&nbsp;</td>
  <td>&nbsp;</td><td>&nbsp;</td>
</tr>

<tr><td class=DataLabel id="givenNameLabel">Given Names</td>
    <td><input type=hidden name=ptmas006 title="Given Name"
         value="%PATWEB89.05.010">
        <input type=text size=42 maxlength=40 title="First Given Name"
         class=Mandatory name=pmpmi084 tabindex=3 value="%PATWEB89.05.010"
         onblur="UpCase(this)">
    </td>
    <td class=DataLabel>Suburb</td>
    <td><input type=text size=25 maxlength=25
       name=ptmas010 title="Address Line 3" Class=Mandatory tabindex=8 
        value="%PATWEB89.05.015"
       onchange="LookupPostCode(AddForm.ptmas010.value);">
    </td>
    <td class=DataLabel>Mobile Phone</td>
    <td><input type=text size=23 maxlength=20 class=MobilePhone
         name=ptmsx039 title="Mobile Phone Number" tabindex=11></td></tr>

<tr><td class=DataLabel id="secondGivenNameLabel">Second Given Name</td>
    <td><input type=text size=25 maxlength=40 id="secondGivenName" tabindex=4
        title="Second Given Name" value="" name=pmpmi085 onblur="UpCase(this);">
    </td>
    <td class=DataLabel></td>
    <td><input type=text size=25 maxlength=25
         name=ptmas011 title="Address Line 4" tabindex=8
         onchange="UpCase(this);">
    </td>
    <td class=DataLabel>E-Mail</td>
    <td><input type=text size=23 maxlength=80
         name=pmpmi005 title="E-Mail" tabindex=11>
    </td></tr>

<tr id=PrefGivenName style="display:none">
  <td class=DataLabel>Preferred Given Name</td>
  <td><input type=text size=25 maxlength=25 name=pmpmi083
       title="Preferred Given Name"
       tabindex=4 onchange="UpCase(this);"></td>
  <td>&nbsp;</td><td>&nbsp;</td>
  <td>&nbsp;</td><td>&nbsp;</td>
</tr>

<tr><td class=DataLabel>%STANDARD.01.017.G </td>
    <td><select name="ptmas015" tabindex=4 class=Mandatory
         title="%STANDARD.01.017.G " onchange="checkGenderInd(this);" >
         <option></option>
         %PATWEB89.05.086.099.061.9.1.19.3.H
         </select>
    </td>
    <td class=DataLabel>Post Code</td>
    <td><input type=text size=4 maxlength=4
        name=ptmas012 title="Post Code" Class=Mandatory tabindex=8
        value="%PATWEB89.05.016"></td></tr>

<tr><td class=DataLabel>Date of Birth</td>
    <td>
      <input type=text size=12 name=ptmas017 id=ptmas017 title="Date of Birth" 
       tabindex=5 value="%PATWEB89.05.020" class="Mandatory PastDate"
       onblur="if(checkDate(this,'Date of Birth')){
                 validateAdvanceCarePlan();}">
       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Est
      <input type=hidden name=pmpmi006>
      <input type=checkbox name=d_pmpmi006 title="Est DOB" value="0" tabindex=5>
    </td></tr>

<tr><td class=HeadingCell colspan=6 width=100% align=center>
    PMI Details</td></tr>

<tr><td class=DataLabel>Marital Status</td>
    <td><select  name=ptmas016 tabindex=12 class="select120"
                 title="Marital Status">
        <option></option>
         %PATWEB89.05.069.2
        </select></td>
    <td class=DataLabel>Medicare Number</td>
    <td><input type=text size=10 maxlength=10 tabindex=20 name=ptmas023
         id=ptmas023 onblur="isValidNum(ptmas023);checkMedicare(ptmas023);"
         title="Medicare Number">
        <input type=text size=5 maxlength=2 name=ptmsx045 tabindex=21
         class="Integer DefaultBlank" title="Medicare Reference Number">
    </td>
    <td class=DataLabel>RSL</td>
    <td><select name=ptmas044 class=select120 tabindex=29>
        <option></option>
        %PATWEB89.05.048.2
        </select>
    </td></tr>

<tr><td class=DataLabel>Religion</td>
    <td><select  name=ptmas020 tabindex=13 class=select120>
        <option></option>
        %PATWEB89.05.023.2
        </select></td>
    <td class=DataLabel>Valid to</td>
    <td><input type=text size=12 name=pmpmi016 title="Valid to"
         tabindex=22 onblur="checkDateSV(this,'Valid to');" ></td>
    <td class=DataLabel>Period</td>
    <td><input type=text size=20 maxlength=20 name=pmpmi069 tabindex=29></td>
</tr>

<tr><td class=DataLabel>Country of Birth</td>
    <td><select  name="ptmas019" tabindex=14 class=select120>
        <option></option>
        </select></td>
    <td align=centre class=DataLabel>Pension Number</td>
    <td><input type=text size=15 maxlength=15 name=ptmas024 tabindex=23></td>
    <td class=DataLabel>Consent for info release</td>
    <td><select name=pmpmi067  tabindex=30>
      <option>  </option>
      <option value="0"> No </option>
      <option value="1"> Yes </option>
    </select></td></tr>

<tr><td class=DataLabel>Aboriginality</td>
    <td><select name=pmpmi065 tabindex=15 class=select120>
        <option></option>
        %STANDARD.01.007.VA
        </select></td>
    <td class=DataLabel>Health Fund </td>
    <td><input type=hidden name="ptmas036" id=ptmas036>
       <input type=text size=25 name="funddesc" id=funddesc maxlength="30"
         readonly onblur="UpCase(this)"></td>
    <td class=DataLabel>Privacy Indicator</td>
    <td><select name=pmpmi066 class=select120 tabindex=31>
        <option></option>
        %STANDARD.01.007.PV
        </select></td></tr>

<tr><td class=DataLabel>Interpreter Required</td>
    <td><select name=pmpmi001 title="Interpreter Required" tabindex=16>
         %PATWEB89.05.801.2
        </select></td>
    <td class=DataLabel>Health Fund Level </td>
    <td width=22%>
        <input type=hidden name="ptmas037" id=ptmas037>
        <input type="text" size=15 maxlength=17 name="tabldesc" id=tabldesc
         readonly>
        <img src=../images/SearchIcon.gif class=Icon
         onclick="HealthFundSearchFrameNoFocus(ptmas036,funddesc,
                                               ptmas037,tabldesc);">
        <img src="../images/erase.gif" class=Icon
         onclick="clrHealthFund(ptmas036,funddesc,ptmas037,tabldesc);"></td>
    <td class=DataLabel>RAPID</td>
    <td><input type=text size=14 maxlength=12 name=pmpmi018 tabindex=32></td>
</tr>

<tr><td class=DataLabel>Pref Language 1</td>
    <td><select name=pmpmi002 tabindex=17 class="select120 Mandatory"
         title="Preferred Language">
        <option></option>
        </select></td>
    <td class=DataLabel>Member Number </td>
    <td><input type=text size=20 maxlength=19 name=ptmas038
          tabindex=24></td>
    <td class=DataLabel>Correctional Services Number</td>
    <td><input type=text size=8 maxlength=6 name=pmpmi019 tabindex=33></td>
</tr>

<tr><td class=DataLabel>Pref Language 2</td>
    <td><select name=pmpmi003 tabindex=18 class=select120
         title="Preferred Language">
        <option></option>
        </select></td>
    <td class=DataLabel>Concession Card</td>
    <td><select name=pmpmi062 tabindex=25 class=Mandatory
                title="Concession Card">
      <option></option>
      <option value="0"> No </option>
      <option value="1"> Yes </option>
    </select></td>
    <td class=DataLabel>Homeless Person</td>
    <td><input type=checkbox name=pmpmi068 title="Homeless"
         value="1" tabindex=33></td></tr>

<tr><td class=DataLabel>Resident</td>
    <td><select name=ptmas021 tabindex=19>
         <option></option>
         %PATWEB89.05.024.2
        </select>
    </td>
    <td class=DataLabel>NDIS</td>
    <td class=DataField>
      <select name=ptmsx051 tabindex=26 title="NDIS">
        <option value="  "></option>
        <option value=" 0"> No </option>
        <option value=" 1"> Yes </option>
      </select>
    </td>
    <td class=DataLabel>Merge Psych</td>
    <td><input type=checkbox name=ptmas046 title="Merge Psych"
         value="1" tabindex=34></td></tr>

<tr><td class=DataLabel>Local GP </td>
    <td width=20%>
        <input type=hidden name=pmpmi059 id=pmpmi059>
        <input type=text readonly name=genpname id=genpname>
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="GPHCPSearchFrame(pmpmi059,genpname,genpprov,pmpmi060,
                                   genpprac,pmpmi061,3)">
        <img src="../images/erase.gif" class=Icon
         onclick="clrFields(pmpmi059,genpname);"></td>
    <td class=DataLabel>
      %STANDARD.01.017.P9
    </td>
    <td>
      <div id=P9tagDIV>
      <select name=pmpmi074 id=pmpmi074 tabindex=27 title="%STANDARD.01.017.P9">
        <option></option>
        %STANDARD.01.007.P9
      </select>
      </div>
    </td>
    <td class=DataLabel>Folder Selection</td>
    <td><select name=pmpmi077 tabindex=35 title="Folder Selection">
         <option></option>
         %STANDARD.01.007.FS
         </select>
    </td></tr>

<tr><td class=DataLabel>Practice</td>
    <td width=20%>
        <input type=hidden name=pmpmi060 id=pmpmi060>
        <input type=hidden name=pmpmi061 id=pmpmi061>
        <input type=hidden name=genpprov id=genpprov>
        <input type=text readonly name=genpprac id=genpprac>
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="GPHCGSearchFrame(pmpmi059,genpname,genpprov,pmpmi060,
                                   genpprac,pmpmi061)">
        <img src="../images/erase.gif" class=Icon
         onclick="clrFields(pmpmi060,genpprac,pmpmi061,genpprov);"></td>
    <td class=DataLabel>Hearing</td>
    <td><select name=ptmsx047 tabindex=28>
        <option></option>
        %PATWEB89.05.655.2
        </select></td>
    <td class=DataLabel>Guardian/Medical Power of Attorney</td>
    <td><select name=pmpmi072 tabindex=36 
         title="Guardian/Medical Power of Attorney"
         class=Mandatory>
        <option></option>
        %PATWEB89.05.872.2
        </select>
    </td></tr>

<tr><td colspan=6 class=HeadingCell align=center > 
      Death Details </td></tr>

<tr><td class=DataLabel>Date of Death</td>
    <td><input type=hidden name=ptmas029>
        <input type=text size=12 name=ptmas061 id=ptmas061 notab class=Date
         title="Date of Death" onblur="confirmDeath05(this,'Date of Death')">
        <img notab src="../images/DateLookup.gif" class=Icon
         onclick="DateLookupFrame(ptmas061);">
        </td>
    <td class=DataLabel>Unknown Date of Death </td>
    <td><input type=checkbox name=ptmas067 id=ptmas067 value="Y" notab
         onclick="confirmDeath05(ptmas061,'Date of Death')"></td>
    <td class=DataLabel>Death Type </td>
    <td><select name=pmpmi017 id=pmpmi017 class=select120 notab
        title="Death Type">
        <option></option>
        %STANDARD.01.007.DY
        </select></td>
    </td></tr>

<tr><td colspan=6 class=HeadingCell align=center> 
  <script type="text/javascript">URDesc();</script> Comments </td></tr>

<tr><td colspan=6 align=center>
      <textarea wrap=hard name=urcommnt rows=4 cols=70></textarea>
    </td>
</tr>
</table>

<table width=100% border=0>
<tr><td align=center>
    <input type=button value="Register" class="button" tabindex=47 
     name=RegisterButton onclick="clickRegisterButton();">
    <input type=button value="Cancel" class="button" tabindex=48
     onclick="history.go(-1);">
    </td>
</tr>
</table>

<div id=SelectHeading></div>
<div id=SelectLocation></div>
</form>

<script type="text/javascript">
   UsualPRFA="%PATWEB89.05.909"
</script>


<span id="P9tagSPAN" style="display:none">
  <select name=d_pmpmi074 id=d_pmpmi074 tabindex=20 title="%STANDARD.01.017.P9"
   class='Mandatory'>
    <option></option>
    %STANDARD.01.021.P9
  </select>
</span>
