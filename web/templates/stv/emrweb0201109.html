<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="stv">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/emrweb0201101.js"></script>
<script type="text/javascript">
function init() {
  PageLocation="?reportno=1&template=4" +
               "&urnumber=" + PatientURN.replace(/ /g,"+") +
               "&admissno=" + PatientVIS.replace(/ /g,"+")
  if (top.content.location.href!=this.location.href) {
    top.content.location.href="emrweb02.pbl" + PageLocation }
// if (document.HiddenFields.DischargeComplete.value=="3") {
//   DisableForm(UpdateForm) ;
//   return; }

 document.UpdateForm.brcom001.value=document.UpdateForm.dummy1.value + 
                                    document.UpdateForm.dummy2.value
//
// if (UpdateForm.ctypeadm.value=="Yes") {
//    document.UpdateForm.emvis147.options[0].selected=true }
// else{
//     document.UpdateForm.emvis147.options[1].selected=true }
//
//if (UpdateForm.ongoingc.value==0) {
//      document.UpdateForm.emvis100.selectedIndex=2;
//  }
//if (UpdateForm.ongoingc.value==1) {
//      document.UpdateForm.emvis100.selectedIndex=1;
//  }
//
  i=document.UpdateForm.emvis026.selectedIndex
  ind=trim(document.UpdateForm.emvis026.options[i].value.substr(14,4));
    if (ind==19 || ind==4 || ind==17 || ind==20 || ind==21) {
     document.getElementById("Departure").style.display="";
     document.getElementById("Departure").innerHTML=
     document.getElementById("ShowDeparture").innerHTML;
    } else {
     document.getElementById("Departure").style.display="none";
     document.getElementById("Departure").innerHTML=
     document.getElementById("ShowDeparture").innerHTML;
     document.UpdateForm.emvis033.className="Readonly"
     document.UpdateForm.emvis050.className="Readonly"
     document.UpdateForm.emvis049.className="Readonly"
     document.UpdateForm.emvis052.className="Readonly"
    }
    disableUnitReqDateTime();
}
//
function checktransfer() {
  alert("Check Transfer Destination.");
  alert(document.UpdateForm.emvis033.value);
}

function checkDateFunction() {
  if(isWhitespace(document.UpdateForm.emvis074.value)) {
    return;
  } else {
    checkDate(document.UpdateForm.emvis074,'Ward Allocated Date');
  }
}
function enableUnitReqDateTime() {
  if (document.UpdateForm.emvis134.value=="") {
    document.UpdateForm.emvis073.selectedIndex=0;
    document.UpdateForm.emvis073.className="ReadOnly";
    document.UpdateForm.emvis073.readOnly=true;
    document.UpdateForm.emvis073.disabled=true;
    document.UpdateForm.emvis083.value="";
    document.UpdateForm.emvis083.className="ReadOnly";
    document.UpdateForm.emvis083.readOnly=true;
  } else {
    document.UpdateForm.emvis073.readOnly=false;
    document.UpdateForm.emvis073.className="";
    document.UpdateForm.emvis073.disabled=false;
    document.UpdateForm.emvis083.readOnly=false;
    document.UpdateForm.emvis083.className="";
  }
}
function disableUnitReqDateTime() {
  if (document.UpdateForm.emvis134.value!="") {
      document.UpdateForm.emvis073.className="ReadOnly";
      document.UpdateForm.emvis073.readOnly=true;
      document.UpdateForm.emvis073.disabled=true;
      document.UpdateForm.emvis083.className="ReadOnly";
      document.UpdateForm.emvis083.readOnly=true;
      document.UpdateForm.emvis083.disabled=true;
      document.UpdateForm.emvis134.className="ReadOnly";
      document.UpdateForm.emvis134.readOnly=true;
      document.UpdateForm.emvis134.disabled=true;
  }
}
function checkDept() {
  deceasedIndicator = document.UpdateForm.emvis026.value.substr(3,1);
  checkDeceasedEMR(deceasedIndicator);
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);VEMDDepartureStatus();VEMDHideForVirtCare();">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%EMRWEB02.01.003";
PatientVIS="%EMRWEB02.01.081";
PatientNAM="%EMRWEB02.01.002";
PatientSTA="%EMRWEB02.01.086.078";
PatientALT="%EMRWEB02.01.084";
PatientSEX="%EMRWEB02.01.019";
PatientDOB="%EMRWEB02.01.020";
PatientAGE="%EMRWEB02.01.021";
PatientLOC="%EMRWEB02.01.083";
PatientPRI="%EMRWEB02.01.086.066.1";
PatientUNT="%EMRWEB02.01.066.0";
PatientIND="%EMRWEB02.01.086.091";
GpCOD="%EMRWEB02.01.086.084.001";
GpNAM="%EMRWEB02.01.086.084.081";
GpPRAC="%EMRWEB02.01.086.085.001";
GpPRACCNT="%EMRWEB02.01.086.085.002";
GpPRACNAM="%EMRWEB02.01.086.085.005";
PatientARR="%EMRWEB02.01.101.0 %EMRWEB02.01.102";
PatientSEE="%EMRWEB02.01.130.0 %EMRWEB02.01.131";
PatientTRI="%EMRWEB02.01.103.3";
PatientECLC="%EMRWEB02.01.484.1";
PatientCLH="%STANDARD.01.017.CL";
PatientEHFT="%EMRWEB02.01.485";
InsertEmergencyHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>
<table width=100% border=0 cellspacing=0 cellpadding=1>
<tr><td class=HeadingCell align=center>
    Emergency Patient Discharge </td></tr>
</table>
<form name=UpdateForm action=emrweb02.pbl method=post style="margin:0">
<input type=hidden name=reportno value="01">
<input type=hidden name=template value="001">
<input type=hidden name=formactn>
<input type=hidden name=updttype>
<input type=hidden name=emvis133>
<input type=hidden name=admissno value="%EMRWEB02.01.081">
<input type=hidden name=updateky value="%EMRWEB02.01.404">
<input type=hidden name=urnumber value="%EMRWEB02.01.003">
<input type=hidden name=emvis118 value="%EMRWEB02.01.003">
<input type=hidden name=nextpage value="2">
<input type=hidden name=redirect value="%EMRWEB02.01.001.emrweb02.01.109">
<input type=hidden name=chkdot value="%EMRWEB02.01.107.001">
<input type=hidden name=chknur value="%EMRWEB02.01.164.1">
<input type=hidden name=dummy1
value="%EMRWEB02.01.104%EMRWEB02.01.105%EMRWEB02.01.174">
<input type=hidden name=dummy2
value="%EMRWEB02.01.175%EMRWEB02.01.176%EMRWEB02.01.177">
<input type=hidden name=waittime value="%EMRWEB02.01.701">
<input type=hidden name=loadflag >
<input type=hidden name=reloadfg value="%EMRWEB02.01.446">
<input type=hidden name=ongoingc value="%EMRWEB02.01.260.1">
<input type=hidden name=ctypeadm value="%EMRWEB02.01.252">
<input type=hidden name=calcwait value="1">
<input type=hidden name=ptdocsee value="%EMRWEB02.01.130.0 %EMRWEB02.01.131">
<input type=hidden name=ptnursee value="%EMRWEB02.01.128.0 %EMRWEB02.01.129">
<input type=hidden name=pmpxi067 value="%EMRWEB02.01.667.0">
<input type=hidden name=ptcnhdps id="ptcnhdps"
 value="%STANDARD.01.025.080.250.1.1">
<input type=hidden name="d_emvis024" value="%EMRWEB02.01.124.0">
<input type=hidden name="d_emvis025" value="%EMRWEB02.01.125">
<input type=hidden name="d_emvis026" value="%EMRWEB02.01.126.1">
<input type=hidden name=updfld01 value="">
<input type=hidden name=reasfc01 value="">
<input type=hidden name=updfld02 value="">
<input type=hidden name=reasfc02 value="">
<input type=hidden name=currTime value="">
<input type=hidden name=currdate value="">
<input type=hidden name=pdexists value="%EMRWEB02.01.196">

<table width=95% align=center border=0 cellspacing=0 cellpadding=1>
<tr valign=top><td>
<table width=100% border=0 cellspacing=0 cellpadding=2>
<tr valign=top><td class=DataLabel width=15%>Presenting Complaint </td>
    <td><input type=text name=emvis060 max=3 size=3 value="%EMRWEB02.01.220.1"
       readonly class="Readonly">
        <input type=text name=v060name value="%EMRWEB02.01.220.0" readonly class="Readonly">
    </td>
    <td colspan=2><textarea name=brcom001 readonly cols=50 rows=4 class="Readonly"></textarea>
    </td></tr>

<tr><td class=DataLabel>Departure Date </td>
    <td width=30%><input type=text size=12 name=emvis024
     onblur="ShowDeptDateReason();"
     class="Mandatory PastDate" title="Departure Date" 
     value="%EMRWEB02.01.124.0">
     <img notab src=../images/DateLookup.gif class=Icon
      onclick="DateLookupFrame(UpdateForm.emvis024);">
     <input class=Mandatory type=text name=emvis025
      onblur="ShowDeptDateReason();"
     size=8 value="%EMRWEB02.01.125" title="Time">
     <img notab src=../images/DateTimeStamp.gif class=Icon
     onclick="SetCurrentDateTime(UpdateForm.emvis024,UpdateForm.emvis025);">
     <img notab src=../images/TimeLookup.gif class=Icon
     onclick="TimeLookupFrame(UpdateForm.emvis025);">
    </td>
    <td class=DataLabel width=15%>Reason for Change</td>
    <td><select name=reason07 title="Departure date/time Reason for Change" 
         disabled onchange="DeptDateReason();">
         <option></option>
         %STANDARD.01.007.FW
        </select></td>
    </tr>

<tr><td class=DataLabel>Departure Status</td>
    <td><select name=emvis026 
        onchange="CheckDepartureA();ShowDeptStatReason();checkDept();"
        class=Mandatory title="Departure Status">
        <option></option>
        %EMRWEB02.01.126.2
        </select></td>
    <td class=DataLabel width=15%>Reason for Change</td>
    <td><select name=reason10 title="Departure status Reason for Change" 
         disabled onchange="DeptStatReason();">
         <option></option>
         %STANDARD.01.007.FW
        </select></td>
    </tr>

<tr><td class=DataLabel>Referred to on Departure</td>
    <td><select class=Mandatory name=emvis051 id=emvis051
         title="Referred to on Departure" class="SelectBig"
        onchange="VEMDHideForVirtCare();">
        <option></option>
        %EMRWEB02.01.211.2
        </select></td>
    <td class=DataLabel>&nbsp;</td>
    <td>&nbsp;</td>
    </tr>
</table>

<div id=Departure></div>

<table width=100% border=0 cellspacing=0 cellpadding=2>
<tr><td class=DataLabel width=15%>Unit Request Date</td>
    <td class=DataLabel width=30%><select name=emvis073 
         title="Unit Request Date">
         %EMRWEB02.01.233.2
        </select>
    Time
    <input type="text" name=emvis083 size="8" title="Unit Request Time"
       value="%EMRWEB02.01.243">
    <img src="../images/DateTimeStamp.gif" class=Icon
     date=UpdateForm.emvis073 time=UpdateForm.emvis083>
    <img src=../images/TimeLookup.gif class=Icon time=UpdateForm.emvis083>
    </td>
    <td class=DataLabel width=15%>Ward Allocated Date</td>
    <td class=DataLabel><select name=emvis074 title="Ward Allocated Date"
         onchange="checkDateFunction();">
         %EMRWEB02.01.234.2
    </select>
    Time
   <input type="text" name=emvis084 size="8" title="Bed Ready Time" 
      value="%EMRWEB02.01.244">
    <img src="../images/DateTimeStamp.gif" class=Icon
     date=UpdateForm.emvis074 time=UpdateForm.emvis084>
    <img src=../images/TimeLookup.gif class=Icon time=UpdateForm.emvis084>
    </td></tr>

<tr><td class=DataLabel>Expected Unit</td>
    <td><select name=emvis134 class=SelectBig title="Expected Unit"
         onchange="enableUnitReqDateTime();">
        <option></option>
        %EMRWEB02.01.173.2
        </select></td>
    <td class=DataLabel>Expected Ward</td>
    <td class=DataLabel>
    <select name=emvis116 class=SelectBig title="Expected Ward">
<option></option>
      %EMRWEB02.01.149.2
         </select>
    </td></tr>

<tr><td colspan=4 align=center><br>
    <input type=button value="Update" class="button" 
     onclick="UpdateDischarge();">
    <input type=button value="Cancel" class="button" 
     onclick='fnPatientLink("%EMRWEB02.01.003","%EMRWEB02.01.081");'>
</td></tr>
</table>
</td></tr>
</table>
</form>

<span id=ShowDeparture style="display:none;">
<table width=100% border=0 cellspacing=0 cellpadding=2>
<tr><td class=DataLabel width=15%>Transfer Destination</td>
    <td width=30%><input type=text size=6 maxlength=6 name=emvis033
         title="Transfer Destination" value="%EMRWEB02.01.133.1"
         onchange="validateCode(9,UpdateForm.emvis033,
         UpdateForm.name_emvis033n);">
        <input type=text size=30 name=name_emvis033n readonly
         value="%EMRWEB02.01.133.0">
        <img src=../images/SearchIcon.gif class=Icon 
         onclick="TransferSourceFrame(UpdateForm.emvis033,
         UpdateForm.name_emvis033n);">
        </td>
    <td class=DataLabel width=15%>Reason for Transfer</td>
    <td><select class=SelectBig name=emvis052>
        <option></option>
        %EMRWEB02.01.212.2
        </select></td></tr>

<tr><td class=DataLabel>Escort Source</td>
    <td><select class="SelectBig" title="Escort Source"
         name=emvis050 >
        <option></option>
         %EMRWEB02.01.210.2
        </select></td>
    <td class=DataLabel>Transport Mode</td>
    <td><select class=SelectBig name=emvis049>
        <option></option>
        %EMRWEB02.01.209.2
        </select></td></tr>
</table>
</span>

<form name=HiddenFields method=get style="margin:0">
<input type=hidden name=DischargeComplete value="%EMRWEB02.01.147">
<input type=hidden name=HospitalAdmission value="%EMRWEB02.01.148">
<input type=hidden name=ctypmand value="%EMRWEB02.01.460.   77">
<input type=hidden name=emvis001 id=emvis001 value="%EMRWEB02.01.101.0">
<input type=hidden name=emvis177 id=emvis177 value="%EMRWEB02.01.296.3">
</form>
<form name=PatientLinks method=get style="margin:0">
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=regexstm value=102>
<input type=hidden name=newstand value=1>
<input type=hidden name=urnumber value="%EMRWEB02.01.003">
<input type=hidden name=admissno value="%EMRWEB02.01.081">
<input type=hidden name=emrgflag value="Y">
<input type=hidden name=nextpage value="4">
<input type=hidden name=MenuType value="11">
</form>
<script type="text/javascript">
if ( document.UpdateForm.emvis134.value=="") {
  document.UpdateForm.emvis073.selectedIndex=0;
  document.UpdateForm.emvis073.className="ReadOnly";
  document.UpdateForm.emvis073.readOnly=true;
  document.UpdateForm.emvis073.disabled=true;
  document.UpdateForm.emvis083.value="";
  document.UpdateForm.emvis083.className="ReadOnly";
  document.UpdateForm.emvis083.readOnly=true;
}
</script>
