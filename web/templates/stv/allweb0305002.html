<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="stv">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src=../js/allweb03.js></script>
<script type="text/javascript">
function AddEncounter(theForm){
  DFrameClear();
  if (validateMandatory(theForm)) {
//
    if(theForm.checkbx2.checked==true) {
      if(!CheckFutureBookings(theForm.admissno,theForm.alenc005)) {
        return;
      }
    }
//
    if(theForm.checkappt.value==0 &&
      theForm.checkbx2.checked==true) {
      CheckLinkedBookings(theForm.admissno,theForm.urnumber,theForm.checkappt)
      if(theForm.checkappt.value==0) {
        return;
      }
    }
    theForm.target="PopUpFrame1"
    theForm.submit();
  }
}
function PostParent() {
   document.AddForm.checkappt.value=1;
   AddEncounter(AddForm);
}
function ToggleCombo(){
if(AddForm.checkbx2.checked==false){
   AddForm.checkbx1.disabled=false;
   AddForm.checkbx2.value=0;
   AddForm.alref006.className="DataField";
  }
else{
   AddForm.checkbx1.disabled=true; // disable Waiting List
   AddForm.checkbx1.checked=false;
   AddForm.alref006.className="Mandatory";//make the class mandatory
   AddForm.checkbx2.value=1;
  }
}
function ShowHideBill() {
PatientType=AddForm.alenc009.value.substr(4,1);
CompensationCode=AddForm.alenc115.value.substr(13,1);
flag=AddForm.flag.value;
if(flag==1&&(PatientType==1 || PatientType==2)&&(CompensationCode=="C" || CompensationCode=="E")){
 BillableUnits.style.display='';
}
 else {
 BillableUnits.style.display='none';
 }
if(CompensationCode=="E")
  AddForm.itemn001.className="Mandatory";
else
  AddForm.itemn001.className="ReadOnly";
} 
function LinkedVisit() {
p=AddForm
  CheckReferral(9,p.admissno,p.deptcode,p.namedesc,p.alenc008,p.deftclmc,p.deftclin,p.status);
  p.admissno.select();
}
//------------------------------------------------------------------------
// Function : Referral Number Search Frame
//------------------------------------------------------------------------
function RefSearchFrame(ReturnRefe,ReturnName,ReturnName1) {
  DFrameStart();
  window.ReturnFunction="";
  window.ReturnRefe=ReturnRefe ;
  window.ReturnName=ReturnName ;
  window.ReturnName1=ReturnName1 ;
//
  if (RefSearchFrame.arguments.length > 2) {
    window.ReturnFunction=RefSearchFrame.arguments[3] }
//
  document.getElementById('PopUpFrame').src="../lookups/RefSearchFrame.html"
  SearchFrameShow();
}
//-------------------------------------------------------------------------
</script>
</head>

%START.OF.PAGE
<body onload="PageLoad(event);">
<span class=DFrameTitleBar>
<img border=0 align=right src="../images/ExitIcon.gif" class=MenuIcon
 onclick="DFrameExitRefresh();">
<script language=javascript>document.write(self.document.title);</script>
</span>

<form name=AddForm action="allweb03.pbl" method=post style="margin:0">
<input type=hidden name=reportno value=1>
<input type=hidden name=deptcode value="%ALLWEB03.05.017">
<input type=hidden name=updatety value="A">
<input type=hidden name=flag value="%ALLWEB03.05.022">
<input type=hidden name=alenc004 value="%ALLWEB03.05.032.0">
<input type=hidden name=alenc107 value="">
<input type=hidden name=alenc108 value="">
<input type=hidden name=deftclmc >
<input type=hidden name=deftclin >
<input type=hidden name=status value="">
<input type=hidden name=dummy>
<input type=hidden name=urnumber value="">
<input type=hidden name=checkappt value="0">

<table align=center cellspacing=0 cellpadding=1 border=0 width=90%>
<tr>
  <td class=DataLabel width=15%>Department</td>
  <td width=35%>
    <input type=text readonly size=40 name=dept class="ReadOnly"
     value="%ALLWEB03.05.018">
  </td>
  <td width=15%>&nbsp;</td>
  <td width=25%>&nbsp;</td>
</tr>

<tr>
  <td class=DataLabel>Service Provider</td>
  <td colspan=3>
    <input type=text readonly size=40 name=hcp class="ReadOnly"
     value="%ALLWEB03.05.019">
  </td>
</tr>

<tr>
  <td class=DataLabel>Date</td>
  <td colspan=3>
    <input type=text readonly name=alenc005 value="%ALLWEB03.05.016" size=12
     title="Contact Date" class="ReadOnly">
  </td>
</tr>


<tr>
  <td class=DataLabel>Contact Time</td>
  <td colspan=3>
    <input type=text size=8 title="Time" value="" class="Mandatory"
     name=alenc006 id=alenc006>
    <img notab src="../images/DateTimeStamp.gif" class=Icon 
     onclick="SetCurrentDateTime(null,AddForm.alenc006);">
    <img src="../images/TimeLookup.gif" class=Icon 
     onclick="TimeLookupFrame(AddForm.alenc006);">
  </td>
</tr>

<tr>
  <td class=DataLabel width=15%>Referral Number</td>
  <td colspan=3>
    <input type=text size=10 class=Mandatory title="Referral Number"
     name=admissno maxLength=8
     onblur="justifyRight(this);
             CheckReferral(9,
                           AddForm.admissno,
                           AddForm.deptcode,
                           AddForm.namedesc,
                           AddForm.alenc008,
                           AddForm.deftclmc,
                           AddForm.deftclin,
                           AddForm.status);">
    <input type=text size=25 class=Readonly title="Name" name=namedesc readonly>
    <img src="../images/SearchIcon.gif" class=Icon
     onclick="RefSearchFrame(AddForm.admissno,
                             AddForm.namedesc,
                             AddForm.alenc008,
                             AddForm.LinkedVisit);">
  </td>
</tr>

<tr>
  <td class=DataLabel>Service Type</td>
  <td>
    <select class="Mandatory" name=alenc010 title="Service Type">
      <option></option>
      %ALLWEB03.05.020.0
    </select>
  </td>
  <td class=DataLable>Linked Visit Number</td>
  <td>
    <input type=text size=10 maxlength=8 name=alenc008 value="" 
     title="Linked Visit Number"
     onblur="justifyRight(this);
             ValidateVisit(AddForm.alenc008,
                           AddForm.urnumber,
                           AddForm.dummy);"> 
    <img src="../images/SearchIcon.gif" class=Icon
     onclick="VisitSearchFrame(AddForm.urnumber,AddForm.alenc008);">
  </td>
</tr>

<tr>
  <td class=DataLabel>Clinic Type</td>
  <td colspan=3>
    <select name=alenc003>
      <option></option>
       %ALLWEB03.05.011
    </select>
  </td>
</tr>

<tr>
  <td class=DataLabel>Location Code</td>
  <td colspan=3>
    <select name=alenc007>
      <option></option>
        %ALLWEB03.05.207.2
    </select>
  </td>
</tr>

<tr>
  <td class=DataLabel>Direct Units (min)</td>
  <td>
    <input type=text size=12 name=alenc011 maxlength=4 class=Mandatory
     title="Direct Units (min)" onblur="checkInteger(this,this.title);">
  </td>
  <td class=DataLabel>Indirect Units (min)</td>
  <td class=DataField><input type=text size=12 name=alenc013 maxlength=4 
   onblur="checkInteger(this,this.title);">
  </td>
</tr>
</table>

<div id="Wait" style="display:none;">
<table align=center cellspacing=0 cellpadding=1 border=0 width=90%>
<tr><td class=DataLabel width=15%>Stay as Waiting Referral</td>
    <td class=DataField width=35%>
    <input type=checkbox name=checkbx1 value="1"></td>
    <td width=15%>&nbsp;</td>
    <td width=25%>&nbsp;</td>
    </tr>
</table>
</div>

<div id="BillableUnits" style="display:none;">
<table align=center cellspacing=0 cellpadding=1 border=0 width=90%>
<tr>
  <td class=DataLabel width=15%>Direct Billable Units</td>
  <td class=DataField width=35%>
    <input type=text size=12 name=alenc012 title="Direct Billable Units" min=0
     onblur="checkInteger(this,this.title)"></td>
  <td class=DataLabel width=15%>Indirect Billable Units</td>
  <td class=DataLabel width=25%>
    <input type=text size=12 title="Indirect Billable Units" min=0
     onblur="checkInteger(this,this.title)" name=alenc014>
  </td>
</tr>

<tr><td class=DataLabel>Bulk Billing Code</td>
    <td colspan=3>
    <select name=alenc015 class="SelectBig" title="Bulk Billing Code">
    <option></option>
    %ALLWEB03.05.215.2
    </select></td></tr>
</table>
</div>

<table align=center cellspacing=0 cellpadding=1 border=0 width=90%>
<tr><td class=DataLabel width=15%>Last Contact ?</td>
    <td class=DataField width=35%>
    <Input type=checkbox name=checkbx2 value=0 onclick="ToggleCombo()"></td>
    <td width=15%>&nbsp;</td>
    <td width=25%>&nbsp;</td>
    </tr>

<tr><td class=DataLabel width=15%>Reason for Closure </td>
    <td class=DataField width=35%>
    <select name=alref006 title="Reason For Closure" class="">
    <option></option>
     %ALLWEB03.05.015.2
    </select>
    <td width=15%>&nbsp;</td>
    <td width=25%>&nbsp;</td>
    </tr>
<tr>
  <td class=DataLabel width=15%>Comments 1</td>
  <td class=DataField width=50% colspan=2>
    <input type=text size=80 maxlength=60 title="Comments 1" name=alenc107>
  </td>
  <td width=25%>&nbsp;</td>
</tr>

<tr>
  <td class=DataLabel width=15%>Comments 2</td>
  <td class=DataField width=50% colspan=2>
    <input type=text size=80 maxlength=60 title="Comments 2" name=alenc108>
  </td>
  <td width=25%>&nbsp;</td>
</tr>
</table>

<div id="HCPcheckbox">
<table align=center cellspacing=0 cellpadding=1 border=0 width=90%>
<tr>
  <td class=DataLabel width=15%>Additional HCP</td>
  <td class=DataField width=35%>
    <input type=checkbox name=addithcp value="1" onclick="CheckAddHCP();">
  </td>
  <td width=15%>&nbsp;</td>
  <td width=25%>&nbsp;</td>
</tr>
</table>
</div>

<div id=AdditionalHCP></div>

<table align=center cellspacing=0 cellpadding=1 border=0 width=90%>
<tr><td colspan=4 align=center><br>
    <input type=button name=formactn value="Add" class=button id=all03sub
     onclick="tempDisable(this);AddEncounter(AddForm);">
    <input type=button Value="Cancel" class=button 
     onclick="DFrameCloseRefresh();">
    </td></tr>
</table>
</form>

<span id="ShowAdditionalHCP" style="display:none;">
<table align=center cellspacing=0 cellpadding=1 border=0 width=90%>
<tr><td class=DataLabel width=17%>Additional HCP 1</td>
    <td><input type=text name=alenc025 size=10 maxlength=10
         title="Additional HCP 1"
         onblur="ValidateHCP(18,0,AddForm.alenc025,AddForm.d_alenc025);">
        <input type=text name=d_alenc025 size=20 class=Readonly readonly
         title="Additional HCP 1">
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="HCPSearchFrame(AddForm.alenc025,AddForm.d_alenc025,0);">
        <img src="../images/ClearIcon.gif" class=Icon
         onclick="clrFields(AddForm.alenc025,AddForm.d_alenc025);">
    </td>
    <td class=DataLabel width=15%>Additional HCP 2</td>
    <td><input type=text name=alenc026 size=10 maxlength=10
         title="Additional HCP 2"
         onblur="ValidateHCP(18,0,AddForm.alenc026,AddForm.d_alenc026);">
        <input type=text name=d_alenc026 size=20 class=Readonly readonly
         title="Additional HCP 2">
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="HCPSearchFrame(AddForm.alenc026,AddForm.d_alenc026,0);" >
        <img src="../images/ClearIcon.gif" class=Icon
         onclick="clrFields(AddForm.alenc026,AddForm.d_alenc026);">
    </td></tr>

<tr><td class=DataLabel width=15%>Additional HCP 3</td>
    <td><input type=text name=alenc027 size=10 maxlength=10
         title="Additional HCP 3"
         onblur="ValidateHCP(18,0,AddForm.alenc027,AddForm.d_alenc027);">
        <input type=text name=d_alenc027 size=20 class=Readonly readonly
         title="Additional HCP 3">
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="HCPSearchFrame(AddForm.alenc027,AddForm.d_alenc027,0);">
        <img src="../images/ClearIcon.gif" class=Icon
         onclick="clrFields(AddForm.alenc027,AddForm.d_alenc027);">
    </td>
    <td class=DataLabel width=15%>Additional HCP 4</td>
    <td><input type=text name=alenc028 size=10 maxlength=10
         title="Additional HCP 4"
         onblur="ValidateHCP(18,0,AddForm.alenc028,AddForm.d_alenc028);">
        <input type=text name=d_alenc028 size=20 class=Readonly readonly
         title="Additional HCP 4">
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="HCPSearchFrame(AddForm.alenc028,AddForm.d_alenc028,0);">
        <img src="../images/ClearIcon.gif" class=Icon
         onclick="clrFields(AddForm.alenc028,AddForm.d_alenc028);">
    </td></tr>
</table>
</span>

<script type="text/javascript">
if(%ALLWEB03.05.400.12!=1){
  document.getElementById("HCPcheckbox").style.display="none";
}
</script>

