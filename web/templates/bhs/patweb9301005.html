<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="bhs">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<style type="text/css">
#box1{
   position: absolute;
   top: 100px;
   left: 100px;
   border-style: outset;
   background-color: #fff8ff;
   padding: 3px;
   visibility: hidden;
}
</style>
<script type="text/javascript">
var box1;
var mousex = 0;
var mousey = 0;
var maxx = 0;
var maxy = 0;

function init()
{
  box1 = document.getElementById('box1');
  document.onmousemove = getMouseXY;
  maxx = getClientWidth();
  maxy = getClientHeight();
}

function getMouseXY(e) // works on IE6,FF,Moz,Opera7
{
  if (!e) e = window.event; // works on IE only (others rely on browser passing us the event)

  if (e)
  {
    if (e.pageX || e.pageY)
    { // this doesn't work on IE6!! (works on FF,Moz,Opera7)
      mousex = e.pageX;
      mousey = e.pageY;
    }
    else if (e.clientX || e.clientY )
    { // works on IE6,FF,Moz,Opera7
      mousex = e.clientX + document.body.scrollLeft;
      mousey = e.clientY + document.body.scrollTop;
    }
  }
}
function showit(ptbrsnam,ptbrgnam,ptbrgend,ptbrbdat,psageyrs,ptbradr1,ptbradr2,
                ptbradr3,ptbradr4,ptbrpost,ptbrhphn,ptbrwphn,ptbrmphn,ptbremal,
                ptbrsdat,ptbrstim,ptbrlurn,ptbrtitl,ptitl,psname,pgname) {
  var dispvar = "<b>Boarder details for " + ptitl + " " + 
                pgname + 
                psname  + "</b>";
  dispvar = dispvar + "<br>Boarder Name: " + 
                      "<b>" + ptbrtitl + " " + ptbrgnam + " " 
                      + ptbrsnam  + "</b>";
  dispvar = dispvar + "<br>U/R Number: " + "<b>" + ptbrlurn + "</b>";
  dispvar = dispvar + "<br>Age/Gender: " + "<b>" + psageyrs + "/" + ptbrgend  +
                      "</b>";
  dispvar = dispvar + "<br>Date of Birth: " + "<b>" + ptbrbdat + "</b>";
  dispvar = dispvar + "<br>Boarder Start Date: " + "<b>" + ptbrsdat + " @ " +
                    ptbrstim + "</b>";
  dispvar = dispvar + "<br>Address" +
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;"+
                      " : " + "<b>" + ptbradr1 + "</b>";
  dispvar = dispvar + "<br>&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;: " + "<b>" + ptbradr2 + "</b>";
  dispvar = dispvar + "<br>Suburb"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;"+
                           "&nbsp;: " + "<b>" + ptbradr3 + "</b>";
  dispvar = dispvar + "<br>&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;: " + "<b>" + ptbradr4 + "</b>";
  dispvar = dispvar + "<br>Post Code: " + "<b>" + ptbrpost + "</b>";
  dispvar = dispvar + "<br>Home Phone: " + "<b>" + ptbrhphn + "</b>";
  dispvar = dispvar + "<br>Work Phone: " + "<b>" + ptbrwphn + "</b>";
  dispvar = dispvar + "<br>Mobile Phone: " + "<b>" + ptbrmphn + "</b>";
  dispvar = dispvar + "<br>Email: " + "<b>" + ptbremal + "</b>";
  box1.innerHTML  = dispvar;
  var x = mousex;
  var y = mousey;
  // rendered dimensions or estimates;
  var rx = ( box1.sclrollLeft ) ?  box1.scrollLeft : 200;
  var ry = ( box1.scrollHeight ) ? box1.scrollHeight : 300;

  x = (maxx - x - 70  < rx ) ? x - 70  - rx : x + 70;
  y = (maxy - y < ry)         ? y - ry : y ;

  box1.style.top  =  y + 'px';
  box1.style.left =  x + 'px';
  box1.style.visibility = "visible";
}
function hideit() {
  box1.style.visibility = "hidden";
}
function gotoBoarder(urnumber,admissno,ptbrbrdn) {
  linkurl="patweb83.pbl?reportno=5&template=001" +
  "&urnumber=" + urnumber + "&admissno=" + admissno + "&borduniq=" + ptbrbrdn
  location.href=linkurl
}
function gotoMV(urnumber,admissno,mvtype,strtdate,strttime) {
  Left=(document.body.clientWidth-500)/2
  linkurl="patweb78.pbl?reportno=05&template=003"
          + "&urnumber=" + urnumber.replace(/ /g,"+")
          + "&admissno=" + admissno.replace(/ /g,"+")
          + "&ptven001=" + mvtype.replace(/ /g,"+")
          + "&startdat=" + strtdate.replace(/ /g,"+")
          + "&ptven003=" + strttime.replace(/ /g,"+");
  DFrameLink(linkurl,220,Left,500,280);
}
function UpdateCondition(urnumber,admissno) {
  linkurl="patweb93.pbl?reportno=5&template=001" +
          "&urnumber=" + urnumber + "&admissno=" + admissno
  DFrameLink(linkurl,50,50,875,500)
}
function UpdateDiet(urnumber,admissno) { 
  linkurl="patweb98.pbl?reportno=4&template=004" +
          "&urnumber=" + urnumber + "&admissno=" + admissno +
          "&viewtype=0"
  DFrameLink(linkurl,0,75,650,350)
}
function PatientAlerts(urnumber,admissno) { 
        bossnetur = urnumber.replace(/\+/g, "");
        onclick=BOSSnetURLinkAlerts(bossnetur)
}
function PatientNotes(urnumber,admissno) {
  linkurl="patweb98.pbl?reportno=1&template=005" +
          "&urnumber=" + urnumber + "&admissno=" + admissno
  location.href=linkurl
}
function PatientResults(urnumber,admissno) { 
  linkurl="cliweb03.pbl?reportno=1&template=001" +
          "&urnumber=" + urnumber + "&admissno=" + admissno
  location.href=linkurl
}
function BedAllocation(urnumber,admissno) {
  linkurl="patweb96.pbl?reportno=3&template=005" +
          "&urnumber=" + urnumber + "&admissno=" + admissno
  DFrameLink(linkurl,50,250,300,120)
}
function InitTable(TableView) {
  ward=document.SelectWard.wardcode.value;
  bed=document.SelectWard.wbedtype.value;
  if (TableView==0) {
      linkurl="patweb93.pbl?reportno=1&template=010" +
              "&wardcode=" + ward +
              "&wbedtype=" + bed 
      }
  location.href=linkurl;
}
function ModBeds() {
  document.cookie = "WardListPath=" + escape(location.href) + ";";
  var ward = document.SelectWard.wardcode.value.replace(/ /g,"+");
  location.href="patweb95.pbl?reportno=5&template=001&wardcode=" + ward;
}
function ChangeWard() {
  document.cookie = "WardListPath=" + escape(location.href) + ";";
  var ward = document.SelectWard.wardcode.value.replace(/ /g,"+");
  location.href="websec01.pbl?reportno=5&template=001&wardcode=" + ward +"&wardflag=1";
}
function MHLegStat(urnumber,admissno) {
  linkurl="mehweb01.pbl?reportno=9&template=001" +
          "&urnumber=" + urnumber + "&admissno=" + admissno
  location.href=linkurl
}
function ShowExpected() {
  if(document.SelectWard.ptcnbman.value=="1") {
    document.getElementById("ExpectedPatientsHeading").innerHTML=
    document.getElementById("ShowExpectedPatientsHeading").innerHTML;
    document.getElementById("ExpectedPatientsHeading").style.height=20 + "px";

    if(document.SelectWard.d_togglexp.value=="1") {
      document.getElementById("togglexp").checked = true;
      document.getElementById("ExpectedPatients").innerHTML=
      document.getElementById("ShowExpectedPatients").innerHTML;
      document.getElementById("ExpectedPatients").style.height=140 + "px";
      document.getElementById("ExpectedPatients").style.overflow="auto";
    }
    SetCountExpected();
  } else {
    document.getElementById("ExpectedPatients").innerHTML="";
    document.getElementById("ExpectedPatientsHeading").innerHTML="";
    document.getElementById("FilterCurrent").innerHTML=
    document.getElementById("ShowWardFilter").innerHTML;
  }
}
</script>
%START.OF.PAGE
<body onload="PageLoad(event);SetCount();ShowExpected();">
<form name=SelectWard action=patweb93.pbl method=get style="margin:0">
<input type=hidden name=reportno value="1">
<input type=hidden name=template value="5">
<input type=hidden name=ptcnbman value="%STANDARD.01.025.112.107.0.1">
<input type=hidden name=d_togglexp value="%PATWEB93.01.066">
<input type=hidden name=d_wbdesc value="%PATWEB93.01.105">

<div id="ExpectedPatientsHeading"></div>     
<div id="ExpectedPatients"></div>     

<table width=100% cellspacing=0 border=0>
<tr><td class=HeadingCell>
    <img src="../images/TableViewIcon.gif" class=Icon
     alt="Default View" onclick='InitTable(0);'></td>
    <td class=HeadingCell align=center>
        Current Admission for %PATWEB93.01.105</td>
    <td class=HeadingCell width=10%><input type=button value="Change Ward (D)"
        class=Bigbutton onclick="ChangeWard();"></td>
    <td class=HeadingCell width=10%><input type=button value="Mod Avail Beds"
        class="button" onclick="ModBeds();"></td>
    </tr>
</table>

<table width=100% cellspacing=0 border=0>
<tr><td class=HeadingCell nowrap><div id="FilterCurrent"></div></td>
    <td class=HeadingCell nowrap> Type of Bed
        <select name=wbedtype onchange="SelectWard.submit();" >
                <option value="0">All Beds</option>
                <option value="1">Open Beds</option>
                <option value="2">Empty Beds Only</option>
    </select></td>
    <td class=HeadingCell nowrap> Number of Patients 
        <input type=text readonly name=numofpat size=3></td>
    <td class=HeadingCell nowrap>Patients in Un-Allocated Beds
        <input type=text readonly name=numunbed size=3></td>
</tr>
</table>

<table cellspacing=0 cellpadding=2 border=1 width=100% id=WardTable>
%PATWEB93.01.063.patweb98.01.001.patweb99.01.001.0.0.0.0.1.1
</table>

<table border=0 align=center width=100%>
<tr align=center height=35>
   <td width=25%></td>     
   <td width=10% class=AvailableCell align=center>
       Available Bed</td>
   <td width=10% class=ClosedCell align=center bgcolor=gray>
       Closed Bed</td>
   <td width=10% class=StandbyCell align=center>
       Standby Patient</td>
   <td width=10% class=PastDischDate align=center>
       Past Date </td>
   <td width=10% class=CurrDischDate align=center>
       Current Date </td>
   <td width=25%></td>
</tr>
</table>
</form>

<script type="text/javascript">
function SetCount() {
  document.SelectWard.numofpat.value="%PATWEB93.01.012" 
  document.SelectWard.numunbed.value="%PATWEB93.01.010" 
}

BedType="%PATWEB93.01.013"
for (var i =0 ; i < document.SelectWard.wbedtype.length; i++) {
  if (document.SelectWard.wbedtype.options[i].value==BedType.substr(0,1)) {
       document.SelectWard.wbedtype.selectedIndex=i } };
</script>

<div id="box1"></div>

<div id="ShowWardFilter" style="display:none">
Ward
<select name=wardcode onchange="SelectWard.submit();" >
 %PATWEB93.01.001
</select>
</div>

<div id="ShowExpectedPatientsHeading" style="display:none">
<table width=100% cellspacing=0 border=0>
<tr><td class=HeadingCell width=20% nowrap>
    Ward
    <select name=wardcode onchange="SelectWard.submit();" >
    %PATWEB93.01.001
    </select>
    <td class=HeadingCell align=center nowrap>
    <script type="text/javascript">
     document.write('Expected Admissions for ' + 
     document.SelectWard.d_wbdesc.value);</script>
    </td>
    <td class=HeadingCell width=18% nowrap>Number of Expected Patients 
    <input type=text readonly name=numofexp id="numofexp" size=3></td>
    <td class=HeadingCell width=15% nowrap>Display Expected Patients
    <input type=checkbox name=togglexp id="togglexp" value="1"
     onclick="SelectWard.submit();">
    </tr>
</table>
</div>

<div id="ShowExpectedPatients" style="display:none">
<table cellspacing=0 cellpadding=2 border=1 width=100% id=WardTable>
<!--  table of expected patients here -->
%PATWEB93.01.067
</table>
</div>

<script type="text/javascript">
function SetCountExpected() {
  document.getElementById("numofexp").value="%PATWEB93.01.068"
}
</script>
