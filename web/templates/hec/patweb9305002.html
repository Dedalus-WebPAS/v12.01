<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="hec">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<link rel="stylesheet" href="../html/WardWhiteboard.css" type="text/css">
<script type="text/javascript" src="../js/WardConditionalFields.js"></script>
%START.OF.PAGE
<script type="text/javascript"
 src="Javascript.php?reportno=1&pagekey=patweb9305&fname=setupConditionalSite">
</script>
<script type="text/javascript"
 src="Javascript.php?reportno=1&pagekey=patweb9305%PATWEB93.05.405.1&fname=setupConditionalWard">
</script>
<script type="text/javascript">
function ShowHideFields(){
  if (!isWhitespace(document.PatCondPopup.pmswo002.value) ||
      !isWhitespace(document.PatCondPopup.pmswo003.value) ||
      !isWhitespace(document.PatCondPopup.pmswo004.value)) {
    document.getElementById("WorkingDiagnosisTextarea").value=
    trim(document.PatCondPopup.pmswo002.value) + "\n" +
    trim(document.PatCondPopup.pmswo003.value) + "\n" +
    trim(document.PatCondPopup.pmswo004.value);
  }
}
</script>
</head>
<body onload="PageLoad(event);ShowHideFields();">
<!--        Sub-Frame Header Section       -->
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExitRefresh();">
Update Condition - %PATWEB93.05.002
</span>
<!--        Sub-Frame Details Sections     -->
<div id=PageBodySection>
<form name=PatCondPopup method=post %PATWEB93.05.101 
<input type=hidden name=pmswo002 value="%PATWEB93.05.202">
<input type=hidden name=pmswo003 value="%PATWEB93.05.203">
<input type=hidden name=pmswo004 value="%PATWEB93.05.204">
<input type=hidden name=dummy value="">

<input type=hidden id=pmsvx052 name=pmsvx052 value="">
<input type=hidden id=pmsvx053 name=pmsvx053 value="">
<input type=hidden id=pmsvx054 name=pmsvx054 value="">
<input type=hidden id=pmsvx055 name=pmsvx055 value="">

<input name="myChars" type="hidden"
  value="0" size="4" maxlength="4">
<input name="maxChars" type="hidden"
  value="0" size="4" maxlength="4">
<input name="myLines" type="hidden"
  value="0" size="4" maxlength="3">
<input name="maxLines" type="hidden"
  value="0" size="4" maxlength="3">

<table border=0 align=center width=100%>
<tr>
    <td class=DataLabel>Last Update</td>
    <td><input type=text class=readonly readonly size=20 name=patconup
               value="%PATWEB93.05.108"></td></tr>
<tr><td class=DataLabel>Condition </td>
    <td><select name=patconcd>
        <option value="   "></option>
        %PATWEB93.05.102
        </select>
</td></tr>
<tr><td class=DataLabel>Ambulatory Status</td>
    <td><select name=patconam>
        <option value="   "></option>
        %PATWEB93.05.107
        </select>
</td></tr>
<tr><td class=DataLabel> Visitors Allowed ?</td>
    <td><input name=patconva type=checkbox value=1>                   
    </td></tr>
<tr><td class=DataLabel> Phone Calls Allowed ?</td>
    <td><input name=patconpa type=checkbox value=1>                   
    </td></tr>
<tr><td class=DataLabel>%STANDARD.01.017.U2</td>
    <td><select name=ptmis038 title="">
        <option value="   "></option>
        %PATWEB93.05.109.2
        </select>
    </td></tr>
<tr><td class=DataLabel>Discharge Preparation Status</td>
    <td><select name=pmswo007 title="Discharge Preparation Status">
        <option value="   "></option>
        %PATWEB93.05.214.2
        </select>
    </td></tr>
<tr><td class=DataLabel>Expected Discharge Date</td>
    <td class=DataLabel><input type=text size=12 name=pmswo005 id=pmswo005
         tabindex=31
         class="Date" value="%PATWEB93.05.205" title="Expected Discharge Date">
        <img notab src="../images/DateLookup.gif" class=Icon
         onclick="DateLookupFrame(PatCondPopup.pmswo005);">
        Time
        <input type=text name=pmswo006 id=pmswo006 size=8
         title="Expected Discharge Time"
         value="%PATWEB93.05.213">
        <img notab src="../images/DateTimeStamp.gif" class=Icon
         onclick="SetCurrentDateTime(PatCondPopup.pmswo005,
                                     PatCondPopup.pmswo006);">
        <img notab src="../images/TimeLookup.gif" class=Icon 
         onclick="TimeLookupFrame(pmswo006);">
    </td></tr>
<tr><td class=DataLabel> Comments</td>
    <td><input name=patconds size=35 maxlength=35 value="%PATWEB93.05.103">
    </td></tr>

<tr>
    <td class="DataLabel">Discharge Coordinator</td>
    <td><input type="text" size="10" maxlength="10" name="pmswo008"
         value="%PATWEB93.05.215.1"
         onblur="ValidateHCP(18,0,
                             PatCondPopup.pmswo008,
                             PatCondPopup.doctnam1);">
        <input type="text" size="25" notab readonly class=Readonly
         name="doctnam1" value="%PATWEB93.05.215.2"/>
        <img src="../images/SearchIcon.gif" class="Icon"
         onclick="HCPSearchFrame(PatCondPopup.pmswo008,
                                 PatCondPopup.doctnam1,
                                 0);">
        <img src="../images/erase.gif" class=Icon
         onClick="clrFields(PatCondPopup.pmswo008,
                            PatCondPopup.doctnam1);">
     <td></tr>

<tr><td class="DataLabel">Expected Discharge Destination</td>
    <td><input type="text" size=10 maxlength=5 name=pmswo009
         title="Transfer Destination" value="%PATWEB93.05.216.1"
         onblur="validateTransSrc(PatCondPopup.pmswo009,
                                  PatCondPopup.dummy,
                                  PatCondPopup.trandesc);">
        <input type=text size=25 name=trandesc notab class=Readonly readonly
         value="%PATWEB93.05.216.2">
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="TransferSourceFrame(PatCondPopup.pmswo009,
                                      PatCondPopup.trandesc)">
        <img src="../images/erase.gif" class=Icon
         onclick="clrFields(PatCondPopup.pmswo009,
                            PatCondPopup.trandesc);">
    </td>
</tr>

<tr id=workingDiagnosis  style='display:none;'>
  <td class=DataLabel>Working Diagnosis</td>
  <td>
  <textarea rows=3 cols=35 style="overflow:hidden" id="WorkingDiagnosisTextarea"
   onblur="validateFreeTextFields(this)" 
   onkeydown="CheckLineCount(this,event)"
   maxlength=105>%PATWEB93.05.212</textarea>
  </td>
</tr>

<tr valign=top><td class=DataLabel>History</td>
<td class=DataField colspan=3>
<input type="hidden" name=histmyChars />
<input type="hidden" name=histmyLines />
  <textarea name=hiscomnt id=hiscomnt cols=50 rows=4 wrap="hard"
    style="font-size:14px; line-height:17px; "
    onkeyup="checkLimits(PatCondPopup.hiscomnt,
                         PatCondPopup.histmyChars,
                         PatCondPopup.histmyLines);">
%PATWEB93.05.352%PATWEB93.05.353%PATWEB93.05.354%PATWEB93.05.355
</textarea>
   </td></tr>

<tr id=freeText1 style='display:none;'>
    <td class=DataLabel id=freeTextLabel1></td>
    <td><input id=freeTextFld1 name=vsc18001 size=35
         maxlength=100 value="%PATWEB93.05.113.001"
         onblur="validateFreeTextFields(this);">
    </td></tr>
<tr id=freeText2 style='display:none;'>
    <td class=DataLabel id=freeTextLabel2></td>
    <td><input id=freeTextFld2 name=vsc18002 size=35
         maxlength=100 value="%PATWEB93.05.113.002"
         onblur="validateFreeTextFields(this);">
    </td></tr>
<tr id=freeText3 style='display:none;'>
    <td class=DataLabel id=freeTextLabel3></td>
    <td><input id=freeTextFld3 name=vsc18003 size=35
         maxlength=100 value="%PATWEB93.05.113.003"
         onblur="validateFreeTextFields(this);">
    </td></tr>
<tr id=freeText4 style='display:none;'>
    <td class=DataLabel id=freeTextLabel4></td>
    <td><input id=freeTextFld4 name=vsc18004 size=35
         maxlength=100 value="%PATWEB93.05.113.004"
         onblur="validateFreeTextFields(this);">
    </td></tr>
<tr id=freeText5 style='display:none;'>
    <td class=DataLabel id=freeTextLabel5></td>
    <td><input id=freeTextFld5 name=vsc18005 size=35
         maxlength=100 value="%PATWEB93.05.113.005"
         onblur="validateFreeTextFields(this);">
    </td></tr>
<tr id=freeText6 style='display:none;'>
    <td class=DataLabel id=freeTextLabel6></td>
    <td><input id=freeTextFld6 name=vsc18006 size=35
         maxlength=100 value="%PATWEB93.05.113.006"
         onblur="validateFreeTextFields(this);">
    </td></tr>
<tr id=freeText7 style='display:none;'>
    <td class=DataLabel id=freeTextLabel7></td>
    <td><input id=freeTextFld7 name=vsc18007 size=35
         maxlength=100 value="%PATWEB93.05.113.007"
         onblur="validateFreeTextFields(this);">
    </td></tr>
<tr id=freeText8 style='display:none;'>
    <td class=DataLabel id=freeTextLabel8></td>
    <td><input id=freeTextFld8 name=vsc18008 size=35
         maxlength=100 value="%PATWEB93.05.113.008"
         onblur="validateFreeTextFields(this);">
    </td></tr>
<tr id=userDefined1 style='display:none;'>
    <td class=DataLabel>%STANDARD.01.017.va</td>
    <td><select name=pmswo011 title="%STANDARD.01.017.va" class=selectBig>
        <option></option>
        %PATWEB93.05.218.2
        </select>
    </td></tr>
<tr id=userDefined2 style='display:none;'>
    <td class=DataLabel>%STANDARD.01.017.vb</td>
    <td><select name=pmswo012 title="%STANDARD.01.017.vb" class=selectBig>
        <option></option>
        %PATWEB93.05.219.2
        </select>
    </td></tr>

<tr id=userDefined3 style='display:none;'>
    <td class=DataLabel>%STANDARD.01.017.vc</td>
    <td><select name=pmswo013 title="%STANDARD.01.017.vc" class=selectBig>
        <option></option>
        %PATWEB93.05.220.2
        </select>
    </td></tr>

<tr id=userDefined4 style='display:none;'>
    <td class=DataLabel>%STANDARD.01.017.vd</td>
    <td><select name=pmswo014 title="%STANDARD.01.017.vd" class=selectBig>
        <option></option>
        %PATWEB93.05.221.2
        </select>
    </td></tr>

<tr id=userDefined5 style='display:none;'>
    <td class=DataLabel>%STANDARD.01.017.ve</td>
    <td><select name=pmswo015 title="%STANDARD.01.017.ve" class=selectBig>
        <option></option>
        %PATWEB93.05.222.2
        </select>
    </td></tr>

<tr id=userDefined6 style='display:none;'>
    <td class=DataLabel>%STANDARD.01.017.vf</td>
    <td><select name=pmswo016 title="%STANDARD.01.017.vf" class=selectBig>
        <option></option>
        %PATWEB93.05.223.2
        </select>
    </td></tr>

<tr id=userDefined7 style='display:none;'>
    <td class=DataLabel>%STANDARD.01.017.vg</td>
    <td><select name=pmswo017 title="%STANDARD.01.017.vg" class=selectBig>
        <option></option>
        %PATWEB93.05.224.2
        </select>
    </td></tr>

<tr id=userDefined8 style='display:none;'>
    <td class=DataLabel>%STANDARD.01.017.vh</td>
    <td><select name=pmswo018 title="%STANDARD.01.017.vh" class=selectBig>
        <option></option>
        %PATWEB93.05.225.2
        </select>
    </td></tr>

<tr id=userChk0 style='display:none;'>
    <td class=DataLabel id=chkLab0></td>
    <td><input type=checkbox id=userchk0id name=userchk0 value=1>
        <span class=buttonInd0></span>
    </td></tr>

<tr id=userChk1 style='display:none;'>
    <td class=DataLabel id=chkLab1></td>
    <td><input type=checkbox id=userchk1id name=userchk1 value=1>
        <span class=buttonInd1>&nbsp;</span>
    </td></tr>

<tr id=userChk2 style='display:none;'>
    <td class=DataLabel id=chkLab2></td>
    <td><input type=checkbox id=userchk2id name=userchk2 value=1>
        <span class=buttonInd2></span>
    </td></tr>

<tr id=userChk3 style='display:none;'>
    <td class=DataLabel id=chkLab3></td>
    <td><input type=checkbox id=userchk3id name=userchk3 value=1>
        <span class=buttonInd3></span>
    </td></tr>

<tr id=userChk4 style='display:none;'>
    <td class=DataLabel id=chkLab4></td>
    <td><input type=checkbox id=userchk4id name=userchk4 value=1>
        <span class=buttonInd4></span>
    </td></tr>

<tr id=userChk5 style='display:none;'>
    <td class=DataLabel id=chkLab5></td>
    <td><input type=checkbox id=userchk5id name=userchk5 value=1>
        <span class=buttonInd5></span>
    </td></tr>

<tr id=userChk6 style='display:none;'>
    <td class=DataLabel id=chkLab6></td>
    <td><input type=checkbox id=userchk6id name=userchk6 value=1>
        <span class=buttonInd6></span>
    </td></tr>

<tr id=userChk7 style='display:none;'>
    <td class=DataLabel id=chkLab7></td>
    <td><input type=checkbox id=userchk7id name=userchk7 value=1>
        <span class=buttonInd7></span>
    </td></tr>

<tr id=userChk8 style='display:none;'>
    <td class=DataLabel id=chkLab8></td>
    <td><input type=checkbox id=userchk8id name=userchk8 value=1>
        <span class=buttonInd8></span>
    </td></tr>

<tr id=userChk9 style='display:none;'>
    <td class=DataLabel id=chkLab9></td>
    <td><input type=checkbox id=userchk9id name=userchk9 value=1>
        <span class=buttonInd9></span>
    </td></tr>


<tr><td align=center colspan=2>
<input name=vsc18009 id=vsc18009 type=hidden value="%PATWEB93.05.113.009">
<input name=vsc18010 id=vsc18010 type=hidden value="%PATWEB93.05.113.010">
<input type=button value="Update" id=btnUpdate class="button"
 onclick='tempDisable(this);SaveForm();'>
<input type=button value="Cancel" class="button"
 onclick="DFrameCloseRefresh();">
</td></tr>

</table>
</form>
</div>
 
<script type="text/javascript">
function SaveForm() {
  var usrChk="";
  el=document.getElementById("vsc18010");
  for (var x=0;x<10;x++) {
    if (document.getElementById("userchk"+x+"id").checked) {
      usrChk+='1';
    } else {
      usrChk+='0';
    }
  }
  el.value=usrChk;
  lines=["","",""];
  nextLine=0;
  WDT = trim(document.getElementById("WorkingDiagnosisTextarea").value.replace(/[\r]/g, ''));

  for(i=0;i<WDT.length;i++){
    if(WDT.substr(i,1)=="\n"){
       nextLine++;
    }
    else if(lines[nextLine].length>34){
       nextLine++;
       lines[nextLine]+=WDT.substr(i,1);
    }
    else{
       lines[nextLine]+=WDT.substr(i,1);
    }
  }
  document.PatCondPopup.pmswo002.value = lines[0];
  document.PatCondPopup.pmswo003.value = lines[1];
  document.PatCondPopup.pmswo004.value = lines[2];
  splitComments();
  document.PatCondPopup.submit();
}
function splitComments() {
  var textarea = document.getElementById('hiscomnt');

  var arr = new Array();
  for(var i = 0;i < 4; i++) {

    arr[i] = textarea.value.replace(/\r\n/g," ").substr(i*50,((i+1)*50));
  }


   pmsvx052 = document.getElementById('pmsvx052');
   pmsvx053 = document.getElementById('pmsvx053');
   pmsvx054 = document.getElementById('pmsvx054');
   pmsvx055 = document.getElementById('pmsvx055');

   pmsvx052.value = arr[0];
   pmsvx053.value = arr[1];
   pmsvx054.value = arr[2];
   pmsvx055.value = arr[3];
}
function init() {
  setupConditionalSite();
  setupConditionalWard();
  var el;
  if (showWorkingDiagnosis==1) {
    el=document.getElementById("workingDiagnosis");
    el.style.display="";
  }
  if (freeTxtFld1==1) {
    el=document.getElementById("freeText1");
    el.style.display="";
    document.getElementById("freeTextLabel1").innerText=freeTxtLab1;
    document.getElementById("freeTextFld1").size=freeTxtLen1;
  }
  if (freeTxtFld2==1) {
    el=document.getElementById("freeText2");
    el.style.display="";
    document.getElementById("freeTextLabel2").innerText=freeTxtLab2;
    document.getElementById("freeTextFld2").size=freeTxtLen2;
  }
  if (freeTxtFld3==1) {
    el=document.getElementById("freeText3");
    el.style.display="";
    document.getElementById("freeTextLabel3").innerText=freeTxtLab3;
    document.getElementById("freeTextFld3").size=freeTxtLen3;
  }
  if (freeTxtFld4==1) {
    el=document.getElementById("freeText4");
    el.style.display="";
    document.getElementById("freeTextLabel4").innerText=freeTxtLab4;
    document.getElementById("freeTextFld4").size=freeTxtLen4;
  }
  if (freeTxtFld5==1) {
    el=document.getElementById("freeText5");
    el.style.display="";
    document.getElementById("freeTextLabel5").innerText=freeTxtLab5;
    document.getElementById("freeTextFld5").size=freeTxtLen5;
  }
  if (freeTxtFld6==1) {
    el=document.getElementById("freeText6");
    el.style.display="";
    document.getElementById("freeTextLabel6").innerText=freeTxtLab6;
    document.getElementById("freeTextFld6").size=freeTxtLen6;
  }
  if (freeTxtFld7==1) {
    el=document.getElementById("freeText7");
    el.style.display="";
    document.getElementById("freeTextLabel7").innerText=freeTxtLab7;
    document.getElementById("freeTextFld7").size=freeTxtLen7;
  }
  if (freeTxtFld8==1) {
    el=document.getElementById("freeText8");
    el.style.display="";
    document.getElementById("freeTextLabel8").innerText=freeTxtLab8;
    document.getElementById("freeTextFld8").size=freeTxtLen8;
  }
  if (btnFld0==1) {
    el=document.getElementById("userChk0");
    el.style.display="";
    document.getElementById("chkLab0").innerText=btnLab0;
  }
  if (btnFld1==1) {
    el=document.getElementById("userChk1");
    el.style.display="";
    document.getElementById("chkLab1").innerText=btnLab1;
  }
  if (btnFld2==1) {
    el=document.getElementById("userChk2");
    el.style.display="";
    document.getElementById("chkLab2").innerText=btnLab2;
  }
  if (btnFld3==1) {
    el=document.getElementById("userChk3");
    el.style.display="";
    document.getElementById("chkLab3").innerText=btnLab3;
  }
  if (btnFld4==1) {
    el=document.getElementById("userChk4");
    el.style.display="";
    document.getElementById("chkLab4").innerText=btnLab4;
  }
  if (btnFld5==1) {
    el=document.getElementById("userChk5");
    el.style.display="";
    document.getElementById("chkLab5").innerText=btnLab5;
  }
  if (btnFld6==1) {
    el=document.getElementById("userChk6");
    el.style.display="";
    document.getElementById("chkLab6").innerText=btnLab6;
  }
  if (btnFld7==1) {
    el=document.getElementById("userChk7");
    el.style.display="";
    document.getElementById("chkLab7").innerText=btnLab7;
  }
  if (btnFld8==1) {
    el=document.getElementById("userChk8");
    el.style.display="";
    document.getElementById("chkLab8").innerText=btnLab8;
  }
  if (btnFld9==1) {
    el=document.getElementById("userChk9");
    el.style.display="";
    document.getElementById("chkLab9").innerText=btnLab9;
  }
  el=document.getElementById("userDefined1");
  if (codedFld1==1) el.style.display="";
  el=document.getElementById("userDefined2");
  if (codedFld2==1) el.style.display="";
  el=document.getElementById("userDefined3");
  if (codedFld3==1) el.style.display="";
  el=document.getElementById("userDefined4");
  if (codedFld4==1) el.style.display="";
  el=document.getElementById("userDefined5");
  if (codedFld5==1) el.style.display="";
  el=document.getElementById("userDefined6");
  if (codedFld6==1) el.style.display="";
  el=document.getElementById("userDefined7");
  if (codedFld7==1) el.style.display="";
  el=document.getElementById("userDefined8");
  if (codedFld8==1) el.style.display="";

  el=document.getElementById("vsc18010");
  for (var x=0;x<10;x++) {
    var ind=el.value.substr(x,1);
    if (ind=="1") {
      var chk=document.getElementById("userchk"+x+"id");
      chk.setAttribute('checked', 'checked') ;
      chk.checked=true;
    }
  }
}
function validateFreeTextFields(textfieldvar) {
  textfieldvar.value=textfieldvar.value.replace(/</g,"< ");
  textfieldvar.value=textfieldvar.value.replace(/"/g,"'");
  textfieldvar.value=textfieldvar.value.replace(/\\/g,"/");
}
function CheckLineCount(obj,e){
  maxRows = parseInt(obj.rows);
  maxChars = parseInt(obj.maxlength);
  i=0;
  lines=1;
  chars=1;
  objString = obj.value+String.fromCharCode(e.keyCode);

  // char limit reached or line limit reached
  if((objString.length>maxChars)||(objString.replace(/[\n]/g, '').split("\r").length>maxRows)){
       e.keyCode=null;
       return false;
  }
  while(objString.substr(i,1)!= ""){
    if(lines>maxRows){
       e.keyCode=null;
       return false;
    }
    else if(objString.substr(i,1)=="\r"){
       lines++;
       chars=0;
       i++;
    }
    else if((chars%35==0)&&(chars!=0)){
       lines++;
       chars=0;
       i++;
    }
    else{
       chars++;
       i++;
    }
  }
  if(lines>maxRows){  //if last char= '\n' | '\r'
     e.keyCode=null;
     return false
  }else{
     return true;
  }
}
if  ("%PATWEB93.05.106.1" == "1")
{
  document.PatCondPopup.patconva.checked="1";
}
if  ("%PATWEB93.05.106.2" == "1")
{
  document.PatCondPopup.patconpa.checked="1";
}
</script>
