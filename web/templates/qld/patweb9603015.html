<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="qld">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/preadmission.js"></script>

<style type=text/css> 
.TransferOption {
position: relative; 
}
</style>
<script type="text/javascript">
function DisContract() {
  if (document.pat96ins.ptcnqcct.value !="S ") {
    i=document.pat96ins.traclaim.selectedIndex;
    ind=document.pat96ins.traclaim.options[i].value.substring(11,12)
  } else {
    ind="";
  }

  if (ind=="P") {
    ContractHeading.innerHTML=contracthd.innerHTML;
    ContractType.innerHTML=contracttype.innerHTML;
    Contrac1Heading.innerHTML=contracrhd.innerHTML;
    ContractRole.innerHTML=contractrole.innerHTML;
    Contrac2Heading.innerHTML=contracihd.innerHTML;
    ContractId.innerHTML=contractid.innerHTML;

    ContractHeading.style.display = "";
    ContractType.style.display = "";
    Contrac1Heading.style.display = "";
    ContractRole.style.display = "";
    Contrac2Heading.style.display = "";
    ContractId.style.display = "";

    if (document.pat96ins.ptcnqcct.value =="CL") {
      document.pat96ins.d_ptasf001.className="Mandatory";
      document.pat96ins.d_ptasf002.className="Mandatory";
      document.pat96ins.d_ptasf003.className="Mandatory";
    }

  } else {
    ContractHeading.innerHTML=blanklabel.innerHTML;
    ContractType.innerHTML="";
    Contrac1Heading.innerHTML=blanklabel.innerHTML;
    ContractRole.innerHTML="";
    Contrac2Heading.innerHTML=blanklabel.innerHTML;
    ContractId.innerHTML="";

    ContractHeading.style.display = "none";
    ContractType.style.display = "none";
    Contrac1Heading.style.display = "none";
    ContractRole.style.display = "none";
    Contrac2Heading.style.display = "none";
    ContractId.style.display = "none";
  }
}

function SubmitInsurance() {
  if (!validateMandatory(pat96ins)) {
     return;
  }
  
  var ind = ""; 

  if (document.pat96ins.ptcnqcct.value !="S ") {
    i=document.pat96ins.traclaim.selectedIndex;
    ind=document.pat96ins.traclaim.options[i].value.substring(11,12)
  }
  
  if (ind != "P") {
     document.pat96ins.ptasf001.value = "";
     document.pat96ins.ptasf002.value = "";
     document.pat96ins.ptasf003.value = "";
  }else {
     var d_ptasf001 = document.getElementById('d_ptasf001');
     var d_ptasf002 = document.getElementById('d_ptasf002');
     var d_ptasf003 = document.getElementById('d_ptasf003');
     var j =  d_ptasf003.selectedIndex;

     document.pat96ins.ptasf001.value = d_ptasf001.value;
     document.pat96ins.ptasf002.value = d_ptasf002.value;  
     document.pat96ins.ptasf003.value = d_ptasf003.options[j].value;

  }
  
  if (!isWhitespace(pat96ins.tranfund.value)) {
     if (!validateHFT(20,pat96ins.tranfund,pat96ins.trantabl,
                         pat96ins.funddesc,pat96ins.tabldesc)) {
        ans=confirm("Select another active health fund table? ");
        if (ans==true) {
           return;
        }
     }
  }
  UpdHealthFund();
  setRedirect()
  SubmitHidden(pat96ins);
}
function setRedirect() {
   if (document.pat96ins.traclaim.value.substr(3,1) == "M") {
     document.pat96ins.redirect.value="patweb89.pbl?reportno=01&template=006"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value;
   } else if (document.pat96ins.traclaim.value.substr(3,1) == "V") {
     document.pat96ins.redirect.value="patweb89.pbl?reportno=01&template=007"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value;
   } else if (document.pat96ins.traclaim.value.substr(3,1) == "W") {
     document.pat96ins.redirect.value="patweb89.pbl?reportno=01&template=005"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value;
   } else if (document.pat96ins.traclaim.value.substr(8,1) == "C") {
     document.pat96ins.redirect.value="patweb89.pbl?reportno=01&template=021"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value;
   } else {
     ReturnPath=GetCookieData('InvoiceReturn');
     if (!isWhitespace(ReturnPath) && ReturnPath!='unknown') {
       document.cookie="InvoiceReturn=;"            // clear cookie
       document.pat96ins.redirect.value=ReturnPath; // return to invoice scr
     } else if ((document.pat96ins.traclaim.value.substr(5,1)=="A")&&
                (document.pat96ins.ptcnueoc.value==1)) {
       document.pat96ins.redirect.value="eocweb01.pbl?reportno=01&template=006"
       + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
       + "&admissno=" + document.PatientLinks.admissno.value
       + "&returncd=TRF";
     } else {
       document.pat96ins.redirect.value="patweb96.pbl?reportno=03&template=013"
       + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
       + "&admissno=" + document.PatientLinks.admissno.value;
     }
   }
}
function CancelInsurance() {
  ReturnPath=GetCookieData('InvoiceReturn');
  if (!isWhitespace(ReturnPath) && ReturnPath!='unknown') {
    document.cookie="InvoiceReturn=;"   // clear cookie
    location.href=ReturnPath;           // return to raise invoice screen
  }
  else {
    PatientLinkTo('patweb96.pbl',3,13,0);
  }
}
function UpdHealthFund() {
   updhf=document.pat96ins.ptcnpmhf.value;
   if (updhf=="1") {
     if((pat96ins.pmihfund.value!=pat96ins.tranfund.value) ||
        (pat96ins.pmihftab.value!=pat96ins.trantabl.value))  {
    if(!confirm("Do you want to Update the PMI Health Fund/Table/Membership Number?\n" +
                "Press OK to update the PMI record with the new Fund details.\n" +
                "Press Cancel to retain the existing PMI Fund details."))
         {
           pat96ins.updhfund.value="1";   // NOT to Update PMI Health fund
           return;
         }
      }
   }
   pat96ins.updhfund.value="0";     // default to Update PMI Health fund
}

</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);DisContract();">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB96.03.003";
PatientVIS="%PATWEB96.03.081";
PatientNAM="%PATWEB96.03.002";
PatientSTA="%PATWEB96.03.086.078";
PatientALT="%PATWEB96.03.084";
PatientSEX="%PATWEB96.03.019";
PatientDOB="%PATWEB96.03.020";
PatientAGE="%PATWEB96.03.021";
PatientLOC="%PATWEB96.03.083";
PatientPRI="%PATWEB96.03.086.066.1";
PatientUNT="%PATWEB96.03.066.0";
DoctorCOD="%PATWEB96.03.082.003";
DoctorNAM="%PATWEB96.03.082.002";
PatientAID="%PATWEB96.03.086.090";
PatientIND="%PATWEB96.03.086.091";
PatientCUR="%PATWEB96.03.086.092";
PatientCLC="%PATWEB96.03.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB96.03.086.094";
PatientCDM="%PATWEB96.03.086.095";
PatientVDH="%PATWEB96.03.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>
<form name=pat96ins %PATWEB96.03.201.001 
    <input type=hidden name=reportno value="10">
    <input type=hidden name=urnumber value="%PATWEB96.03.003">
    <input type=hidden name=admissno value="%PATWEB96.03.081">
    <input type=hidden name=redirect value="%PATWEB96.03.001.patweb96.03.013">
    <input type=hidden name=nextpage value="7">
    <input type=hidden name=trnleave value="0">
    <input type=hidden name=bedstat1>
    <input type=hidden name=warddesc >
    <input type=hidden name=formactn >
    <input type=hidden name=admistat value="%PATWEB96.03.104">
    <input type=hidden name=ptcnqcct value="%STANDARD.01.025.105.235.0.2">
    <input type=hidden name=ptcnueoc value="%PATWEB96.03.224">
    <input type=hidden name=ptasf001 value=" ">
    <input type=hidden name=ptasf002 value=" ">
    <input type=hidden name=ptasf003 value=" ">
    <input type=hidden name=updhfund value="">
    <input type=hidden name=pmihfund value="%PATWEB96.03.040.0">
    <input type=hidden name=pmihftab value="%PATWEB96.03.041.0">
    <input type=hidden name=ptcnpmhf id="ptcnpmhf"
     value="%STANDARD.01.025.124.157.0.1">

<table border=1 width=100% cellspacing=0 cellpadding=1 >
    <tr><td class=HeadingCell align=center colspan=2 width=100%>
        Patient Status Adjustment</td></tr>
</table>
<table border=0  width=100% cellspacing=1 >
     <tr>
       <td class=HeadingCell align=center >Current Status</td>
       <td align=center class=HeadingCell >Insurance Details</td>
     </tr>
     <tr style="vertical-align:top;">
        <td>
          <table border=0 width=100% cellspacing=1 >
            <tr>
               <td class=DataLabel>Ward / Bed </td>
               <td><input type=text size=25 readonly value="%PATWEB96.03.105.0">
               <input type=text size=15 readonly value="%PATWEB96.03.106"></td>
            </tr>  
            <tr>
              <td class=DataLabel>Transfer In Date & Time </td>
              <td>
                <input type=text size=11 readonly value="%PATWEB96.03.204" >
                <input type=text size=5 readonly value="%PATWEB96.03.205">
              </td>

            </tr>
            <tr>
               <td class=DataLabel>Attending Doctor</td>
               <td>
                 <input type=text size=35 readonly
                        value="%PATWEB96.03.108.002">
               </td>

            </tr>
            <tr>
               <td class=DataLabel>%STANDARD.01.017.A </td>
               <td>
                  <input type=text readonly size=30
                         value="%PATWEB96.03.111.0"> 
               </td>
            </tr>
            <tr>
               <td class=DataLabel>%STANDARD.01.017.CC</td>
               <td><input type=text readonly size=30
                          value="%PATWEB96.03.113.0">
               </td>
            </tr>
            <tr>
              <td class=DataLabel>%STANDARD.01.017.AC</td>
              <td><input type=text readonly size=30
                         value="%PATWEB96.03.124.0">
              </td>
            </tr>
          </table>
        </td>
        <td>
          <table border=0 width=100% cellspacing=1>
            <tr>
               <td class=DataLabel>%STANDARD.01.017.CL</td>
               <td>
                  <select name=traclaim class=Mandatory onchange="DisContract();">
                    <option></option>
                      %PATWEB96.03.126.9.1.10.2.X
                  </select>
               </td>
            </tr> 
            <tr>
               <td class=DataLabel><div id=Contrac2Heading></div></td>
               <td><div id=ContractId></div></td>
            </tr>
            <tr>
              <td class=DataLabel><div id=ContractHeading></div></td>
              <td><div id=ContractType></div></td>
            </tr>
            <tr>
              <td class=DataLabel><div id=Contrac1Heading></div></td>
              <td><div id=ContractRole></div></td>
            </tr>
            <tr>
               <td class=DataLabel>Health Fund</td>
               <td><input type="hidden" name="tranfund" value="%PATWEB96.03.114.0">
                <input type=text size=35 name=funddesc maxlength="30"
                       value="%PATWEB96.03.114.1" notab readonly>
               </td>
            </tr>
            <tr>
               <td>Table</td>
               <td>
                  <input type="hidden" name="trantabl" value="%PATWEB96.03.115.0">
                  <input type="text" size=20 maxlength=30 name="tabldesc"
                         value="%PATWEB96.03.115.1" notab readonly>
                  <img src="../images/SearchIcon.gif" class=Icon
                       onclick="HealthFundSearchFrameNoFocus(pat96ins.tranfund,
                                                             pat96ins.funddesc,
                                                             pat96ins.trantabl,
                                                             pat96ins.tabldesc);">
                  <img src="../images/erase.gif" class=Icon
                       onclick="clrDoc(pat96ins.funddesc,pat96ins.tabldesc);
                                clrDoc(pat96ins.tranfund,pat96ins.trantabl);">
               </td>
            </tr>
            <tr>
               <td class=DataLabel>Member Number</td>
               <td>
                 <input type=text name=tranmemb size=25  value="%PATWEB96.03.116">
               </td>
            </tr>
          </table>
        </td>
     </tr>
  </table>
  <table  border=0 width=100% cellspacing=1>
    <tr>
      <td align=center colspan=2>
        <input type=button name=formactn value=Update class="button" id=btnUpdate
         onclick="tempDisable(this);SubmitInsurance();">
        <input type=button value=Cancel class="button"
         onclick="CancelInsurance();">
      </td>
     </tr>
</table>
</form>
</div>

<span id=contracthd style="display:none">
Contract Type
</span>

<span id=contracrhd style="display:none">
Contract Role
</span>

<span id=contracihd style="display:none">
 Contract Id
</span>

<span id=contractid style="display:none">
  <select name="d_ptasf003" id="d_ptasf003" title="Contract Spoke Id" tabindex=29>
  <option> </option>
   %PATWEB96.03.199.003.0
  </select>
</span>

<span id=contracttype style="display:none">
  <input type="text" id="d_ptasf001" name=d_ptasf001 size=2 maxlength=1
   value="%PATWEB96.03.199.001" tabindex=30
   title="Contract Type"
   onblur="ContType(this);">
   <img src="../images/SearchIcon.gif" class=Icon
   onclick="ContTypeAlert();">
</span>

<span id=contractrole style="display:none">
  <input type="text" id="d_ptasf002" name=d_ptasf002 size=2 maxlength=1
   value="%PATWEB96.03.199.002" tabindex=31
   title="Contract Role"
   onblur="ContRole(this);">
   <img src="../images/SearchIcon.gif" class=Icon
   onclick="ContRoleAlert();">
</span>

<span id=blanklabel style="display:none">&nbsp;</span>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%PATWEB96.03.003">
<input type=hidden name=admissno value="%PATWEB96.03.081">
<input type=hidden name=MenuType value="%PATWEB96.03.088">
<input type=hidden name=alert001 value="">
</form>
