<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="nz">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script language="javascript" src="../js/allweb02.js"></script>
<script type="text/javascript" src="../js/OutpatientTypeClinic.js"></script>
<script type="text/javascript">
function TransferFormactn(type) {
  var p=document.UpdateForm
  if(p.d_deptcode.value == p.deptcode.value &&
     trim(p.d_alref038.value) == trim(p.alref038.value) &&
     trim(p.d_alref087.value) == trim(p.alref087.value) &&
     trim(p.d_alref107.value) == trim(p.alref107.value) &&
     trim(p.d_alref119.value) == trim(p.alref119.value) &&
     trim(p.d_alref106.value) == trim(p.alref106.value) &&
     trim(p.d_alref120.value) == trim(p.alref120.value) &&
     trim(p.d_alref117.value.substr(0,3)) == trim(p.alref117.value.substr(0,3))) {
     alert("Warning: No fields changed so no Transfer has been actioned.");
     return;
  }

  document.UpdateForm.updatety.value=type;
  if (type=="B") {
    if (validateMandatory(UpdateForm)) {
       document.UpdateForm.submit(); 
    } 
  }
}
function SetSite() {
  p=UpdateForm
  var SetSite
  if(isWhitespace(p.alref119.value)) {
    SetSite=p.wbsesite.value;
  } else {
    SetSite=p.alref119.value;
  }
  for (var i =0 ; i < document.UpdateForm.alref119.length; i++) {
    if (document.UpdateForm.alref119.options[i].value==SetSite.substr(0,6)) {
        document.UpdateForm.alref119.selectedIndex=i }
  };
  SetList();
}
function SetList() {
  p=UpdateForm
  p.alref106.options.length=1;
  DeptClinicTypeActive(p.deptcode,p.alref119,p.alref106,p.defctype)
  SetList2();
}
function SetList2() {
  p=UpdateForm
  p.alref120.options.length=1;
  SetTypeClinic(p.alref120,p.deftclid.value,p.alref119.value,p.alref106.value);
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);SetSite();">
<span class=DFrameTitleBar>
<img border=0 align=right src="../images/ExitIcon.gif" class=MenuIcon
 onclick="DFrameExit();">
 %ALLWEB02.02.125.0 Transfer Referral</span>
<div id=PageBodySection> 
<form name=UpdateForm onsubmit='return validateMandatory(this)' 
            action="allweb02.pbl" method=post style="margin:0">
<input type=hidden name=reportno value="2">
<input type=hidden name=updatety value="">
<input type=hidden name=urnumber value="%ALLWEB02.02.003">
<input type=hidden name=admissno value="%ALLWEB02.02.081">
<input type=hidden name=d_deptcode value="%ALLWEB02.02.125.1">
<input type=hidden name=d_alref038 value="%ALLWEB02.02.138.1">
<input type=hidden name=d_alref087 value="%ALLWEB02.02.148.1">

<input type=hidden name=d_alref107 value="%ALLWEB02.02.170.0">
<input type=hidden name=d_alref119 value="%ALLWEB02.02.182.1">
<input type=hidden name=d_alref106 value="%ALLWEB02.02.188.1">
<input type=hidden name=d_alref120 value="%ALLWEB02.02.188.1">
<input type=hidden name=d_alref117 value="%ALLWEB02.02.199.073.1">
<input type=hidden name=defctype value="%ALLWEB02.02.167.1">
<input type=hidden name=deftclid value="%ALLWEB02.02.188.1">

<table align=center cellspacing=0 cellpadding=1 border=0 width=95%>
<tr><td class=DataLabel>Transfer From</td>
    <td class=DataField>&nbsp;</td>
    <td class=DataLabel>Transfer To</td>
    <td class=DataField>&nbsp;</td>
    </tr>

<tr><td class=DataLabel>Department Code</td>
    <td><input type=text value="%ALLWEB02.02.125.0" 
         readonly class=Readonly tabindex=-1></td>
    <td class=DataLabel>Department Code</td>
    <td class=DataField><select name=deptcode title="Department Code"
                         class="Mandatory" onchange="SetList();">
                        <option value="   "></option>
                        %ALLWEB02.02.238
                        </select>
    </td></tr>

<!--     HCP - 18,0=All Active   18,13=Active Other   18,14=Active Attending //-->
<tr><td class=DataLabel>Responsible HCP</td>
    <td class=DataField><input type=text size=10 class="Readonly" readonly
         value="%ALLWEB02.02.138.1" title="Responsible HCP" tabindex=-1>
        <input type=text size=26 readonly title="HCP Name" tabindex=-1
         value="%ALLWEB02.02.138.0" class=Readonly></td>
    <td class=DataLabel>Responsible HCP</td>
    <td><input type=text name=alref038 size=10 maxlength=10 class=Mandatory
         value="%ALLWEB02.02.138.1" title="Responsible HCP"
         onblur="ValidateHCP(18,14,UpdateForm.alref038,UpdateForm.n_alref038);" >
        <input type=text name=n_alref038 size=26 readonly title="HCP Name"
         value="%ALLWEB02.02.138.0" class=Readonly tabindex=-1>
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="HCPSearchFrame(UpdateForm.alref038,UpdateForm.n_alref038,1);">
        <img src="../images/ClearIcon.gif" class=Icon
         onclick="clrFields(UpdateForm.alref038,UpdateForm.n_alref038);">
    </td></tr>

<tr><td class=DataLabel>Case Team</td>
    <td class=DataField><input type=text size=11 tabindex=-1
         title="Case Team" value="%ALLWEB02.02.148.1" class="Readonly" readonly>
        <input type=text size=25 readonly tabindex=-1
         class=Readonly title="Team Description"
         value="%ALLWEB02.02.148.0">
    </td>
    <td class=DataLabel>Case Team</td>
    <td class=DataField><input type=text name=alref087 size=11 maxlength=11
         title="Case Team" value="%ALLWEB02.02.148.1"
         onblur="validateCode2(7,UpdateForm.alref087,UpdateForm.n_alref087)">
        <input type=text name=n_alref087 size=25 readonly
         class=Readonly tabindex=-1 title="Team Description"
         value="%ALLWEB02.02.148.0">
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="TeamSearchFrame(UpdateForm.alref087,UpdateForm.n_alref087)">
         <img src="../images/ClearIcon.gif" class=Icon
         onclick="clrFields(UpdateForm.alref087,UpdateForm.n_alref087);">
    </td></tr>

<tr><td class=DataLabel>Preferred Hospital</td>
    <td class=DataField><input type=text size=25 readonly tabindex=-1 
                         class="Readonly" title="Preferred Hospital"
                         value="%ALLWEB02.02.170.1">
    </td>
    <td class=DataLabel>Preferred Hospital</td>
    <td><select name=alref107 id=alref107  title="Preferred Hospital"
            class="Mandatory" type="" tabindex="50">
          <option></option>
           %ALLWEB02.02.170.2
         </select>
    </td>

<tr><td class=DataLabel>Preferred Site</td>
    <td class=DataField><input type=text size=25 readonly tabindex=-1 
                         class="Readonly" title="Preferred Site"
                         value="%ALLWEB02.02.182.0">
    </td>
    <td class=DataLabel>Preferred Site</td>
    <td><select name=alref119 title="Preferred Site"
                tabindex=51 class="SelectBig" onchange="SetList();">
                        <option></option>
                          %ALLWEB02.02.182.2
                        </select>
    </td>
</tr>

<tr><td class=DataLabel>Clinic Type</td>
    <td class=DataField><input type=text size=25 readonly tabindex=-1 
                         class="Readonly" title="Clinic Type"
                         value="%ALLWEB02.02.167.0">
    </td>
    <td class=DataLabel>Clinic Type</td>
    <td><select class=SelectBig name=alref106 maxlength=45 tabindex=52
                title="Clinic Type" onchange="SetList2();" class="Mandatory">
                        <option></option>
                        </select>
    </td>
</tr>

<tr><td class=DataLabel>Clinic Id</td>
    <td class=DataField><input type=text size=25 readonly tabindex=-1 
                         class="Readonly" title="Clinic Id"
                         name="disp_clinid">
    </td>
    <td class=DataLabel>Clinic Id</td>
    <td><select name=alref120 title="Clinic Id" class="SelectBig" tabindex=53>
                        <option></option>
                        </select>
    </td>
</tr>

<tr><td class=DataLabel>Slot Type</td>
    <td class=DataField><input type=text size=25 readonly tabindex=-1 
                         class="Readonly" title="Slot Type"
                         value="%ALLWEB02.02.199.073.0">
    </td>
    <td class=DataLabel>Slot Type</td>
    <td><select name=alref117 class=SelectBig title="Slot Type" tabindex=54
                         class="Mandatory">
                        <option></option>
                        %ALLWEB02.02.180
                        </select>
    </td>
</tr>

<tr><td colspan=4 align=center><br>
    <input type=button value="Update" class=button id="all02sub"
     onclick="tempDisable(this);TransferFormactn('B');">
    <input type=button value="Cancel" class=button
     onclick="DFrameCloseRefresh();">
    </td></tr>
</table>
</form>
</div>

<script type="text/javascript">
 document.UpdateForm.deptcode.selectedIndex=0;
 for (var i =0 ; i < document.UpdateForm.deptcode.length; i++) {
  if (document.UpdateForm.deptcode.options[i].value==
      document.UpdateForm.d_deptcode.value.substr(0,3)) {
      document.UpdateForm.deptcode.selectedIndex=i } };
  if (!isWhitespace("%ALLWEB02.02.188.1")) {
      document.UpdateForm.disp_clinid.value=trim("%ALLWEB02.02.188.1") + " - "
       + trim("%ALLWEB02.02.188.0");
  }
</script>
