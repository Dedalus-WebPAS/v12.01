<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="nz">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/mehweb0109006.js"></script>
</head>

%START.OF.PAGE
<body onload="PageLoad(event);SetCourtData(document.UpdateForm.courtdat.value);ShowLS();">
<span class=DFrameTitleBar>
<img align=right alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
Legal Status Supervisor
</span>
<form name=UpdateForm id=UpdateForm action="mehweb01.pbl" method=post 
 onsubmit='return validateMandatory(this);'>
<input type=hidden name=reportno id=reportno value="9">
<input type=hidden name=updttype id=updttype value="S">
<input type=hidden name=urnumber id=urnumber value="%MEHWEB01.09.003">
<input type=hidden name=admissno id=admissno value="%MEHWEB01.09.081">
<input type=hidden name=uniqnumb id=uniqnumb value="%MEHWEB01.09.201">
<input type=hidden name=opendate id=opendate value="%MEHWEB01.09.303">
<input type=hidden name=opentime id=opentime value="%MEHWEB01.09.203">
<input type=hidden name=resident id=resident value="%MEHWEB01.09.213.0">
<input type=hidden name=mhhlsend id=mhhlsend value="%MEHWEB01.09.104">
<input type=hidden name=mhdls012 id=mhdls012 value="">
<input type=hidden name=mhdls013 id=mhdls013 value="">
<input type=hidden name=mhdls015 id=mhdls015 value="">
<input type=hidden name=mhcnphed id=mhcnphed value="%MEHWEB01.09.333">
<input type=hidden name=courtdat id=courtdat value="%MEHWEB01.09.204.3">
<input type=hidden name=nextpage id=nextpage value="0">
<input type=hidden name=revidate id=revidate value="%MEHWEB01.09.206">
<input type=hidden name=revitime id=revitime value="%MEHWEB01.09.207">
<input type=hidden name=currdate id=currdate>
<input type=hidden name=currtime id=currtime>
<input type=hidden name=d_mhhlsdat id=d_mhhlsdat value="%MEHWEB01.09.102">
<input type=hidden name=d_mhhlstim id=d_mhhlstim value="%MEHWEB01.09.103">
<input type=hidden name=d_mhdlscod id=d_mhdlscod value="%MEHWEB01.09.204.1">
<input type=hidden name=trothfac id=trothfac value="">
<input type=hidden name=superlev value="1">

<table align=center cellspacing=0 cellpadding=1 border=0 width=95%>
<tr><td width=12% class=DataLabel>Start Date</td>
    <td class=DataLabel>
    <input type=text name=mhdls002 id=mhdls002 title="Legal Status Start Date" size=12
      class="Mandatory NotFuturEdate"
      value="%MEHWEB01.09.202"
      onblur="checkDate(this,'Date');
              validateTime(mhdls002,mhdls003);">
    <img src="../images/DateLookup.gif" class=Icon date=date1
     align=absmiddle onclick="DateLookupFrame(mhdls002);">
     Time
    <input type=text size=8 title="Start Time" name=mhdls003 id=mhdls003
      class="Mandatory Time" 
      value="%MEHWEB01.09.203" 
      onblur="checkTime(this);
              validateTime(mhdls002,mhdls003);">
    <img src="../images/DateTimeStamp.gif" class=Icon
     onclick="SetCurrentDateTime(mhdls002,mhdls003);">
    <img src="../images/TimeLookup.gif" class=Icon
     onclick="TimeLookupFrame(mhdls003);">
    </td>

    <td class=DataLabel>Transfer In From Another Facility</td>
    <td align=left>
    <input type="checkbox" name=chkothfa id=chkothfa value="0">
    </td>
</tr>

<tr><td class=DataLabel>End Date</td>
    <td class=DataLabel>
      <input type=text name=mhdls017 id=mhdls017 title="End Date" class="NotFuturEdate"
       size=12 value="%MEHWEB01.09.217"
       onblur="validateTime(mhdls017,mhdls018);">
      <img src="../images/DateLookup.gif" class=Icon date=date1
       align=absmiddle onclick="DateLookupFrame(mhdls017);">
       Time  
      <input type=text size=8  title="End Time" name=mhdls018 id=mhdls018
       value="%MEHWEB01.09.218" class="Time"
       onblur="validateTime(mhdls017,mhdls018);">
      <img src="../images/DateTimeStamp.gif" class=Icon
       onclick="SetCurrentDateTime(mhdls017,mhdls018);">
      <img src="../images/TimeLookup.gif" class=Icon 
       onclick="TimeLookupFrame(mhdls018);">
    </td>
    <td><div id=InsertLSID1></div></td>
    <td><div id=InsertLSID2></div></td>
</tr>

<tr><td class=DataLabel>Legal Status</td>
    <td><select name=mhdls004 id=mhdls004 title="Legal Status" class="Mandatory"
         onchange="SetCourtData(this.value);">
        <option></option>
        %MEHWEB01.09.324
        </select>
    </td>
    <td width=15% class=DataLabel>Supp. Legal Status</td>
    <td><select name=mhdls019 id=mhdls019 title="Supp. Legal Status"
         value="%MEHWEB01.09.219.0">
        <option></option>
        %MEHWEB01.09.219.2
        </select>
    </td>
</tr>

<tr><td class=DataLabel>Review Status</td>
    <td><select name=mhdls005 id=mhdls005 title="Review Status"
         value="%MEHWEB01.09.205.0">
        <option></option>
        %MEHWEB01.09.205.2
        </select>
    </td>
    <td class=DataLabel>Supp. LS Effective Date</td>
    <td class=DataLabel>
      <input type=text name=mhdls020 id=mhdls020 title="Supp. LS Effective Date"
       value="%MEHWEB01.09.220" class="Date" onblur="checkDate(this,'Date');">
      <img src="../images/DateLookup.gif" class=Icon date=date1
       align=absmiddle onclick="DateLookupFrame(mhdls020);">
    </td>
</tr>

<tr><td class=DataLabel>Review HCP</td>
    <td><input type="text" size=10 maxlength=10 name="mhdls008" id="mhdls008" tabindex=13
         value="%MEHWEB01.09.208.1" 
         onblur="UpCase(this);ValidateHCP(18,18,mhdls008,doctnam1);">
       <input type="text" size=25 notab readonly name="doctnam1" id="doctnam1" 
         value="%MEHWEB01.09.208.0">
       <img src="../images/SearchIcon.gif" class=Icon
        onclick="HCPSearchFrame(UpdateForm.mhdls008,UpdateForm.doctnam1,9);">
    </td>
    <td class=DataLabel>Date Review performed</td>
    <td class=DataLabel>
      <input type=text name=mhdls021 id=mhdls021 title="Date Review Performed"
       value="%MEHWEB01.09.221" class="Date">
      <img src="../images/DateLookup.gif" class=Icon date=date1
       align=absmiddle onclick="DateLookupFrame(mhdls021);">
    </td>
</tr>

<tr><td class=DataLabel>Review Location</td>
    <td><select name=mhdls010 id=mhdls010 title="Review Location"
         value="%MEHWEB01.09.210.0">
        <option></option>
        %MEHWEB01.09.210.9.1.01.1.L
        </select>
    </td>
    <td colspan=1><div id=CnsDate1></div></td>
    <td colspan=1><div id=CnsDate2></div></td>
</tr>

<tr><td class=DataLabel>Review Due Date</td>
    <td class=DataLabel>
      <input type=text name=mhdls006 id=mhdls006 title="Review Due Date" 
       value="%MEHWEB01.09.206" class="Date">
      <img src="../images/DateLookup.gif" class=Icon date=date1
       align=absmiddle onclick="DateLookupFrame(mhdls006);">
       Time
      <input type=text size=8 title="Review Due Time" name=mhdls007 id=mhdls007
       value="%MEHWEB01.09.207" class="Time">
      <img src="../images/DateTimeStamp.gif" class=Icon
       onclick="SetCurrentDateTime(mhdls006,mhdls007);">
      <img src="../images/TimeLookup.gif" class=Icon
       onclick="TimeLookupFrame(mhdls007);">
    </td>
    <td colspan=1><div id=TriDate1></div></td>
    <td colspan=1><div id=TriDate2></div></td>
</tr>

<tr><td class=DataLabel>Reminder Date</td>
    <td><input type=text name=mhdls011 id=mhdls011 title="Reminder Date"
         value="%MEHWEB01.09.211" class="Date">
        <img src="../images/DateLookup.gif" class=Icon date=date1
         align=absmiddle onclick="DateLookupFrame(mhdls011);">
    </td>
    <td colspan=1><div id=LogDate1></div></td>
    <td colspan=2><div id=LogDate2></div></td>
</tr>

<tr><td class=DataLabel>Active</td>
    <td align=left>
    <input type="checkbox" name=statactv id=statactv value="0" tabindex=15
     onchange="setEndTime(); checkActive()">
    </td>
    <td colspan=1><div id=CrtTime1></div></td>
    <td colspan=1><div id=CrtTime2></div></td>
</tr>
</table>

<table align=center cellspacing=0 cellpadding=1 border=0 width=95%>
<tr><td width=12% class=DataLabel>Comments 1</td>
    <td><input type="text" size="120" maxlength="100" name=mhdls016 id=mhdls016
         title="Comments" value="%MEHWEB01.09.216" tabindex=18>
    </td>
</tr>
<tr><td width=12% class=DataLabel>Comments 2</td>
    <td><input type="text" size="120" maxlength="100" name=mhdls026 id=mhdls026
         title="Comments" value="%MEHWEB01.09.226" tabindex=18>
    </td>
</tr>

<tr><td colspan=4 align=center><br>
    <input tabindex=31 type=button value="Update" class="button"
     onclick="chkenddatetime();">
    <input type=button Value="Cancel" class="button" 
     onclick="DFrameClose();">
    </td>
</tr>
</table>

</form>

<span id=CrtNotice1 style="display:none">
Court Notice Sent Date
</span> 

<span id=CrtNotice2 style="display:none">
  <input type=text name=mhdls022 id=mhdls022 title="Court Notice Sent Date"
   class="Date" value="%MEHWEB01.09.222" onblur="checkDate(this,'Date');">
  <img src="../images/DateLookup.gif" class=Icon date=date1
   align=absmiddle onclick="DateLookupFrame(mhdls022);">
</span>

<span id=TribunalD1 style="display:none">
Tribunal Date
</span>

<span id=TribunalD2 style="display:none">
  <input type=text name=mhdls023 id=mhdls023 title="Tribunal Date"
   class="Date" value="%MEHWEB01.09.223">
  <img src="../images/DateLookup.gif" class=Icon date=date1
   align=absmiddle onclick="DateLookupFrame(mhdls023);">
</span>

<span id=LodgedDat1 style="display:none">
Lodged with Court Date
</span>

<span id=LodgedDat2 style="display:none">
  <input type=text name=mhdls024 id=mhdls024 title="Lodged with Court Date"
   class="Date" value="%MEHWEB01.09.224">
  <img src="../images/DateLookup.gif" class=Icon date=date1
   onclick="DateLookupFrame(mhdls024);">
</span>

<span id=CourtTime1 style="display:none">
%STANDARD.01.017.xy
</span>

<span id=CourtTime2 style="display:none">
  <select name=mhdls025 id=mhdls025 title="Court Type" value="%MEHWEB01.09.225.0">
    <option></option>
    %MEHWEB01.09.225.2
  </select>
</span>

<span id=LSID1 style="display: none;">
PRIMHD Legal Status ID
</span>

<span id=LSID2 style="display: none;">
  <input class="readonly DataLabel" readonly size=23 value="%MEHWEB01.09.334">
</span>
    
<script type="text/javascript">
if ("%MEHWEB01.09.215.0"==0) {
  document.UpdateForm.statactv.checked="1";
}
p = document.UpdateForm;
for (var i =0 ; i < p.mhdls004.length; i++) {
  var lscod=p.mhdls004.options[i].value.substr(0,3);
  if (lscod==p.d_mhdlscod.value) {
    p.mhdls004.selectedIndex=i;
  }
}

function setEndTime() {
  checkDate(document.UpdateForm.mhdls017,'Date');
  if (document.UpdateForm.statactv.checked == false) {
    document.UpdateForm.mhdls018.className="Mandatory";
    document.UpdateForm.mhdls017.className="Mandatory";
  } else {
    document.UpdateForm.mhdls017.className="";
    document.UpdateForm.mhdls018.className="";
  }
}
 
function checkActive() {
  if (document.UpdateForm.statactv.checked == false) {
    if (isWhitespace(document.UpdateForm.mhdls017.value) ||
        isWhitespace(document.UpdateForm.mhdls018.value)) {
      alert("End Date/Time must be entered before this can be inactivated");
      document.UpdateForm.statactv.checked=true;
      setEndTime();
      return;
    }
  }
}

if(document.UpdateForm.statactv.checked == true) {
  document.UpdateForm.mhdls015.value="0";
} else {
  document.UpdateForm.mhdls015.value="1";
}

function chkenddatetime() {
  strtDate=UpdateForm.mhdls002;
  strtTime=UpdateForm.mhdls003;
  endDate=UpdateForm.mhdls017;
  endTime=UpdateForm.mhdls018;

  if (!ChkDateTime(strtDate,strtTime,endDate,endTime)) {
    alert("Start Date/Time must be before End Date/Time.");
    UpdateForm.mhdls017.value="";
    UpdateForm.mhdls018.value="";
    UpdateForm.mhdls018.className="";
    return;
  }

  if(UpdateForm.chkothfa.checked == true) {
    UpdateForm.trothfac.value="1";
    if(!CheckDateTimeRange(UpdateForm.mhdls002,
                           UpdateForm.mhdls003,
                           UpdateForm.d_mhhlsdat,
                           UpdateForm.d_mhhlstim)) {
      alert("Date/Time cannot be after Current Legal Status Date/Time \n" +
            "when Transfer In From Another Facility is checked");
      return;
    }
  }
  else {
    document.UpdateForm.trothfac.value="0";
  }

  FormSubmit();
}

</script>
