<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="nz">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<!--WORKERS COMP-->
<script type="text/javascript">
function init(){
  if(document.UpdateForm.ageyears.value<" 15"){
     UpdateForm.ptclm047.className="Mandatory";  //place injury occurred
     UpdateForm.ptclm048.className="Mandatory";  //activity when injured
  }else{
     UpdateForm.ptclm047.className="";  //place injury occurred
     UpdateForm.ptclm048.className="";  //activity when injured
  }
}
function SetCancel() {
  if (!confirm("Warning: Injury/Accident Data will not be Updated!\n Ok to Continue ?")) {
   return;
  }
//
if(document.UpdateForm.seriflag.value=="1"){  // Single HCP Series
    var link="outweb02.pbl?reportno=03&template=001" +
    "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+") +
    "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+") +
    "&casekeys=" + document.UpdateForm.casekeys.value.replace(/ /g,"+")  +
    "&bookflag=" + document.UpdateForm.bookflag.value.replace(/ /g,"+") +
    "&refrlvis=" + document.UpdateForm.refrlvis.value.replace(/ /g,"+")
  } else if (document.UpdateForm.seriflag.value=="2"){ // Multiple HCP Series
    var linkurl="outweb08.pbl?reportno=01&template=003" +
    "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+") +
    "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+") +
    "&casekeys=" + document.UpdateForm.casekeys.value.replace(/ /g,"+") +
    "&firstadm=" + document.UpdateForm.firstadm.value.replace(/ /g,"+")  +
    "&bookflag=" + document.UpdateForm.bookflag.value.replace(/ /g,"+") +
    "&refrlvis=" + document.UpdateForm.refrlvis.value.replace(/ /g,"+")
    var link=GetOutCookie(linkurl," ","MultipleHCP");
  }else if (document.UpdateForm.refrflag.value=="1"){ // Referral details
    var link="outweb01.pbl?reportno=04&template=001" +
    "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+") +
    "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+")
  } else {
   var link ="outweb02.pbl?reportno=03&template=001" +
   "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+") +
   "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+") +
   "&casekeys=" + document.UpdateForm.casekeys.value.replace(/ /g,"+") +
   "&shwprint=1"
   }
   location.href= link;
}

function SearchPage(returnName,LookupPage) {
  window.returnName=returnName ;
  Lookup=open(LookupPage, "LookupWindow",
  "width=450,height=300,top=100,left=100,scrollbars=yes,status=no,toolbar=no,menubar=no") ;
}
function PrintScreen(linkurl) {
  PrintWindow=open(linkurl,"PrintScreen",
    "width=400,height=150,top=50,left=50," +
    "titlebar=no,scrollbars=yes,status=no,toolbar=no,menubar=no");
}
function CheckFund(fund,selectlist)  {
var found=0
strvar=fund.value;
if(!isWhitespace(strvar)){
  for (var i = 0 ; i < selectlist.length; i++) {
    strvar=fund.value+"      "   // format as three characters space filled
    fund.value=strvar.substr(0,6)
    if (selectlist.options[i].value.substr(0,6)==fund.value) {
      found=1
      selectlist.selectedIndex=i } }
  if (found==0) { alert("Invalid Fund Entered")
    fund.focus() }
  }
}

function UpdateFund(fund,selectlist) {
  fund.value=selectlist.value.substr(0,6);
}
function SubmitClaim() {
 if(!isWhitespace(document.UpdateForm.ptclm049.value)) {
 if(!ChkDateTime(UpdateForm.ptclm008,null,UpdateForm.ptclm049,null)){
    alert("ACC Decline Date before Accident Date");
    return;}
 }
if(document.UpdateForm.seriflag.value=="1"){  // Single HCP Series
    document.UpdateForm.redirect.value="outweb02.pbl?reportno=03&template=001" +
    "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+") +
    "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+") +
    "&casekeys=" + document.UpdateForm.casekeys.value.replace(/ /g,"+")
    document.UpdateForm.redirec1.value="&firstadm=" +
    document.UpdateForm.firstadm.value.replace(/ /g,"+")  +
    "&bookflag=" + document.UpdateForm.bookflag.value.replace(/ /g,"+") +
    "&refrlvis=" + document.UpdateForm.refrlvis.value.replace(/ /g,"+") +
    "&shwprint=1"
  } else if (document.UpdateForm.seriflag.value=="2"){ // Multiple HCP Series
document.UpdateForm.redirect.value="outweb08.pbl?reportno=01&template=003" +
    "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+") +
    "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+") +
    "&casekeys=" + document.UpdateForm.casekeys.value.replace(/ /g,"+")
    document.UpdateForm.redirec1.value="&firstadm=" +
    document.UpdateForm.firstadm.value.replace(/ /g,"+")  +
    "&bookflag=" + document.UpdateForm.bookflag.value.replace(/ /g,"+") +
    "&refrlvis=" + document.UpdateForm.refrlvis.value.replace(/ /g,"+")
  } else if (document.UpdateForm.refrflag.value=="1"){ // Referral details
    document.UpdateForm.redirect.value="outweb01.pbl?reportno=04&template=001" +
    "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+") +
    "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+")
 } else {
  document.UpdateForm.redirect.value="outweb02.pbl?reportno=03&template=001" +
   "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+") +
   "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+") +
   "&casekeys=" + document.UpdateForm.casekeys.value.replace(/ /g,"+")
  }
   SubmitHidden(UpdateForm);
}

function valWC() {
//alert(UpdateForm.ptclm032.length);
validateWC(44,UpdateForm.urnumber,UpdateForm.admissno,UpdateForm.ptclm001,
               UpdateForm.ptclm002,UpdateForm.ptclm003,UpdateForm.ptclm004,
               UpdateForm.ptclm005,UpdateForm.ptclm006,UpdateForm.ptclm007,
               UpdateForm.ptclm008,UpdateForm.accepted,UpdateForm.ptclm009,
               UpdateForm.ptclm010,UpdateForm.ptclm011,UpdateForm.ptclm012,
               UpdateForm.ptclm013,UpdateForm.ptclm033,UpdateForm.ptclm034,
               UpdateForm.ptclm035,UpdateForm.ptclm036,
               UpdateForm.dummy);

  for (var i =0 ; i < document.UpdateForm.ptclm009.length; i++) {
//    alert(UpdateForm.ptclm009.options[i].value.substr(0,1));
    if (document.UpdateForm.accepted.value==
        trim(document.UpdateForm.ptclm009.options[i].value.substr(0,1))){
          document.UpdateForm.ptclm009.selectedIndex=i;
    }
  }
}

function lookUpWC() {
WCRefNoSearchFrame(UpdateForm.urnumber,UpdateForm.ptclm001,UpdateForm.ptclm002,
                    UpdateForm.ptclm003,
                    UpdateForm.ptclm004,UpdateForm.ptclm005,UpdateForm.ptclm006,
                    UpdateForm.ptclm007,UpdateForm.ptclm008,UpdateForm.accepted,
                    UpdateForm.ptclm010,UpdateForm.ptclm011,
                    UpdateForm.ptclm012,UpdateForm.ptclm013,UpdateForm.ptclm033,
                    UpdateForm.cinjure,UpdateForm.injcode,
                    UpdateForm.ptclm036,UpdateForm.ptclm034,
                    UpdateForm.ptclm035,UpdateForm.ptclm009,UpdateForm.ptcnhdps,
                    UpdateForm.workrel,UpdateForm.ptclm046,
                    UpdateForm.placeocc,UpdateForm.ptclm047,
                    UpdateForm.activity,UpdateForm.ptclm048,
                    UpdateForm.ptclm049);
}
function WCRefNoSearchFrame(urnumber,RetEName,RetAdd1,RetAdd2,RetAdd3,
                             RetAdd4,dummy,
                             RetTele,RetCDat,RetAccPt,RetInsCod,RetClmNo,
                             RetComn1,RetComn2,RetAloc,RetCInj,RetInjCod,
                             RetCName,RetCInjSel,RetInjCodSel,RetAccPtSel,
                             ptcnhdps,RetWorkRel,RetWorkRelSel,
                             RetPlace,RetPlaceSel,RetAct,RetActSel,RetDetDate) {
  DFrameStart();
  window.urnumber=urnumber;
  window.RetEName=RetEName;     window.RetAdd1=RetAdd1;
  window.RetAdd2=RetAdd2;       window.RetAdd3=RetAdd3;
  window.RetAdd4=RetAdd4;       window.dummy=dummy;
  window.RetTele=RetTele;       window.RetCDat=RetCDat;
  window.RetAccPt=RetAccPt;     window.RetInsCod=RetInsCod;
  window.RetClmNo=RetClmNo;     window.RetComn1=RetComn1;
  window.RetComn2=RetComn2;     window.RetAloc=RetAloc;
  window.RetCInj=RetCInj;       window.RetInjCod=RetInjCod;
  window.RetCName=RetCName;     window.RetCInjSel=RetCInjSel; 
  window.RetInjCodSel=RetInjCodSel;
  window.RetAccPtSel=RetAccPtSel;
  window.RetWorkRel=RetWorkRel;
  window.RetWorkRelSel=RetWorkRelSel;
  window.ptcnhdps=ptcnhdps;
  window.RetPlace=RetPlace;
  window.RetPlaceSel=RetPlaceSel;
  window.RetAct=RetAct;
  window.RetActSel=RetActSel;
  window.RetDetDate=RetDetDate;

  document.getElementById('PopUpFrame').src="../lookups/WCRefNoSearchFrame.html";
  SearchFrameShow();
}

</script>
%START.OF.PAGE
<body onLoad="PageLoad(event);">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB89.01.003";
PatientVIS="%PATWEB89.01.081";
PatientNAM="%PATWEB89.01.002";
PatientSTA="%PATWEB89.01.086.078";
PatientALT="%PATWEB89.01.084";
PatientSEX="%PATWEB89.01.019";
PatientDOB="%PATWEB89.01.020";
PatientAGE="%PATWEB89.01.021";
PatientLOC="%PATWEB89.01.083";
PatientPRI="%PATWEB89.01.086.066.1";
PatientUNT="%PATWEB89.01.066.0";
DoctorCOD="%PATWEB89.01.082.003";
DoctorNAM="%PATWEB89.01.082.002";
PatientAID="%PATWEB89.01.086.090";
PatientIND="%PATWEB89.01.086.091";
PatientCUR="%PATWEB89.01.086.092";
PatientCLC="%PATWEB89.01.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB89.01.086.094";
PatientCDM="%PATWEB89.01.086.095";
PatientVDH="%PATWEB89.01.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<form name=UpdateForm action="patweb89.pbl" method=post style=margin:0
onsubmit='return validateMandatory(this);'>
<input type=hidden name=reportno value="02">
<input type=hidden name=template value="005">
<input type=hidden name=updatety value="5">
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name=admissno value="%PATWEB89.01.081">
<input type=hidden name=chckname>
<input type=hidden name=nextpage value=2>
<input type=hidden name="funddesc" value="%PATWEB89.01.040.1">
<input type=hidden name=mvmedrec value="%PATWEB89.01.902">
<input type=hidden name=redirect value="">
<input type=hidden name=redirec1 value="">
<input type=hidden name=casekeys value="%PATWEB89.01.907">
<input type=hidden name=claimtyp value="W">
<input type=hidden name=ptcnhdps value="%PATWEB89.01.929">
<input type=hidden name=ptclm012 value="">
<input type=hidden name=ptclm013 value="">
<input type=hidden name=ageyears value="%PATWEB89.01.938">
<input type=hidden name=workrel>
<input type=hidden name=placeocc>
<input type=hidden name=activity>
<input type=hidden name=accepted>
<input type=hidden name=cinjure>
<input type=hidden name=injcode>
<input type=hidden name=ptclm009>
<input type=hidden name=refrflag value="%PATWEB89.01.940">
<input type=hidden name=seriflag value="%PATWEB89.01.927">
<input type=hidden name=waitflag value="%PATWEB89.01.931">
<input type=hidden name=firstadm value="%PATWEB89.01.928">
  <input type=hidden name=refrlvis value="%PATWEB89.01.957">
  <input type=hidden name=bookflag value="%PATWEB89.01.958">
<table border=0 width=100% cellspacing=0 cellpadding=1>
<tr><td class=HeadingCell align=center>
    Injury / Accident Data</td></tr>
<tr><td>

<table width=100% border=0>
<tr><td class=DataLabel>ACC Number<br>
    <td><input type="text" name="ptclm011" size=25 maxlength=20 tabindex=1 
        value="%PATWEB89.01.310" class=Mandatory title="ACC Number"
         onblur="UpCase(this);">
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="lookUpWC();">
        </td></tr>
    <td class=DataLabel>Accident Date</td>
    <td><input type="text" size="12" tabindex=2
        name=ptclm008 value="%PATWEB89.01.307" class="PastDate Mandatory"
        id=ptclm008
        title="Accident Date" onblur="checkDate(this,'Accident Date')">
        <img src=../images/DateLookup.gif 
        class=Icon onclick="DateLookupFrame(ptclm008);">
        </td>
    <td class=DataLabel>ACC Decline Date</td>
    <td><input type="text" size="12" tabindex=3
         name=ptclm049 value="%PATWEB89.01.348" title="ACC Decline Date"
         id=ptclm049 onblur="checkDate(this,'ACC Decline Date')">
    <img src=../images/DateLookup.gif 
         class=Icon onclick="DateLookupFrame(ptclm049);">
    </td></tr>
<tr><td> Work Related</td>
    <td><select name="ptclm046" tabindex=4 class=Mandatory title="Work Related">
    <option></option>
     %PATWEB89.01.345.2
    </select></td></tr>

<tr><td> Description of Injury</td>
    <td><input type="text" size="60" maxlength="50" tabindex=10  name="ptclm033"
    value="%PATWEB89.01.335" title="Description of Injury" class=Mandatory></td></tr>

<tr><td> Place Where Injury Occurred</td>
    <td><select name="ptclm047" tabindex=20 title="Place Where Injury Occurred">
    <option></option>
     %PATWEB89.01.346.2
    </select></td></tr>

<tr><td> Activity When Injured</td>
    <td><select name="ptclm048" tabindex=25 title="Activity when injured">
    <option></option>
     %PATWEB89.01.347.2
    </select></td></tr>

<tr><td class=DataLabel>Employer</td>
    <td><input type="text" size="40" name="ptclm001" tabindex=30
        maxlength="30" value="%PATWEB89.01.301"></td>
    <td> Contact name </td>
    <td><input type="text" size='45' maxlength="40" tabindex=55 
        name="ptclm036" value="%PATWEB89.01.332"></td> </tr>
<tr><td class=DataLabel>Employer Address</td>
    <td><input type="text" size="35" maxlength="30" tabindex=35
        name="ptclm002" value="%PATWEB89.01.302"></td>
    <td valign="bottom" class=DataLabel>Employer Phone
    <td><input type="text" size="20" maxlength="20" tabindex=60
        name="ptclm007" value="%PATWEB89.01.306"></td>

<tr><td class=DataLabel></td>
    <td><input type="text" size="35" maxlength="30" tabindex=40
         name="ptclm003" value="%PATWEB89.01.303"></td>

<tr><td class=DataLabel></td>
    <td><input type="text" size="45" maxlength="15" tabindex=45 name="ptclm004"
  	value="%PATWEB89.01.304"></td>

<tr><td class=DataLabel></td>
    <td><input type="text" size="50" maxlength="35" tabindex=50  
         name="ptclm005" value="%PATWEB89.01.328"></td></tr>

</table>
</td></tr>
<tr><td colspan=4 align=center>
    <input type=button value="Update" tabindex=65 class="button" 
     id="pat89sub" onclick="tempDisable(this);SubmitClaim()";>
    <input type=button value="Cancel" tabindex=70 
     onclick="SetCancel()" class="button"></td></tr>

</form>

</table>
<div id=SelectHeading></div>
<div id=SelectLocation></div>
<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=regexstm value=102>
<input type=hidden name=newstand value=1>
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name=admissno value="%PATWEB89.01.081">
<input type=hidden name=MenuType value="%PATWEB89.01.088">
</form>
