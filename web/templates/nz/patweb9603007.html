<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="nz">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/admission.js"></script>
<style type=text/css> 
.TransferOption {
position: relative; 
}
</style>
<script type="text/javascript">
function MedMove() {
  document.pat96btf.dummy.checked=false;
  LinkUrl="mrtweb01.pbl?reportno=9&template=6" +
    "&urnumber=" + PatientLinks.urnumber.value.replace(/ /g,"+") +
    "&admissno=" + PatientLinks.admissno.value.replace(/ /g,"+") +
    "&trntowrd=" + pat96btf.trntowrd.value.replace(/ /g,"+")
  Left=(document.body.clientWidth-700)/2
  DFrameLink(LinkUrl,170,Left,700,400)
}
function SubmitTransfer() {
  if (validateMandatory(pat96btf)) {
    if(pat96btf.ptcnbedm.value=="1") {
      validateBedRequestUpdate(pat96btf.admissno,pat96btf.trntowrd,
                               pat96btf.trntobed,pat96btf.valdindc);
      WardbedreqUpdate(pat96btf.admissno,pat96btf.trntowrd,pat96btf.trntobed,
                       pat96btf.valdindc)
    }
    SubmitHidden(pat96btf);
  }
}
function checkVisitor() {
    pat96btf.pmsvx039.value="0";
    if(pat96btf.d_pmsvx039.checked==1) {
       pat96btf.pmsvx039.value="1" }
}
function checkPhoncal() {
    pat96btf.pmsvx040.value="0";
    if(pat96btf.d_pmsvx040.checked==1) {
       pat96btf.pmsvx040.value="1" }
}
function Update(bttn) {
  var p = document.pat96btf;
  tempDisable(bttn);
  checkBedStatus(p.trntowrd.value,p.trntobed.value,
                 p.trandate.options[p.trandate.selectedIndex].text,
                 p.dummy.value,p.trantime.value,SubmitTransfer);
}

function HideTReason(){
  if(document.getElementById('ptcnbtre')) {
    if(document.getElementById('ptcnbtre').value=="1") {
       document.getElementById('trnttype').className="Mandatory";
       document.getElementById('trnttype').disabled=false;
       return;
    }
  }
  document.getElementById('tReasHd').style.display="none";
  document.getElementById('tReason').style.display="none";
  document.getElementById('trnttype').className="Readonly";
  document.getElementById('trnttype').disabled=true;
}

function getHCPSpecialtySelectList() {
  var x;
  var y;
  var dateEl;

  document.getElementById("specialt").innerHTML="";

  if (isWhitespace(document.getElementById("trandate").value) ||
      isWhitespace(document.getElementById("attddoct").value)) {
    return;
  }

  dateEl = document.getElementById("trandate");

  var serverURL = "../cgi-bin/comweb80.pbl?reportno=97" +
              "&valddate=" +
              dateEl.options[dateEl.selectedIndex].innerHTML.replace(/ /g,"+") +
              "&valdcode=" +
              document.getElementById("attddoct").value.replace(/ /g,"+");

  var returnValue = RSExecute(serverURL);

  if (returnValue.status!=0) {
    return;
  }

  option = document.createElement("option");
  option.value="";
  option.innerHTML="";
  document.getElementById("specialt").appendChild(option);

  ReturnValue=returnValue.return_value.split("|");

  for (x=0; x<specialtyArray.length; x++) {
    for (y=0; y<ReturnValue.length; y++) {
      if (specialtyArray[x].substr(0,3) == ReturnValue[y]) {
        option = document.createElement("option");
        option.value=specialtyArray[x].split("|")[0];
        option.innerHTML=specialtyArray[x].split("|")[1];
        document.getElementById("specialt").appendChild(option);
      }
    }
  }
}

</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);HideTReason();createSpecialtyArrayPATWEB96();
              getHCPSpecialtySelectList();defaultSpecialtyPATWEB96();">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB96.03.003";
PatientVIS="%PATWEB96.03.081";
PatientNAM="%PATWEB96.03.002";
PatientSTA="%PATWEB96.03.086.078";
PatientALT="%PATWEB96.03.084";
PatientSEX="%PATWEB96.03.019";
PatientDOB="%PATWEB96.03.020";
PatientAGE="%PATWEB96.03.021";
PatientLOC="%PATWEB96.03.083";
PatientPRI="%PATWEB96.03.086.066.1";
PatientUNT="%PATWEB96.03.066.0";
DoctorCOD="%PATWEB96.03.082.003";
DoctorNAM="%PATWEB96.03.082.002";
PatientAID="%PATWEB96.03.086.090";
PatientIND="%PATWEB96.03.086.091";
PatientCUR="%PATWEB96.03.086.092";
PatientCLC="%PATWEB96.03.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB96.03.086.094";
PatientCDM="%PATWEB96.03.086.095";
PatientVDH="%PATWEB96.03.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>

<form name=pat96btf id=pat96btf style="margin:0" %PATWEB96.03.201.001
<input type=hidden name=urnumber id=urnumber value="%PATWEB96.03.003">
<input type=hidden name=admissno id=admissno value="%PATWEB96.03.081">
<input type=hidden name=redirect id=redirect
 value="%PATWEB96.03.001.patweb96.03.004">
<input type=hidden name=nextpage id=nextpage value="7">
<input type=hidden name=trnleave id=trnleave value="0">
<input type=hidden name=wbedswap id=wbedswap value="0">
<input type=hidden name=bedstat1 id=bedstat1>
<input type=hidden name=warddesc id=warddesc >
<input type=hidden name=formactn id=formactn value="Transfer">
<input type=hidden name=chngunit id=chngunit value="%PATWEB96.03.124.1">
<input type=hidden name=wardcode id=wardcode value="%PATWEB96.03.105.1">
<input type=hidden name=pmsvx039 id=pmsvx039 value="0">
<input type=hidden name=pmsvx040 id=pmsvx040 value="0">
<input type=hidden name=ptcnbedm id=ptcnbedm
 value="%STANDARD.01.025.112.106.0.1">
<input type=hidden name=ptcnbtre id=ptcnbtre
       value="%STANDARD.01.025.125.173.0.1">
<input type=hidden name=valdindc id=valdindc value="">
<input type=hidden name=attddoct id=attddoct id=attddoct
           value="%PATWEB96.03.108.003">
<input type=hidden name=c_specialt id=c_specialt id=c_specialt
           value="%PATWEB96.03.111.1">

<table border=1 width=100% cellspacing=0 cellpadding=1 >
    <tr><td class=HeadingCell align=center colspan=2 width=100%>
        Bed Transfer & Leave Maintenance </td></tr>
</table>

<table border=0 width=100% cellspacing=1>
  <tr><td class=HeadingCell align=center colspan=2>Current Status</td>
      <td align=center class=HeadingCell colspan=2>Bed Transfer</td></tr>

   <tr><td class=DataLabel>Ward / Bed </td>      
       <td><input type=text size=25 readonly value="%PATWEB96.03.105.0">
       <input type=text size=15 name=beddcode id=beddcode readonly 
        value="%PATWEB96.03.106"></td>

        <td class=DataLabel> Ward / Bed</td>
        <td><select name=trntowrd id=trntowrd class=Mandatory title="Ward">
        <option></option>
        %PATWEB96.03.210
        </select>
        <input type=text name=trntobed id=trntobed maxlength=3 size=3>
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="WardBedSearchFrame(pat96btf.trntowrd,
                                     pat96btf.warddesc,
                                     pat96btf.trntobed,
                                     pat96btf.bedstat1);">
        </td></tr>

   <tr><td class=DataLabel>Transfer In Date & Time </td>
       <td><input type=text size=11 readonly value="%PATWEB96.03.204" >
       <input type=text size=5 readonly value="%PATWEB96.03.205"></td>

       <td class=DataLabel> %STANDARD.01.017.A </td>
        <td><select name=specialt id=specialt class="Mandatory"
             title="%STANDARD.01.017.A ">
        <option></option>
        %PATWEB96.03.111.2
        </select>
       </td>
   </tr>

   <tr><td class=DataLabel>Attending Doctor</td>
       <td><input type=text size=35 readonly value="%PATWEB96.03.108.002">
           </td>

        <td class=DataLabel>Transfer out Date & Time </td>
        <td><select name=trandate id=trandate class=Mandatory
             title="Transfer date">
        %PATWEB96.03.202
        </select>
        <input type=text size=8 name=trantime id=trantime class=Mandatory
         title="Transfer Time" value="%STANDARD.01.016">
        <img src="../images/DateTimeStamp.gif" class=Icon
        onclick="SetCurrentDateTime(null,pat96btf.trantime);">
        <img src="../images/TimeLookup.gif" class=Icon
        onclick="TimeLookupFrame(pat96btf.trantime);"></td>
    </tr>

   <tr><td class=DataLabel>%STANDARD.01.017.A </td>
        <td><input type=text readonly size=30 
             value="%PATWEB96.03.111.0"> </td>

       <td id=tReasHd class=DataLabel>%STANDARD.01.017.RB</td>
       <td id=tReason><select name=trnttype id=trnttype
           title="%STANDARD.01.017.RB" >
            <option value="  "></option>
             %PATWEB96.03.281.4
            </select>
       </td>
   </tr>

   <tr><td class=DataLabel>Care Type</td>
       <td><input type=text readonly size=30 
           value="%PATWEB96.03.113.0"></td>

       <td class=DataLabel>Move Records</td>
       <td><input type=checkbox name=dummy id=dummy
            onclick="MedMove();"></td>
   </tr>

   <tr><td class=DataLabel>Unit</td>
       <td><input type=text readonly size=30 
           value="%PATWEB96.03.124.0"></td>

       <td class=DataLabel>Visitors Allowed ? </td>
       <td><input type=checkbox name=d_pmsvx039 id=d_pmsvx039 value="1"
            onclick="checkVisitor();"> </td>
    </tr>

    <tr><td class=DataLabel> %STANDARD.01.017.CL</td>
        <td><input type=text value="%PATWEB96.03.126.0"></td>

        <td class=DataLabel>Phone Calls Allowed ? </td>
        <td><input type=checkbox name=d_pmsvx040 id=d_pmsvx040 value="1"
            onclick="checkPhoncal();">
        </td>
    </tr>

     <tr><td class=DataLabel>Health Fund</td>
         <td class=DataLabel >
           <input type=hidden value="%PATWEB96.03.114.0">
           <input type=text size=35 name="funddesc" id="funddesc" maxlength="30"
            value="%PATWEB96.03.114.1"> </td>

         <td align=center colspan=3>
         <input type=button value=Update class="button" id=btnUpdate
          onclick="tempDisable(this);Update(this)">
         <input type=button value=Swap class="button" id=btnSwap
          onclick="tempDisable(this);
                   document.pat96btf.wbedswap.value='1';
                   checkClosedBeds(pat96btf.wardcode.value,
                                   pat96btf.beddcode.value,
                                   pat96btf.trntowrd.value,
                                   pat96btf.trntobed.value,
                                   SubmitTransfer);">
         <input type=button value=Cancel class="button"
         onclick="PatientLinkTo('patweb96.pbl',3,4,0);">
        </td>
      </tr>

     <tr><td>Table</td>
         <td>
           <input type=hidden value="%PATWEB96.03.115.0">
           <input type="text" size=20 maxlength=30 name="tabldesc" id="tabldesc"
            value="%PATWEB96.03.115.1"></td>
     </tr>

</table>
</form>
</div>

<form name=PatientLinks id=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%PATWEB96.03.003">
<input type=hidden name=admissno value="%PATWEB96.03.081">
<input type=hidden name=MenuType value="%PATWEB96.03.088">
<input type=hidden name=alert001 value="">
</form>

<script type="text/javascript">
if ("%PATWEB96.03.539.0" == "1") {
   pat96btf.d_pmsvx039.checked=1 
   pat96btf.pmsvx039.value="1"
}
if ("%PATWEB96.03.540.0" == "1") {
   pat96btf.d_pmsvx040.checked=1 
   pat96btf.pmsvx040.value="1"
}
</script>
