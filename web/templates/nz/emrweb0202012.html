<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="nz">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/EmrMandatory.js"></script>
<script type="text/javascript" src="../js/emrweb0202012.js"></script>
<script type="text/javascript">
function SetTriageDateTime(){
  SetCurrentDateTimeNoFocus(document.UpdateForm.emvis128,
                                       document.UpdateForm.emvis129);
}
function CancelLink() {
  document.LinkForm.emexp001.value=document.UpdateForm.emexp001.value.replace(/ /g,"+")
  document.LinkForm.submit();
}

function PatientReturn() {
  if(isWhitespace(UpdateForm.emvis118.value)){ return;;}

  validateCode(8,
               UpdateForm.emvis118,
               UpdateForm.gname,
               UpdateForm.selsex,
               UpdateForm.emexp005,
               UpdateForm.deceased,
               UpdateForm.dummy,
               UpdateForm.dummy,
               UpdateForm.dummy,
               UpdateForm.dummy,
               UpdateForm.dummy,
               UpdateForm.dummy,
               UpdateForm.dummy,
               UpdateForm.dummy,
               UpdateForm.dummy,
               UpdateForm.dummy,
               UpdateForm.dummy,
               UpdateForm.dummy,
               UpdateForm.gname,
               UpdateForm.sname);

  if (UpdateForm.deceased.value=="1") {
    alert("Patient Deceased");
    UpdateForm.emvis118.value="";
    UpdateForm.gname.value="";
    UpdateForm.selsex.value="";
    UpdateForm.emexp005.value="";
    return false;
  }

  if (!CheckEmrVisit(UpdateForm.emvis118.value,UpdateForm.dummy.value)) {
    UpdateForm.emvis118.value="";
    UpdateForm.gname.value="";
    UpdateForm.emvis111.value="";
    UpdateForm.emvis112.value="";
    UpdateForm.emexp004.selectedIndex=0;
    UpdateForm.selsex.value="";
    UpdateForm.emexp005.value="";
    return;
  }

  UpdateForm.emvis111.value=UpdateForm.gname.value.replace(/,/g,"")
  UpdateForm.emvis112.value=UpdateForm.sname.value.replace(/,/g,"")

  if(isWhitespace(UpdateForm.emvis111.value)){
    UpdateForm.emvis118.value="";
  }
  UpdateSex();
}
</script>
</head>
%START.OF.PAGE
<body onLoad="PageLoad(event);DisplayDiv();
SelectNumbers(UpdateForm.obdet041,0,11,1,'');PatientReturn();">
<span class=DFrameTitleBar>
Emergency Triage
</span>

<form name=UpdateForm action="emrweb02.pbl" method=post style="margin:0">
<input type=hidden name=reportno value="02">
<input type=hidden name=template value="001">
<input type=hidden name=formactn>
<input type=hidden name=updttype>
<input type=hidden name=updateky value="">
<input type=hidden name=nextpage value="7">
<input type=hidden name=returnfm value=1>
<input type=hidden name=redirect>
<input type=hidden name=deceased>
<input type=hidden name=selsex>
<input type=hidden name=gname>
<input type=hidden name=sname>
<input type=hidden name=dummy>
<input type=hidden name=dummyadm>
<input type=hidden name=dummsrch value="1">
<input type=hidden name=fpatname>
<input type=hidden name=urnumber>
<input type=hidden name=emvis004>
<input type=hidden name=emvis005>
<input type=hidden name=emvis128>
<input type=hidden name=emvis129>
<input type=hidden name=emvis135>
<input type=hidden name=emvis136>
<input type=hidden name=emvis137>
<input type=hidden name=emvis138>
<input type=hidden name=emexp001 value="%EMRWEB02.02.410">
<input type=hidden name=patsname value="%EMRWEB02.02.411">
<input type=hidden name=patgname value="%EMRWEB02.02.412">
<input type=hidden name=emvis061 value="%EMRWEB02.02.462.1">

<table align=center width=95% border=0 cellspacing=0 cellpadding=1>
<tr><td>Triaged By </td>
    <td><input type=text name=emvis127 size=6 class=Mandatory
    onblur="UpCase(this);validateNurse();" title="Triage Nurse" tabindex=1>
        <input type=text name=dummy1 size=20 class=Readonly readonly>
        <input type=hidden name=gnm>
        <img class=Icon src=../images/SearchIcon.gif
         onclick='NurseSearchFrame(UpdateForm.emvis127,UpdateForm.dummy1);'>
        </td>
    <td class=DataLabel>U/R 
       <input type=text size=10 maxlength=8 name=emvis118 tabindex=2
       value="%EMRWEB02.02.435" onblur="justifyRight(this);PatientReturn();">
        <img class=Icon src=../images/SearchIcon.gif onclick="PatientSearch();">
    </td>
    <td class=DataLabel>Surname </td>
    <td><input type=text size=25 max=25  name=emvis111 tabindex=3
        value="%EMRWEB02.02.411"></td>
    <td class=DataLabel>Given Name </td>
    <td><input type=text size=25 max=25  name=emvis112 tabindex=4
        value="%EMRWEB02.02.412"></td>
</tr>
<tr><td></td>
    <td></td>
    <td></td>
    <td class=DataLabel>%STANDARD.01.017.G </td>
    <td><select name=emexp004 tabindex=5>
        <option> </option>
        %EMRWEB02.02.086.099.061.9.1.19.3.H
        </select></td>
    <td class=DataLabel>Date of Birth </td>
    <td><input type=text size=12 max=11 name=emexp005  
         value="%EMRWEB02.02.414" tabindex=6
         title="Date of Birth" class="Past Date">
        <img class=Icon src=../images/DateTimeStamp.gif 
         date=document.UpdateForm.emexp005>
        <img class=Icon src=../images/DateLookup.gif 
         date=document.UpdateForm.emexp005>
        </td></tr>
</table>

<table align=center width=95% border=0 cellspacing=0 cellpadding=1>

<tr valign=top><td class=DataLabel width=15%>Presenting Complaint </td>
    <td>
    <input type=hidden name=emrviscat value="el">
    <input type="text" size=10 tabindex=7 name=test 
       value="%EMRWEB02.02.416.1"
       onKeyUp='UpCase(this);getPresentCom(this,UpdateForm.emvis060,
                UpdateForm.emrviscat);'
       onBlur='DisplayDiv()'>
    <select name=emvis060 class=SelectBig onchange="DisplayDiv();">
      <option value="%EMRWEB02.02.416.1">%EMRWEB02.02.416.0</option>
    </select>
    </td>
    <td colspan=5>
    <textarea name=prcom001 wrap=hard tabindex=8 
     cols=50 rows=2 onblur="TextareaBlurHandler(this);Validateprecom001();">
    </textarea>
    </td></tr>
</table>

<div id=Triage></div>

<table align=center width=95% border=0 cellspacing=0 cellpadding=1>

<tr><td class=DataLabel width=15%>Location</td>
    <td><input type=hidden name=name_emvis006 title="Location">
        <select class="Mandatory" name=emvis006 title="Location" tabindex=9
         onchange="validateLocation(UpdateForm.emvis006,
                   UpdateForm.name_emvis006);">
        <option></option>
        %EMRWEB02.02.468
        </select>
    </td>
    <td class=DataLabel>Pain Score</td>
    <td><input type=hidden name=obdet003 value="B">
        <select name=obdet041 class=SelectTny title="Pain Score">
        <option></option>
        </select> 0=no pain, 10=worst</td>
    <td class=DataLabel>&nbsp;</td>
    <td>&nbsp;</td>
    </tr>
<tr><td width=15%>Triage Category</td>
    <td><table border=0 cellspacing=0>
    <tr>
    <td class=Triage1><i>1</i>
    <input type=radio name=emvis003 value=1 tabindex=15 title="Triage Category"
    onclick="CheckMan();"></td>
    <td class=Triage2><i>2</i><input type=radio name=emvis003 value=2
    onclick="unCheck();"></td>
    <td class=Triage3><i>3</i><input type=radio name=emvis003 value=3
    onclick="unCheck();"></td>
    <td class=Triage4><i>4</i><input type=radio name=emvis003 value=4
    onclick="unCheck();"></td>
    <td class=Triage5><i>5</i><input type=radio name=emvis003 value=5
    onclick="unCheck();"></td>
    </tr></table></td>

    <td class=DataLabel>Research</td>
    <td>
    <input type=hidden name=name_emvis069>
    <select name=emvis069 tabindex=18 title="Research" class="SelectBig">
        <option></option>
        %EMRWEB02.02.229.2
        </select>
    <td></td></tr>

<tr><td colspan=6 align=center>
    <input type=button value="Add" class="button" tabindex=19 id="emr02a"
     onclick="tempDisable(this);setRedirect();SetTriageDateTime()
              ;setFormactn();">
    <input type=button value="Cancel" class="button" tabindex=20
     onclick="CancelLink();">
    </td></tr>
</table>
</form>

<form name=LinkForm action="emrweb02.pbl" method=get style="margin:0">
<input type=hidden name=reportno value="02">
<input type=hidden name=template value="011">
<input type=hidden name=formactn value="SP">
<input type=hidden name=emexp001>
</form>

<span id=EmergencyProc style="display:none;">
<table align=center cellspacing=1 cellpadding=0 border=0 width=95%>
<tr><td class=DataLabel width=15%>Place Where Injury Occurred</td>
    <td><select name="emvis021" class="Mandatory SelectBig" tabindex=10
         title="Place Where Injury Occurred">
    <option></option>
    %EMRWEB02.02.121.2
     </select>
    </td>
    <td class=DataLabel>Activity When Injured</td>
    <td><select name="injur006" class="Mandatory SelectBig"
         title="Activity When Injured" tabindex=11>
    <option></option>
      %EMRWEB02.02.183.2
       </select>
</td>
    <td class=DataLabel> Injury Cause</td>
    <td><select name="injur004" class="Mandatory SelectBig" title="Injury Cause"
         tabindex=12>
    <option></option>
     %EMRWEB02.02.181.2
     </select>
    </td></tr>

<tr valign=top><td class=DataLabel> Human Intent</td>
    <td><select name="injur005" class="Mandatory SelectBig" title="Human Intent"
         tabindex=13>
    <option></option>
     %EMRWEB02.02.182.2
      </select>
</td>
    <td class=DataLabel>
    Desc. of Injury Event</td>
    <td colspan=3><input type="text" name="injur002" maxlength="50" size="40"
         class=Mandatory
         title="Description of Injury Event" value="" tabindex=14>
    <input type="text" name="injur003" maxlength="50" size="40" value=""
     tabindex=14>
</td></tr>
</table>
</span>
<script type="text/javascript">
function init(){
for (var i =0 ; i < document.UpdateForm.emexp004.length; i++) {
if  (document.UpdateForm.emexp004.options[i].value.substr(0,1)== "%EMRWEB02.02.413") {
       document.UpdateForm.emexp004.selectedIndex=i }
 }

var str1= trim("%EMRWEB02.02.417")
var str2= trim("%EMRWEB02.02.418")
var str3= trim("%EMRWEB02.02.419")
var str4= trim("%EMRWEB02.02.420")
var str5= trim("%EMRWEB02.02.421")
var str6= trim("%EMRWEB02.02.422")
UpdateForm.prcom001.value=str1+'\n'+str2+'\n'+str3+'\n'+str4+'\n'+str5+'\n'+str6

var ExpectedLocation="%EMRWEB02.02.472"
if(!isWhitespace(ExpectedLocation)) {
   validateLocation(document.UpdateForm.emvis006,document.UpdateForm.name_emvis006);
}
}
function DisplayDiv() {
Indicator=document.UpdateForm.emvis060.value.substr(13,1);
  if (Indicator=="I") {
     document.all.Triage.style.display="";
     document.all.Triage.innerHTML=document.all.EmergencyProc.innerHTML;
     }
  else {
     document.all.Triage.style.display="none";
     document.all.Triage.innerHTML="";}
}
</script>
