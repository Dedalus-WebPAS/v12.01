<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="cab">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
function init() {
  UpdateForm.redirect.value+="watweb01.pbl?reportno=2&template=1&casekeys=" +
                             PatientLinks.casekeys.value.replace(/ /g,"+");
}

function DisableIcon(field) {
  if (field.disabled == true) {
    alert(field.title+" is for display only")
    UpdateForm.wattr013.focus()
  }
}

function EnterSus() {
  i=document.UpdateForm.ListStat.selectedIndex;
  ind=document.UpdateForm.ListStat.options[i].value.substring(3,4);

  if (ind !="R") {
    CASEKEYS=PatientLinks.casekeys.value.replace(/ /g,"+");
    LinkUrl="watweb01.pbl?reportno=5&template=002&casekeys="+CASEKEYS;
    Left=(document.body.clientWidth-650)/2;
    DFrameLink(LinkUrl,50,Left,650,400);
  }
}

function Listst() {
  i = document.UpdateForm.ListStat.selectedIndex;
  document.UpdateForm.wattx004.value = document.UpdateForm.ListStat.options[i].value.substring(0,3);
}

function UpdateWat() {
  datechk2 = validateTime();

  if (!datechk2) {
    return
  }
  Listst();
  if (validateMandatory(UpdateForm)) {
    SubmitHidden(UpdateForm);
  }
}

function ChkDateTime1(strtDate,endDate) {
  var strtDay  = strtDate.substring(0,2);
  var strtMon  = strtDate.substring(3,6);
  var strtYear = strtDate.substring(7,11);

  var endDay   = endDate.substring(0,2);
  var endMon   = endDate.substring(3,6);
  var endYear  = endDate.substring(7,11);

  strtMon = GetMonthNumber(strtMon);
  endMon  = GetMonthNumber(endMon);

  var strtDateTime = strtYear + strtMon + strtDay 
  var endDateTime  = endYear + endMon + endDay 
  if (endDateTime <= strtDateTime ) return false;
  return true;
}

function ChkDateTime2(strtDate,endDate) {
  var strtDay  = strtDate.substring(0,2);
  var strtMon  = strtDate.substring(3,6);
  var strtYear = strtDate.substring(7,11);

  var endDay   = endDate.substring(0,2);
  var endMon   = endDate.substring(3,6);
  var endYear  = endDate.substring(7,11);

  strtMon = GetMonthNumber(strtMon);
  endMon  = GetMonthNumber(endMon);

  var strtDateTime = strtYear + strtMon + strtDay
  var endDateTime  = endYear + endMon + endDay
  if (endDateTime >= strtDateTime ) {
     return false;
  }
  return true;
}

function validateTime(){
  date1=UpdateForm.wattr008.value;
  date2=UpdateForm.wattr006.value;

  if (ChkDateTime1(date1,date2)) {
    message=" \"Proposed Admission Date\" cannot be before";
    message+="\"Date on List\"";
    alert(message);
    return false;
  }
  return true;
}

function RemoveQuote(Field) {
  Field.value=Field.value.replace(/\"/g,"");
}
</script>

</head>
%START.OF.PAGE
<body onload="PageLoad(event);DisplayTrnSrc(UpdateForm.wattr050);">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%WATWEB01.02.003";
PatientVIS="%WATWEB01.02.081";
PatientNAM="%WATWEB01.02.002";
PatientSTA="%WATWEB01.02.086.078";
PatientALT="%WATWEB01.02.084";
PatientSEX="%WATWEB01.02.019";
PatientDOB="%WATWEB01.02.020";
PatientAGE="%WATWEB01.02.021";
PatientLOC="%WATWEB01.02.083";
DoctorCOD="%WATWEB01.02.082.003";
DoctorNAM="%WATWEB01.02.082.002";
PatientAID="%WATWEB01.02.086.090";
PatientIND="%WATWEB01.02.086.091";
PatientCUR="%WATWEB01.02.086.092";
PatientCLC="%WATWEB01.02.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%WATWEB01.02.086.094";
PatientCDM="%WATWEB01.02.086.095";
PatientVDH="%WATWEB01.02.086.099.015";
PatientUNT="%WATWEB01.02.066.0";
PatientPRI="%WATWEB01.02.086.066.1";
InsertPatientHeader()
</script>

<div id=PatientMenu></div>
<div id=PageBodySection style="overflow: auto;">

<form name=UpdateForm action="watweb01.pbl" method=post >
<input type=hidden name=reportno value=2>
<input type=hidden name=template value=1>
<input type=hidden name=casekeys value="%WATWEB01.02.101">
<input type=hidden name=updttype value="U">
<input type=hidden name=nextpage value="7">
<input type=hidden name=redirect value="">
<input type=hidden name=dummy value="">
<input type=hidden name=wattx004 value="">
<input type=hidden name=BookingStatus value="%WATWEB01.02.175">
<input type=hidden name=bokrx006 value=" ">

<table border=0 width=100% cellspacing=0 align=center cellpadding=1>
<tr><td class=HeadingCell align=center>
    Update Waiting List Entry</td>
</tr>
</table>

<table border=0 width=95% cellspacing=0 cellpadding=1 align=center>
<tr><td class=DataLabel width=10%>Consultant</td>
    <td class=DataField>
    <input type=text name=wattr012 size=8 maxlength=8 readonly
     title="Consultant" class=Mandatory value="%WATWEB01.02.115.003">
    <input type=text name=n_wattr012 size=40 readonly
      title="Consultant Name" value="%WATWEB01.02.115.002"></td>
    <td class=DataLabel width=10%>Date on List</td>
    <td class=DataField>
    <input type=text name=wattr006 size=12
     title="Date on List" class=Readonly readonly
     value="%WATWEB01.02.109"  onblur="checkDate(this,'Date')">
    </td>
</tr>

<tr><td class=DataLabel>Unit</td>
    <td class=DataField width=40%>
    <input type=hidden name=wattr011 value="%WATWEB01.02.114.1">
    <input type=text readonly size=30 class=Readonly name=xxxtr011 
        value="%WATWEB01.02.114.0" readonly> </td>

    <td class=DataLabel>%STANDARD.01.017.TP</td>
    <td class=DataField>
   <select name=wattr014 class=Mandatory tabindex=4 title="Gravida">
    <option></option>
    %WATWEB01.02.117.2
    </select></td>
</tr>

<tr><td class=DataLabel>Expected Procedure</td>
    <td class=DataField>
    <input type=text  class=Readonly  readonly name=wattr001  
    titile="CMBS Code" value=%WATWEB01.02.103 ></td>
    <td class=DataLabel>Planned length of Stay </td>
    <td class=DataField>
    <input type=text name=wattr013 size=5 maxlength=5 tabindex=4
     class="Mandatory Integer" min=0 value="%WATWEB01.02.116"
     title="Planned LOS">(days)</td>
    </tr>

<tr><td class=DataLabel>Referral Source</td>
    <td class=DataField>
    <select name=wattr050 tabindex=6 class="selectBig Mandatory"
     title="Referral Source" onchange="DisplayTrnSrc(this);">
    <option></option>
    %WATWEB01.02.187.2
    </select></td>
    <td><div id=divTransferLabel></div></td>
    <td><div id=divTransferSource></div></td></tr>

<tr><td class=DataLabel>Admitting Point  </td>
    <td class=DataField>
    <select name=wattx006 tabindex=5 class="selectBig Mandatory"
     title="Admitting Point">
    <option></option>  
    %WATWEB01.02.506.2
    </select></td>
    <td class=DataLabel>%STANDARD.01.017.CL  </td>
    <td class=DataField>
    <select name=wattx026 tabindex=8 class=selectBig  title="">
    <option></option>
    %WATWEB01.02.526.9.1.10.2.X
    </select></td></tr>


<tr><td class=DataLabel>Exp. Post Op Ward  </td>
    <td class=DataField>
    <select name=wattx005 tabindex=7 class="selectBig Mandatory" 
     title="Exp. Post Op Ward">
    <option></option>  
    %WATWEB01.02.505.2
    </select></td>
    <td class=DataLabel>Short Notice</td>
    <td class=DataField>
    <select name=wattr015 tabindex=10 class=selectBig>
    <option></option>
    %WATWEB01.02.118.2
    </select></td></tr>

<tr><td class=DataLabel>Listing Status</td>
    <td class=DataField>
    <select name=ListStat title="Listing Status" tabindex=9
    onchange="EnterSus();">
     %WATWEB01.02.504.2
    </select>
    </td>
    <td class=DataLabel>Paperwork Date</td>
    <td>
    <input type=text name=wattr027 size=12 maxlength=12 tabindex=13
       onblur="checkDate(this,'Date')" value="%WATWEB01.02.134">
    <img src=../images/DateTimeStamp.gif class=Icon
     date=UpdateForm.wattr027>
    <img src=../images/DateLookup.gif class=Icon date=UpdateForm.wattr027>
    </td>
</tr>

<tr><td class=DataLabel>Expected Due Date</td>
    <td><input type=text name=wattr008 size=12 maxlength=12 tabindex=11  
     title="Expected Due Date" class="Mandatory"
     onblur="checkDate(this,'Date')" value="%WATWEB01.02.111" >
    <img src=../images/DateTimeStamp.gif class=Icon
     date=UpdateForm.wattr008 />
    <img src=../images/DateLookup.gif class=Icon
     date=UpdateForm.wattr008 />
    </td>
</tr>

<tr valign=top><td class=DataLabel>Comments</td>
    <td class=DataField colspan=3> 
    <textarea wrap=hard name=wattrcom cols=60 
     tabindex=19 rows=3>%WATWEB01.02.161</textarea></td></tr>

<tr><td class=DataLabel>Date Keyed</td>
    <td class=DataField>
    <input type=text class=Readonly readonly size=12 maxlength=12 
     tabindex=24 value="%WATWEB01.02.126"></td>

<td class=DateLabel>Operator ID </td>
    <td class=DataField>
    <input type=text size=12 maxlength=12 class=Readonly readonly 
    tabindex=25 value= '%WATWEB01.02.310' ></td></tr>

<tr><td colspan=4>&nbsp;</td></tr>

<tr><td colspan=4 align=center>
    <input type=button class="button" value="Ok" tabindex=26
     onclick="UpdateWat();">
    <input type=button value="Cancel" tabindex=27 class="button" 
     onclick='PatientLinkTo("watweb01.pbl",2,1,0,0,0);'>
   </td></tr>
</table>
</form>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%WATWEB01.02.003">
<input type=hidden name=admissno value="%WATWEB01.02.081">
<input type=hidden name=MenuType value="%WATWEB01.02.088">
<input type=hidden name=casekeys value="%WATWEB01.02.101">
</form>

<script type="text/javascript">
function DisplayTrnSrc(field) {
  i=field.selectedIndex;
  ind=field.options[i].value.substring(4,5);

  if (ind!="1") {
   document.getElementById('divTransferSource').innerHTML=
     document.getElementById('spTransferBlank').innerHTML;
   document.getElementById('divTransferLabel').innerHTML="";
  } else {
   document.getElementById('divTransferSource').innerHTML=
     document.getElementById('spTransfer').innerHTML;
   document.getElementById('divTransferLabel').innerHTML=
     document.getElementById('spTransferLabel').innerHTML;
  }
}
</script>

<span id=spTransferLabel style="display:none">
Transfer Source
</span>

<span id=spTransfer style="display:none">
  <input type="text" size=7 maxlength=5 name=trnsfsrc id=trnsfsrc
   class=Mandatory title="Transfer Source" tabindex=5
   onchange="validateCode(9,trnsfsrc,trandesc)" value="%WATWEB01.02.179">
  <input type=text size=20 name=trandesc id=trandesc notab
   class=Readonly readonly value="%WATWEB01.02.180">
  <img src="../images/SearchIcon.gif" class=Icon
   onclick="TransferSourceFrame(trnsfsrc,trandesc)">&nbsp;Previous ID&nbsp;
  <input type="text" size=15 maxlength=9 name=previd01 id=previd01
   class=Mandatory title="Previous ID" value=%WATWEB01.02.330>
</span>

<span id=spTransferBlank style="display:none">
  <input type=hidden name=trnsfsrc id=trnsfsrc>
</span>
