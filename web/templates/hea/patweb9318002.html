<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="hea">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
function init() {
  var txtArea = document.getElementById('textacmt');
  if (!txtArea || txtArea == undefined)
    return;

  var arrCmntLines = new Array();
  var sComments = "";
  var nCmntLines = 5;  // because we only store 5 comment lines in our file

  for (var i=0; i < nCmntLines; i++) {
    arrCmntLines[i] = document.getElementById('pmnut0' + (30+i+1) + '').value;

    if (!isWhitespace(arrCmntLines[i])) {
      sComments = sComments + arrCmntLines[i];
    }

    if (i < (nCmntLines-1)) {
      // not he last line
      sComments = sComments + "\n";
    }
  }

  txtArea.value = trim(sComments);  // trim leading & trailing spaces

}

function SplitComments() {
  var txtArea = document.getElementById('textacmt');
  if (!txtArea || txtArea == undefined)
    return;

  document.getElementById('pmnut031').value="";
  document.getElementById('pmnut032').value="";
  document.getElementById('pmnut033').value="";
  document.getElementById('pmnut034').value="";
  document.getElementById('pmnut035').value="";

  var lines = txtArea.value.split(/\r?\n/);

  for (var i = 0; i < lines.length; i++) {
    if (lines[i]) {
      document.getElementById('pmnut0' + (30+i+1) + '').value = lines[i];
    }
    else {
      document.getElementById('pmnut0' + (30+i+1) + '').value = "";
    }
  }
// Called from pre admission screens
  document.NutritianPopUp.nextpage.value="0";
  if(parent.document.getElementById('ptmis028')) {
    parent.document.getElementById('ptmis028').value=
    document.NutritianPopUp.pmnut048.value;
    document.NutritianPopUp.nextpage.value="7";
  }
  if(parent.document.getElementById('d_ptmis028')) {
    i=document.NutritianPopUp.pmnut048.selectedIndex
    parent.document.getElementById('d_ptmis028').value=
    document.NutritianPopUp.pmnut048.options[i].innerText;
  }

}
function defaultDiet1() {
  if (isWhitespace(document.getElementById("pmnut048").value) &&
      !isWhitespace(document.getElementById("admsdiet").value)) {
    for (var i=0; i < document.getElementById("pmnut048").length; i++) {
      if (document.getElementById("pmnut048").options[i].value.substr(0,3) ==
          document.getElementById("admsdiet").value) {
        document.getElementById("pmnut048").selectedIndex=i;
        break;
      }
    }
  }
}
function CheckTextLimit(TextArea) {
  if (!LimitText(TextArea,5,200)) {
    TextArea.onblur = null;  // clear to prevent infinite loop with alerts

    window.setTimeout(function () {
      TextArea.onblur = function() {  // restore onblur handler
        ValidateEscapeChars(TextArea);
        ValidateTextAreaLimits(TextArea,200,5,40);
      }
    },100);
  }
}
function JoinTextLines(TextArea) {
  if (!isWhitespace(TextArea.value)) {
    // remove line breaks
    TextArea.value = TextArea.value.replace(/\r?\n/gm," ");
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);defaultDiet1();">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExitRefresh();">
Update Diet - %PATWEB93.18.002
</span>
<form name=NutritianPopUp method=post action=patweb93.pbl style=margin:0
 onsubmit="SplitComments();">
<input type=hidden name=reportno value="18">
<input type=hidden name=template value="2">
<input type=hidden name=updatety value="A">
<input type=hidden name=nextpage value="">
<input type=hidden name=urnumber value="%PATWEB93.18.003">
<input type=hidden name=admissno value="%PATWEB93.18.081">
<input type=hidden name=pmnut001 value="%PATWEB93.18.081">
<input type=hidden name=pmnut002 value="">
<input type=hidden name=pmnut031 id='pmnut031' value="%PATWEB93.18.321">
<input type=hidden name=pmnut032 id='pmnut032' value="%PATWEB93.18.322">
<input type=hidden name=pmnut033 id='pmnut033' value="%PATWEB93.18.323">
<input type=hidden name=pmnut034 id='pmnut034' value="%PATWEB93.18.324">
<input type=hidden name=pmnut035 id='pmnut035' value="%PATWEB93.18.325">
<input type=hidden name=admsdiet id='admsdiet' value="%PATWEB93.18.127.1">
<table border=0 align=center width=30% cellspacing=0>
<tr><table border=0 align=center width=90% align=center cellspacing=0>
    <tr><td class=DataLabel>Diet 1</td>
    <td><select name=pmnut048 id=pmnut048 tabindex=1>
          <option value="   "></option>
           %PATWEB93.18.338.2
          </select></td>
    <td class=DataLabel>Fasting</td>
    <td align=left> <input type=checkbox name=pmnut041 tabindex=7
                     value="1"></td></tr>

<tr><td class=DataLabel>Diet 2</td>
    <td><select name=pmnut017 tabindex=2>
                <option value="   "></option>
                 %PATWEB93.18.328.2
        </select></td>
    <td class=DataLabel>Menu/Assistance</td>
    <td><select name=pmnut012 tabindex=8>
           <option value=" "></option>
            %PATWEB93.18.309.2
        </select></td></tr>

<tr><td class=DataLabel>Diet 3</td>
    <td><select name=pmnut019 tabindex=3>
                <option value="   "></option>
                 %PATWEB93.18.329.2
        </select></td>
    <td class=DataLabel>Last Update</td>
    <td><input type=text class=readonly readonly size=20 name=pmnut004
               value="%PATWEB93.18.303"></td></tr>

<tr><td class=DataLabel>Diet 4</td>
    <td><select name=pmnut021 tabindex=4>
                <option value="   "></option>
                 %PATWEB93.18.330.2
        </select></td></tr>
<tr><td class=DataLabel>Diet 5</td>
    <td><select name=pmnut023 tabindex=5>
                <option value="   "></option>
                 %PATWEB93.18.331.2
        </select></td></tr>

<tr><td class=DataLabel>Dietitian</td>
    <td><input type="text" size=12 maxlength=10 name="pmnut010" id=pmnut010
               value="%PATWEB93.18.307.1" tabindex=6
               onblur="validateCode(18,pmnut010,doctname)">
        <input type="text" size=25 name="doctname" id=doctname
               value="%PATWEB93.18.307.0">
        <img src="../images/SearchIcon.gif" class=Icon
             onclick="HCPSearchFrame(pmnut010,doctname)"></td></tr>

<tr><td class=DataLabel valign=top>Comment</td>
    <td>
      <textarea rows=5 cols=40 name=textacmt id=textacmt tabindex=10
       onkeydown="CheckTextLimit(this);" onfocus="JoinTextLines(this);"
        onblur="ValidateEscapeChars(this);
        ValidateTextAreaLimits(this,200,5,40);"></textarea>
    </td>
</tr>
<tr><td></td></tr>
</table>
<table width="80%" align=center>
  <tr><td class=HeadingCell colspan=2>Supplements-Morning</td>
      <td class=HeadingCell colspan=2>Supplements-Afternoon</td></tr>
  <tr><td>Breakfast</td>
    <td><input type=text name=pmnut042 title="Breakfast" tabindex=20
           value="%PATWEB93.18.332" size=42 maxlength=40></td>
      <td>Afternoon Tea</td>
      <td><input type=text name=pmnut045 title="Afternoon Tea" tabindex=23
           value="%PATWEB93.18.335" size=42 maxlength=40></td></tr>
  <tr><td>Morning Tea</td>
      <td><input type=text name=pmnut043 title="Morning Tea" tabindex=21
           value="%PATWEB93.18.333" size=42 maxlength=40></td>
      <td>Dinner</td>
      <td><input type=text name=pmnut046 title="Dinner" tabindex=24
           value="%PATWEB93.18.336" size=42 maxlength=40></td></tr>
  <tr><td>Lunch</td>
      <td><input type=text name=pmnut044 title="Lunch" tabindex=22
           value="%PATWEB93.18.334" size=42 maxlength=40></td>
      <td>Supper</td>
      <td><input type=text name=pmnut047 title="Supper" tabindex=25
           value="%PATWEB93.18.337" size=42 maxlength=40></td></tr>
<tr><td></td></tr>
</table>
<table border=0 align=center width=90% align=center cellspacing=0>
<tr valign=bottom><td align=center colspan=2>
    <input type=submit class="button" value="Update" tabindex=31>
    <input type=button class="button" value="Cancel" tabindex=32
        onclick="DFrameCloseRefresh();"></td></tr>
</table>
</form>
<script type="text/javascript">
 if ("%PATWEB93.18.327"=="1")
       {
   document.NutritianPopUp.pmnut041.checked=1;
 }
</script>
