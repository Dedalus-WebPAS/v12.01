<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="hea">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/oprweb06.js"> </script>
<script type="text/javascript" src="../js/TheatreScreensHoverInfo.js"> </script>
<script type="text/javascript">
%START.OF.PAGE
function init() {
  if (isWhitespace(UpdateForm.opcom003.value)) {
      if(!isWhitespace(PatientNotes.Prothesis.value)&&
      (!isWhitespace(PatientNotes.AnaeNote.value))){
        UpdateForm.opcom003.value= PatientNotes.Prothesis.value + "\n" +
                                 PatientNotes.AnaeNote.value + "\n" +
                                 PatientNotes.WaitNote.value 
     }
      if(!isWhitespace(PatientNotes.Prothesis.value)&&
      (isWhitespace(PatientNotes.AnaeNote.value))){
        UpdateForm.opcom003.value=PatientNotes.Prothesis.value + "\n" +
                                 PatientNotes.WaitNote.value 
     }
      if(isWhitespace(PatientNotes.Prothesis.value)&&
      (!isWhitespace(PatientNotes.AnaeNote.value))){
        UpdateForm.opcom003.value=PatientNotes.AnaeNote.value + "\n" +
                                 PatientNotes.WaitNote.value 
     }
      if(isWhitespace(PatientNotes.Prothesis.value)&&
      (isWhitespace(PatientNotes.AnaeNote.value))){
        UpdateForm.opcom003.value=PatientNotes.WaitNote.value 
     }
  }
}
function SetPrinter(SelectList) {
 if (SelectList.className=="SelectBig") {
     SelectList.className="Mandatory SelectBig" }
 else {
     SelectList.className="SelectBig" }
}
function chkTime(field){
  if(isWhitespace(field.value))
     return;

  endTime = UpdateForm.suentime.value.replace(/:/g,"");
  abandoned = "%OPRWEB06.10.374";

  if(isWhitespace(endTime)&&abandoned!="Yes"){
     alert("Surgery End Time must be entered first");
     field.value=""
     return;
  }
  OperDate=document.UpdateForm.casekeys.value.substring(3,11);
  if(document.UpdateForm.currdate.value > OperDate) {
    return;
  }
  if(field.value.replace(/:/g,"")<=endTime){
//
  if(!confirm(""+field.title+" must be after Surgery End Time " +
          UpdateForm.suentime.value +
  "\n Do you want to override")) {
  field.value="";
  }
//
  }
}
function setETTime(extime) {
 if(!checkTime(extime,extime.title)) {
  return;
 }
 if (isWhitespace(extime.value)) {
  return;
 }
 chkTime(extime)
 document.UpdateForm.opard080.value=extime.value;
 document.UpdateForm.opard085.value=extime.value;
 ChgRTD();
}
function valTime(){
  RecFront=UpdateFront.opard071.value.replace(/:/g,"");
  RecBack=UpdateFront.opard074.value.replace(/:/g,"");
  DepartTime=UpdateFront.opard085.value.replace(/:/g,"");
}
function ChkFront() {
  if (isWhitespace(UpdateForm.opard071.value) &&
      !isWhitespace(UpdateForm.opard074.value)) {
     alert("Time in Recovery - Front need to be entered")
     UpdateForm.opard074.value=""
     UpdateForm.opard071.focus()
  }
}
function ChgRTD() {
  if(!isWhitespace(UpdateForm.opard080.value)) {
     UpdateForm.opard080.className= "Mandatory"
     UpdateForm.opard085.className= "Mandatory"
  } else {
     UpdateForm.opard080.className=" "
     UpdateForm.opard085.className=" "
  }
}

function chkMan() {
  var depTime = document.getElementById('opard085');

  if (isWhitespace(depTime.value)) {return;}

  var exitTime = document.getElementById('opard080');
  var varianceMinutes = document.getElementById('opcnvrrd');
  var delayCode = document.getElementById('opard084');
  var dateDiffSeconds = null;
  var dateDiffMilliseconds = null;

  //convert to time
  var date1 = new Date();
  var date2 = new Date();

  //depTime
  date1.setHours(depTime.value.substr(0,2));
  date1.setMinutes(depTime.value.substr(3,2));
  date1.setSeconds(depTime.value.substr(6,2));

  //exitTime
  date2.setHours(exitTime.value.substr(0,2));
  date2.setMinutes(exitTime.value.substr(3,2));
  date2.setSeconds(exitTime.value.substr(6,2));

  dateDiffMilliseconds = (date2 - date1);
  dateDiffSeconds = (dateDiffMilliseconds/1000);

  //convert minute to seconds and then compare dateDiffSeconds
  if( (varianceMinutes.value * 60) < dateDiffSeconds) {
    delayCode.className="Mandatory";
  }else {
    delayCode.className="";
  }
}

function chkMan2() {
  var recTime = document.getElementById('opard077');

  if (isWhitespace(recTime.value)) {return;}

  var exitTime = document.getElementById('opard080');
  var varianceMinutes = document.getElementById('opcnldae');
  var dateDiffSeconds = null;
  var dateDiffMilliseconds = null;

  //convert to time
  var date1 = new Date();
  var date2 = new Date();

  //recTime
  date1.setHours(recTime.value.substr(0,2));
  date1.setMinutes(recTime.value.substr(3,2));
  date1.setSeconds(recTime.value.substr(6,2));

  //exitTime
  date2.setHours(exitTime.value.substr(0,2));
  date2.setMinutes(exitTime.value.substr(3,2));
  date2.setSeconds(exitTime.value.substr(6,2));

  dateDiffMilliseconds = (date2 - date1);
  dateDiffSeconds = (dateDiffMilliseconds/1000);

  //convert minute to seconds and then compare dateDiffSeconds
  if( (varianceMinutes.value * 60) < dateDiffSeconds) {
    if(usingRecoveryAnaestheticParameter != '1') {
      return;
    }
    var url = "oprweb06.pbl?reportno=10&template=011";

    url += "&urnumber="+PatientURN;
    url += "&admissno="+PatientVIS;
    url += "&casekeys="+UpdateForm.casekeys.value;

    adverseEventDiv.style.display = "none";

    SetCookie("recoveryDFrameCookie",""); 
    ShowDetail01(url);
  } else {
//    delayCode.className="";
  }
}

function formSubmit() {

  if (isWhitespace(document.UpdateForm.opard071.value) &&
      isWhitespace(document.UpdateForm.opard074.value) &&
      isWhitespace(document.UpdateForm.opard077.value) &&
      document.UpdateForm.d_opsrg076.checked == false) {
    alert("A Recovery Time must be Entered.");
    return;
  }

if(validateMandatory(UpdateForm)) {

  if(document.UpdateForm.d_opsrg072.checked==false) {
     document.UpdateForm.opsrg072.value="0";
  } else {
     document.UpdateForm.opsrg072.value="1";
  }

  if(document.UpdateForm.d_opsrg073.checked==false) {
     document.UpdateForm.opsrg073.value="0";
  } else {
     document.UpdateForm.opsrg073.value="1";
  }

  if(document.UpdateForm.d_opsrg076.checked==false) {
     document.UpdateForm.opsrg076.value="0";
  } else {
     document.UpdateForm.opsrg076.value="1";
  }

      casekey=UpdateForm.casekeys.value.substr(0,26);
      casekey=casekey.replace(/ /g,"+");
      if(UpdateForm.suprlevl.value=="S") {
      UpdateForm.redirect.value="oprweb01.pbl?reportno=4&template=013&"+
                                 "casekeys="+casekey; }
      else {
      UpdateForm.redirect.value="oprweb01.pbl?reportno=4&template=001&"+
                                 "casekeys="+casekey; }
      document.UpdateForm.opard071.value=document.UpdateForm.opard077.value;
      document.UpdateForm.submit();
    }
}


/***********************************
*   Ready to depart
**********************************/
function checkReadyToDepartExist()
{
  if(usingRecoveryAnaestheticParameter != '1') {
     return;
  }
  
  var opard085 = document.getElementById("opard085");
  var adverseEventDiv = document.getElementById("adverseEventDiv");

  if(opard085.value.replace(/ /g,"").length != 0)
  {
    adverseEventDiv.style.display = "";
  }
}

function setReadyDepartTime(opard085)
{
  SetCurrentDateTime(null,opard085);
  checkReadyToDepartExist();

}

function changeTextForAdverseEvent()
{
 var adverseText = document.getElementById("adverseText");

 if(EventExist.replace(/ /g,"").length != 0 )
 {
    if(EventExist == 1) {
        adverseText.innerHTML = "<b>Would you like to modify the adverse events?</b>";
        return true;
   }else {
        adverseText.innerHTML = "<b>Did an adverse event occur?</b>";
        return false;
   }
 }else {
    adverseText.innerHTML = "<b>Did an adverse event occur?</b>";
    return false;
 }
}

function checkAdverseResponse()
{
 if(usingRecoveryAnaestheticParameter != '1') {
    return;
 }

 var adverseDropDown = document.getElementById("adverseDropDown");
 var adverseEventDiv = document.getElementById("adverseEventDiv");
 var casekeys = document.getElementById("casekeys");

 var bool = changeTextForAdverseEvent();

 if(adverseDropDown.value == "Yes" && !bool)
 {
   var url = "oprweb06.pbl?reportno=10&template=010";

   url += "&urnumber="+PatientURN;
   url += "&admissno="+PatientVIS;
   url += "&casekeys="+casekeys.value;

   adverseEventDiv.style.display = "none";
   ShowDetail01(url);
 }
 else if(adverseDropDown.value == "Yes" && bool)
 {
   var url = "oprweb06.pbl?reportno=10&template=011";

   url += "&urnumber="+PatientURN;
   url += "&admissno="+PatientVIS;
   url += "&casekeys="+casekeys.value;

   adverseEventDiv.style.display = "none";

   ShowDetail01(url);
 }
 else
 {
   
   adverseEventDiv.style.display = "none";
   adverseEventDiv.focus();	
 }

}

function ShowDetail01(linkurl)
{
  Left=(document.body.clientWidth-900)/2
  DFrameLink(linkurl,0,Left,900,650)
}

function displayCRRHI() {

  if (document.getElementById("opcncrrh").value=="2" ||
      document.getElementById("opcncrrh").value=="1") {
    linkurl = document.getElementById("recrmurl").value +
              "&casekeys=" +
              document.PatientLinks.casekeys.value.replace(/ /g,"+") +
              "&uniqueky=" +
              document.PatientLinks.uniqueky.value.replace(/ /g,"+") +
              "&urnumber=" +
              document.PatientLinks.urnumber.value.replace(/ /g,"+") +
              "&admissno=" +
              document.PatientLinks.admissno.value.replace(/ /g,"+");

    Left=(document.body.clientWidth-800)/2;
    DFrameLink(linkurl,50,Left,800,600)
  }

}
//C-0825792 - Check parameter to Use pmshcpaf/oprnuraf for OT Nurse
function chkHcpOTNurse(){
  if (document.getElementById('opcnurse')) {
      if (document.getElementById('opcnurse').value == "1") {
        return true;
      }
      else {
        return false;
      }
  }
  else {
      return false;
  }
}
//C-0825792 - Search Nurse from pmshcpaf/oprnuraf for OT Nurse
function SearchOTNurse(NurseId,ReturnNurseName) {
  var hcpnurse = chkHcpOTNurse();
  if (hcpnurse==true){
     HCPSearchFrame(NurseId,ReturnNurseName,20);
  }
  else {
     NurseSearchFrame(NurseId,ReturnNurseName);
  }
}

//C-0825792 - Validate Nurse from pmshcpaf/oprnuraf for OT Nurse
function validateNurse(code,name) {
  var hcpnurse = chkHcpOTNurse();
  if  (hcpnurse==true){
      validateCode('18',code,name);
  }
  else {
      validateCode('17',code,name,document.UpdateForm.gnm);
      SetNurseName(name);
  }
}
function SetNurseName(name) {
  name.value=UpdateForm.gnm.value.replace(/\s*$/g,"") + " " +
             name.value.replace(/\s*$/g,"")
}
function SetSelectSizeBig(SelectList) {
  if (SelectList.className=="SelectBig") {
    SelectList.className="Mandatory SelectBig"
  } else {
    SelectList.className="SelectBig"
  }
}
function SetSelectSizeSml(SelectList) {
  if (SelectList.className=="SelectSml") {
    SelectList.className="Mandatory SelectSml"
  } else {
    SelectList.className="SelectSml"
  }
}
</script>
</head>
<body onload="PageLoad(event);setTimeout('ChkReg()',100);
              changeTextForAdverseEvent();
              showDelayHEA();
              showExitDelayHEA();">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%OPRWEB06.10.003";
PatientVIS="%OPRWEB06.10.081";
PatientNAM="%OPRWEB06.10.002";
PatientSTA="%OPRWEB06.10.086.078";
PatientALT="%OPRWEB06.10.084";
PatientSEX="%OPRWEB06.10.019";
PatientDOB="%OPRWEB06.10.020";
PatientAGE="%OPRWEB06.10.021";
PatientLOC="%OPRWEB06.10.083";
PatientPRI="%OPRWEB06.10.086.066.1";
PatientUNT="%OPRWEB06.10.066.0";
DoctorCOD="%OPRWEB06.10.082.003";
DoctorNAM="%OPRWEB06.10.082.002";
PatientAID="%OPRWEB06.10.086.090";
PatientIND="%OPRWEB06.10.086.091";
PatientCUR="%OPRWEB06.10.086.092";
PatientCLC="%OPRWEB06.10.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%OPRWEB06.10.086.094";
PatientCDM="%OPRWEB06.10.086.095";
PatientVDH="%OPRWEB06.10.086.099.015";

EventExist="%OPRWEB06.10.743";
usingRecoveryAnaestheticParameter ='%STANDARD.01.025.113.015.0.1';

InsertPatientHeader()
</script>
<div id="PatientMenu"></div>

<div id="TheatreCaseHeading"></div>
<script type="text/javascript">
TheatreHeading="Theatre Case Recovery Details"
CombinedCMBS="%STANDARD.01.025.113.003.0.1"
InsertTheatreCaseHead()
</script>
<div id=PageBodySection>
<form name=UpdateForm id=UpdateForm method=post action=oprweb06.pbl>
<input type=hidden name=reportno id=reportno value=10>
<input type=hidden name=template id=template value=001>
<input type=hidden name=updatety id=updatety value="U">
<input type=hidden name=casekeys id=casekeys value="%OPRWEB06.10.101">
<input type=hidden name=uniqueky id=uniqueky value='%OPRWEB06.10.110'>
<input type=hidden name=nextpage id=nextpage value="1">
<input type=hidden name=suentime id=suentime value="%OPRWEB06.10.306">
<input type=hidden name=suprlevl id=suprlevl value="%OPRWEB06.10.512">
<input type=hidden name=currdate id=currdate value="%STANDARD.01.013">
<input type=hidden name=opcnvrrd id=opcnvrrd
 value="%STANDARD.01.025.113.017.0.2">
<input type=hidden name=redirect id=redirect>
<input type=hidden name=opcnctin id=opcnctin
 value="%STANDARD.01.025.113.032.0.1">
<input type=hidden name=opcncoso id=opcncoso
 value="%STANDARD.01.025.113.033.0.1">
<input type=hidden name=opcncrrh id=opcncrrh
 value="%STANDARD.01.025.113.034.0.1">
<input type=hidden name=opcnldae id=opcnldae
 value="%STANDARD.01.025.113.035.0.3">
<input type=hidden name=pocrect2 id=pocrect2
 value="%OPRWEB06.10.859">
<input type=hidden name=currdate id=currdate value='%STANDARD.01.013'>
<input type=hidden name=currtime id=currtime>
<input type=hidden name=gnm id=gnm>
<input type=hidden name=opcnurse id=opcnurse
       value="%STANDARD.01.025.113.051.0.1">
<input type=hidden name="opcnsetr" id="opcnsetr"
 value="%STANDARD.01.025.113.057.0.2">

<table border=0 cellpadding=2 cellspacing=0 width="100%" align=center>
<tr><td width=3%>&nbsp;</td>
    <td width=20%>%STANDARD.01.017.oc</td>
    <td width=20%><select name=opard016 id=opard016 title="%STANDARD.01.017.oc" class=SelectBig
         tabindex=1>
        <option></option>
        %OPRWEB06.10.216.2
        </select>
    </td>
    <td width=2%>
     <img src="../images/HelpIcon.gif"
      onmouseover='showPopUp(TimeToICUInfo);'>
    </td>
    <td class=DataLabel width=20%>Time to ICU</td>
    <td class=DataField>
    <input type=text name=opard083 id=opard083 size=8 title="Time to ICU"
     value='%OPRWEB06.10.283'
      onblur="setETTime(this);">
    <img src="../images/DateTimeStamp.gif" class=Icon
     onclick="SetCurrentDateTime(null,UpdateForm.opard083);">
    <img src="../images/TimeLookup.gif" border=0 class=Icon
     onclick="TimeLookupFrame(UpdateForm.opard083);">
    </td>
</tr>

<tr><td width=2%>&nbsp;</td>
    <td>%STANDARD.01.017.od</td>
    <td><select name=opard017 id=opard017 title="%STANDARD.01.017.od" class=SelectBig
         tabindex=2>
        <option></option>
        %OPRWEB06.10.217.2
        </select>
    </td>
    <td width=2%>
    <td>Clinical Review Date</td>
    <td><input type=text name=opard030 id=opard030 size=12 value="%OPRWEB06.10.230"
     class="Date PastDate" title="Clinical Review Date"
     onblur="checkReviewTime(UpdateForm.opard030,UpdateForm.opard031);">
    <img src="../images/DateLookup.gif" class=Icon date=UpdateForm.opard030>
    Time
    <input type=text name=opard031 id=opard031 size=6 value="%OPRWEB06.10.231"
     onblur="checkReviewTime(UpdateForm.opard030,this);"
     title="Clinical Review Time">
    <img src="../images/DateTimeStamp.gif" class=Icon date=UpdateForm.opard030
     time=UpdateForm.opard031>
    <img src="../images/TimeLookup.gif" class=Icon time=UpdateForm.opard031>
    </td>
</tr>

<tr><td width=2%>
     <img src="../images/HelpIcon.gif"
      onmouseover='showPopUp(TimeInRecoveryFrontInfo);'>
    </td>
    <td class=DataLabel width=20%>Time in Recovery - Front </td>
    <td class=DataField width=20%>
    <input type=text name=opard071 id=opard071 size=8 title="Time in Recovery - Front"
     value='%OPRWEB06.10.271'
     onblur="checkTime(this);chkTime(this);
            UpdateForm.opard077.value=this.value;showDelayHEA();"
     tabindex=3>
    <img src="../images/DateTimeStamp.gif" class=Icon
     onclick="SetCurrentDateTime(null,UpdateForm.opard071);">
    <img src="../images/TimeLookup.gif" border=0 class=Icon
     onclick="TimeLookupFrame(UpdateForm.opard071);">
    </td>
    <td width=2%></td>
    <td class=DataLabel width=20%>Recovery Nurse 1 Front</td>
    <td><input type=text name=opard072 id=opard072 size=6 value="%OPRWEB06.10.272.1"
     onblur="validateNurse(UpdateForm.opard072,UpdateForm.name_opard072);"
     tabindex=4>
    <input type=text readonly name=name_opard072 id=name_opard072 class=Readonly size=30
     value="%OPRWEB06.10.272.0" notab>
    <img src="../images/SearchIcon.gif" class=Icon notab
     onclick="SearchOTNurse(UpdateForm.opard072,UpdateForm.name_opard072);">
    </td>
</tr>

<tr><td width=2%>&nbsp;</td>
    <td class=DataLabel>&nbsp;</td>
    <td class=DataField>&nbsp;</td>
    <td width=2%>&nbsp;</td>
    <td class=DataLabel>Recovery Nurse 2 Front</td>
    <td><input type=text name=opard073 id=opard073 size=6 value="%OPRWEB06.10.273.1"
     onblur="validateNurse(UpdateForm.opard073,UpdateForm.name_opard073);">
    <input type=text readonly name=name_opard073 id=name_opard073 class=Readonly size=30
     value="%OPRWEB06.10.273.0">
    <img src="../images/SearchIcon.gif" class=Icon
     onclick="SearchOTNurse(UpdateForm.opard073,UpdateForm.name_opard073);">
    </td></tr>
</table>

<div id="DelayReason"></div>

<table border=0 cellpadding=2 cellspacing=0 width="100%" align=center>
<tr><td width=3%>
     <img src="../images/HelpIcon.gif"
      onmouseover='showPopUp(TimeInRecoveryBackInfo);'>
    </td>
    <td class=DataLabel width=20%>Time in Recovery - Back </td>
    <td class=DataField width=20%>
    <input type=text name=opard074 id=opard074 size=8 title="Time in Recovery - Back"
     value='%OPRWEB06.10.274'
     onblur="checkTime(this);chkTime(this);ChkFront();" tabindex=6>
    <img src="../images/DateTimeStamp.gif" class=Icon
     onclick="SetCurrentDateTime(null,UpdateForm.opard074);">
    <img src="../images/TimeLookup.gif" border=0 class=Icon
     onclick="TimeLookupFrame(UpdateForm.opard074);">
    </td>
    <td width=2%>&nbsp;</td>
    <td class=DataLabel width=20%>Recovery Nurse 1 Back</td>
    <td><input type=text name=opard075 id=opard075 size=6 value="%OPRWEB06.10.275.1"
     onblur="validateNurse(UpdateForm.opard075,UpdateForm.name_opard075);" tabindex=7>
    <input type=text readonly name=name_opard075 id=name_opard075 class=Readonly size=30
     value="%OPRWEB06.10.275.0">
    <img src="../images/SearchIcon.gif" class=Icon
     onclick="SearchOTNurse(UpdateForm.opard075,UpdateForm.name_opard075);">
    </td>
</tr>

<tr><td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td class=DataLabel width=20%>Recovery Nurse 2 Back</td>
    <td><input type=text name=opard076 id=opard076 size=6 value="%OPRWEB06.10.276.1"
     onblur="validateNurse(UpdateForm.opard076,UpdateForm.name_opard076);">
    <input type=text readonly name=name_opard076 id=name_opard076 class=Readonly size=30
     value="%OPRWEB06.10.276.0">
    <img src="../images/SearchIcon.gif" class=Icon
     onclick="SearchOTNurse(UpdateForm.opard076,UpdateForm.name_opard076);">
    </td></tr>

<tr><td width=2%>
     <img src="../images/HelpIcon.gif"
      onmouseover='showPopUp(TimeInRecoveryFrontInfo);'>
    </td>
    <td class=DataLabel width=20%>Time in Recovery - Day</td>
    <td class=DataField>
    <input type=text name=opard077 id=opard077 size=8
     title="Time in Recovery - Day"
     value='%OPRWEB06.10.277' onchange="displayCRRHI();"
     onblur="checkTime(this,this.title);chkTime(this);showDelayHEA();"
     tabindex=8>
    <img src="../images/DateTimeStamp.gif" class=Icon
     onclick="SetCurrentDateTime(null,UpdateForm.opard077);">
    <img src="../images/TimeLookup.gif" class=Icon
     onclick="TimeLookupFrame(UpdateForm.opard077);">
      <div id=crrhiDIV></div>
    </td>
    <td width=2%></td>
    <td class=DataLabel width=20%>Recovery Nurse 1 Day</td>
    <td><input type=text name=opard078 id=opard078 size=6 value="%OPRWEB06.10.278.1"
     onblur="validateNurse(UpdateForm.opard078,UpdateForm.name_opard078);"
     tabindex=9>
    <input type=text readonly name=name_opard078 id=name_opard078 class=Readonly size=30
     value="%OPRWEB06.10.278.0">
    <img src="../images/SearchIcon.gif" class=Icon
     onclick="SearchOTNurse(UpdateForm.opard078,UpdateForm.name_opard078);">
    </td></tr>
<tr><td width=2%></td>
    <td class=DataLabel> &nbsp; </td>
    <td class=DataField> &nbsp; </td>
    <td width=2%></td>
    <td class=DataLabel>Recovery Nurse 2 Day</td>
    <td><input type=text name=opard079 id=opard079 size=6 value="%OPRWEB06.10.279.1"
     onblur="validateNurse(UpdateForm.opard079,UpdateForm.name_opard079);">
    <input type=text readonly name=name_opard079 id=name_opard079 class=Readonly size=30
     value="%OPRWEB06.10.279.0">
    <img src="../images/SearchIcon.gif" class=Icon
     onclick="SearchOTNurse(UpdateForm.opard079,UpdateForm.name_opard079);">
    </td></tr>
<tr><td width=2%>
     <img src="../images/HelpIcon.gif"
      onmouseover='showPopUp(ReadyToDepartTimeInfo);'>
    </td>
    <td class=DataLabel>Ready to Depart Time</td>
    <td class=DataField>
    <input type=text name=opard085 id=opard085 size=8 tabindex=10
     title="Ready to Depart Time" value='%OPRWEB06.10.285'
     onblur="checkTime(this,this.title);chkTime(this);ChgRTD();
             checkRecoveryTime(this);"
     onchange="checkReadyToDepartExist();">
    <img src="../images/DateTimeStamp.gif" class=Icon
     onclick="setReadyDepartTime(UpdateForm.opard085);">
    <img src="../images/TimeLookup.gif" border=0 class=Icon
     onclick="TimeLookupFrame(UpdateForm.opard085,checkReadyToDepartExist);">
    </td>
    <td class=DataLabel></td>
    <td class=DataField>
    </td></tr>
<tr>
  <td width=2%>
     <img src="../images/HelpIcon.gif"
      onmouseover='showPopUp(ExitTheatreComplexInfo);'>
    </td>
  <td class=DataLabel>Exit Theatre Complex Time</td>
    <td class=DataField>
    <input type=text name=opard080 id=opard080 size=8
     title="Exit Theatre Complex Time" value='%OPRWEB06.10.280'
     onblur="if (checkTime(this,this.title)) {
            chkTime(this);ChgRTD();ChkReg();
            checkRecoveryTime(this);chkMan2();
            showExitDelayHEA();}" tabindex=11>
    <img src="../images/DateTimeStamp.gif" class=Icon
     onclick="SetCurrentDateTime(null,UpdateForm.opard080);">
    <img src="../images/TimeLookup.gif" class=Icon
     onclick="TimeLookupFrame(UpdateForm.opard080);"> </td>
   <td></td>
   <td class=DataLabel><div id="DelayExitReasonTitleDIV"></div></td>
   <td class=DataField><div id="DelayExitReasonFieldDIV"></div>
  </td>
</tr>

<tr><td width=2%></td>
    <td class=DataLabel></td>
    <td class=DataField></td>
    <td width=2%>
     <img src="../images/HelpIcon.gif"
      onmouseover='showPopUp(TimePatientDiedInfo);'>
    </td>
    <td class=DataLabel>Time Patient Died </td>
    <td class=DataField>
    <input type=text name=opard082 id=opard082 size=8 title="Time Patient Died"
     value='%OPRWEB06.10.282'
     onblur="checkTime(this,this.title);chkTime(this);">
    <img src="../images/TimeLookup.gif" class=Icon
     onclick="TimeLookupFrame(UpdateForm.opard082);">
   </td>
</tr>

<tr><td width=2%></td>
    <td class=DataLabel width=20%>Preadmission and<br> Operation Notes
    <td colspan=4>
    <textarea cols=60 rows=3 name=opcom003 id=opcom003 wrap=hard
     tabindex=13>%OPRWEB06.10.143.003</textarea>
    <img src="../images/LookupIcon.gif" class=Icon
     onclick='LookupPage(null,UpdateForm.opcom003,"Lookup_00300000_000");'>
    </td></tr>

<tr><td class=DataLabel>Prosthesis</td>
    <td class=DataField >
    <input type=text name=opard013 id=opard013 value="%OPRWEB06.10.213" maxlength=40 size=40
    tabindex=14>
   </td>
   </tr>
</table>

<table border=0 cellpadding=2 cellspacing=0 width="100%" align=center >
<tr><td width=44%><div id=Print1></div></td></tr>
<tr>
<td><div id=Print3></div></td>
<td width=21%>Fast Post Recovery</td>
<td>
<input type=hidden name=opsrg072 id=opsrg072 value=" ">
<input type=checkbox name=d_opsrg072 id=d_opsrg072 value="1" tabindex=19>
</td>
</tr>
<tr>
<td><div id=Print2></div></td>
<td>Admit Post Procedure</td>
<td>
<input type=hidden name=opsrg073 id=opsrg073 value=" ">
<input type=checkbox name=d_opsrg073 id=d_opsrg073 value="1" tabindex=20>
</td>
</tr>
<tr>
<td><div id=Print4></div></td>
<td>No Recovery</td>
<td>
<input type=hidden name=opsrg076 id=opsrg076 value=" ">
<input type=checkbox name=d_opsrg076 id=d_opsrg076 value="1" >
</td>
</tr>
</table>

<table border=0 cellpadding=2 cellspacing=0 width="95%" align=center>
<tr><td colspan=4 align=center>
    <input class="button" id="opr06sub" type=button value="Ok"
     onclick="tempDisable(this);formSubmit();">
    <input class="button" type=button value="Cancel" onclick="history.go(-1)">
    </td></tr>
</table>
</form>

<form name=PatientNotes id=PatientNotes method=get>
<textarea wrap=hard cols=60 rows=3 style='display:none;'
name=Prothesis>%OPRWEB06.10.128
</textarea>
<textarea wrap=hard cols=60 rows=3 style='display:none;'
name=AnaeNote>%OPRWEB06.10.143.002</textarea>
<textarea wrap=hard cols=60 rows=3 style='display:none;'
name=WaitNote>%OPRWEB06.10.459</textarea>
</form>

<form name=PatientLinks id=PatientLinks method=get>
<input type=hidden name=reportno id=reportno value=10>
<input type=hidden name=template id=template value=001>
<input type=hidden name=urnumber id=urnumber value='%OPRWEB06.10.003'>
<input type=hidden name=admissno id=admissno value='%OPRWEB06.10.081'>
<input type=hidden name=MenuType id=MenuType value='%OPRWEB06.10.088'>
<input type=hidden name=casekeys id=casekeys value='%OPRWEB06.10.101'>
<input type=hidden name=sesskeys id=sesskeys value='%OPRWEB06.10.102.oprweb01.03.003'>
<input type=hidden name=uniqueky id=uniqueky value='%OPRWEB06.10.110'>
<input type=hidden name=teamnumb id=teamnumb value="1">
<input type=hidden name=recrmurl id=recrmurl
 value='%OPRWEB06.10.102.oprweb01.04.029'>
</form>
</div>

<div name="adverseEventDiv" id="adverseEventDiv"
     style="background-color:white;position:absolute;
            width:600px;height:100px;top:100px;right:25%;
            border:3px outset grey;display:none">
 <span class="DFrameTitleBar">Recovery Event</span>
 <table width="100%" cellpadding="0" cellspacing="0">
 <tr align="center" width="100%">
   <td width="60%">
     <span id="adverseText"><b>Did an adverse event occur?</b></span>
   </td>
   <td>
     <select class="Mandatory" name="adverseDropDown" id="adverseDropDown">
       <option value="No">No</option>
       <option value="Yes">Yes</option>
     </select>
   </td>
 </tr>
 <tr></tr>
 </table>
 <br />
 <table width="100%">
 <tr width="100%" align="center">
   <td><input type="button" value="Ok" class="button"
        onclick="checkAdverseResponse();"/></td>
 </tr>
 </table>
</div>

<div id="ShowPrintReg" style="display:none;">
<table border=0 cellpadding=2 cellspacing=0 width="100%" align=center >
<tr><td class=DataLabel width=25%>Op Registration Form</td>
    <td class=DataField width=17%>
    <input type=checkbox name=printreg id=printreg value="1"
    onclick="SetPrinter(UpdateForm.schdprnt);"></td>
    <td class=DataLabel width=20%>Printer</td>
    <td><select name=schdprnt id=schdprnt title="Printer" class="SelectBig">
        <option></option>
        %STANDARD.01.001.IBAOPR45.01
        </select>
    </td>
    </tr>
</table>
</div>

<span id=crrhiSPAN style="display:none">
<img src="../images/CaseNoteIcon.gif" class=Icon onclick="displayCRRHI();">
</span>

<div id="ShowDelayReason" style="display:none;">
<table border=0 cellpadding=2 cellspacing=0 width="100%" align=center >
<tr><td width=2%>&nbsp;</td>
    <td width=20%>%STANDARD.01.035.Ou</td>
    <td><select name=opard084 id=opard084 title="%STANDARD.01.035.Ou"
         class=Mandatory tabindex=5>
        <option></option>
        %OPRWEB06.10.284.2
        </select>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td></tr>

<tr><td></td>
    <td>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td></tr>
</table>
</div>

<div id="NoDelayReason" style="display:none;">
<input type="hidden" name="opard084" id="opard084" value=" ">
</div>

<span id="DelayExitReasonTitleSPAN" style="display:none;">
%STANDARD.01.035.Tk
</span>

<span id="DelayExitReasonFieldSPAN" style="display:none;">
    <select name=opsrg055 id=opsrg055 title="%STANDARD.01.035.Tk "
     class=Mandatory tabindex=12>
     <option></option>
     %OPRWEB06.10.355.2
    </select>
</span>

<span id="NoDelayExitReasonFieldSPAN" style="display:none;">
<input type="hidden" name="opsrg055" id="opsrg055" value=" ">
</span>

<div id="ShowPrint1" style="display:none;">
<table border=0 cellpadding=2 cellspacing=0 width="100%" align=center >
<tr><td class=DataLabel width=45%>IntraOperative Report</td>
    <td class=DataField>
    <input type=checkbox name=schdprin id=schdprin value="1"
    onclick="SetSelectSizeBig(UpdateForm.schdprnt);
             SetSelectSizeBig(UpdateForm.statncod);
             SetSelectSizeSml(UpdateForm.schdcopy);"
    tabindex=15></td>
</tr>
</table>
</div>

<div id="ShowPrint2" style="display:none;">
<input type=hidden name=setdefpn id=setdefpn value="THETFORM03">
<table border=0 cellpadding=2 cellspacing=0 width="100%" align=center >
<tr>
    <td class=DataLabel width=45%>Printer</td>
    <td><select name=schdprnt id=schdprnt title="Printer" class="SelectBig"
         tabindex=17>
        <option></option>
        %STANDARD.01.001.THETFORM.03
        </select>
    </td>
    </tr>
</table>
</div>

<div id="ShowPrint3" style="display:none;">
<table border=0 cellpadding=2 cellspacing=0 width="100%" align=center >
  <tr><td class=DataLabel width=45%>Stationery Code</td>
  <td><select name=statncod id=statncod colspan=2 class="SelectBig"
       title="Stationery Code" tabindex=16>
         <option></option>
         %STANDARD.01.020. 18
   </select>
  </td></tr>
</table>
</div>

<div id="ShowPrint4" style="display:none;">
<table border=0 cellpadding=2 cellspacing=0 width="100%" align=center >
  <tr><td class=DataLabel width=45%>Number of Copies</td>
  <td><select name=schdcopy id=schdcopy class="SelectSml" title="Number of Copies"
       tabindex=18>
      <option value=" 1">1</option>
      <option value=" 2">2</option>
      <option value=" 3">3</option>
      <option value=" 4">4</option>
      <option value=" 5">5</option>
      <option value=" 6">6</option>
      <option value=" 7">7</option>
      <option value=" 8">8</option>
      <option value=" 9">9</option>
      <option value=" 10">10</option>
    </select>
</td></tr>
</table>
</div>

<script type="text/javascript">
if (document.UpdateForm.suprlevl!=undefined) {
  if (document.ShowActionMenu.sactions!=undefined) {
    if (document.UpdateForm.suprlevl.value=="S") {
      document.ShowActionMenu.sactions.disabled=true;
    }
  }
}

ChgRTD();

if (document.getElementById("opcncrrh").value=="2" ||
    document.getElementById("opcncrrh").value=="1") {
  if (document.getElementById("pocrect2").value=="1") {
    crrhiDIV.innerHTML=crrhiSPAN.innerHTML;
  }
}

if ("%OPRWEB06.10.372" == "Yes") {
  document.UpdateForm.d_opsrg072.checked="true";
}
if ("%OPRWEB06.10.373" == "Yes") {
  document.UpdateForm.d_opsrg073.checked="true";
}
if ("%OPRWEB06.10.376" == "Yes") {
  document.UpdateForm.d_opsrg076.checked="true";
}

function ChkReg() {
  if(isWhitespace(document.UpdateForm.opard080.value)) {
    Print1.innerHTML="";
    Print1.style.display="none";
    Print2.innerHTML="";
    Print2.style.display="none";
    Print3.innerHTML="";
    Print3.style.display="none";
    Print4.innerHTML="";
    Print4.style.display="none";
  } else {
     Print1.style.display="";
     Print1.innerHTML=ShowPrint1.innerHTML;
     Print2.style.display="";
     Print2.innerHTML=ShowPrint2.innerHTML;
     Print3.style.display="";
     Print3.innerHTML=ShowPrint3.innerHTML;
     Print4.style.display="";
     Print4.innerHTML=ShowPrint4.innerHTML;

    DefForm3Code="%STANDARD.01.033.THETFORM.03";
    for(i=0; i<document.UpdateForm.statncod.length; i++){
      if(document.UpdateForm.statncod.options[i].value.replace(/ /g,"")==
         DefForm3Code.replace(/ /g,"")){
        document.UpdateForm.statncod.selectedIndex = i;
      }
    }

    DefForm3Copies="%STANDARD.01.034.THETFORM.03";
    for(i=0; i<document.UpdateForm.schdcopy.length; i++){
      if(document.UpdateForm.schdcopy.options[i].value.replace(/ /g,"")==
         DefForm3Copies.replace(/ /g,"")){
        document.UpdateForm.schdcopy.selectedIndex = i;
      }
    }
  }
}
</script>
