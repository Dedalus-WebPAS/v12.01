<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="hea">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src=../js/patweb89.js>  </script>
<script type="text/javascript">
function submitForm(){
  p=document.UpdateForm;
  if (!validateMandatory(p)){
     return;}

  if (document.getElementById('aliasset').value=="1") {
    ans=confirm("Save as an Alias ?");
    if (ans) {
      document.getElementById('savealia').value="1";
    }
    document.getElementById('aliasset').value="1";
  }

  if (document.getElementById('d_pmpmi006').checked==true){
     document.getElementById('pmpmi006').value="1";
  }
  else{
     document.getElementById('pmpmi006').value='0';
  }

  checkSecondName(p.ptcnusgn,p.ptmas006,p.pmpmi084,p.pmpmi085);

  getUserIDForLoginName(p.logonuid,p.username); //get websecaf.webuseid
  if (isWhitespace(p.username.value)){
     alert('webuseid not found for the logon User Id entered');
     p.logonuid.focus();
     return;
  }
  else{
     SubmitHidden(p);
  }

}

function checkPass(uid,pwd){

  if (uid == null) {
     alert('checkPass() cannot identify the user id field');
     return false;
  }

  // pwd is mandatory so form cannot be submitted without one.
  // if it is blank, ignore for now and let validateMandatory catch it.
  if (isWhitespace(uid.value)) { return true; }
  if (isWhitespace(pwd.value)) { return true; }

  var rsurl = "../cgi-bin/patweb80.pbl";
  var rsqry = "reportno=11" +
              "&secureid=" + encodeURIComponent(uid.value) +
              "&securepw=" + encodeURIComponent(pwd.value);

  var returnValue = RSExecute(rsurl, rsqry, "POST");

  if (returnValue.status == 0) {
    return true;
  }
  else {
    pwd.value="";
    uid.focus();
    return false;
  }
}

</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);initPasswd();
              ChkIdentifyGenderPronoun1(document.UpdateForm);">

<span class=DFrameTitleBar id=DFrameHeading>
<img align="right" alt="Exit" class="MenuIcon"
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
 Change Name Details UR Number %PATWEB89.01.003
</span>

<div id=PageBodySection style="overflow: auto;">
<form name=UpdateForm action="patweb89.pbl" method=post style="margin:0"> 
  <input type=hidden name=reportno value="2">
  <input type=hidden name=template value="040">
  <input type=hidden name=updatety value="4">
  <input type=hidden name=urnumber value="%PATWEB89.01.003">
  <input type=hidden name=admissno value="%PATWEB89.01.081">
  <input type=hidden name=redirect value="%PATWEB89.01.001.patweb98.01.001">
  <input type=hidden name=savealia id=savealia value="0">
  <input type=hidden name=aliasset id=aliasset value="0">
  <input type=hidden name=prevaddr value="0">
  <input type=hidden name=preaddset value="0">
  <input type=hidden name=ptmas045 value="">
  <input type=hidden name=ptmas046 value="">
  <input type=hidden name=pmpmi009 value="%PATWEB89.01.809">
  <input type=hidden name=pmpmi012 value="%PATWEB89.01.812.0">
  <input type=hidden name=pmpmi015 value="%PATWEB89.01.815">
  <input type=hidden name=pmpmi036 value="">
  <input type=hidden name=pmpmi037 value="%PATWEB89.01.837">
  <input type=hidden name=pmpmi052 value="">
  <input type=hidden name=pmpmi053 value="%PATWEB89.01.853">
  <input type=hidden name=pmpmi062 value="%PATWEB89.01.862">
  <input type=hidden name=pmpmi063 value="%PATWEB89.01.863">
  <input type=hidden name=pmpmi064 value="%PATWEB89.01.864">
  <input type=hidden name=pmpmi067 value="%PATWEB89.01.867.0">
  <input type=hidden name=pmpmi068 value="%PATWEB89.01.868.0">
  <input type=hidden name=praflag value="1">
  <input type=hidden name=d_ptmas061 value="%PATWEB89.01.064">
  <input type=hidden name=sjogaudt value="1">
  <input type=hidden name=nextpage value=1>
  <input type=hidden name=ptcnusgn value="%STANDARD.01.025.114.219.0.1">
  <input type=hidden name=username id=username value="">

<table width=100% border=0 cellspacing=0 cellpadding=1> 
<br>
<tr><td colspan=2></td></tr>
<tr><td class=DataLabel>User Id</td>
    <td><input size=12 type=text name=logonuid id=logonuid class=Mandatory
         title="User Id" tabindex=1
         value="%STANDARD.01.043">
         Password&nbsp;
        <input size=12 type=password name=password id=password
         class=Mandatory title="Password" tabindex=2 value=""
         onblur="checkPass(logonuid,password);"></td></tr>

<tr><td class=DataLabel>Surname</td>
    <td><input type=text size=43 name=ptmas005 id=ptmas005
        title="Patient Surname" maxlength=40 class=Mandatory
        value="%PATWEB89.01.009" tabindex=3
        onchange="UpCase(this);checkAlias01();"></td></tr>

<tr><td class=DataLabel>First Given Name</td>
    <td><input type=hidden name=ptmas006 id=ptmas006 title="First Given Name"
         value="%PATWEB89.01.010">
        <input type=text size=43 name=pmpmi084 id=pmpmi084 maxlength=40
         title="First Given Name" class=Mandatory tabindex=3
         value="%PATWEB89.01.899.001"
         onchange="checkAlias01();UpCase(this);"></td></tr>

<tr><td class=DataLabel>Second Given Name</td>
    <td><input type=text name=pmpmi085 id=pmpmi085 size=43 maxlength=40
         title="Second Given Name" tabindex=4
         value="%PATWEB89.01.899.002"
         onchange="checkAlias01();UpCase(this);"></td></tr>

<tr><td class=DataLabel>%STANDARD.01.017.G </td>
    <td><select name=ptmas015 id=ptmas015 tabindex=5
         title="%STANDARD.01.017.G " class=Mandatory 
         onchange="checkAlias01();
                   ChkIdentifyGenderPronoun1(document.UpdateForm);">
         <option></option>
           %PATWEB89.01.086.099.061.9.1.19.3.H 
         </select></td></tr>

<tr><td class=DataLabel>Date of Birth</td>
    <td><input type=text name=ptmas017 id=ptmas017 title="Date of Birth"
         size=12 class="Mandatory PastDate" tabindex=6
         value="%PATWEB89.01.020"
         onchange="checkDate(this,'Date of Birth');checkAlias01();
                   checkAge(this.value,'%PATWEB89.01.092');" >
         &nbsp;Estimated DOB&nbsp;
        <input type=hidden name=pmpmi006 id=pmpmi006>
        <input type=checkbox name=d_pmpmi006 id=d_pmpmi006 title="Est DOB"
         value="1" tabindex=7></td></tr>

<tr><td><div id=IdenGenLbl></div></td>
    <td colspan=3><div id=IdenGenDetail></div></td>
</tr>

<tr><td><div id=IdenProLbl></div></td>
    <td colspan=3><div id=IdenProDetail></div></td>
</tr>

<tr><td colspan=2 align=center><br><br>
        <input type=button value="Update" class="button" id="pat89sub"
         onclick="tempDisable(this);submitForm();" tabindex=47>
        <input type=button class="button"  value="Cancel" tabindex=53
         onclick='PatientLinkTo("patweb89.pbl",1,2,0,0,0);'>
    </td></tr>
</table>
</form>
</div>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name=admissno value="%PATWEB89.01.081">
<input type=hidden name=MenuType value="%PATWEB89.01.088">
</form>

<span id=idenGenLblShow style="display:none">
  <td class=DataLabel>%STANDARD.01.035.Gi</td>
</span>
<span id=idenGenDetailShow style="display:none">
  <td><select name=pmpmi125 id=pmpmi125 class="Mandatory SelectMed" tabindex=16
       title="%STANDARD.01.035.Gi"
       onchange="IdenGenderChange(document.UpdateForm);">
      <option></option>
       %PATWEB89.01.086.099.063.9.2
      </select>
      <span id=IdenGenFreeTxt></span>
  </td>
</span>
<span id=idenGenDetailBlank style="display:none">
  <td><input type=hidden name=pmpmi125 id=pmpmi125 value=""></td>
  <td><input type=hidden name=pmpmi126 id=pmpmi126 value=""></td>
</span>
<span id=idenGenFreeTxtShow style="display:none">
  <input type=text name=pmpmi126 id=pmpmi126 size=80 maxlength=80
   class=Mandatory tabindex=17
   title="Identifying Gender Free Text"
   value="%PATWEB89.01.086.099.065">
</span>
<span id=idenGenFreeTxtBlank style="display:none">
  <td><input type=hidden name=pmpmi126 id=pmpmi126 value=""></td>
</span>

<span id=idenProLblShow style="display:none">
  <td class=DataLabel>%STANDARD.01.035.Gp</td>
</span>
<span id=idenProDetailShow style="display:none">
  <td><select name=pmpmi127 id=pmpmi127 class="Mandatory SelectMed" tabindex=18
       title="%STANDARD.01.035.Gp"
       onchange="IdenPronounChange(document.UpdateForm);">
      <option></option>
       %PATWEB89.01.086.099.064.9.2
      </select>
      <span id=IdenProFreeTxt></span>
  </td>
</span>
<span id=idenProDetailBlank style="display:none">
  <td><input type=hidden name=pmpmi127 id=pmpmi127 value=""></td>
  <td><input type=hidden name=pmpmi128 id=pmpmi128 value=""></td>
</span>
<span id=idenProFreeTxtShow style="display:none">
  <input type=text name=pmpmi128 id=pmpmi128 size=80 maxlength=80
   class=Mandatory tabindex=19
   title="Identifying Pronoun Free Text"
   value="%PATWEB89.01.086.099.066">
</span>
<span id=idenProFreeTxtBlank style="display:none">
  <td><input type=hidden name=pmpmi128 id=pmpmi128 value=""></td>
</span>

<script type="text/javascript">
function initPasswd(){
 document.getElementById('password').value="";
 document.getElementById('password').focus();
}

 EstDOB="%PATWEB89.01.086.006"
 if ( EstDOB == "1") {
   document.getElementById('d_pmpmi006').checked=1;
 }

</script>
