<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="private">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/preadmission.js"></script>
%START.OF.PAGE
<script type="text/javascript">
if("%STANDARD.01.025.119.182.0.1" == "1") {  // Episoft ptcnepis
  var src="../js/eAdmissionReg.js"
  var script = document.createElement("script");
               script.setAttribute("src", src);
               script.setAttribute("type", "text/javascript");
  document.getElementsByTagName("head")[0].appendChild(script);
}
function SubmitAdm() 
{
  MandatoryOk = true;
  p=document.UpdateForm
  validateSuspension(p.urnumber,p.ptmis001,p.datefrom,p.dateto);
  if(p.datefrom.value!='0'){
    if(p.admitbox.value=="1"){
       document.UpdateForm.admitbox.value="0";
       ans=confirm("Warning : Patient has a Suspension record for period \n" +
             "\t" + p.datefrom.value  + " - " + p.dateto.value + "\n" +
             "\tPatient will not be admitted");
       }else{
       ans=confirm("Warning : Patient has a Suspension record for period \n" +
             "\t" + p.datefrom.value  + " - " + p.dateto.value);}
       if (ans!=true) {
          return;
       }
  }
  if (!validateMandatory(document.UpdateForm)) return;
    
  if (!isWhitespace(UpdateForm.ptmis013.value)) 
  {
    if (!validateHFT(20,UpdateForm.ptmis013,UpdateForm.ptmis014,
                       UpdateForm.funddesc,UpdateForm.tabldesc)) 
    {
       ans=confirm("Select another active health fund table? ");
      if (ans == true) return;
    } 
  }

  if (document.UpdateForm.mvmedre1.checked == true) 
     document.UpdateForm.mvmedrec.value="1";
  else
     document.UpdateForm.mvmedrec.value="0";

  if (MandatoryOk) 
  {
    setRedirect();
    UpdateForm.ptmis004.value=UpdateForm.ptmis068.value;
    UpdateForm.ptmis005.value=UpdateForm.ptmis076.value;
    if(document.getElementById("ptcnepis").value == "1") {  // Episoft ptcnepis
      if (!isWhitespace(document.UpdateForm.admisnid.value)) {
        SetCookie("eAdmission",eAdmCookie);
      }
    }
    SubmitHidden(UpdateForm);
  }
}

function valDoctorUnit() 
{
  validateCode(31,UpdateForm.ptmis007,UpdateForm.doctnam2);
  selectOptions("30",UpdateForm.ptmis007,UpdateForm.ptmis024);
  UpdateForm.ptmis024.selectedIndex = 1;
}

function AdmitMandatory() 
{
 if(document.UpdateForm.admitbox.checked == true) 
 {
     document.UpdateForm.admitbox.value="1";
     UpdateForm.ptmis011.className="Mandatory";  //admission type
     UpdateForm.ptmis009.className="Mandatory";  //admission source
     UpdateForm.ptvis041.className="Mandatory";  //criteria for admission
     UpdateForm.ptmis012.className="Mandatory";  //care type
     UpdateForm.ptmis068.className="Mandatory";  //ward
     UpdateForm.ptmis007.className="Mandatory";  //Admitting Doctor
     UpdateForm.doctnam2.className="Mandatory";  //Admitting Doctor description
     UpdateForm.ptmis024.className="Mandatory";  //Unit
     UpdateForm.ptmis027.className="Mandatory";  //Financial Class
     UpdateForm.ptmis010.className="Mandatory";  //CMBS Class
     UpdateForm.ptvis043.className="Mandatory";  //Intended Stay
     UpdateForm.ptvis046.className="Mandatory";  //Admitting Point
  } 
 else 
 {
     document.UpdateForm.admitbox.value="0";
     UpdateForm.ptmis011.className="";  //admission type
     UpdateForm.ptmis009.className="";  //admission source
     UpdateForm.ptvis041.className="";  //criteria for admission
     UpdateForm.ptmis012.className="";  //care type
     UpdateForm.ptmis068.className="";  //ward
     UpdateForm.ptmis007.className="";  //Admitting Doctor
     UpdateForm.doctnam2.className="";  //Admitting Doctor description
     UpdateForm.ptmis024.className="";  //Unit
     UpdateForm.ptmis027.className="";  //Financial Class
     UpdateForm.ptmis010.className="";  //CMBS Class
     UpdateForm.ptvis043.className="";  //Intended Stay
     UpdateForm.ptvis046.className="";  //Admitting Point
  }
  defaultMoveMedRec(document.UpdateForm.admitbox,document.UpdateForm.mvmedre1);
  UpdateForm.ptmis001.focus();

}

function valClaimCode() 
{
  validateCode(41,UpdateForm.urnumber,UpdateForm.claimc);
  for (var i =0 ; i < document.UpdateForm.ptmis027.length; i++) 
  {
    if (document.UpdateForm.claimc.value ==
        trim(document.UpdateForm.ptmis027.options[i].value.substr(0,3)))
    {
          document.UpdateForm.ptmis027.selectedIndex=i;
    }
  }
}
function CheckPastDate(admissionDate){

  today = new Date();
  admDate = new Date(admissionDate);

  if((admDate<today) && (admDate.toDateString()!=today.toDateString())){
      alert("Warning: Admission Date is in the past");
  }
}
function MyHealthRec() {
  document.getElementById('MyhealthRecLabel').innerHTML=DescriptionPCEHR;
  document.UpdateForm.ptvis115.title=DescriptionPCEHR;
}
function PageInit() {
  setTimeout('portalADM()',700);
}
function portalADM() {
  if(document.getElementById("ptcnepis").value=="1") {  // Episoft ptcnepis
    OnlinePreadmission();
    eAdmPreList();
  } 
}
function chkeAdmCanceButton() {
  if(document.getElementById("ptcnepis").value == "1") {  // Episoft ptcnepis
    chkeAdmCancel();
  } else {
    PatientLinkTo('patweb98.pbl',1,1,0);
  }
}
</script>
</head>
<body onload="PageLoad(event);DisplayContract();DisplayTrnSrc();
            document.UpdateForm.ptmis001.focus();valClaimCode();setHF();
            MyHealthRec();ShowActiveProgramID();PageInit();
            displayRegime()">
<div id="PatientHeading"></div>
<script type="text/javascript">
PatientURN="%PATWEB89.03.003";
PatientVIS="%PATWEB89.03.081";
PatientNAM="%PATWEB89.03.002";
PatientSTA="%PATWEB89.03.086.078";
PatientALT="%PATWEB89.03.084";
PatientSEX="%PATWEB89.03.019";
PatientDOB="%PATWEB89.03.020";
PatientAGE="%PATWEB89.03.021";
PatientLOC="%PATWEB89.03.083";
PatientPRI="%PATWEB89.03.086.066.1";
PatientUNT="%PATWEB89.03.066.0";
DoctorCOD="%PATWEB89.03.082.003";
DoctorNAM="%PATWEB89.03.082.002";
PatientAID="%PATWEB89.03.086.090";
PatientIND="%PATWEB89.03.086.091";
PatientCUR="%PATWEB89.03.086.092";
PatientCLC="%PATWEB89.03.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB89.03.086.094";
PatientCDM="%PATWEB89.03.086.095";
PatientVDH="%PATWEB89.03.086.099.015";
InsertPatientHeader()
</script>
<div id="PatientMenu"></div>
<div id="PageBodySection">

<form name="UpdateForm" method="post" action="patweb89.pbl" style="margin:0"/>
<input type="hidden" name="urnumber" value="%PATWEB89.03.003" />
<input type="hidden" name="admissno" value="%PATWEB89.03.081" />
<input type="hidden" name="reportno" value="2" />
<input type="hidden" name="template" value="001" />
<input type="hidden" name="updatety" value="1" />
<input type="hidden" name="redirect" />
<input type="hidden" name="allocate" value="1" />
<input type="hidden" name="chckname" value="0" />
<input type="hidden" name="emradmit" value="0" />
<input type="hidden" name="emradmis" value="0" />
<input type="hidden" name="admitnow" value="1" />
<input type="hidden" name="newbmand" value="0" />
<input type="hidden" name="agebmand" value="0" />
<input type="hidden" name="ptmas046" value="0" />
<input type="hidden" name="mvmedrec" />
<input type="hidden" name="cfinan" value="%PATWEB89.03.932" />
<input type="hidden" name="claimc" />
<input type="hidden" name="exstward" value="%PATWEB89.03.449.1" />
<input type="hidden" name="datefrom" />
<input type="hidden" name="dateto" />
<input type=hidden name=ptcndigp id=ptcndigp
 value="%STANDARD.01.025.124.122.0.1">
<input type=hidden name=ptcndumh id=ptcndumh
 value="%STANDARD.01.025.124.240.0.1">
<input type="hidden" name="ptcnepis" id="ptcnepis"
 value="%STANDARD.01.025.119.182.0.1" />
<input type=hidden name=admisnid id=admisnid value="%PATWEB89.03.999.036">
<input type="hidden" name="showflag" value="0" />
<input type=hidden name=ptpra001 value=""
                                     title="Person Responsible for Account" />
<input type=hidden name=ptpra002 value=""
                                     title="PRFA Address" />
<input type=hidden name=ptpra004 value=""
                                     title="PRFA Suburb" />
<input type=hidden name=state    value=""
                                     title="PRFA State" />
<input type=hidden name=ptpra006 value=""
                                     title="PRFA Post code" />
<input type=hidden name=ptpra007 value=""
                                     title="PRFA Home Phone" />
<input type=hidden name=ptpra008 value=""
                                     title="PRFA Work Phone" />
<input type=hidden name=ptpra009 value=""
                                     title="PRFA Relationship" />
<input type=hidden name=ptpra010 value=""
                                     title="PRFA Mobile" />
<input type="hidden" name="dummy" id="dummy">

<table border="0" colspan="0" width="100%" cellspacing="0" cellpadding="0" >
<tr><td class="HeadingCell" align="center">
    Patient Pre-Admission Details (New) </tr>
<tr>
<tr><td>
    <table width="100%"  border="0" class="TableBody" cellpadding="0" cellspacing="0">
     <tr><td>&nbsp;</td><td>&nbsp;</td>
         <td align="left"><b>Admit Now?</b></td>
        <td align="left">
        <input type="checkbox" name="admitbox" value="0" notab
           onclick="AdmitMandatory();">
        </td></tr>

     <tr><td class="DataLabel">Admission Date </td>
         <td><input type="text" size="12" name="ptmis001" tabindex="01" 
             id=ptmis001
             class="Mandatory Date" title="Admission Date" value="%STANDARD.01.015" 
             onblur="checkDate(this,this.title);CheckPastDate(this.value);"/>
         <img notab src="../images/DateLookup.gif" class=Icon
          onclick="DateLookupFrame(ptmis001);" />     
          Time 
       <input class="Mandatory" type="text" name="ptmis002" size="8" tabindex="02"
          id=ptmis002
          value="%STANDARD.01.016" title="Admission Time" />
        <img notab src="../images/DateTimeStamp.gif" class=Icon
         onclick="SetCurrentDateTime(null,ptmis002);" />
       <img notab src="../images/TimeLookup.gif" class=Icon
        onclick="TimeLookupFrame(ptmis002);">
          </td>

       <td>Admitting Point</td>
         <td><select name="ptvis046" tabindex="21" title="Admitting Point"
                     onchange="defaultWard()">
           <option></option>
            %PATWEB89.03.290.2
         </select></td></tr>

      <tr><td class="DataLabel">%STANDARD.01.017.P </td>
          <td><select name="ptmis011" tabindex="03"  
               title="%STANDARD.01.017.P ">
              <option> </option>
                 %PATWEB89.03.112.2
              </select></td>
       <td class="DataLabel">Ward / Bed </td>
         <td><input type="hidden" name="bedstat1" id=bedstat1 />
           <input type="hidden" name="ptmis004" id=ptmis004 />
           <input type="hidden" name="ptmis005" title="Bed" id=ptmis005  />
           <input type="hidden" name="warddesc" id=warddesc />
           <select name="ptmis068" tabindex="22" title="Ward" id=ptmis068>
            <option> </option>
            %PATWEB89.03.449.2
           </select>
           <input type="text" name="ptmis076" readonly maxlength="3" size="3"
                  id=ptmis076 title="Bed" />
           <img notab src="../images/SearchIcon.gif" class=Icon
           onclick="WardBedSearchFrame(ptmis068,warddesc,ptmis076,bedstat1);" />
          </td></tr>
          <tr><td class="DataLabel">Admission Source</td>
          <td><select name="ptmis009" tabindex="04" 
               onchange="DisplayTrnSrc()" title="Admission Source" />
               <option> </option>
               %PATWEB89.03.110.2
               </select></td>
          <td class="DataLabel">Admitting Doctor</td>
          <td><input type="text" size="8" maxlength="6" name="ptmis007" tabindex="23"
              id=ptmis007 title="Admitting Doctor"
              onblur="UpCase(this);valDoctorUnit();" />
              <input type="text" readonly size="25" notab name="doctnam2"
               id=doctnam2 title="Admitting Doctor" />
              <img notab src="../images/SearchIcon.gif" class=Icon
             onclick="DoctorSearchFrame(ptmis007,doctnam2)" />
          </td></tr>

          <tr><td>
          <div id="TranSrcHeading"></div>
          <td><div id="TranSrc"></div></td>
          <td class="DataLabel">Unit</td>
          <td><select name="ptmis024" tabindex="24"
               title="Unit" />
              <option> </option>
                 %PATWEB89.03.124.2
              </select>    
          </td></tr>

         <tr><td align="left">Prior Days Hospitalisation</td>
         <td align="left">
           <input type="text" name="ptmis031" title="Prior Days Hospitalisation"
            class="Integer" size="5" maxlength="4" tabindex="06"
            onblur="checkInteger(this,this.title);" />
         </td>
          <td class="DataLabel">Diagnosis </td>
          <td><input tabindex="25" type="text" name="ptmis020" size="50" 
               title="Diagnosis" maxlength="80" />
          </td></tr>

     <tr><td class="DataLabel">Mode of Arrival</td>
       <td>
         <select name="ptvis054" tabindex="07" title="Mode of Arrival">
         <option></option> %PATWEB89.03.257.2
         </select>
       </td>
      <td class="DataLabel">Provisional DRG</td>
          <td class="DataLabel">
       <input type="text" name="ptmis066" size="5" maxlength="4" tabindex="26"
        title="Provisional DRG" id=ptmis066
               onblur="validateCode(5,ptmis066,drgdesc1);" />
          <input type="text" notab readonly name="drgdesc1" 
               id=drgdesc1 size="35" value="" />
              <img notab src="../images/SearchIcon.gif" class=Icon
               onclick="DrgSearchFrame(ptmis066,drgdesc1);">
          </td></tr>

      <tr><td class="DataLabel">Admission Criteria</td>
          <td>
          <select name="ptvis041" tabindex="08" title="Criteria for Admission">
          <option> </option>
          %PATWEB89.03.244.2
          </select>
          </td>
         <td class="DataLabel"> Diet Code </td>
        <td>
           <select name="ptmis028" tabindex="27" title="Diet Code">
           <option> </option>
            %PATWEB89.03.127.4
            </select>
         </td></tr>

     <tr><td class="DataLabel">Care Type</td>
          <td><select name="ptmis012" tabindex="09" title="Care Type"
               onchange="displayRegime();"> 
              <option> </option>
               %PATWEB89.03.113.2
              </select></td>
        <td class="DataLabel">Referring GP</td>
        <td>
           <input type=hidden name=genpprac id=genpprac>
           <input type=hidden name=ptvis029 id=ptvis029>
           <input type=hidden name=ptvis030 id=ptvis030>
           <input type=hidden name=genpprov id=genpprov>
           <input type="text" size="10" maxlength="10" tabindex="28"
            name=ptvis028 id=ptvis028 title="Referring GP"
onchange="ReadDoc(18,0,ptvis028,doctnam1,ptvis029,genpprac,ptvis030,genpprov);">
           <input type="text" size=25 notab readonly name=doctnam1 id=doctnam1>
           <img src="../images/SearchIcon.gif" class="Icon"
onclick="GPHCPSearchFrame(ptvis028,doctnam1,genpprov,ptvis029,genpprac,ptvis030,0);">
          <td></tr>

      <tr><td class="DataLabel"> Intended Stay </td>
          <td class="DataLabel">
             <select name="ptvis043" tabindex="10" title="Intended Stay">
             <option> </option>
              %PATWEB89.03.246.2
             </select>
        </td>
      <td class="DataLabel">Inform GP</td>
      <td>
        <select name="ptvis022" tabindex="29" title="Inform GP">
        <option value=" "></option>
        <option value="0">No</option>
        <option value="1">Yes</option>
        </select>
        </td></tr>

       <tr><td class="DataLabel"> Planned Length of Stay</td>
        <td>
        <input type="text" size="5" maxlength="3" name="ptmis030"
         tabindex="11" title="Planned Length of Stay"
         class="Integer" onblur="checkInteger(this,this.value);">
        </td>
       <td class="DataLabel">Religious Visit</td>
       <td>
         <select name="ptmis017" tabindex="30" title="Religious Visit">
          <option value="2">No</option>
          <option value="1">Yes</option>
         </select>
       </td></tr>

       <tr><td class="DataLabel">Discharge Intention</td>
          <td><select name="ptvis076" tabindex="12" title="Discharge Intention"> 
              <option> </option>
               %PATWEB89.03.292.2
              </select></td>
         <td class="DataLabel">Valuables Location</td>
         <td><input type="text" size="40" maxlength="40" name="ptvis020"
              tabindex="31" title="Valuables Location"
              value="" />
         </td>
       </tr>

       <tr><td class="DataLabel">Palliative Care Status</td>
          <td><select name="ptvis077" tabindex="12"
               title="Palliative Care Status"> 
              <option> </option>
               %PATWEB89.03.293.2
              </select></td>
      <td class=DataLabel>Program</td>
      <td><input type=text size=8 maxlength=8 name=ptvis099
         title="Program" tabindex=32 value="%PATWEB89.03.298.021.1"
          onchange="findPrgmdesc();">
          <select name=prgmcode Readonly class=readonly tabindex=166
          onchange="savePrgmcode();">
          <option> </option>
           %PATWEB89.03.298.021.2
          </select></td>
       </tr>

       <tr><td>3B Days of hospitalisation</td>
           <td>
           <input type=text name=ptmis082 title='3B No. days of hospitalisation'
           class=Integer size=5 maxlength=4 tabindex=12
           onblur="checkInteger(this,this.title);">
           </td>
          <td><div id=MyhealthRecLabel
            title="Consent to upload Episode documents/results to MyHR"></div></td>
          <td><select name=ptvis115 tabindex=33>
                 <option value=" "></option>
                 <option value="1">Yes</option>
                 <option value="0">No</option>
                 </select></td>

       </tr>

       <tr><td class="DataLabel"><div id="ProgramIdTitle"></div></td>
           <td class="DataField"><div id="ProgramIdField"></div></td>
           <td class="DataLabel"></td>
           <td class="DataField"></td>
           <td class="DataLabel"></td>
           <td class="DataField"></td>
           </tr>

       <tr align="left">
         <td align="center" colspan="4">
         <hr />
         </td>
       </tr>

     <tr><td class="DataLabel">%STANDARD.01.017.CL</td>
          <td><select name="ptmis027" title="%STANDARD.01.017.CL" 
               tabindex="40" onchange="setHF();" />
                <option> </option>
                 %PATWEB89.03.126.9.1.10.2.X
              </select>
           </td>

      <td class="DataLabel">Casepayment</td>
      <td><select name="ptmis075" tabindex="50" title="Casepayment">
          <option> </option>
           %PATWEB89.03.197.2
          </select>
        </td></tr>


      <tr><td class="DataLabel">%STANDARD.01.017.A </td>
          <td><select name="ptmis010" tabindex="41"  
               title="%STANDARD.01.017.A "
               onchange="DisplayContract();"> 
              <option> </option>
                 %PATWEB89.03.111.2
              </select></td>
.
      <td class="DataLabel">Casemix Code</td>
          <td class="DataLabel">
       <input type="text" name="ptmis073" size="10" maxlength="9" tabindex="51"
        title="Casemix Code" id=ptmis073
               onblur="validateCode(35,ptmis073,cmixdesc1);" />
          <input type="text" notab readonly name="cmixdesc1" size="35" 
           value="" id=cmixdesc1 />
          <img notab src="../images/SearchIcon.gif" class=Icon
           onclick="CmixSearchFrame(ptmis073,cmixdesc1);" />
          </td></tr>

<tr>
    <td class="DataLabel">Health Fund </td>
    <td colspan="2"><input type="text" size="6" maxlength="6" name="ptmis013"
         title="Health Fund" tabindex="42" id=ptmis013
         onchange="validateCode(16,document.UpdateForm.ptmis013,funddesc);
                   checkTableadm();" value="%PATWEB89.03.040.0" />
        <input type="text" size="25" maxlength="30" name="funddesc" 
         id=funddesc class="readonly"
         Readonly notab value="%PATWEB89.03.040.1" />
    Level
        <input name="ptmis014" size="8" maxlength="8"
         tabindex="43" id=ptmis014 value="%PATWEB89.03.041.0"
         title="Level"
         onblur="validateHFT(20,ptmis013,ptmis014,funddesc,tabldesc);" />
        <input type="text" size="15" maxlength="17" name="tabldesc"
         class="readonly" Readonly id=tabldesc notab value="%PATWEB89.03.041.1" />
        <img src=../images/SearchIcon.gif class=Icon
         onclick="HealthFundSearchFrame(ptmis013,funddesc,ptmis014,tabldesc);" />
        <img src="../images/erase.gif" class=Icon
         onclick="clrDoc(ptmis013,ptmis014);clrDoc(funddesc,tabldesc);
                  checkTableadm();" />
    </td>
</tr>

  <tr><td class="DataLabel"> Member Number </td>
      <td><input type="text" size="20" maxlength="19" name="ptmis015" 
           tabindex="44" title="Member Number" value="%PATWEB89.03.042" />
      </td>
        <td align="left">Move Medical Record</td>
        <td align="left">
        <input type="checkbox" name="mvmedre1" value="1" tabindex="54" />
        </td></tr>

<tr><td class=DataLabel>Continuous Billing</td>
    <td><select name=ptmis081 tabindex=44 title="Continuous Billing">
        <option> </option>
         %PATWEB89.03.199.014.2
        </select>
    </td>
</tr>

  <tr><td class="DataLabel">GST Applicable</td>
      <td><select name="ptmis074" tabindex="45" title="GST Applicable">
          <option> </option>
           %PATWEB89.03.189.2
          </select>
        </td>
      <td class="DataLabel"><div id="Contrac2Heading"></div></td>
      <td><div id="ContractId"></div></td>
      </tr>

  <tr><td class="DataLabel"><div id="ContractHeading"></div></td>
      <td><div id="ContractType"></div></td>
      <td class="DataLabel"><div id="Contrac1Heading"></div></td>
      <td><div id="ContractRole"></div></td>
      </tr>

   <tr><td colspan="2">&nbsp;</td>
       <td class=DataLabel><div id=RegimeHead1></div></td>
       <td><div id=RegimeCode1></div></td></tr>

   <tr><td colspan="2">&nbsp;</td>
       <td class=DataLabel><div id=RegimeHead2></div></td>
       <td><div id=RegimeCode2></div></td></tr>

   <tr><td colspan="2">&nbsp;</td>
       <td class=DataLabel><div id=RegimeHead3></div></td>
       <td><div id=RegimeCode3></div></td></tr>

      <tr align="center">
       <td colspan="4" align="center"><br>
       <input tabindex="98" type="button" value="Ok" class="button"
        id="pat89sub"
        onclick="tempDisable(this);checkBedStatus(UpdateForm.ptmis068.value,
                 UpdateForm.ptmis076.value,UpdateForm.ptmis001.value,
                 UpdateForm.ptmis030.value,UpdateForm.ptmis002.value,
                 SubmitAdm,UpdateForm.admitbox)"; />
       <input tabindex="99" type="button" value="Cancel" class="button"
             onclick="chkeAdmCanceButton();" />
    </table>
</td></tr>
</table>
</form>

<form name="linkForm" action="patweb89.pbl" method="post">
<input type="hidden" name="reportno" value="1" />
<input type="hidden" name="template" value="1" />
<input type="hidden" name="urnumber" value="%PATWEB89.03.003" />
<input type="hidden" name="admissno" value="%PATWEB89.03.081" />
</form>

<form name="PatientLinks" method="get">
<input type="hidden" name="reportno" value="1" />
<input type="hidden" name="template" value="004" />
<input type="hidden" name="urnumber" value="%PATWEB89.03.003" />
<input type="hidden" name="admissno" value="%PATWEB89.03.101" />
<input type="hidden" name="MenuType" value="%PATWEB89.03.088" />
</form>
</div>

<span id="WaitingList" style="display:none">
<table width="100%" height="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td class="DataLabel" width="37%">Date of Referral</td>
    <td><input type="text" size="12" name="ptmis058" tabindex="19" 
         id=ptmis058 title="Referral Date">
         <img notab src="../images/DateLookup.gif" class=Icon
          onclick="DateLookupFrame(ptmis058);" /></td></tr>
<tr><td class="DataLabel">Date of 1st Spec Consult</td>
    <td><input type="text" size="12" name="ptmis059" tabindex="20" 
         id=ptmis059 title="Consultation Date" />
         <img notab src="../images/DateLookup.gif" class=Icon
          onclick="DateLookupFrame(ptmis059);" /></td></tr>
</table>
</span>

<span id="BabyAge" style="display:none">
<table width="100%" height="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td class="DataLabel" width="37%">Admission Weight</td>
    <td><input type="text" name="ptmis051" size="5" maxlength="4">grams</td></tr>
</table>
</span>

<span id="NewBorn" style="display:none">
<table width="100%" height="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td class="DataLabel" width="37%">Gestation Period</td>
    <td><input type="text" name="ptmis041" maxlength="3" size="4" tabindex="21"> weeks
    </td></tr>
</table>
</span>

<span id=regimehd1 style="display:none">Regime Code 1</span>

<span id=regimecod1 style="display:none">
  <input type="text" size=15 maxlength=10 name=ptrgm001 tabindex=53
         onblur="validateCode(75,UpdateForm.ptrgm001,UpdateForm.dummy);">
    <img src="../images/SearchIcon.gif" class="Icon" tabindex=-1
         onclick="RegimeSearchFrame(UpdateForm.ptrgm001,UpdateForm.dummy);">
    <img src="../images/erase.gif" class="Icon"
     onclick="clrFields(UpdateForm.ptrgm001,UpdateForm.dummy);">
</span>

<span id=regimehd2 style="display:none">Regime Code 2</span>

<span id=regimecod2 style="display:none">
  <input type="text" size=15 maxlength=10 name=ptrgm002 tabindex=54
         onblur="validateCode(75,UpdateForm.ptrgm002,UpdateForm.dummy);">
    <img src="../images/SearchIcon.gif" class="Icon" tabindex=-1
         onclick="RegimeSearchFrame(UpdateForm.ptrgm002,UpdateForm.dummy);">
    <img src="../images/erase.gif" class="Icon"
     onclick="clrFields(UpdateForm.ptrgm002,UpdateForm.dummy);">
</span>

<span id=regimehd3 style="display:none">Regime Code 3</span>

<span id=regimecod3 style="display:none">
  <input type="text" size=15 maxlength=10 name=ptrgm003 tabindex=55
         onblur="validateCode(75,UpdateForm.ptrgm003,UpdateForm.dummy);">
    <img src="../images/SearchIcon.gif" class="Icon" tabindex=-1
         onclick="RegimeSearchFrame(UpdateForm.ptrgm003,UpdateForm.dummy);">
       <img src="../images/erase.gif"  class="Icon"
        onclick="clrFields(UpdateForm.ptrgm003,UpdateForm.dummy);">
</span>

<span id=regimeblank1 style="display:none">
  <input type=hidden name=ptrgm001 value="">
</span>

<span id=regimeblank2 style="display:none">
  <input type=hidden name=ptrgm002 value="">
</span>

<span id=regimeblank3 style="display:none">
  <input type=hidden name=ptrgm003 value="">
</span>

<script type="text/javascript">
  var MergePsy="%PATWEB89.03.050"
  if (MergePsy=="Yes"){
    document.UpdateForm.ptmas046.value="1"
  }
 if (MergePsy=="No "){
    document.UpdateForm.ptmas046.value="0"
  }
 if ("%PATWEB89.03.903" == "1") {
  alert("Warning: Patient has a Waiting List Procedure");
 }
 if ("%PATWEB89.03.904" == "1") {
  alert("Warning: Patient has a Booking");
 }
 if ("%PATWEB89.03.905" == "1") {
  alert("Warning: Patient is currently admitted");
 }
 if ("%PATWEB89.03.908" == "1") {
  alert("Warning: Patient has a pre-admission record");
 }
 var Day = document.UpdateForm.ptmis001.value.substr(0,2).replace(/ /g,"0");
 var Dat = document.UpdateForm.ptmis001.value.substr(2);
 document.UpdateForm.ptmis001.value= Day + Dat;

var p = document.UpdateForm;
var informGP = "%PATWEB89.03.225.0"; //ptvis022
for(var i=0; i<p.ptvis022.length; i++){
  if(p.ptvis022.options[i].value==informGP){
    p.ptvis022.selectedIndex = i; }}

var PCEHR = trim("%PATWEB89.03.298.037"); //pmsvx125/ptvis115
for(var i=0; i<p.ptvis115.length; i++){
  if(p.ptvis115.options[i].value==PCEHR){
    p.ptvis115.selectedIndex = i; }}

if((p.ptvis022.value!="0")&&(p.ptvis022.value!="1")){
    DefaultInformGP(p.ptvis022,p.ptcndigp.value);}      // inform gp default
if((p.ptvis115.value!="0")&&(p.ptvis115.value!="1")){
    DefaultMYHR(p.ptvis115,p.ptcndumh.value);}      // upload myhr default

//Inform GP - Set mandatory/non-mandatory 
if (p.ptcndigp.value > 2){
    p.ptvis022.className="Mandatory";}
else{
    p.ptvis022.className="";}

//Upload myhr - Set mandatory/non-mandatory 
if (p.ptcndumh.value > 2){
    p.ptvis115.className="Mandatory";}
else{
    p.ptvis115.className="";}
 

</script>
<span id="transferhd" style="display:none">
  <td class="DataLabel">Transfer Source</td>
  </tr>
</span>
<span id="transfersrc" style="display:none">
<td><input type="text" size="7" maxlength="5" name="trnsfsrc" class="Mandatory"
      title="Transfer Source" tabindex="05"
      onchange="validateCode(9,trnsfsrc,trandesc);" />
     <input type="text" size="27" name="trandesc" notab
      class="Readonly" readonly />
     <img src="../images/SearchIcon.gif" class=Icon
      onclick="TransferSourceFrame(trnsfsrc,trandesc);" /></td>
</tr>
</span>
<span id="transferblank" style="display:none">
   <input type="hidden" name="trnsfsrc" />
</span>

<span id="contracthd" style="display:none">
Contract Type
</span>

<span id="contracrhd" style="display:none">
Contract Role
</span>

<span id="contracihd" style="display:none">
 Contract Id
</span>

<span id="contractid" style="display:none">
  <select name="ptasf003" title="Contract Spoke Id" class="Mandatory"
   tabindex="60">
  <option> </option>
   %PATWEB89.03.199.003
  </select>
</span>

<span id="contracttype" style="display:none">
  <input type="text" name="ptasf001" size="2" maxlength="1" class="Mandatory"
   value="%PATWEB89.03.199.001" tabindex="61"
   title="Contract Type"
   onblur="ContType(this);" />
   <img src="../images/SearchIcon.gif" class=Icon onclick="ContTypeAlert();" />
</span>

<span id="contractrole" style="display:none">
  <input type="text" name="ptasf002" size="2" maxlength="1" class="Mandatory"
   value="%PATWEB89.03.199.002" tabindex="62"
   title="Contract Role"
   onblur="ContRole(this);" />
   <img src="../images/SearchIcon.gif" class=Icon onclick="ContRoleAlert();" />
</span>

<span id="blanklabel" style="display:none">&nbsp;</span>

<span id="ShowProgramIdTitle" style="display:none">
 %STANDARD.01.035.PK
</span>

<span id="ShowProgramIdField" style="display:none">
  <select name=ptvis110 title="%STANDARD.01.035.PK" tabindex=13
   id="ptvis110" class="">
    <option> </option>
    %STANDARD.01.007.PK
  </select>
</span>

