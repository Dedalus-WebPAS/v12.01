<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="vicprivate">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/discharge507.js"></script>
<script type="text/javascript" src="../js/patweb9605.js"></script>
<script type="text/javascript">

function PostDischarge() {
  MandatoryOk=validateMandatory(document.pat96pdf)
  if (MandatoryOk) {
    if(document.pat96pdf.status.value=="On-Leave            "){
      if(!confirm("You are about to discharge an on leave patient - "+
                  "Do you wish to continue?")){
      return;
    }
   }
    SubmitHidden(pat96pdf);
 }
}
function checkZeroTime(){
  time=document.pat96pdf.trantime.value.substr(0,5)
  if(time=="00:00"){
     alert("Invalid Time.")
     document.pat96pdf.trantime.focus();
    }
}
function DisplayTrnSrc() {
 var i=document.pat96pdf.dschdest.selectedIndex;
 var ind=document.pat96pdf.dschdest.options[i].value.substring(4,5)
 var ind1=document.pat96pdf.dschdest.options[i].value.substring(3,4)
  if (ind1!="D") {
      document.pat96pdf.dschdety.value="   "
  } else {
      document.pat96pdf.dschdety.value="DIH"
  }
  if (ind!="1") {
    TranSrcDesc.innerHTML=""
    TranSrcField.innerHTML="<input type=hidden name=trnsfsrc value=''>"
    document.pat96pdf.trnsfsrc.value="";
  } else {
    TranSrcDesc.innerHTML="Transfer Destination"
    TranSrcField.innerHTML=transfersrc.innerHTML;
  }
  if (ind1=="Z") {
      document.pat96pdf.dschsref.className="Mandatory"
      document.pat96pdf.dschsref.readOnly= false;
   } else{
     document.pat96pdf.dschsref.className="ReadOnly";
     document.pat96pdf.dschsref.readOnly= true;
   }

}
//
function DisplayAutopsy() {
  // Check indicator for deceased
 var i=document.pat96pdf.dschstat.selectedIndex
 var ind=document.pat96pdf.dschstat.options[i].value.substring(3,4)
  if (ind=="D") {
    document.pat96pdf.dschdind.value="1"
    Autop.innerHTML=autopsyDiv.innerHTML;
  }
  else {
    Autop.innerHTML="";
    document.pat96pdf.dschdind.value="0"}
}
//
function moveMREC() {
  var msg="Do you want to move Medical Record?";
  if (confirm(msg)) {
    document.pat96pdf.movemrec.value=1;
  } else {
    document.pat96pdf.movemrec.value=0;
  }
  document.pat96pdf.submit();
}
function ShowACAS() {
   if(document.pat96pdf.statevic.value!="3"){   // Only show for victoria
     return;
   }
   var pattern="1246789FEJ";
   if(pattern.match(document.pat96pdf.acascare.value.substr(14,1))) {
     if(document.pat96pdf.acasage.value=="1") {
       DisplayACAS1.innerHTML=agedcare1.innerHTML;
       DisplayACAS2.innerHTML=agedcare2.innerHTML;
     }
   } else {
      DisplayACAS1.innerHTML="";
      DisplayACAS2.innerHTML="";
   }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);ShowACAS();">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB96.05.003";
PatientVIS="%PATWEB96.05.081";
PatientNAM="%PATWEB96.05.002";
PatientSTA="%PATWEB96.05.086.078";
PatientALT="%PATWEB96.05.084";
PatientSEX="%PATWEB96.05.019";
PatientDOB="%PATWEB96.05.020";
PatientAGE="%PATWEB96.05.021";
PatientLOC="%PATWEB96.05.083";
PatientPRI="%PATWEB96.05.086.066.1";
PatientUNT="%PATWEB96.05.066.0";
DoctorCOD="%PATWEB96.05.082.003";
DoctorNAM="%PATWEB96.05.082.002";
PatientAID="%PATWEB96.05.086.090";
PatientIND="%PATWEB96.05.086.091";
PatientCUR="%PATWEB96.05.086.092";
PatientCLC="%PATWEB96.05.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB96.05.086.094";
PatientCDM="%PATWEB96.05.086.095";
PatientVDH="%PATWEB96.05.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>
<form  onsubmit='return validateMandatory(this);' name=pat96pdf style=margin:0
 %PATWEB96.05.201.001
<input type=hidden name=reportno value="6"> 
<input type=hidden name=urnumber value="%PATWEB96.05.003">
<input type=hidden name=admissno value="%PATWEB96.05.101">
<input type=hidden name=movemrec value="0">
<input type=hidden name=redirect value="%PATWEB96.05.001.patweb98.01.001">
<input type=hidden name=nextpage value="7">
<input type=hidden name=patsex   value="%PATWEB96.05.019">
<input type=hidden name=patage   value="%PATWEB96.05.021">
<input type=hidden name=formactn value="Discharge">
<input type=hidden name=status value="%PATWEB96.05.104">
<input type=hidden name=dschdety>
<input type=hidden name=acasage  value="%PATWEB96.05.223">
<input type=hidden name=acascare value="%PATWEB96.05.113.3">
<input type=hidden name=statevic value="%PATWEB96.05.224">

<table  border=1 width=100% cellspacing=0 cellpadding=0>
<tr><td class=HeadingCell align=center>
    Patient Discharge Form</td></tr>
</table>

<table  border=0 width=95% cellspacing=0 cellpadding=2 align=center>
<tr><td class=DataLabel width=15%>Discharge Date </td>
    <td width=35%>


    <input type=text size=15 maxlength=12 name=trandate1 title="Discharge Date"
     value="%PATWEB96.05.219"
     onblur="checkDate(this,'Date');" class="Mandatory PastDate" >
    <img notab src="../images/DateTimeStamp.gif" class="Icon"
     alt="Current"
     onclick="SetCurrentDateTime(trandate1,null);">                             
    <img notab src="../images/DateLookup.gif" class="Icon"
     alt="Calendar" date="pat96pdf.trandate1"></td>
    <td class=DataLabel width=15%> Discharge Time       </td>
    <td width=35%><input type=text size=8 name=trantime class="Mandatory" 
     id=trantime
     value="%PATWEB96.05.220" title="Discharge Time" onblur="checkZeroTime();">
     <img src="../images/DateTimeStamp.gif"
      onclick="SetCurrentDateTime(null,trantime);">
      <img src=../images/TimeLookup.gif class=Icon
      onclick="TimeLookupFrame(trantime);"></td></tr>

<tr><td class=DataLabel>Discharge Destination </td>
    <td><select name=dschdest onchange="DisplayTrnSrc()"; 
         title="Discharge Destination" class=Mandatory>
        <option></option>
        %PATWEB96.05.304.2
        </select></td>
    <td class=DataLabel><div id=TranSrcDesc></div></td> 
    <td><div id=TranSrcField></div></td></tr>

<tr><td class=DataLabel>Discharge Consultant</td>
    <td><input type=text name=dschadta size=8 value="%PATWEB96.05.108.003"
        class=Readonly readonly>
        <input type=text name=dschname size=25 value="%PATWEB96.05.108.002"
        class=Readonly readonly></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td></tr>


<tr><td class=DataLabel>Intention to Re-admit</td>
    <td><select name=dschirad>
        <option></option>
        %PATWEB96.05.445.2
        </select></td>
    <td><div id=DisplayACAS1></div></td>
    <td><div id=DisplayACAS2></div></td>
    </tr>
 
<tr><td class=DataLabel>Separation Referral</td>
    <td colspan=3>
    <input type=text name=dschsref size=4 readOnly class=ReadOnly maxlength=4 
    title="Separation Referral"
    onblur="SeparationRef(dschsref,patsex.value,patage);">
    <img src="../images/SearchIcon.gif"
    onClick="SeparationAlert();"></td></tr>

<tr valign=top><td class=DataLabel>Comments</td>
    <td colspan=3><input type=text name=dschcom1 size=50><br>
    <input type=text name=dschcom2 size=50></td></tr>

<tr valign=top><td class=DataLabel>Discharge Diagnosis</td>
    <td colspan=3><input type=text name=dschmbsc size=8>
    <input type=text name=dschdia1 size=28 value="%PATWEB96.05.121" >
    <img src="../images/SearchIcon.gif"
     onclick="Icd10DisSearchFrame(dschmbsc,dschdia1);"><br>
    <input type=text name=dschdia2 size=28</td></tr>

<tr><td colspan=4 align=center>
     <input type=button value="Discharge" class="button" onClick=PostDischarge();>
      <input type=button value="Cancel" class="button" onClick=history.go(-1)>
      </td></tr>
</table>
</form>
<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%PATWEB96.05.003">
<input type=hidden name=admissno value="%PATWEB96.05.081">
<input type=hidden name=MenuType value="%PATWEB96.05.088">
<input type=hidden name=alert001 value="">
</form>

<script type="text/javascript">
   document.pat96pdf.dschsref.readonly= true;
   document.pat96pdf.dschsref.ClassName= "Readonly";
   for (var i =0 ; i < document.pat96pdf.trantime.length; i++) {
     if (document.pat96pdf.trantime.options[i].value=="%PATWEB96.05.103") {
         document.pat96pdf.trantime.selectedIndex=i } };
</script>

<span id=transfersrc style="display:none">
<input type="text" size=7 maxlength=5 name=trnsfsrc class=Mandatory
 title="Transfer Destination"
 onblur="validateTransSrc(trnsfsrc,trandate1,trandesc);">
<input type=text size=25 name=trandesc notab class=Readonly readonly>
<img src="../images/SearchIcon.gif"
 onClick="TransferSourceFrame(trnsfsrc,trandesc)">
</span>

<span id=autopsyDiv style="display:none">
<table>
<tr>
<td> Autopsy <input type=checkbox name=dschautp value=1 checked></td>
</tr></table>
</span>
<span id=agedcare1 style="display:none">
    <td class=DataLabel>ACAS Status</td>
</span>

<span id=agedcare2 style="display:none">
    <td><select name=agecaras title="ACAS Status"
        class=Mandatory>
    <option> </option>
     %PATWEB96.05.222.2
     </select></td>
</span>
