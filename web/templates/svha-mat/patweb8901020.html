<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="svha-mat">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/preadmission.js"></script>
<script type="text/javascript" src="../js/ReportStandard.js"></script>
%START.OF.PAGE
<script type="text/javascript">
if("%STANDARD.01.025.119.182.0.1"=="1") { // Episoft ptcnepis
  var src="../js/eAdmissionReg.js"
} else {
  var src="../js/DefaultOnlineAdm.js";
}
var script = document.createElement("script");
             script.setAttribute("src", src);
             script.setAttribute("type", "text/javascript");
document.getElementsByTagName("head")[0].appendChild(script);
function SubmitAdm() {
  MandatoryOk=true;
  if (!validateMandatory(UpdateForm)) {
     return;
  }

  p = document.UpdateForm
  validateSuspension(p.urnumber,p.ptmis001,p.datefrom,p.dateto);
  if (p.datefrom.value!='0') {
    if (p.admitbox.value=="1") {
      document.UpdateForm.admitbox.value="0";
      ans=confirm("Warning : Patient has a Suspension record for period \n" +
            "\t" + p.datefrom.value  + " - " + p.dateto.value + "\n" +
            "\tPatient will not be admitted");
    }
    else {
      ans=confirm("Warning : Patient has a Suspension record for period \n" +
            "\t" + p.datefrom.value  + " - " + p.dateto.value);
    }
    if (ans!=true) {
      return;
    }
  }

  if (!isWhitespace(UpdateForm.ptmis013.value)) {
    if (!validateHFT(20,UpdateForm.ptmis013,UpdateForm.ptmis014,
                          UpdateForm.funddesc,UpdateForm.tabldesc)) {
      ans=confirm("Select another active health fund table? ");
      if (ans==true) {
        return;
      }
    }
  }
  if (document.UpdateForm.mvmedre1.checked == true) {
    document.UpdateForm.mvmedrec.value="1";
  } else {
    document.UpdateForm.mvmedrec.value="0";
  }
  if (MandatoryOk) {
    setRedirect();
    UpdateForm.ptmis004.value=UpdateForm.ptmis068.value;
    UpdateForm.ptmis005.value=UpdateForm.ptmis076.value;
    SubmitHidden(UpdateForm);
   }
}
function valDoctorUnit() {
  validateCode(31,UpdateForm.ptmis007,UpdateForm.doctnam2);
}
function selectUnit(){
  for (var i =0 ; i < document.UpdateForm.ptmis024.length; i++) {
    if (document.UpdateForm.ptmis024.options[i].value.substr(0,3)==
                 document.UpdateForm.deftunit.value.substr(0,3)) {
      document.UpdateForm.ptmis024.selectedIndex=i } };
}
function AdmitMandatory() {
  if (document.UpdateForm.admitbox.checked == true) {
    document.UpdateForm.admitbox.value="1";
    UpdateForm.ptmis011.className="Mandatory";  //admission type
    UpdateForm.ptmis009.className="Mandatory";  //admission source
    UpdateForm.ptvis041.className="Mandatory";  //criteria for admission
    UpdateForm.ptmis012.className="Mandatory";  //care type
//    UpdateForm.ptmis068.className="Mandatory";  //ward
    UpdateForm.ptmis005.className="mandatory";  //bed
    UpdateForm.ptmis007.className="Mandatory";  //Admitting Doctor
    UpdateForm.doctnam2.className="Mandatory";  //Admitting Doctor description
    UpdateForm.ptmis010.className="Mandatory";  //CMBS Class
    UpdateForm.ptvis043.className="Mandatory";  //Intended Stay
    if (BabyAge.style.display!="none") {
      UpdateForm.ptmis051.className="Mandatory Number";  // Adm Weight
    }
  } else {
    document.UpdateForm.admitbox.value="0";
    UpdateForm.ptmis011.className="";  //admission type
    UpdateForm.ptmis009.className="";  //admission source
    UpdateForm.ptvis041.className="";  //criteria for admission
    UpdateForm.ptmis012.className="";  //care type
//    UpdateForm.ptmis068.className="";  //ward
    UpdateForm.ptmis005.className="";  //bed
    UpdateForm.ptmis007.className="";  //Admitting Doctor
    UpdateForm.doctnam2.className="";  //Admitting Doctor description
    UpdateForm.ptmis027.className="";  //Financial Class
    UpdateForm.ptmis010.className="";  //CMBS Class
    UpdateForm.ptvis043.className="";  //Intended Stay
    if (BabyAge.style.display!="none") {
      UpdateForm.ptmis051.className="Number"; // Adm Weight
    }
  }
}
function DateEdits() {
  if (!checkDate(UpdateForm.ptmis001,"Admission Date")) {
    return;
  }
  ShowAdmissionWeight(UpdateForm);
  AdmitMandatory();

  validateMbsCode(4,
                  document.UpdateForm.ptmis026,
                  document.UpdateForm.mbsdesc1,
                  document.UpdateForm.ptmis001);
}
function OnlinePreadmissionA() {
  if(isWhitespace(document.UpdateForm.admisnid.value)){
    return;
  }
  AdmissionID=GetCookieData("AdmissionID")
  if (!isWhitespace(AdmissionID)&&AdmissionID!="unknown") {
    DefaultOnlineAdm(AdmissionID);
    UpdateProcessedA(AdmissionID)
    var el=document.getElementById("ptmis027");
    var checkInd=el.options[el.selectedIndex].value.substr(3,5);
    if (checkInd.search(/W/g) >= 0) return;
    if (checkInd.search(/M/g) >= 0) return;
    SetCookie("AdmissionID","")
  }
}
function UpdateProcessedA(AdmissionID) {
  UpdateForm.ptmis054.value=AdmissionID; /* User UK GP Fund Holder Field to Store */
  theURL="preadm01.php"+
         "?reportno=3" +
         "&status=3" +
         "&admissionid="+AdmissionID +
         "&urnumber="+PatientURN+
         "&admissno="+PatientVIS;
  xmlHttp = createHttpObject();
  xmlHttp.open("GET", theURL, false);
  xmlHttp.send();
  if (!isWhitespace(xmlHttp.responseText)) {
    alert(xmlHttp.responseText)
  }
}
function portalADM() {
  if(document.getElementById("ptcnepis").value=="1") {  // Episoft ptcnepis
    OnlinePreadmission();
    eAdmPreList();
    OnlineAdm();
  } else {
    OnlinePreadmissionA();
  }
}
function OnlineAdm(){
  var eadmiss=document.getElementById("eadmissn").value;
  if(!isWhitespace(eadmiss)){
    if(isWhitespace(document.getElementById("admisnid").value)) {
       document.getElementById("admisnid").value=eadmiss;
    }
    DefaultOnlineReg(eadmiss);
  }
}
// eAdmission change of health fund
function findHFunddesc() {
  if(document.getElementById("ptcnepis").value!="1") {  // Episoft ptcnepis
    return;
  }
  if (!isWhitespace(document.UpdateForm.admisnid.value)) {
     if (document.UpdateForm.ptmis013.value !=
                  document.UpdateForm.d_ptmis013.value ) {
        if (!isWhitespace(document.UpdateForm.ptmis013.value)) {
            if (!validateCode(16,document.UpdateForm.ptmis013,document.UpdateForm.funddesc)) {
                document.UpdateForm.ptmis013.value="";
                document.UpdateForm.funddesc.value="";
            }
            if (!validateHFT(20,UpdateForm.ptmis013,UpdateForm.ptmis014,UpdateForm.funddesc,UpdateForm.tabldesc)) {
                document.UpdateForm.ptmis014.value="";
                document.UpdateForm.tabldesc.value="";
            }
        } else {
          document.UpdateForm.ptmis013.value="";
          document.UpdateForm.funddesc.value="";
          document.UpdateForm.ptmis014.value="";
          document.UpdateForm.tabldesc.value="";
       }
     }
  }
}
function chkeAdmCanceButton() {
  if(document.getElementById("ptcnepis").value == "1") {  // Episoft ptcnepis
    chkeAdmCancel();
  } else {
    PatientLinkTo('patweb98.pbl',1,1,0);
  }
}
</script>
</head>
<body onload="PageLoad(event);document.UpdateForm.ptmis001.focus();DisplayTrnSrc();
displayRegime();setHF();ShowAdmissionWeight(UpdateForm);AdmitMandatory();
setTimeout('portalADM()',700);setPST();">

<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB89.01.003";
PatientVIS="%PATWEB89.01.081";
PatientNAM="%PATWEB89.01.002";
PatientSTA="%PATWEB89.01.086.078";
PatientALT="%PATWEB89.01.084";
PatientSEX="%PATWEB89.01.019";
PatientDOB="%PATWEB89.01.020";
PatientAGE="%PATWEB89.01.021";
PatientLOC="%PATWEB89.01.083";
PatientPRI="%PATWEB89.01.086.066.1";
PatientUNT="%PATWEB89.01.066.0";
DoctorCOD="%PATWEB89.01.082.003";
DoctorNAM="%PATWEB89.01.082.002";
PatientAID="%PATWEB89.01.086.090";
PatientIND="%PATWEB89.01.086.091";
PatientCUR="%PATWEB89.01.086.092";
PatientCLC="%PATWEB89.01.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB89.01.086.094";
PatientCDM="%PATWEB89.01.086.095";
PatientVDH="%PATWEB89.01.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>

<div id=PageBodySection>
<form name=linkForm id=linkForm action=patweb89.pbl method=POST
 style="margin:0">
 <input type=hidden name=reportno value=1>
 <input type=hidden name=template value=1>
 <input type=hidden name=urnumber value="%PATWEB89.01.003">
 <input type=hidden name=admissno value="%PATWEB89.01.101">
</form>

<form name=UpdateForm id=UpdateForm method=post action=patweb89.pbl
 style="margin:0" autocomplete="off">
 <input type=hidden name=reportno id=reportno value="2">
 <input type=hidden name=template id=template value="20">
 <input type="hidden" name="updatety" id="updatety" value="1">
 <input type="hidden" name="allocate" id="allocate" value="1">
 <input type="hidden" name="redirect" id="redirect"
  value="%PATWEB89.01.001.patweb98.01.001">
 <input type=hidden name=urnumber id=urnumber value="%PATWEB89.01.003">
 <input type=hidden name=admissno id=admissno value="%PATWEB89.01.701">
 <input type=hidden name=ptmis054 id=ptmis054>
 <input type="hidden" name="chckname" id="chckname" value="0">
 <input type="hidden" name="emradmit" id="emradmit" value="0">
 <input type="hidden" name="emradmis" id="emradmis" value="0">
 <input type="hidden" name="newbmand" id="newbmand" value="0">
 <input type="hidden" name="agebmand" id="agebmand" value="0">
 <input type="hidden" name="admitnow" id="admitnow" value="0">
 <input type="hidden" name="mvmedrec" id="mvmedrec">
 <input type="hidden" name="dummy" id="dummy">
 <input type=hidden name=cfinan id=cfinan value="%PATWEB89.01.932">
 <input type=hidden name=preadbok id=preadbok value="1">
 <input type=hidden name=ptmas046 id=ptmas046 value="0">
 <input type=hidden name=exstward id=exstward value="%PATWEB89.01.449.1">
 <input type=hidden name=deftunit id=deftunit value="%PATWEB89.01.124.1">
 <input type=hidden name=ptvis046 id=ptvis046 value="%PATWEB89.01.290.1">
 <input type="hidden" name="ptcnbage" id="ptcnbage" value="%STANDARD.01.025.021.046.1.3">
 <input type="hidden" name="pbdate" id="pbdate" value="%PATWEB89.01.020">
 <input type=hidden name=admisnid id=admisnid value="%PATWEB89.01.999.036" />
 <input type=hidden name=datefrom id=datefrom>
 <input type=hidden name=dateto id=dateto>
<input type="hidden" name=eadmissn id=eadmissn value="%PATWEB89.01.999.058">
<input type="hidden" name="showflag" value="0" />
<input type="hidden" name="ptcnepis" id="ptcnepis"
 value="%STANDARD.01.025.119.182.0.1" />
<input type="hidden" name="d_ptmis013" value="%PATWEB89.01.040.0" />

 <table border=0 width=100% cellspacing=0 cellpadding=0 >
  <tr><td class=HeadingCell colspan=4 align=center>
           Patient Pre-Admission Details(from Booking Details)</td></tr>

  <tr><td class=DataLabel>&nbsp;</td>
      <td>&nbsp;</td>
      <td class=DataLabel><b>Admit Now?</b></td>
      <td><input type="checkbox" name="admitbox" id="admitbox" value="0"
                 onclick="AdmitMandatory();"></td></tr>

  <tr><td class=DataLabel>Admission Date</td>
      <td><input type="text" size="12" tabindex=1 name=ptmis001 id=ptmis001
                 value="%PATWEB89.01.706" class=Mandatory title="Admission Date"
                 onblur="DateEdits();">
            <img src="../images/DateLookup.gif" class=Icon
                 onclick="DateLookupFrame(UpdateForm.ptmis001);">
          Time&nbsp;&nbsp;
          <input type=text size=8 tabindex=2 name=ptmis002 id=ptmis002
           value="%PATWEB89.01.707"
                 class=Mandatory title="Admission Time">
           <img src="../images/DateTimeStamp.gif" class=Icon
            onclick="SetCurrentDateTime(UpdateForm.ptmis001,
                                        UpdateForm.ptmis002);">
           <img src="../images/TimeLookup.gif" class=Icon
            onclick="TimeLookupFrame(UpdateForm.ptmis002);"></td>
      <td class=DataLabel>Ward / Bed</td>
      <td><input type=hidden name=bedstat1 id=bedstat1>
          <input type=hidden name=ptmis004 id=ptmis004>
          <input type=hidden name=ptmis005 id=ptmis005 title="Bed">
          <input type=hidden name=warddesc id=warddesc>
          <select name=ptmis068 id=ptmis068 tabindex=50 title="Ward"
           class="Mandatory">
           <option> </option>
            %PATWEB89.01.449.2
          </select>
          <input type=text name=ptmis076 id=ptmis076 maxlength=3 size=3
           value="%PATWEB89.01.450" title="Bed">
          <img src="../images/SearchIcon.gif" class=Icon
           onclick="WardBedSearchFrame(UpdateForm.ptmis068,
                                       UpdateForm.warddesc,
                                       UpdateForm.ptmis076,
                                       UpdateForm.bedstat1);"></td></tr>

  <tr><td class=DataLabel>Admission Criteria</td>
      <td><select name=ptvis041 id=ptvis041 tabindex=4
           title="Admission Criteria">
           <option> </option>
            %PATWEB89.01.244.2
          </select></td>
      <td class=DataLabel>Attending Doctor</td>
      <td><input type="text" size=8 maxlength=6 name="ptmis007" id="ptmis007"
           tabindex=53
           value="%PATWEB89.01.108.003" title="Attending Doctor"
           onchange="UpCase(this);valDoctorUnit();">
          <input type=text class=Readonly readonly size=25 name=doctnam2
           id=doctnam2 value="%PATWEB89.01.108.002">
          <img src="../images/SearchIcon.gif" class=Icon 
           onclick="DoctorSearchFrame(UpdateForm.ptmis007,
                                      UpdateForm.doctnam2,
                                      valDoctorUnit);">
      </td></tr>

  <tr><td class=DataLabel>%STANDARD.01.017.P </td>
      <td><select name=ptmis011 id=ptmis011 tabindex=7
           title="%STANDARD.01.017.P ">
           <option> </option>
            %PATWEB89.01.112.2
          </select></td>
      <td class=DataLabel>Referring Doctor</td>
      <td><input type="text" size=10 maxlength=10 name="ptvis028" id="ptvis028"
           tabindex=55 value="%PATWEB89.01.231.1" title="Referring Doctor"
           onblur="ValidateHCP(18,
                               0,
                               UpdateForm.ptvis028,
                               UpdateForm.doctnam1);">
          <input type="text" size=25 class=Readonly readonly name="doctnam1"
           id="doctnam1" value="%PATWEB89.01.231.0">
          <img src="../images/SearchIcon.gif" class=Icon 
           onclick="HCPSearchFrame(UpdateForm.ptvis028,
                                   UpdateForm.doctnam1,
                                   0);"></td></tr>

  <tr><td class=DataLabel>Admission Source</td>
      <td><select name=ptmis009 id=ptmis009 tabindex=10 title="Admission Source"
                  onchange="DisplayTrnSrc();">
           <option> </option>
            %PATWEB89.01.110.2
          </select></td>
      <td class=DataLabel>Reason for Admission</td>
      <td><input type=text name="ptmis020" id="ptmis020" size=50 maxlength=80
           title="Reason for Admission"
           tabindex=58 value="%PATWEB89.01.121"></td></tr>

  <tr><td class=DataLabel><div id=TranSrcHeading></div></td>
      <td><div id=TranSrc></div></td>
      <td class=DataLabel>Admission Diagnosis </td>
      <td><input tabindex=61 type=text name="ptmis021" id="ptmis021"
           title="Admission Diagnosis"
           size=50 maxlength=80 value="%PATWEB89.01.122"></td></tr>

  <tr><td class=DataLabel>Intended Length of Stay</td>
      <td><select name=ptvis043 id=ptvis043 tabindex=16
           title="Intended Length of Stay">
           <option> </option>
            %PATWEB89.01.246.2
          </select></td>
      <td class=DataLabel>Provisional MBS</td>
      <td><input type=text name=ptmis026 id=ptmis026 size=5 maxlength=5
           tabindex=64 title="Provisional MBS"
           onblur="validateCode(4,
                                UpdateForm.ptmis026,
                                UpdateForm.mbsdesc1,
                                UpdateForm.ptmis001);"
           value="%PATWEB89.01.125">
          <input type=text class=Readonly readonly name=mbsdesc1 id=mbsdesc1
           size=35 value="%PATWEB89.01.180">
          <img src="../images/SearchIcon.gif" class=Icon
           onclick="MbsSearchFrame(UpdateForm.ptmis026,
                                   UpdateForm.mbsdesc1,
                                   UpdateForm.ptmis001);">
      </td></tr>

  <tr><td class=DataLabel>Admitting Point</td>
      <td><select name="ptvis046" id="ptvis046" tabindex=19 class=Mandatory
                  title='Admitting Point' onchange="defaultWard();">
           <option> </option>
            %PATWEB89.01.290.2
          </select></td>
      <td class=DataLabel>Unplanned Theatre Visit</td>
      <td><select name=ptvis079 id=ptvis079 tabindex=67
           title="Unplanned Theatre Visit">
           <option> </option>
            %PATWEB89.01.295.4
          </select></td></tr>

  <tr><td colspan=2>
          <span id=BabyAge style="display:none">
            <tr><td class=DataLabel>Admission Weight</td>
                <td><input type=text name=ptmis051 id=ptmis051
                     size=5 maxlength=4 value=""
                     tabindex=22 title="Admission Weight" > grams</td></tr>
          </span></td>
      <td class=DataLabel>Planned Length of Stay</td>
      <td><input type=text size=5 maxlength=5 name=ptmis030 id=ptmis030
           tabindex=70
           title='Planned Length of Stay' value="%PATWEB89.01.129"
           class=Integer onblur="checkInteger(this,this.value);"></td></tr>

  <tr><td class=DataLabel>%STANDARD.01.017.KM</td>
      <td><select name=ptvis094 id=ptvis094 tabindex=25
           title="%STANDARD.01.017.KM">
           <option></option>
            %PATWEB89.01.298.016.2
           </select></td>
      <td class=DataLabel>Unplanned Readmission</td>
      <td><select name=ptvis078 id=ptvis078 tabindex=73
           title="Unplanned Readmission" >
           <option> </option>
            %PATWEB89.01.294.4
          </select></td></tr>

  <tr><td class=DataLabel>Discharge Intention on Admission</td>
      <td><select name=ptvis076 id=ptvis076 tabindex=28
                  title="Discharge Intention on Admission">
           <option> </option>
            %PATWEB89.01.292.2
          </select></td>
      <td class=DataLabel>&nbsp;</td>
      <td>&nbsp;</td></tr>

<tr>
       <td class=DataLabel>Preferred Accommodation</td>
       <td><select id=ptvis093 name=ptvis093 tabindex=12 title="Preferred Accommodation">
           <option> </option>
            %PATWEB89.01.298.012.2
           </select></td>

       <td class=DataLabel>Exp. Post Op Ward / Bed</td>
       <td class=DataField>
       <input type=hidden name=popwdesc id=popwdesc>
       <input type=hidden name=popbstat id=popbstat>
       <select name=ptvis048 id=ptvis048 title="Exp. Post Op Ward" class="SelectBig">
       <option></option>
       %PATWEB89.01.251.2
       </select>
       <input type=text name=ptvis049 id=ptvis049 maxlength=3 size=3
          title="Exp.Post Op Bed"
          value="%PATWEB89.01.252.0" tabindex=12>
         <img src="../images/SearchIcon.gif" class=Icon
          onclick="WardBedSearchFrame(UpdateForm.ptvis048,
                                      UpdateForm.popwdesc,
                                      UpdateForm.ptvis049,
                                      UpdateForm.popbstat);">
  </td></tr>

  <tr><td class=DataLabel>Program</td>
      <td><input type=text size=8 maxlength=8 name=ptvis099 id=ptvis099
                 title="Program" tabindex=31 value="%PATWEB89.01.298.021.1"
                 onchange="findPrgmdesc();">
          <select name=prgmcode id=prgmcode Readonly class=readonly
                  onchange="savePrgmcode();">
           <option> </option>
            %PATWEB89.01.298.021.2
          </select></td>
      <td class=DataLabel>&nbsp;</td>
      <td>&nbsp;</td></tr>

  <tr><td class=DataLabel>3B Days of hospitalisation</td>
      <td><input type=text name=ptmis082 id=ptmis082
           title='3B No. days of hospitalisation'
                 class=Integer size=5 maxlength=3 tabindex=33
                 value="%PATWEB89.01.199.015"
                 onblur="checkInteger(this,this.title);"></td>
      <td class=DataLabel>&nbsp;</td>
      <td>&nbsp;</td></tr>

  <tr><td class=DataLabel>Diet Code</td>
      <td><input type=hidden name=ptmis028 id="ptmis028" title="Diet Code"
                 value="%PATWEB89.01.999.052.1">
          <input type=text size=15 id="d_ptmis028"
                 readonly class="Readonly" value="%PATWEB89.01.999.052.0">
          <img src="../images/DietIcon.gif" class=Icon
           onclick="UpdateNutrition(UpdateForm.urnumber,
                                    UpdateForm.admissno);"></td>
      <td class=DataLabel>&nbsp;</td>
      <td>&nbsp;</td></tr>

  <tr><td class=DataLabel>Usual Accommodation - Psych Only</td>
      <td><select name=ptvis095 id=ptvis095 tabindex=36
           title="Usual Accommodation - Psych Only">
           <option></option>
            %PATWEB89.01.298.017.2
          </select></td>
        <td class=DataLabel>Inform GP</td>
            <td>
                <select name=ptvis022 id=ptvis022 tabindex=86 class=Mandatory 
                 title="Inform GP">
                 <option value="0">No</option>
                 <option value="1" selected>Yes</option>
                </select></td>
       </td></tr>

  <tr><td class=DataLabel>%STANDARD.01.017.KD</td>
      <td><select name=ptvis104 id=ptvis104 tabindex=39 class=SelectBig
                  title="%STANDARD.01.017.KD">
           <option></option>
            %PATWEB89.01.298.026.2
          </select></td>
            <td class=DataLabel>Fundraising</td>
            <td>
                <select name=ptvis086 id=ptvis086 tabindex=93 class=Mandatory
                 title="Fundraising">
                 %PATWEB89.01.298.005.2
                </select></td>
       </td></tr>

  <tr><td class=DataLabel>%STANDARD.01.017.LS</td>
      <td><select name=ptvis074 id=ptvis074 tabindex=42 
           title="%STANDARD.01.017.LS">
           <option></option>
            %PATWEB89.01.289.4
          </select></td>
            <td class=DataLabel>Keep In Touch</td>
            <td>
                <select name=ptvis082 id=ptvis082 tabindex=90 class=Mandatory
                 title="Keep In Touch">
                 %PATWEB89.01.298.001.2
                </select></td>
       </td></tr>

  <tr><td align=center colspan="4"><hr></td></tr>

  <tr><td class=DataLabel>%STANDARD.01.017.CL</td>
      <td><select name=ptmis027 id=ptmis027 tabindex=120
           title="%STANDARD.01.017.CL"
           onchange="setHF();">
           <option> </option>
            %PATWEB89.01.126.9.1.10.2.X
          </select></td>
      <td class=DataLabel>Health Fund</td>
          <input type="hidden" name="ptmis013" id="ptmis013"
           value="%PATWEB89.01.040.0"  title="Health Fund">
      <td class=DataLabel colspan=2>
          <input type=text size=35 name="funddesc" id="funddesc" maxlength="30"
                 title="Health Fund" value="%PATWEB89.01.040.1" class=Readonly 
                 readonly>
          Table
          <input type="hidden" name="ptmis014" id="ptmis014" title="Level"
           value="%PATWEB89.01.041.0">
          <input type="text" size=20 maxlength=30 name="tabldesc" id="tabldesc"
                 value="%PATWEB89.01.041.1" class=Readonly readonly>
          <img src="../images/SearchIcon.gif" class=Icon
           onclick="HealthFundSearchFrameNoFocus(UpdateForm.ptmis013,
                                                 UpdateForm.funddesc,
                                                 UpdateForm.ptmis014,
                                                 UpdateForm.tabldesc);">
          <img src="../images/erase.gif" class=Icon
           onclick="clrDoc(UpdateForm.funddesc,UpdateForm.tabldesc);
                    clrDoc(UpdateForm.ptmis013,UpdateForm.ptmis014);">
          </td></tr>

  <tr><td class=DataLabel>%STANDARD.01.017.A </td>
      <td><select name=ptmis010 id=ptmis010 tabindex=123
           title="%STANDARD.01.017.A " onchange="setPST()">
           <option> </option>
            %PATWEB89.01.111.2
          </select></td>
      <td class=DataLabel>Member Number &nbsp;</td>
      <td><input type=text size=20 maxlength=19 title="Member Number"
           tabindex=163 value="%PATWEB89.01.042" name='ptmis015' id='ptmis015'>
      </td></tr>

<tr id="PST" style="display:none">
  <td>%STANDARD.01.035.YE</td>
  <td>
    <select class=Mandatory name="ptvis134" id="ptvis134"
      title="%STANDARD.01.035.YE" tabindex=123>
      <option></option>
        %PATWEB89.01.298.060.2
    </select>
  </td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
</tr>

<!-- Service Unit Type for PUBLIC HOSPITALS ONLY -->
  <tr><td class=DataLabel>Service Category</td>
      <td><select name=ptmis012 id=ptmis012 tabindex=125
           title="Service Category"
           onchange="displayRegime();">
           <option> </option>
            %PATWEB89.01.113.2
          </select></td>
      <td class=DataLabel>Prior Days Hospitalisation</td>
      <td><input type=text name=ptmis031 id=ptmis031
           title='Prior Days Hospitalisation'
           class=Integer size=5 maxlength=3 tabindex=165
           onblur="checkInteger(this,this.title);"></td></tr>

  <tr><td class=DataLabel>Casepayment Y/N</td>
      <td><select name=ptmis075 id=ptmis075 tabindex=128
           title="Casepayment Y/N">
              <option> </option>
              %PATWEB89.01.197.2
            </select></td></tr>
  <tr><td class=DataLabel>GST Applicable</td>
      <td><select name=ptmis074 id=ptmis074 tabindex=168 title="GST Applicable">
           <option> </option>
            %PATWEB89.01.189.2
          </select></td></tr>

  <tr><td class=DataLabel>Casemix Code</td>
      <td><input type=text name=ptmis073 id=ptmis073 size=10 maxlength=9
           tabindex=131 value="" title="Casemix Code"
           onblur="validateCode(35,
                                UpdateForm.ptmis073,
                                UpdateForm.cmixdesc1,
                                UpdateForm.ptmis030);">
          <input type=text class=Readonly readonly name=cmixdesc1 id=cmixdesc1
           size=35 value="">
          <img src="../images/SearchIcon.gif" class=Icon
           onclick="CmixSearchFrameLOS(UpdateForm.ptmis073,
                                       UpdateForm.cmixdesc1,
                                       UpdateForm.ptmis030);"></td>
      <td class=DataLabel>Palliative Care Status</td>
      <td><select name=ptvis077 id=ptvis077 tabindex=171
           title="Palliative Care Status">
           <option> </option>
            %PATWEB89.01.293.5
          </select></td></tr>

  <tr><td class=DataLabel>Continuous Billing</td>
      <td><select name=ptmis081 id=ptmis081 tabindex=133
           title="Continuous Billing">
           <option> </option>
            %PATWEB89.01.199.014.2
          </select></td>
      <td class=DataLabel>Move Medical Record</td>
      <td><input type="checkbox" name="mvmedre1" id="mvmedre1" value="1"
           tabindex=174></td></tr>

  <tr><td class=DataLabel><div id=RegimeHead1></div></td>
      <td><div id=RegimeCode1></div></td>
      <td class=DataLabel><div id=UserNameHead></div></td>
      <td><div id=UserNameCode></div></td></tr>

  <tr><td class=DataLabel><div id=RegimeHead2></div></td>
      <td><div id=RegimeCode2></div></td>
      <td class=DataLabel><div id=PasswordHead></div></td>
      <td><div id=PasswordCode></div></td></tr>

  <tr><td class=DataLabel><div id=RegimeHead3></div></td>
      <td><div id=RegimeCode3></div></td>
      <td class=DataLabel>&nbsp;</td>
      <td>&nbsp;</td></tr>


  <tr><td class=DataLabel valign=top>Admission Comments</td>
      <td colspan=3>
          <textarea wrap=hard name=adcommnt id=adcommnt rows=4 cols=70
           tabindex=145>
          </textarea></td></tr>

  <tr><td colspan=4 align=center><br>
      <input type=button value="Ok" class="button" tabindex=300
       id="pat89sub"
       onclick="tempDisable(this);
                checkBedStatus(UpdateForm.ptmis068.value,
                               UpdateForm.ptmis076.value,
                               UpdateForm.ptmis001.value,
                               UpdateForm.ptmis030.value,
                               SubmitAdm);">
      <input type=button value="Cancel" class="button" tabindex=301
       onclick="chkeAdmCanceButton();"></td></tr>
 </table>
</form>

<form name=PatientLinks id=PatientLinks method=get>
 <input type=hidden name=reportno value=1>
 <input type=hidden name=template value=004>
 <input type=hidden name=urnumber value="%PATWEB89.01.003">
 <input type=hidden name=admissno value="%PATWEB89.01.081">
 <input type=hidden name=MenuType value="%PATWEB89.01.088">
</form>
</div>

<span id=WaitingList style="display:none">
 <table width=100% height=100% border=0 cellspacing=0 cellpadding=0>
  <tr><td class=DataLabel width=36%>Date of Referral</td>
      <td><input type=text size=12 name=ptmis058 id=ptmis058 tabindex=18
                 onblur="checkDate(this,'ReferralDate');">
           <img src="../images/DateLookup.gif" class=Icon
                 onclick="DateLookupFrame(UpdateForm.ptmis058);"></td></tr>
  <tr><td class=DataLabel>Date of 1st Spec Consult</td>
      <td><input type=text size=12 name=ptmis059 id=ptmis059 tabindex=19
                 onblur="checkDate(this,'SpecConDate');">
            <img src="../images/DateLookup.gif" class=Icon
                 onclick="DateLookupFrame(UpdateForm.ptmis059);"></td></tr>
 </table>
</span>

<span id=NewBorn style="display:none">
 <table width=100% height=100% border=0 cellspacing=0 cellpadding=0>
  <tr><td class=DataLabel width=36%>Gestation Period</td>
      <td><input type=text name=ptmis041 id=ptmis041 maxlength=3 size=4
           tabindex=21>
          weeks</td></tr>
 </table>
</span>

<span id=transferhd style="display:none">Transfer Source</span>

<span id=transfersrc style="display:none">
 <input type="text" size=7 maxlength=5 name=trnsfsrc id=trnsfsrc class=Mandatory
        title="Transfer Source" tabindex=13 value="%PATWEB89.01.193.0"
        onchange="validateCode(9,UpdateForm.trnsfsrc,UpdateForm.trandesc);">
 <input type=text size=27 name=trandesc id=trandesc
        class=Readonly readonly value="%PATWEB89.01.193.1">
   <img src="../images/SearchIcon.gif" class=Icon
        onclick="TransferSourceFrame(UpdateForm.trnsfsrc,UpdateForm.trandesc);">
</span>

<span id=transferblank style="display:none">
 <input type=hidden name=trnsfsrc id=trnsfsrc>
</span>

<span id=regimehd1 style="display:none">Regime Code 1</span>

<span id=regimecod1 style="display:none">
 <input type="text" size=15 maxlength=10 name=ptrgm001 id=ptrgm001 tabindex=136
  onblur="validateCode(75,UpdateForm.ptrgm001,UpdateForm.dummy);"
  value="%PATWEB89.01.973. 1">
 <img src="../images/SearchIcon.gif" class=Icon
  onclick="RegimeSearchFrame(UpdateForm.ptrgm001,UpdateForm.dummy);">
 <img src="../images/erase.gif" class=Icon
  onclick="clrFields(UpdateForm.ptrgm001,UpdateForm.dummy);">
</span>

<span id=regimehd2 style="display:none">Regime Code 2</span>

<span id=regimecod2 style="display:none">
 <input type="text" size=15 maxlength=10 name=ptrgm002 id=ptrgm002 tabindex=139
  onblur="validateCode(75,UpdateForm.ptrgm002,UpdateForm.dummy);"
  value="%PATWEB89.01.973. 2">
 <img src="../images/SearchIcon.gif" class=Icon
  onclick="RegimeSearchFrame(UpdateForm.ptrgm002,UpdateForm.dummy);">
 <img src="../images/erase.gif" class=Icon
  onclick="clrFields(UpdateForm.ptrgm002,UpdateForm.dummy);">
</span>

<span id=regimehd3 style="display:none">Regime Code 3</span>

<span id=regimecod3 style="display:none">
 <input type="text" size=15 maxlength=10 name=ptrgm003 id=ptrgm003 tabindex=142
  onblur="validateCode(75,UpdateForm.ptrgm003,UpdateForm.dummy);"
  value="%PATWEB89.01.973. 3">
 <img src="../images/SearchIcon.gif" class=Icon
  onclick="RegimeSearchFrame(ptrgm003,dummy);">
 <img src="../images/erase.gif" class=Icon 
  onclick="clrFields(ptrgm003,dummy);">
</span>

<span id=regimeblank1 style="display:none">
 <input type=hidden name=ptrgm001 id=ptrgm001 value="">
</span>

<span id=regimeblank2 style="display:none">
 <input type=hidden name=ptrgm002 id=ptrgm002 value="">
</span>

<span id=regimeblank3 style="display:none">
 <input type=hidden name=ptrgm003 id=ptrgm003 value="">
</span>

<span id=usernamehd style="display:none">User Name</span>

<span id=usernamcd style="display:none">
 <input size=12 type=text name=username id=username class=Mandatory
  title="UserName" tabindex=177>
</span>

<span id=passwordhd style="display:none">Password</span>

<span id=passwordcd style="display:none">
 <input size=12 type=password name=password id=password
  onblur="checkPass();"
  class=Mandatory title="Password" tabindex=180>
</span>

<script type="text/javascript">
 if ("%PATWEB89.01.905" == "1") {
  alert("Warning: Patient is currently admitted");
 }
 if ("%PATWEB89.01.908" == "1") {
  alert("Warning: Patient has a pre-admission record");
 }
function init() {
  GPValue="%PATWEB89.01.225.1"
  if (GPValue=="No"){
    GPValue="0";
  }
  else if (GPValue=="Yes"){
         GPValue="1"
       }
  document.UpdateForm.ptvis086.selectedIndex=1;
  document.UpdateForm.ptvis082.selectedIndex=1;
  }
  MergePsy="%PATWEB89.01.050"
  if (MergePsy=="Yes"){
    document.UpdateForm.ptmas046.value="1"
  }
  if (MergePsy=="No "){
    document.UpdateForm.ptmas046.value="0"
  }
//

</script>
