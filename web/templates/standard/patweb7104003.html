<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome"    content="standard">
<meta name="CrossBrowser"    content="true">
<meta name="HelpFileName"    content="NoContextSet.html">
<script type="text/javascript">

function linkBedFee(ur,adm,tdate,ttime) {
  adate = UpdateForm.admndate;
  atime = UpdateForm.admntime;
  ddate = UpdateForm.discdate;
  dtime = UpdateForm.disctime;
  alacd = UpdateForm.alacdate;
  alact = UpdateForm.alactime;

  if (!ChkDateTime(adate,atime,tdate,ttime)) {
     alert("Change Date/Time cannot be before Admission Date/Time.");
    return false; }

  if ((!isWhitespace(ddate.value)) && (!isWhitespace(dtime.value))) {
    if (!ChkDateTime(tdate,ttime,ddate,dtime)) {
       alert("Change Date/Time must be before Discharge Date/Time.");
       return false; }
    }

  if ((!isWhitespace(alacd.value)) && (!isWhitespace(alact.value))) {
    if((UpdateForm.admndate.value==tdate.value) && (UpdateForm.admntime.value==ttime.value)) {
      alert("Change Date and Time must not be equal Admission Date and Time");
      return false;
    }

    if (SetDateYYYYMMDD(tdate.value) < SetDateYYYYMMDD(alacd.value)) {
      alert("Change Date must be equal to or after Last Invoiced Accom.Date");
      return false; 
    }
  }

  var serverURL = "../cgi-bin/patweb71.pbl?reportno=9" +
        "&chngdate=" + tdate.value.replace(/ /g,"+") +
        "&chngtime=" + ttime.value.replace(/ /g,"+")

  var returnValue = RSExecute(serverURL);
  if (returnValue.status!=0) {
      return false; }

  if (UpdateForm.casepaym.value=="1") {

    document.ShowCPaymn.urnumber.value=ur;
    document.ShowCPaymn.admissno.value=adm;
    document.ShowCPaymn.chngdate.value=tdate.value;
    document.ShowCPaymn.chngtime.value=ttime.value;
    Left=(document.body.clientWidth-950)/2
    DFrameSubmit(ShowCPaymn,0,Left,950,550);
   }

   else {
    document.ShowBedFee.urnumber.value=ur;
    document.ShowBedFee.admissno.value=adm;
    document.ShowBedFee.chngdate.value=tdate.value;
    document.ShowBedFee.chngtime.value=ttime.value;
    Left=(document.body.clientWidth-950)/2
    DFrameSubmit(ShowBedFee,0,Left,950,500);
    }
}

function CancelBedFee() {
  ReturnPath=GetCookieData('InvoiceReturn');
  if (!isWhitespace(ReturnPath) && ReturnPath!='unknown') {
    document.cookie="InvoiceReturn=;"   // clear cookie
    location.href=ReturnPath;           // return to raise invoice screen
  }
  else {
    PatientLinkTo('patweb96.pbl',3,13,0);
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB71.04.003";
PatientVIS="%PATWEB71.04.081";
PatientNAM="%PATWEB71.04.002";
PatientSTA="%PATWEB71.04.086.078";
PatientALT="%PATWEB71.04.084";
PatientSEX="%PATWEB71.04.019";
PatientDOB="%PATWEB71.04.020";
PatientAGE="%PATWEB71.04.021";
PatientLOC="%PATWEB71.04.083";
PatientPRI="%PATWEB71.04.086.066.1";
PatientUNT="%PATWEB71.04.066.0";
DoctorCOD="%PATWEB71.04.082.003";
DoctorNAM="%PATWEB71.04.082.002";
PatientAID="%PATWEB71.04.086.090";
PatientIND="%PATWEB71.04.086.091";
PatientCUR="%PATWEB71.04.086.092";
PatientCLC="%PATWEB71.04.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB71.04.086.094";
PatientCDM="%PATWEB71.04.086.095";
PatientVDH="%PATWEB71.04.086.099.015";
InsertPatientHeader()
</script>
<div id="PatientMenu"></div>

<form name=UpdateForm action=patweb71.pbl method=post style="margin:0"
 onsubmit='return validateMandatory(this);'>
<input type=hidden name=reportno value="4">
<input type=hidden name=template value="003">
<input type=hidden name=nextpage value="1">
<input type=hidden name=redirect value="%PATWEB71.04.001.patweb71.04.004">
<input type=hidden name=urnumber value="%PATWEB71.04.003">
<input type=hidden name=admissno value="%PATWEB71.04.081">
<input type=hidden name=admndate value="%PATWEB71.04.102">
<input type=hidden name=admntime value="%PATWEB71.04.103">
<input type=hidden name=discdate value="%PATWEB71.04.301">
<input type=hidden name=disctime value="%PATWEB71.04.302">
<input type=hidden name=alacdate value="%PATWEB71.04.435">
<input type=hidden name=alactime value="%PATWEB71.04.439">
<input type=hidden name=bfeetype value="%PATWEB71.04.410">
<input type=hidden name=casepaym value="%PATWEB71.04.434">

<table bgcolor=#CCCCCC cellspacing=0 cellpadding=1 border=0 width=100%>
<tr><td class=DataLabel>Change Date </td>
    <td><input type=text name=chngdate id=chngdate size=12 
         title='Change Date' class='Mandatory PastDate' 
         value="%STANDARD.01.015">
        <img src=../images/DateLookup.gif class=Icon
        onclick="DateLookupFrame(document.UpdateForm.chngdate);"></td>

    <td class=DataLabel>Change Time </td>
    <td><input type=text name=chngtime id=chngtime size=8  
         title='Change Time' class='Mandatory' value="%STANDARD.01.016">
      <img src=../images/DateTimeStamp.gif class=Icon
         onclick="SetCurrentDateTime(null,document.UpdateForm.chngtime);">
     <img src=../images/TimeLookup.gif class=Icon
        onclick="TimeLookupFrame(chngtime);"> </td>

     <td><input type=button value=Ok class="button" id=btnUpdate 
         onclick='tempDisable(this);
                  linkBedFee(document.UpdateForm.urnumber.value,
                             document.UpdateForm.admissno.value,
                             document.UpdateForm.chngdate,
                             document.UpdateForm.chngtime);'>
         <input type=button value=Cancel class="button"
         onclick="CancelBedFee();">
     </td>
    </tr>
</table>
</form>

<table cellspacing=0 cellpadding=1 border=1 width=100%>
<tr><td class=HeadingCell>Date</td>
    <td class=HeadingCell>Time</td>
    <td class=HeadingCell>Ward/Bed</td>
    <td width=12% class=HeadingCell>Movement</td></tr>
%PATWEB71.04.201
</table>

<form name=ShowBedFee action=patweb71.pbl method=get style="margin:0">
<input type=hidden name=reportno value="4">
<input type=hidden name=template value="004">
<input type=hidden name=urnumber value="%PATWEB71.04.003">
<input type=hidden name=admissno value="%PATWEB71.04.081">
<input type=hidden name=chngdate id=chngdate value="%PATWEB71.04.411">
<input type=hidden name=chngtime id=chngtime value="%PATWEB71.04.412">
</form>

<form name=ShowCPaymn action=patweb71.pbl method=get style="margin:0">
<input type=hidden name=reportno value="4">
<input type=hidden name=template value="005">
<input type=hidden name=urnumber value="%PATWEB71.04.003">
<input type=hidden name=admissno value="%PATWEB71.04.081">
<input type=hidden name=chngdate id=chngdate value="%PATWEB71.04.411">
<input type=hidden name=chngtime id=chngtime value="%PATWEB71.04.412">
</form>

<form name="PatientLinks" method="get" style="margin:0">
<input type="hidden" name="reportno" value="4">
<input type="hidden" name="template" value="003">
<input type="hidden" name="urnumber" value="%PATWEB71.04.003">
<input type="hidden" name="admissno" value="%PATWEB71.04.081">
<input type="hidden" name="MenuType" value="%PATWEB71.04.088">
</form>

