<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/EmergencyTableFull.js"></script>
<script type="text/javascript" src="../js/EmergencyRefreshList.js"></script>
<script type="text/javascript" src="../js/emrweb0101035.js"></script>
<script type="text/javascript">
function init() {
  var p = document.ListForm;

  ExpireCookiePath("EMRWEB0101035RT");
  ExpireCookiePath("EMRWEB0101035ES");
  ExpireCookiePath("EMRWEB0101035CL");

  if (p.defltdoc.value == "1") {  // Default Clinician?
    p.clincian.value = p.wbsecdoc.value;
    if (validateCode(3,p.clincian,p.name_clincian)) {
      SetCookie("EMRWEB0101035CL",p.clincian.value);
    }
  }

  if (!isWhitespace(p.defltref.value)) {  // Default Refresh Time?
    var opt = parseInt(p.defltref.value);
    switch (opt) {
      case 1:
        p.ddlRefreshTime.selectedIndex = 0;  // 1 Minute
        break;
      case 2:
        p.ddlRefreshTime.selectedIndex = 1;  // 2 Minutes
        break;
      case 3:
        p.ddlRefreshTime.selectedIndex = 2;  // 3 Minutes
        break;
      case 4:
        p.ddlRefreshTime.selectedIndex = 3;  // 4 Minutes
        break;
      case 5:
        p.ddlRefreshTime.selectedIndex = 4;  // 5 Minutes
        break;
      case 10:
        p.ddlRefreshTime.selectedIndex = 5;  // 10 Minutes
        break;
      case 0:
        p.ddlRefreshTime.selectedIndex = 6;  // Turn Off
        break;
    }

    // set Refresh Time cookie as it gets used by InitPage()
    SetCookie("EMRWEB0101035RT",p.ddlRefreshTime.value);  
  }

  var DataRequestURL = "emrweb01.pbl?reportno=1&template=36&filtdoct=" + 
                       p.clincian.value;

  InitPage(DataRequestURL);  // EmergencyRefreshList.js
  SetReturnPathCookie();     // EmergencyRefreshList.js

  if (p.ptcnhdps.value=="3") {     // Ignore if Victoria
    document.getElementById("btnExpected").disabled=true;
  }
}

function SelectRefreshTime(el) {
  var p = document.ListForm;
  var DataRequestURL = "emrweb01.pbl?reportno=1&template=36&filtdoct=" +
                       p.clincian.value + "&filtsite=" + 
                       p.ddlSite.options[p.ddlSite.selectedIndex].value;

  StartProgressBar();
  SetCookie("EMRWEB0101035RT",el.options[el.selectedIndex].value);

  if (refreshTimeout != null) {
    window.clearTimeout(refreshTimeout);
  }
  refreshTimeout = window.setTimeout(function() {
                     RemPatientRows();GetPatientRows(DataRequestURL);
                     InitList(); }, 100);
}

function RefreshList() {
  var p = document.ListForm;

  var DataRequestURL = "emrweb01.pbl?reportno=1&template=36&filtdoct=" +
                       p.clincian.value + "&filtsite=" + 
                       p.ddlSite.options[p.ddlSite.selectedIndex].value;

  AJAXRefresh(DataRequestURL);
}

function SiteSelect(el) {
  var p = document.ListForm;
  SetCookie("EMRWEB0101035ES",el.options[el.selectedIndex].value);
  SetCookie("EMRWEB0101035CL",p.clincian.value);
  RefreshList();
}

function RefreshClinician() {
  var p = document.ListForm;
  SetCookie("EMRWEB0101035CL",p.clincian.value);
  RefreshList();
}

function ClearClinician() {
  var p = document.ListForm;

  if (!isWhitespace(p.clincian.value)) {
    clrDoc(p.clincian,p.name_clincian);
    ExpireCookiePath("EMRWEB0101035CL");
    RefreshList();
  }
}

function Triage() {
  top.content.location.href = "emrweb02.pbl?reportno=2&template=004";
}

function Expected() {
  location.href = "emrweb02.pbl?reportno=2&template=043";
}

</script>
<style type=text/css>
body {
 overflow:auto;
 overflow-y:auto;
}
.ProgressBar {
 color:black;
 background-image:url(../images/ProgressBar.gif);
 height:10px;
 width:150px;
 text-align:left;
}
.emArrival0, .emArrival1, .emArrival2, .emArrival3, .emArrival4 {
 padding-right:5px;
 height:40px;
 width:100%;
 background-color:white;
 display:inline-block;
}
.emArrival1 {
 color:white;
 background-color:green;
}
.emArrival2 {
 color:white;
 background-color:orange;
}
.emArrival3 {
 color:white;
 background-color:red;
}
.emArrival4 {
 color:white;
 background-color:purple;
}
.AdmitIcon {
}
.HomeIcon {
}
.triage1, .triage2, .triage3, .triage4, .triage5, .triage0, 
.triage1f, .triage2f, .triage3f, .triage4f, .triage5f, .triage0f {
 color:black;
 font-size:16px;
 line-height:25px;
 height:40px;
 width:100%;
 background-color:purple;
 display:inline-block;
 padding-top:8px;
}
.triage1f, .triage2f, .triage3f, .triage4f, .triage5f, .triage0f {
 font-weight:bold;
}
.triage1 { background: url("../images/new-triage1.gif"); }
.triage2 { background: url("../images/new-triage2.gif"); }
.triage3 { background: url("../images/new-triage3.gif"); }
.triage4 { background: url("../images/new-triage4.gif"); }
.triage5 { background: url("../images/new-triage5.gif");color:black; }
.triage1f { background: url("../images/new-triage1f.gif"); }
.triage2f { background: url("../images/new-triage2f.gif"); }
.triage3f { background: url("../images/new-triage3f.gif"); }
.triage4f { background: url("../images/new-triage4f.gif"); }
.triage5f { background: url("../images/new-triage5f.gif");color:black; }
</style>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);">
<div id=HeadingSection>
<form name=ListForm action=emrweb01.pbl method=get style="margin:0">
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=35>
<input type=hidden name=wbsecdoc value="%STANDARD.01.010">
<input type=hidden name=defltdoc value="%EMRWEB01.01.078">
<input type=hidden name=defltref value="%EMRWEB01.01.080">
<input type=hidden name=wbsecocg value="%STANDARD.01.012.3">
<input type=hidden name=ptcnhdps value="%STANDARD.01.025.080.250.1.1">

<table cellpadding=3 cellspacing=0 bgcolor=#CCCCCC border=0 width=100%>
<tr>
  <td><span id=ProgressBar class=ProgressBar>Loading Page... </span></td>
  <td>Refresh Time</td>
  <td>
    <select name=ddlRefreshTime class=SelectBig title="Select Refresh Time" 
     onchange="SelectRefreshTime(this);">
      <option value=60>1 Minute</option>
      <option value=120>2 Minutes</option>
      <option value=180>3 Minutes</option>
      <option value=240>4 Minutes</option>
      <option value=300>5 Minutes</option>
      <option value=600>10 Minutes</option>
      <option value=999999>Turn Off</option>
    </select>
  </td>
  <td>ED Site</td>
  <td>
    <select name=ddlSite class=SelectBig title="Select ED Site" 
     onchange="SiteSelect(this);">
     <option value="   "> </option>
     %EMRWEB01.01.081 
    </select>
  </td>
  <td class=DataLabel>Clinician
    <input type=text name=clincian title="Clinician" size=8 maxlength=6 value=""
     onchange="RefreshClinician();">
    <input type=text name=name_clincian readonly size=25 maxlength=23
     value="" class=Readonly tabindex=-1>
    <img src="../images/SearchIcon.gif" class="Icon"
     onclick="DoctorSearchFrame(ListForm.clincian,ListForm.name_clincian,
              RefreshClinician);">
    <img src="../images/erase.gif" class="Icon"
     onclick="ClearClinician();">
  </td>
  <td align=right>
    <table border=0 cellpadding=0 cellspacing=0>
    <tr>
      <td>
        <input type=button class=button name=btnTriage value="Triage"
         id="btnTriage" title="Triage" onclick="Triage();">
        <input type=button class=button name=btnExpected value="Expected"
         id="btnExpected" title="Expected" onclick="Expected();">
      </td>
    </tr>
    </table>
  </td>
</tr>
</table>

</form>
</div>

<div id=TableLocation></div>

<span id=WaitBoxDisplay class=WaitBox style="display:none">
<img class=WaitImage src="../images/wait.gif">
<p>Please Wait ...</p>
</span>

<div id=PageLayer class=DimmedLayer style="display:none"></div>

<form name="HiddenFields" style="margin:0">
<input type="hidden" name="alrturno" value="">
<input type="hidden" name="alrtadmn" value="">
<input type="hidden" name="acnestat" value="">
</form>

<form name="ChangeSiteForm" action="websec01.pbl" method=post style="margin:0">
<input type=hidden name=reportno value="5">
<input type=hidden name=updttype value="U">
<input type=hidden name=username value="%STANDARD.01.008">
<input type=hidden name=wbsec011 value="1">
<input type=hidden name=wbsec010>
</form>

<form name="ChangeHospForm" action="websec01.pbl" method=post style="margin:0">
<input type=hidden name=reportno value="5">
<input type=hidden name=updttype value="U">
<input type=hidden name=chnghosp value="1">
<input type=hidden name=username value="%STANDARD.01.008">
<input type=hidden name=wbsec011 value="1">
<input type=hidden name=wbsec010>
<input type=hidden name=wbsec031>
</form>

<form name="ChangeLoginForm" action="websec01.pbl" method=post style="margin:0">
<input type=hidden name=reportno value="1">
<input type=hidden name=updttype value=" ">
</form>

<script type="text/javascript">
function ValidOG() {
  // Check indicator 1 of user's OG (Occupational Group)
  // Valid if "E", otherwise invalid
  var p = document.ListForm;
  
  if (p.ptcnhdps.value=="3") {     // Ignore if Victoria
    return true;
  }

  if (p.wbsecocg.value.substr(3,1) != "E") {
    alert("Invalid " + trim("%STANDARD.01.017.w0") + " !");
    return false;
  }

  return true;
}
</script>
