<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/OutpatientSelect.js"></script>
<script type="text/javascript" src="../js/OutpatientClinicId.js"></script>
<script type="text/javascript">

function ValidatePayee() {
  var serverURL = "../cgi-bin/hicweb01.pbl?reportno=6" +
        "&payeprov=" + SelectPeriod.hcbtc003.value.replace(/ /g,"+") +
        "&valdmpra=" + SelectPeriod.hcbtc004.value.replace(/ /g,"+")

  var returnValue = RSExecute(serverURL);
  if (returnValue.status!=0) {
    SelectPeriod.hcbtc003.value="";
    SelectPeriod.hcbtc003.focus();
    return;
  }
}

function ValidateService() {
  var serverURL = "../cgi-bin/hicweb01.pbl?reportno=7" +
        "&valdmpra=" + SelectPeriod.hcbtc004.value.replace(/ /g,"+") +
        "&servprov=" + SelectPeriod.hcbtc005.value.replace(/ /g,"+") 
  var returnValue = RSExecute(serverURL);

  if (returnValue.status!=0) {
    SelectPeriod.hcbtc005.value="";
    SelectPeriod.hcbtc005.focus();
    return;
  } else {
    ReturnValue=returnValue.return_value.split("|");
    SelectPeriod.hcbtc006.className=""
    SelectPeriod.hcbtc006.readOnly=false;
    SelectPeriod.hcbtc006.value=ReturnValue[0];
  }
}

//------------------------------------------------------------
// Get Select List Options
//------------------------------------------------------------
function selectOptions(OptionNumber,ReturnCode,ReturnSelect) {
  if (isWhitespace(ReturnCode.value)) return;;
  var serverURL   = "../cgi-bin/hicweb01.pbl?reportno=" + OptionNumber +
                    "&valdcode=" + ReturnCode.value.replace(/ /g,"+")

  var returnValue = RSExecute(serverURL);

  if (returnValue.status==0) {
    ReturnSelect.options.length=0
    ReturnSelect.options[ReturnSelect.options.length]=new Option("","");
    ReturnValue=returnValue.return_value.split("|");
    for (var j=0; j < ReturnValue.length; j++) {
       if (!isWhitespace(ReturnValue[j])) {
         SelectValue=ReturnValue[j].split(",");
         ReturnSelect.options[ReturnSelect.options.length]=
          new Option(SelectValue[1],SelectValue[0]); } } }
  else {
    ReturnCode.select();  }
}

function GetPayeeProv() {
  var serverURL = "../cgi-bin/patweb80.pbl?reportno=62" +
        "&valdcode=" + SelectPeriod.hcbtc004.value.replace(/ /g,"+")
  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0) {
    ReturnValue=returnValue.return_value.split("|");
    SelectPeriod.hcbtc003.value=ReturnValue[1];

    selectOptions("5",SelectPeriod.hcbtc004,SelectPeriod.hcbtc006);
//    SelectPeriod.hcbtc006.selectedIndex=1
      if(SelectPeriod.hcbtc004.value!=SelectPeriod.mediprac.value) {
        SelectPeriod.hcbtc005.value="";
        SelectPeriod.hcbtc005.className="Mandatory"
        SelectPeriod.hcbtc006.className="Mandatory"
        SelectPeriod.hcbtc003.className="ReadOnly"
        SelectPeriod.hcbtc003.readOnly=true;
        if (isWhitespace(SelectPeriod.hcbtc003.value)) {
           alert("Warning: Payee Provider is blank for this Medical Practice");
        }
      } else {
        SelectPeriod.hcbtc005.value="";
        SelectPeriod.hcbtc005.className=""
        SelectPeriod.hcbtc006.className=""
        SelectPeriod.hcbtc003.className=""
//        SelectPeriod.hcbtc003.readOnly=false;
//        SelectPeriod.hcbtc003.value="";
      }
  }
}

function GetServiceProv() {
 if (!isWhitespace(SelectPeriod.hcbtc006.value)) {
  var serverURL = "../cgi-bin/patweb80.pbl?reportno=63" +
        "&mediprac=" + SelectPeriod.hcbtc004.value.replace(/ /g,"+") +
        "&valdcode=" + SelectPeriod.hcbtc006.value.replace(/ /g,"+") +
        "&returnfm=1"
  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0) {
    ReturnValue=returnValue.return_value.split("|");
    SelectPeriod.hcbtc005.value=ReturnValue[1];
    if (isWhitespace(SelectPeriod.hcbtc005.value)) {
       alert("Service Provider is blank for this Medical Practice and Doctor");
       SelectPeriod.hcbtc005.value="";
       SelectPeriod.hcbtc005.className=""
       SelectPeriod.hcbtc005.readOnly=false;
       SelectPeriod.hcbtc006.value="";
       return;
    } else {
      SelectPeriod.hcbtc005.className="ReadOnly"
      SelectPeriod.hcbtc005.readOnly=true;
    }
  }
 }
 else {
   SelectPeriod.hcbtc005.value=""; }
}

function Referral(urno,refno,dp,admis,clmno) {
    linkUrl="hicweb01.pbl?reportno=3&template=001" +
            "&urnumber=" + urno.replace(/ /g,"+") +
            "&admissno=" + admis.replace(/ /g,"+") +
            "&deptcode=" + dp.replace(/ /g,"+") +
            "&refrnumb=" + refno.replace(/ /g,"+") +
            "&clmnnumb=" + clmno.replace(/ /g,"+");
  Left=(document.body.clientWidth-900)/2
  DFrameLink(linkUrl,0,Left,900,550)
}

function ChangeHeader() {

  document.SelectPeriod.redirect.value="hicweb01.pbl?reportno=01&template=003" +
               "&batchkey=" + SelectPeriod.batchkey.value.replace(/ /g,"+") +
               "&srchbtch=" + SelectPeriod.srchbtch.value.replace(/ /g,"+");
  document.SelectPeriod.nextpage.value= "1";
  document.SelectPeriod.updatety.value='H';
  document.SelectPeriod.submit();
}

</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);">
<form name=SelectPeriod action=hicweb01.pbl method=get >
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=15>
<input type=hidden name=updatety value="">
<input type=hidden name=nextpage value="">
<input type=hidden name=mediprac value="%HICWEB01.01.106">
<input type=hidden name=batchkey value="%HICWEB01.01.313">
<input type=hidden name=btchnumb value="%HICWEB01.01.205">
<input type=hidden name=srchprov value="%HICWEB01.01.208">
<input type=hidden name=srchclty value="%HICWEB01.01.201">
<input type=hidden name=srchclid value="%HICWEB01.01.202.1">
<input type=hidden name=srchbtch value="%HICWEB01.01.209">
<input type=hidden name=redirect value="hicweb01.pbl?reportno=1&template=015">

<table cellspacing=0 cellpadding=5 bgcolor=#CCCCCC border=0 width=100%>
<tr><td width=10% class=DataLabel>Batch Number</td>
  <td width=10% class=Datafield>%HICWEB01.01.102</td>

  <td width=10%>Payee Provider #</td>
  <td width=25% class=Datafield>&nbsp;%HICWEB01.01.104</td>

  <td width=10%>Clinic Type</td>
  <td width=25% class=Datafield>&nbsp;%HICWEB01.01.115</td>
  </tr>

<tr><td>&nbsp;</td>
  <td class=Datafield>&nbsp;</td>

  <td>Service Provider #</td>
  <td class=Datafield>&nbsp;%HICWEB01.01.105.0
            (%HICWEB01.01.105.1)</td>
<!--
  <td>Clinic Id</td>
  <td class=Datafield>&nbsp;HICWEB01.01.114.0</td>
 -->
</tr>
</table>

<table cellspacing=0 cellpadding=1 border=0 width=100%>
<tr><td class=DataLabel>New Payee Provider #</td>
  <td class=DataField>
  <input type=text name=hcbtc003 size=10 maxlength=10 value="%HICWEB01.01.231"
      class=SelectBig title="Payee Provider Number"
      onchange="ValidatePayee();">
  </td>
  <td class=DataLabel>Medical Practice</td>
  <td class=DataField>
  <select name=hcbtc004 title="Medical Practice"
   onchange="GetPayeeProv();">
   %HICWEB01.01.229
  </select></td>

  <td class=DataLabel>New Service Provider #</td>
  <td class=DataField>
  <input type=text name=hcbtc005 size=10 maxlength=10 value=""
      class=SelectBig title="Service Provider Number"
      onchange="ValidateService();">
  </td>

  <td class=DataLabel>New Service Doctor</td>
  <td class=DataField>
  <select name=hcbtc006 title="Service Doctor"
   onchange="GetServiceProv();">
  <option> </option>
   %HICWEB01.01.230
  </select></td>
  </tr>

</table>

<table cellspacing=0 cellpadding=1 border=1 width=100%>
%HICWEB01.01.312.1
</table>

<table cellspacing=0 cellpadding=0 border=0 width=100%>
<tr><td align=center colspan=4>
        <input type=button class="button" value="Update" id="hic01u"
         onclick="tempDisable(this);ChangeHeader();">
        <input type=button class="button" value="Cancel"
         onclick="GoCookiePath('HicList');">
    </td></tr>
</table>
</form>
