<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome"    content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"    content="true">
<link rel="stylesheet" href="../html/postcode.css" type="text/css">
<script type="text/javascript" src="../js/AutoPostCode.js"></script>
<script type="text/javascript" src="../js/IBA_Category_C_.js"></script>
<script type="text/javascript" src="../js/IBA_Category_LA.js"></script>
<script type="text/javascript" src="../js/patweb83.js"></script>
<script type="text/javascript" src="../js/patweb8301.js"></script>
<script type="text/javascript" src="../js/AddressSearch.js"></script>

<script type="text/javascript">
function Update() {
  var str = document.UpdateForm.ptmas006.value;
  document.UpdateForm.ptmas006.value = str.replace(/^\s+|\s+$/g,'');
  str = document.UpdateForm.pmpxi084.value;
  document.UpdateForm.pmpxi084.value = str.replace(/^\s+|\s+$/g,'');

  checkSecondName(document.UpdateForm.ptcnusgn,
                  document.UpdateForm.ptmas006,document.UpdateForm.pmpxi084,
                  document.UpdateForm.pmpxi085);

  CheckVerifiedAddr();
  AdmitBabySubmit();
}

function AdmitBabySubmit() {
  if (document.UpdateForm.ptcnnewc.value=="0") {
    admitNewborn();
    return;
  }

  if (UpdateForm.pmcex009 != undefined) {
    if (((!isWhitespace(UpdateForm.pmcex009.value)) &&
       (isWhitespace(UpdateForm.pmcex011.value))) ||
       ((!isWhitespace(UpdateForm.pmcex011.value)) &&
       (isWhitespace(UpdateForm.pmcex009.value)))) {
      alert("Invalid Suburb/Post Code Combination for Next of Kin");
      return;
    }
    if (document.getElementById('ptcnuadv').value != "1" &&
        !CheckValPostCodeNOKnewc()) {
      return;
    }
  }

  AdmitBaby();
}

function CheckValPostCodeNOKnewc() {
  if ((isWhitespace(UpdateForm.pmcex011.value)) &&
      (isWhitespace(UpdateForm.pmcex009.value)))
     { return true; }
  suburb   = document.UpdateForm.pmcex009;
  state    = document.UpdateForm.pmcex010;
  postcode = document.UpdateForm.pmcex011;
  if (trim(postcode.value)=="8888") {
    if (confirm("Click OK to confirm an Overseas Address"))
    { return true; }
  }
  var fulladdress = trim(postcode.value) + "," +
                    trim(suburb.value) + "," +
                    trim(state.value);
  var tmp1 = fulladdress.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, " ");

  for (var i =0; i<PC.length ; i++) {
    var tmp2 = PC[i].replace(/[-[\]{}()*+?.,\\^$|#\s]/g, " ");
    if  (tmp2.match(tmp1)) {
        SelectPC[SelectPC.length] = PC[i]
        return true;
    }
  }
  alert("Invalid Suburb/Post Code Combination for Next of Kin");
  return false;
}

function valPostCodeN(){
  SetPostVarsN();
  var suburb=trim("%PATWEB83.01.014");
  if(document.UpdateForm.pmcex009.value==suburb){
    return;
    }
    UpCase(UpdateForm.pmcex009);
    if(trim(UpdateForm.pmcex011.value)!="8888"){
      LookupPostCode(UpdateForm.pmcex009.value);
      }
}
function genderName(){
  if (document.UpdateForm.ptcnhdps.value=="3") {
    intersexoption = document.createElement("option");
    intersexoption.text = "Other";
    intersexoption.value = "R";
    document.UpdateForm.ptmas015.add(intersexoption);
  } else {
    intersexoption = document.createElement("option");
    intersexoption.text = "Intersex";
    intersexoption.value = "R";
    document.UpdateForm.ptmas015.add(intersexoption);
  }
}

function displayAdvanceCare() {
//Show advance care plan when hospital state is Victoria and Public
  if (document.UpdateForm.ptcnhdps.value=="3" &&
      document.UpdateForm.chostyp.value=="1")  {
    AdvCareHeading.innerHTML=advcareHdr.innerHTML;
    AdvCareOptions.innerHTML=advcareOptns.innerHTML;
  } else {
    AdvCareHeading.innerHTML="";
    AdvCareOptions.innerHTML=advcareOptnsBlk.innerHTML;
  }
}

function checkTable() {
  if(!isWhitespace(document.UpdateForm.ptmas036.value)) {
    document.UpdateForm.ptmas037.className="Mandatory";
  } else {
    document.UpdateForm.ptmas037.value="";
    document.UpdateForm.ptmas037.className="";
    document.UpdateForm.tabldesc.value="";
  }
}

//
// Functions called from AddressSearch.js
//
function AddressSearch() {
  if (document.getElementById('ptcnuadv').value != "1")
    return;

  InitAddressSearch1();
  if (document.UpdateForm.ptcnnewc.value=="1") {
    InitAddressSearch2();
  }
  else {
    InitAddressSearch3();
  }
}
function InitAddressSearch1() {
  // line1 - 'ptmas008'
  // line2 - 'ptmas009'
  // suburb - 'ptmas010'
  // state - 'ptmas011'
  // postcode - 'ptmas012'

  InitAddressSearchFields('trAddrSrch1','ptmas008','ptmas009','ptmas010','ptmas011','ptmas012');
}
function ShowAddressSearch1() {
  OpenAddressSearch('2',PopulateAddress1,ClearSearchAddress1);
}
function PopulateAddress1(StreetLine, Suburb, State, Postcode) {
  LookupSuburb(Postcode);  // validate Postcode with our Lookup values
  if (SelectPC.length == 0) return;  // no match found

  LookupPostCode(Suburb);  // validate Suburb
  if (SelectPC.length == 0) return;  // no match found

  ToggleFieldReadOnly('ptmas008', true);
  ToggleFieldReadOnly('ptmas009', false);
  ToggleFieldReadOnly('ptmas010', true);
  ToggleFieldReadOnly('ptmas011', true);
  ToggleFieldReadOnly('ptmas012', true);

  SetFieldValue('ptmas008',StreetLine);
  SetFieldValue('ptmas009','');
  SetFieldValue('ptmas010',Suburb);
  SetFieldValue('ptmas011',State);
  SetFieldValue('ptmas012',Postcode);

  document.getElementById('verifiedLabl').style.display = "";
}
function ClearSearchAddress1() {
  ToggleFieldReadOnly('ptmas008', false);
  ToggleFieldReadOnly('ptmas009', false);
  ToggleFieldReadOnly('ptmas010', false);
  ToggleFieldReadOnly('ptmas011', false);
  ToggleFieldReadOnly('ptmas012', false);

  SetFieldValue('ptmas008','');
  SetFieldValue('ptmas009','');
  SetFieldValue('ptmas010','');
  SetFieldValue('ptmas011','');
  SetFieldValue('ptmas012','');

  document.getElementById('verifiedLabl').style.display = "none";
}


//
// Address Search - Next Of Kin (New)
//
function InitAddressSearch2() {
  // line1 - 'pmcex007'
  // line2 - 'pmcex008'
  // suburb - 'pmcex009'
  // state - 'pmcex010'
  // postcode - 'pmcex011'

  if (document.getElementById('ptcnuadv').value == "1") {
    InitAddressSearchFields('trAddrSrch2','pmcex007','pmcex008','pmcex009',
                            'pmcex010','pmcex011');

    if (document.getElementById('oseasnok').checked) {  // Overseas address
      ToggleSearchAddress(false);  // hide 'Search Address' row & enable fields
    }
  }
}
function ShowAddressSearch2() {
  OpenAddressSearch('2',PopulateAddress2,ClearSearchAddress2);
}
function PopulateAddress2(StreetLine, Suburb, State, Postcode) {
  LookupSuburb(Postcode);  // validate Postcode with our Lookup values
  if (SelectPC.length == 0) return;  // no match found

  LookupPostCode(Suburb);  // validate Suburb
  if (SelectPC.length == 0) return;  // no match found

  ToggleFieldReadOnly('pmcex007', true);
  ToggleFieldReadOnly('pmcex008', false);
  ToggleFieldReadOnly('pmcex009', true);
  ToggleFieldReadOnly('pmcex010', true);
  ToggleFieldReadOnly('pmcex011', true);

  SetFieldValue('pmcex007',StreetLine);
  SetFieldValue('pmcex008','');
  SetFieldValue('pmcex009',Suburb);
  SetFieldValue('pmcex010',State);
  SetFieldValue('pmcex011',Postcode);
}
function ClearSearchAddress2() {
  ToggleFieldReadOnly('pmcex007', false);
  ToggleFieldReadOnly('pmcex008', false);
  ToggleFieldReadOnly('pmcex009', false);
  ToggleFieldReadOnly('pmcex010', false);
  ToggleFieldReadOnly('pmcex011', false);

  SetFieldValue('pmcex007','');
  SetFieldValue('pmcex008','');
  SetFieldValue('pmcex009','');
  SetFieldValue('pmcex010','');
  SetFieldValue('pmcex011','');
}


//
// Address Search - Next Of Kin (Old)
//
function InitAddressSearch3() {
  // street - 'ptmas050'
  // suburb - 'ptmas052'
  // state - 'ptmas053'
  // postcode - 'ptmas054'

  InitAddressSearchFields('trAddrSrch3','ptmas050','ptmas052','ptmas053','ptmas054');
}
function ShowAddressSearch3() {
  OpenAddressSearch('2',PopulateAddress3,ClearSearchAddress3);
}
function PopulateAddress3(StreetLine, Suburb, State, Postcode) {
  LookupSuburb(Postcode);  // validate Postcode with our Lookup values
  if (SelectPC.length == 0) return;  // no match found

  LookupPostCode(Suburb);  // validate Suburb
  if (SelectPC.length == 0) return;  // no match found

  ToggleFieldReadOnly('ptmas050', true);
  ToggleFieldReadOnly('ptmas052', true);
  ToggleFieldReadOnly('ptmas053', true);
  ToggleFieldReadOnly('ptmas054', true);

  SetFieldValue('ptmas050',StreetLine);
  SetFieldValue('ptmas052',Suburb);
  SetFieldValue('ptmas053',State);
  SetFieldValue('ptmas054',Postcode);
}
function ClearSearchAddress3() {
  ToggleFieldReadOnly('ptmas050', false);
  ToggleFieldReadOnly('ptmas052', false);
  ToggleFieldReadOnly('ptmas053', false);
  ToggleFieldReadOnly('ptmas054', false);

  SetFieldValue('ptmas050','');
  SetFieldValue('ptmas052','');
  SetFieldValue('ptmas053','');
  SetFieldValue('ptmas054','');
}

function ToggleSearchAddressFields(ReadOnly) {
  ToggleFieldReadOnly('pmcex007', ReadOnly);
  ToggleFieldReadOnly('pmcex008', ReadOnly);
  ToggleFieldReadOnly('pmcex009', ReadOnly);
  ToggleFieldReadOnly('pmcex010', ReadOnly);
  ToggleFieldReadOnly('pmcex011', ReadOnly);
}
function ToggleSearchAddress(Show) {
  ToggleSearchAddressRow('trAddrSrch2', Show);
  ToggleSearchAddressFields(Show);
}
function ToggleOverseas() {
  if (document.getElementById('ptcnuadv').value == "1") {
    if (document.getElementById('oseasnok').checked) {  // Overseas address
      ToggleSearchAddress(false);  // hide 'Search Address' row
    }
    else {
      ToggleSearchAddress(true);  // show 'Search Address' row
      SetFieldValue('pmcex009','');  // Suburb
      SetFieldValue('pmcex010','');  // State
      SetFieldValue('pmcex011','');  // Postcode
    }
  }

  setAddrLine4N(UpdateForm);
  MandatoryNOK();

  if (document.getElementById('ptcnuadv').value == "1") {
    if (!document.getElementById('oseasnok').checked) {  // NOT Overseas address
      SetFieldValue('pmcex010','');  // State
    }
  }

  CheckReadOnly();
}
function CheckReadOnly() {
  if (document.getElementById('ptcnuadv').value != "1") return;

  if (document.getElementById('pmcex007').readOnly) {
    // preserve 'readonly' state of address fields
    ToggleSearchAddressFields(true);  // readonly address fields
  }
}
function ToggleSearchRow() {
  if (document.getElementById('ptcnuadv').value != "1") return;

  if (trim(document.getElementById('pmcex011').value) != "8888") {
    ToggleSearchAddressRow('trAddrSrch2',true);  // show 'Search Address' row
  }
  else {
    ToggleSearchAddressRow('trAddrSrch2',false);  // hide 'Search Address' row
  }
}

function CheckVerifiedAddr() {
  if (document.getElementById('ptcnuadv').value == "1") {
    if (document.getElementById('verifiedLabl').style.display == "") {
      document.getElementById('pmpxi113').value = "1";  // verified address
    }
    else {
      document.getElementById('pmpxi113').value = "0";  // address not verified
    }
  }
  else {
    document.getElementById('pmpxi113').disabled = true;
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);InitPostCodes();
 MultipleBirth(document.UpdateForm.admissno);
 turnOnSecondGivenName(document.UpdateForm.ptcnusgn.value,
                       document.UpdateForm.ptmas006,
                       document.UpdateForm.pmpxi084,
                       document.UpdateForm.pmpxi085);
 validateNewContact();displayAdvanceCare();defaultRelationshipNok();
 checkGenderInd(document.UpdateForm.ptmas015);
 AddressSearch();checkTable();
 ChkIdentifyGenderPronounTitle(document.UpdateForm);
 displayPrefNames(document.UpdateForm.ptcnnmpr.value);">

<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB83.01.003";
PatientVIS="%PATWEB83.01.081";
PatientNAM="%PATWEB83.01.002";
PatientSTA="%PATWEB83.01.086.078";
PatientALT="%PATWEB83.01.084";
PatientSEX="%PATWEB83.01.019";
PatientDOB="%PATWEB83.01.020";
PatientAGE="%PATWEB83.01.021";
PatientLOC="%PATWEB83.01.083";
PatientPRI="%PATWEB83.01.086.066.1";
PatientUNT="%PATWEB83.01.066.0";
DoctorCOD="%PATWEB83.01.082.003";
DoctorNAM="%PATWEB83.01.082.002";
PatientAID="%PATWEB83.01.086.090";
PatientIND="%PATWEB83.01.086.091";
PatientCUR="%PATWEB83.01.086.092";
PatientCLC="%PATWEB83.01.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB83.01.086.094";
PatientCDM="%PATWEB83.01.086.095";
PatientVDH="%PATWEB83.01.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<form name=UpdateForm action="patweb83.pbl" method=post style="margin:0"> 
<input type=hidden name=reportno value="1">
<input type=hidden name=template value="001">
<input type=hidden name=urnumber value="">
<input type=hidden name=admitnow value="">
<input type=hidden name=admissno value="%PATWEB83.01.081">
<input type=hidden name=updttype value="1"> <!-- register new born -->
<input type=hidden name=ptmas016 value="%PATWEB83.01.305">
<input type=hidden name=redirect value="%PATWEB83.01.001.patweb98.01.001">
<input type=hidden name=ptcnusgn value="%STANDARD.01.025.114.219.0.1">
<input type=hidden name=ptcnnewc value="%STANDARD.01.025.118.138.0.1">
<input type=hidden name=d_ptmas011 value="%PATWEB83.01.015">
<input type=hidden name=ptcnhdps value="%STANDARD.01.025.080.250.1.1">
<input type=hidden name=chostyp value="%STANDARD.01.025.013.245.1.1">
<input type=hidden name=pnkrelp value="%PATWEB83.01.061.0">
<input type=hidden name=ptcnuadv id=ptcnuadv
 value="%STANDARD.01.025.123.247.0.1">
<input type=hidden name=ptcnnmpr value="%STANDARD.01.025.128.226.1.1">
<input type=hidden name=pmpxi113 id=pmpxi113 value="%PATWEB83.01.499.049">

<table width=100% cellspacing=1 cellpadding=1 border=0>
<tr><td class=HeadingCell align=center colspan=6>
      Input New Born Details </td>
</tr>

<tr id=trAddrSrch1 style="display:none">
    <td colspan=2>&nbsp;</td>
    <td class=DataLabel nowrap>Search Address</td>
    <td><input type=text readonly size=42 tabindex="-1"
         style="cursor:pointer;text-align:center;"
         value="Click here to search for an address"
         title="Click here to search for an address"
         onclick="ShowAddressSearch1();">
    </td>
</tr>

<tr><td class=DataLabel width=12%>Title</td>
    <td width=20%><select title="Patient Title"
        name=ptmas001 id=ptmas001 tabindex=1>
        <option></option>
        %STANDARD.01.029
        </select>
        </td>
    <td class=DataLabel width=12%>Address&nbsp;
      <span id=verifiedLabl style="display:none;color:red">(Verified)</span>
    </td>
    <td width=20%><input type=text size=42 maxlength=35 tabindex=7
        name=ptmas008 id=ptmas008 title="Address Line 1" class=Mandatory
        value="%PATWEB83.01.012" onchange="UpCase(this);"></td>
    <td class=DataLabel width=12%>Home Phone</td>
    <td><input type=text size=20 maxlength=20
        name=ptmas013 id=ptmas013 title="Home Phone No" tabindex=12
        value="%PATWEB83.01.017"></td>
</tr>

<tr><td class=DataLabel>Surname</td>
    <td><input type=text size=40 name=ptmas005 id=ptmas005
        title="Patient Surname" maxlength=40 class=Mandatory
        value="%PATWEB83.01.009" tabindex=2 onblur="UpCase(this)"></td>
    <td class=DataLabel></td>
    <td><input type=text size=42 maxlength=35
        name=ptmas009 id=ptmas009 title="Address Line 2" tabindex=8
        value="%PATWEB83.01.013" onchange="UpCase(this);"></td>
    <td class=DataLabel>Work Phone</td>
    <td><input type=text size=20 maxlength=20 
        name=ptmas014 id=ptmas014 title="Work Phone No" tabindex=12
        value="%PATWEB83.01.018"></td>
</tr>

<tr id=PrefSurname style="display:none">
  <td class=DataLabel>Preferred Surname</td>
  <td><input type=text size=20 maxlength=20 name=pmpxi082
       title="Preferred Surname" 
       tabindex=2 onchange="UpCase(this);"></td>
  <td>&nbsp;</td><td>&nbsp;</td>
  <td>&nbsp;</td><td>&nbsp;</td>
</tr>

<tr><td class=DataLabel id="givenNameLabel">Given Names</td>
    <td><input type=hidden size=25 maxlength=25
         title="Patient Given Names" class=Mandatory
         name=ptmas006 id=ptmas006 value="%PATWEB83.01.303" tabindex=3 
         onblur="UpCase(this)">
        <input type=text size=42 maxlength=30
         title="First Given Name" tabindex=3 class=Mandatory
         name=pmpxi084 id=pmpxi084 value="%PATWEB83.01.303" onblur="UpCase(this)">
    </td>
    <td class=DataLabel>Suburb</td>
    <td><input type=text size=42 maxlength=35 tabindex=9
         name=ptmas010 id=ptmas010 title="Suburb" value="%PATWEB83.01.014"
         onchange="valPostCodeNB();"></td>
    <td class=DataLabel>Mobile Phone</td>
    <td><input type=text size=20 maxlength=20 name=ptmsx039 id=ptmsx039
         title="Mobile Phone No" tabindex=13 value="%PATWEB83.01.243"></td>
</tr>

<tr><tr><td class=DataLabel id="secondGivenNameLabel">Second Given Name</td>
    <td><input type=text size=42 maxlength=30
         title="Second Given Name" tabindex=4
         name=pmpxi085 id=pmpxi085 value=""
         onblur="UpCase(this);">
    </td>
    <td class=DataLabel>State</td>
    <td><input type=text size=42 maxlength=35
       name=ptmas011 id=ptmas011 title="State" tabindex=10
        value="%PATWEB83.01.015"></td>
    <td class=DataLabel>E-Mail</td>
    <td><input type=text size=20 maxlength=80 
        name=pmpxi005 id=pmpxi005 title="E-Mail" tabindex=13
        value="%PATWEB83.01.405"></td>
</tr>

<tr id=PrefGivenName style="display:none">
  <td class=DataLabel>Preferred Given Name</td>
  <td><input type=text size=25 maxlength=25 name=pmpxi083
       title="Preferred Given Name" 
       tabindex=4 onchange="UpCase(this);"></td>
  <td>&nbsp;</td><td>&nbsp;</td>
  <td>&nbsp;</td><td>&nbsp;</td>
</tr>

<tr><td class=DataLabel>%STANDARD.01.017.G </td>
    <td><select name=ptmas015 id=ptmas015 tabindex=5 class=Mandatory
        title="%STANDARD.01.017.G " onchange="checkGenderInd(this);
          ChkIdentifyGenderPronounTitle(document.UpdateForm);">
        <option></option>
         %PATWEB83.01.086.099.061.9.1.19.3.H
        </select></td>
    <td class=DataLabel>Post Code</td>
    <td><input type=text size=4 maxlength=4 tabindex=11
         name=ptmas012 id=ptmas012 title="Post Code"
         value="%PATWEB83.01.016" onchange="lookSuburbNB();">
    </td>
</tr>

<tr><td class=DataLabel>Date of Birth</td>
    <td><input type=text size=12 class=Mandatory tabindex=6
         name=ptmas017 id=ptmas017 title="Date of Birth"
         value="%PATWEB83.01.301" onblur="checkDate(this,'Date of Birth')"></td>
</tr>

<tr id=GenderExtra>
  <td><div id=IdenGenLbl></div></td>
  <td><div id=IdenGenDetail></div></td>
  <td><div id=IdenProLbl></div></td>
  <td><div id=IdenProDetail></div></td>
</tr>

<tr><td colspan=6 class=HeadingCell align=center>
      PMI Details</td>
</tr>

<tr><td class=DataLabel>Marital Status</td>
    <td><select class="select120 Mandatory" tabindex=20
         name=ptmas016 id=ptmas016 title="Marital Status">
        <option></option>
         %PATWEB83.01.069.2
        </select></td>
    <td class=DataLabel>Medicare Number</td>
    <td><input type=text size=10 maxlength=10 tabindex=26
         name=ptmas023 id=ptmas023 value="%PATWEB83.01.027"
         onblur="checkMedicare(ptmas023);">
        <input type=text size=3 maxlength=2 tabindex=27
         name=ptmsx045 id=ptmsx045 value="%PATWEB83.01.249"
         onblur="checkIRN(ptmsx045);"></td>
    <td class=DataLabel>Local GP </td>
    <td><input type=hidden name=pmpxi059 id=pmpxi059 
         value="%PATWEB83.01.484.001">
        <input type=text readonly name=genpname id=genpname
         value="%PATWEB83.01.484.081">
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="HCPSearchFrame(pmpxi059,genpname,3)">
     <img src="../images/erase.gif" class=Icon
      onclick="clrFields(pmpxi059,genpname);"></td>
</tr>

<tr><td class=DataLabel>Religion</td>
    <td><select class="select120 Mandatory" tabindex=21
         name=ptmas020 id=ptmas020 title="Religion">
        <option></option>
        %PATWEB83.01.023.2
        </select></td>

    <td class=DataLabel>Valid to</td>
    <td><input type=text size=12 tabindex=28
         name=pmpxi016 id=pmpxi016 title="Valid to" value="%PATWEB83.01.416"
         onblur="checkDateSV(this,'Valid to');">
         <img src="../images/erase.gif" class=Icon
          onclick="clrFields(pmpxi016);"></td>
    <td class=DataLabel>Privacy Indicator</td>
    <td><select name=pmpxi066 id=pmpxi066 class=select120 tabindex=35>
        <option></option>
         %PATWEB83.01.466.2
        </select></td>
</tr>

<tr><td class=DataLabel>Country of Birth</td>
    <td><select class="select120 Mandatory" tabindex=22
         name=ptmas019 id=ptmas019 title="Country of Birth">
        <option></option>
        </select>
        <script type="text/javascript"> {
         SetCategoryC_(document.UpdateForm.ptmas019,"%PATWEB83.01.022.1") }
        </script></td>
    <td class=DataLabel>Pension/HealthCareCard #</td>
    <td><input type=text size=20 maxlength=15 tabindex=29
         name=ptmas024 id=ptmas024 value="%PATWEB83.01.028"></td>
    <td class=DataLabel>Folder Selection</td>
    <td><select name=pmpxi077 id=pmpxi077 tabindex=36 title="Folder Selection">
         <option></option>
         %PATWEB83.01.479.2
         </select></td>
</tr>

<tr><td class=DataLabel>Resident</td>
    <td><select class=Mandatory tabindex=23
         name=ptmas021 id=ptmas021 title="Resident">
         <option></option>
         %PATWEB83.01.024.2
        </select></td>
    <td class=DataLabel>Pension Expiry</td>
    <td><input type=text size=12 tabindex=30
         name=ptmas025 id=ptmas025 title="Pension Expiry"
         value="%PATWEB83.01.029"
        onblur="checkDateSV(this,'Valid to');"></td>
    <td class=DataLabel>Health Fund</td>
    <td><input type=text size=6 maxlength=6 tabindex=37
         name=ptmas036 id=ptmas036 title="Health Fund" 
         value="%PATWEB83.01.040.0"
         onblur="checkTable();"
         onchange="validateCode(16,
                                UpdateForm.ptmas036,
                                UpdateForm.funddesc);
                   checkTable();">
        <input type=text size=25 maxlength=30 class=readonly Readonly notab
         name=funddesc id=funddesc value="%PATWEB83.01.040.1"></td>
</tr>

<tr><td class=DataLabel>Indigenous Status</td>
    <td><select class="select120 Mandatory" tabindex=24
         name=pmpxi065 id=pmpxi065 title="Indigenous Status">
        <option></option>
         %PATWEB83.01.465.2
        </select></td>
    <td class=DataLabel>Safety Net Number</td>
    <td><input type=text size=12 maxlength=10 tabindex=31
         name=pmpxi075 id=pmpxi075 value="%PATWEB83.01.475"></td>
    <td class=DataLabel>Level</td>
    <td><input size=8 maxlength=8 tabindex=38
         name=ptmas037 id=ptmas037 title="Level" value="%PATWEB83.01.041.0"
         onblur="validateHFT(20,
                             UpdateForm.ptmas036,
                             UpdateForm.ptmas037,
                             UpdateForm.funddesc,
                             UpdateForm.tabldesc);">
        <input type="text" size=15 maxlength=17 class=readonly Readonly notab
         name=tabldesc id=tabldesc value="%PATWEB83.01.041.1">
        <img src=../images/SearchIcon.gif class=Icon
         onclick="HealthFundSearchFrame(UpdateForm.ptmas036,
                                        UpdateForm.funddesc,
                                        UpdateForm.ptmas037,
                                        UpdateForm.tabldesc);">
        <img src="../images/erase.gif" class=Icon
         onclick="clrDoc(UpdateForm.ptmas036,UpdateForm.ptmas037);
                  clrDoc(UpdateForm.funddesc,UpdateForm.tabldesc);
                  checkTable();">
    </td>
</tr>

<tr><td class=DataLabel>Interpreter Required</td>
    <td><select title="Interpreter Required" tabindex=25
         name=pmpxi001 id=pmpxi001>
        %PATWEB83.01.401.2
        </select>
        </td>
    <td class=DataLabel>Pref Language</td>
    <td><select class="select120 Mandatory" tabindex=32
         name=pmpxi002 id=pmpxi002 title="Preferred Language">
        <script type="text/javascript"> {
         SetCategoryLA(document.UpdateForm.pmpxi002,"%PATWEB83.01.402.1") }
        </script>
        </select></td>
    <td class=DataLabel>Member Number</td>
    <td><input type=text size=20 maxlength=19 tabindex=39
         name=ptmas038 id=ptmas038 value="%PATWEB83.01.042"></td>
</tr>

<tr><td>&nbsp;</td>
    <td>&nbsp;</td>
    <td><div id=AdvCareHeading></div></td>
    <td><div id=AdvCareOptions></div></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
</tr>
</tbody>
</table>


<div id="nextofkinDIV">
<table border=0 colspan=1 width=100% cellspacing=1 cellpadding=1>
<tr><td colspan=6 class=HeadingCell align=center >
    <input type=hidden name=pmcex002 id=pmcex002 value="%PATWEB83.01.318.1.1">
    %PATWEB83.01.318.1.0</td>
</tr>

<tr><td colspan=2>&nbsp;</td>
    <td class=DataLabel width=12%>Overseas Address</td>
    <td width=20%><input type=checkbox name=oseasnok id=oseasnok tabindex=54
         onclick='ToggleOverseas();'>
    </td>
</tr>

<tr id=trAddrSrch2 style="display:none">
    <td colspan=2>&nbsp;</td>
    <td class=DataLabel nowrap>Search Address</td>
    <td><input type=text readonly size=42 tabindex="-1"
         style="cursor:pointer;text-align:center;"
         value="Click here to search for an address"
         title="Click here to search for an address"
         onclick="ShowAddressSearch2();">
    </td>
</tr>

<tr><td class=DataLabel width=12%>Title</td>
    <td width=20%><select title="Title" name=pmcex004 id=pmcex004 tabindex=50
         onchange="MandatoryNOK();">
        <option></option>
        %STANDARD.01.029
        </select>
    </td>
    <td class=DataLabel>Address</td>
    <td><input type=text size=42 maxlength=35 tabindex=55
         name=pmcex007 id=pmcex007 title="Address Line 1"
         value="%PATWEB83.01.054" onchange="UpCase(this);MandatoryNOK();">
    </td>
    <td class=DataLabel width=12%>Home Phone</td>
    <td><input type=text size=23 maxlength=20 tabindex=60
         name=pmcex012 id=pmcex012 title="Home Phone" onchange="MandatoryNOK();"
         value="%PATWEB83.01.059"></td>
</tr>

<tr><td class=DataLabel>Surname</td>
    <td><input type=text size=42 maxlength=30 name=pmcex005 id=pmcex005
         title="Surname" tabindex=51 value="%PATWEB83.01.320"
         onchange="UpCase(this);MandatoryNOK();"></td>
    <td class=DataLabel>&nbsp;</td>
    <td><input type=text size=42 maxlength=35 tabindex=56
         name=pmcex008 id=pmcex008 title="Address Line 2"
         value="%PATWEB83.01.055" onchange="UpCase(this);MandatoryNOK();">
    </td>
    <td class=DataLabel>Work Phone</td>
    <td><input type=text size=23 maxlength=20 tabindex=61
         name=pmcex013 id=pmcex013 title="Work Phone" onchange="MandatoryNOK();"
         value="%PATWEB83.01.060"></td>
</tr>

<tr><td class=DataLabel>Given Name</td>
    <td><input type=text size=42 maxlength=30 name=pmcex006 id=pmcex006
        title="Given Name" tabindex=52
        value="%PATWEB83.01.321"
        onchange="UpCase(this);MandatoryNOK();">
    </td>
    <td class=DataLabel>Suburb</td>
    <td><input type=text size=42 maxlength=35 title="Suburb"
        name=pmcex009 id=pmcex009 tabindex=57
        value="%PATWEB83.01.056"
        onchange="SetPostVarsN();valPostCodeN();checkOverseasN();MandatoryNOK();"></td>
    <td class=DataLabel>Mobile Phone</td>
    <td><input type=text size=23 maxlength=20 tabindex=61
         name=pmcex014 id=pmcex014 title="Mobile Phone" 
         onchange="MandatoryNOK();"
         value="%PATWEB83.01.086.010"></td>
</tr>

<tr><td class=DataLabel>Relationship</td>
    <td><select name=pmcex015 id=pmcex015 title="Relationship" tabindex=53
         onchange="MandatoryNOK();">
        <option value=""></option>
         %STANDARD.01.030
        </select></td>
    <td><div id=AddressLine4HN></div></td>
    <td><div id=AddressLine4N></div></td>
</tr>

<tr><td colspan=2>&nbsp;</td>
    <td class=DataLabel>Post Code</td>
    <td><input type=text size=4 maxlength=4 tabindex=59
         name=pmcex011 id=pmcex011 title="Post Code" value="%PATWEB83.01.058"
       onchange="checkOverseasN();SetPostVarsN();LookupSuburb(this.value);
                 MandatoryNOK();ToggleSearchRow();">
        </td>
    <td colspan=2>&nbsp;</td>
</tr>
</table>
</div>

<br>

<table border=0 colspan=1 width=100% cellspacing=1 cellpadding=1>
  <tr><td align=center colspan=6>
    <input type=button value="Update" tabindex=70 class="button"
     onclick="Update();">
    <input type=button value="Cancel" class="button" tabindex=71
     onclick="history.go(-1);">
  </td></tr>
</table>
</form>

<span id="nextofkinoldSPAN" style="display: none">
<table width=100% cellspacing=1 cellpadding=1 border=0>
<tr><td class=HeadingCell align=center colspan=6>
     Next of Kin Details</td>
</tr>

<tr id=trAddrSrch3 style="display:none">
    <td colspan=2>&nbsp;</td>
    <td class=DataLabel nowrap>Search Address</td>
    <td><input type=text readonly size=42 tabindex="-1"
         style="cursor:pointer;text-align:center;"
         value="Click here to search for an address"
         title="Click here to search for an address"
         onclick="ShowAddressSearch3();">
    </td>
</tr>

<tr valign=top><td class=DataLabel width=12%>Name</td>
    <td width=20%>
      <input type="text" size="22" maxlength="20" tabindex=50
       name=ptmas049 id=ptmas049 title="NOK Name"></td>
    <td class=DataLabel width=12%>Address</td>
    <td width=20%>
      <input type="text" size="42" maxlength="35" tabindex=52
       name=ptmas050 id=ptmas050 title="NOK Address"
       value="%PATWEB83.01.012" onchange="UpCase(this);">
    </td>
    <td class=DataLabel width=12%>Home Phone</td>
    <td><input type="text" size="12" maxlength="12" tabindex=56
         name=ptmas055 id=ptmas055 title="NOK Home Phone"
         value="%PATWEB83.01.017">
</td></tr>

<tr><td class=DataLabel>Relationship</td>
    <td><select name=ptmas057 id=ptmas057 title="NOK Relationship" tabindex=51>
        <option value=""></option>
         %STANDARD.01.030
        </select></td>
    <td class=DataLabel>Suburb</td>
    <td><input type="text" size="42" maxlength="35" tabindex="53"
         name=ptmas052 id=ptmas052 title="NOK Suburb"
         value="%PATWEB83.01.014" onchange="valPostCodeNOK();"></td>
    <td class=DataLabel>Business Phone</td>
    <td><input type="text" size="12" maxlength="12" tabindex=57
         name=ptmas056 id=ptmas056 title="NOK Business Phone"
         value="%PATWEB83.01.018"></td></tr>
<tr><td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>State</td>
    <td><input type="text" size="42" maxlength="35" tabindex=54
         name=ptmas053 id=ptmas053 title="NOK State"
         value="%PATWEB83.01.015"></td></tr>

<tr><td>&nbsp;</td>
    <td>&nbsp;</td>
    <td class=DataLabel>Post Code</td>
    <td><input type="text" size="4" maxlength="4" tabindex="55"
         name=ptmas054 id=ptmas054 title="NOK Post Code"
         value="%PATWEB83.01.016" onchange="lookSuburbNOK();"></td></tr>
</table>
</span>

<span id=AustStateHN style="display:none">
  State
</span>

<span id=AustStateN style="display:none">
  <input type=text size=42 maxlength=35 tabindex=58
   name=pmcex010 id=pmcex010 title="State" value="%PATWEB83.01.057"
   onchange="UpCase(this);MandatoryNOK();">
</span>

<span id=OseasCountryHN style="display:none">
  Country
</span>

<span id=OseasCountryN style="display:none">
  <select name=pmcex010 id=pmcex010 class="Mandatory select120" tabindex=58
   title="Country Address" onchange="MandatoryNOK();">
    <option></option>
    %PATWEB83.01.085.060
  </select>
</span>

<script type="text/javascript">
function init(){
 document.UpdateForm.ptmas015.selectedIndex=""
}

function validateNewContact() {
  if (document.UpdateForm.ptcnnewc.value=="1") {
    for (var i=0; i < document.UpdateForm.pmcex004.length; i++) {
      if (document.UpdateForm.pmcex004.options[i].value=="%PATWEB83.01.319"){
          document.UpdateForm.pmcex004.selectedIndex=i;
      }
    }

    NOKRel="%PATWEB83.01.061.0";
    for (var i =0 ; i < document.UpdateForm.pmcex015.length; i++) {
      if (document.UpdateForm.pmcex015.options[i].value==NOKRel) {
          document.UpdateForm.pmcex015.selectedIndex=i
      }
    }

    MandatoryNOK();
    SetPostCode01N();
  } else {
    nextofkinDIV.innerHTML = nextofkinoldSPAN.innerHTML;
    GivenName="%PATWEB83.01.010";
    Surname="%PATWEB83.01.009";
    document.UpdateForm.ptmas049.value=GivenName.replace(/\s*$/,"") + " " +
                          Surname.replace(/\s*$/,"");
  }
}

var savpcode="";
function setAddrLine4N(theForm) {
  if (theForm.oseasnok.checked) {
    AddressLine4HN.innerHTML = OseasCountryHN.innerHTML;
    AddressLine4N.innerHTML = OseasCountryN.innerHTML;

    for (var i =0 ; i < theForm.pmcex010.length; i++) {
      if (theForm.pmcex010.options[i].text == theForm.d_ptmas011.value.substr(0,20)) {
        theForm.pmcex010.selectedIndex=i;
      }
    };

    if (trim(theForm.pmcex011.value) != "8888") {
      savpcode = theForm.pmcex011.value;
      theForm.pmcex011.value = "8888";
    }
  } else {
    AddressLine4HN.innerHTML = AustStateHN.innerHTML;
    AddressLine4N.innerHTML = AustStateN.innerHTML;

    if (trim(theForm.pmcex011.value) == "8888") {
      theForm.pmcex011.value = savpcode;
    }
  }
  state = theForm.pmcex010;
}

</script>
<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%PATWEB83.01.003">
<input type=hidden name=admissno value="%PATWEB83.01.081">
<input type=hidden name=MenuType value="%PATWEB83.01.088">
</form>

<span id=advcareHdr style="display:none">
  %STANDARD.01.017.P9
</span>
<span id=advcareOptns style="display:none">
  <select name=pmpxi074 id=pmpxi074 tabindex=33 class="Mandatory"
          title="%STANDARD.01.017.P9">
    <option></option>
    %PATWEB83.01.474.2
  </select>
</span>

<span id=advcareOptnsBlk style="display:none">
<input type=hidden name=pmpxi074 id=pmpxi074 value="">
</span>
<span id=idenGenLblShow style="display:none">
  <td class=DataLabel>%STANDARD.01.035.Gi</td>
</span>
<span id=idenGenDetailShow style="display:none">
  <td><select name=pmpxi125 id=pmpxi125 class=Mandatory tabindex=7
       title="%STANDARD.01.035.Gi"
       onchange="IdenGenderChange(document.UpdateForm);">
      <option></option>
       %PATWEB83.01.086.099.063.9.2
      </select><br>
      <span id=IdenGenFreeTxt></span>
  </td>
</span>
<span id=idenGenDetailBlank style="display:none">
  <td><input type=hidden name=pmpxi125 id=pmpxi125 value=""></td>
  <td><input type=hidden name=pmpxi126 id=pmpxi126 value=""></td>
</span>
<span id=idenGenFreeTxtShow style="display:none">
  <input type=text name=pmpxi126 id=pmpxi126 size=80 maxlength=80
   class=Mandatory tabindex=7
   title="Identifying Gender Free Text"
   value="%PATWEB83.01.086.099.065">
</span>
<span id=idenGenFreeTxtBlank style="display:none">
  <td><input type=hidden name=pmpxi126 id=pmpxi126 value=""></td>
</span>
<span id=idenProLblShow style="display:none">
  <td class=DataLabel>%STANDARD.01.035.Gp</td>
</span>
<span id=idenProDetailShow style="display:none">
  <td><select name=pmpxi127 id=pmpxi127 class=Mandatory tabindex=13
       title="%STANDARD.01.035.Gp"
       onchange="IdenPronounChange(document.UpdateForm);">
      <option></option>
       %PATWEB83.01.086.099.064.9.2
      </select><br>
      <span id=IdenProFreeTxt></span>
  </td>
</span>
<span id=idenProDetailBlank style="display:none">
  <td><input type=hidden name=pmpxi127 id=pmpxi127 value=""></td>
  <td><input type=hidden name=pmpxi128 id=pmpxi128 value=""></td>
</span>
<span id=idenProFreeTxtShow style="display:none">
  <input type=text name=pmpxi128 id=pmpxi128 size=80 maxlength=80
   class=Mandatory tabindex=13
   title="Identifying Pronoun Free Text"
   value="%PATWEB83.01.086.099.066">
</span>
<span id=idenProFreeTxtBlank style="display:none">
  <td><input type=hidden name=pmpxi128 id=pmpxi128 value=""></td>
</span>
