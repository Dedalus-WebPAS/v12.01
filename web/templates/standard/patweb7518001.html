<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"      content="true">
<script type="text/javascript">
function submitBulkJrnlCharges() {
  if (validateMandatory(document.UpdateForm)) {
    if (parseFloat(document.UpdateForm.totjnamt.value)!=0) {

      if (parseFloat(document.UpdateForm.totjnamt.value)!=
          parseFloat(document.UpdateForm.bmchtotl.value)) {
        alert("Total not Balanced. " 
          + "Total Journal Amount entered does not equal Bulk Journal Amount: " 
          + document.UpdateForm.bmchtotl.value);
        return;
      }
     }
    document.UpdateForm.nextpage.value='0';
    document.UpdateForm.updttype.value='E';
    document.UpdateForm.submit();
  }
}
function updBulkJrnlChargesPopUpFrame(Batch,URNo,VisitNo,InvNo,JournalType) {
  SetCookie("blkjour",document.UpdateForm.totjnamt.value);

  DFrameStart()
  linkurl="../cgi-bin/patweb75.pbl?reportno=18&template=003&updttype=B" +
          "&tmjrnbat=" + Batch.replace(/ /g,"+")  +
          "&tmjrn001=" + URNo.replace(/ /g,"+")  +
          "&tmjrn002=" + VisitNo.replace(/ /g,"+")  +
          "&tmjrn003=" + InvNo.replace(/ /g,"+") +
          "&tmjrn004=" + JournalType.replace(/ /g,"+")  
  Left=(document.body.clientWidth-800)/2
  DFrameLink(linkurl,100,Left,800,450)
}
function displayBulkJrnl() {

  blkjrnccookie=GetCookieData("blkjour");
  if (blkjrnccookie!="unknown") {
    document.UpdateForm.totjnamt.value=blkjrnccookie;
    ExpireCookiePath("blkjour"); 
  }

  if (document.UpdateForm.bulkindi.value=="1") {
    bulkjrnlcharges.innerHTML=BulkJrnlCharges.innerHTML;    
  }
}
function addBulkJrnlChargesPopUpFrame() {

  SetCookie("blkjour",document.UpdateForm.totjnamt.value);

  DFrameStart()
  linkurl="../cgi-bin/patweb75.pbl?reportno=18&template=002" +
          "&tmjrnbat=" + UpdateForm.tmjrnbat.value.replace(/ /g,"+")
  Left=(document.body.clientWidth-800)/2
  DFrameLink(linkurl,100,Left,800,450)
}
function CancelBulkJournal() {
  UpdateForm.updttype.value="F";
  UpdateForm.nextpage.value="1";
  UpdateForm.redirect.value="patweb75.pbl?reportno=18&template=1"
  document.UpdateForm.submit();
}
</script>

%START.OF.PAGE
</head>
<body onload="PageLoad(event);displayBulkJrnl();">
<form name=UpdateForm method=post action=patweb75.pbl>
<table width=100% align=center border=0 cellspacing=0>
<input type=hidden name=reportno value="18">
<input type=hidden name=template value="001">
<input type=hidden name=nextpage value="1">
<input type=hidden name=redirect value="patweb75.pbl?reportno=18&template=1">
<input type=hidden name=bulkindi value="%PATWEB75.18.010">
<input type=hidden name=updttype>
<input type=hidden name=tmjrnbat value="%PATWEB75.18.009">

<tr><td align=right>Total Journal Amount</td>
    <td align =center>
    <input type=text name=totjnamt title="Total Journal Amount" size=20
     class="Number Mandatory" onblur="RoundNumber(this,2);"
     min=-999999999999.99 max=999999999999.99>
    </td><td>&nbsp;</td>
    </tr>

<tr><td width=42%>&nbsp;</td>
    <td>&nbsp;</td>
    <td width=42%>&nbsp;</td>
    </tr>

<tr><td>&nbsp;</td>
    <td align=center>
    <input type=button class="button" value="Add Journal" 
     name=addbuttn id=addbuttn
     onclick='tempDisable(this);addBulkJrnlChargesPopUpFrame();'>
    </td>
    <td>&nbsp;</td>
    </tr>

<tr><td colspan=5 align=center>
    <hr width=80%>
    </td></tr>
  
</table>
 
<div id="bulkjrnlcharges"></div>

</form>

<span id="BulkJrnlCharges" style="display:none">
<table width=95% align=center border=0 cellspacing=0>
<tr><td class="HeadingCell">U/R Number</td>
    <td class="HeadingCell">Visit</td>
    <td class="HeadingCell">Invoice</td>
    <td class="HeadingCell">Name</td>
    <td class="HeadingCell">Date</td>
    <td class="HeadingCell">Journal Type</td>
<!--
    <td class="HeadingCell">Journal Description</td>
  -->
    <td align=right class="HeadingCell">Current O/S Amt</td>
    <td align=right class="HeadingCell">Jrnl Amt</td>
    <td align=right class="HeadingCell">New O/S Amt</td>
    </tr> 

%PATWEB75.18.012

</table>  

<table width=95% align=center border=0 cellspacing=0>
<tr><td>&nbsp;</td></tr>

<tr><td align=right class=DataLabel width=80%>Total Journal Value:</td>
    <td align=right class="DataField">%PATWEB75.18.018</td></tr>
<tr><td align=right class=DataLabel>Running Total      :</td>
    <td align=right class="DataField">%PATWEB75.18.011</td></tr>
<tr><td>&nbsp;</td></tr>
</table>  

<table width=95% align=center border=0 cellspacing=0>

<tr><td align=center>
    <input type=button class="button" value="Finish"
     onclick="submitBulkJrnlCharges();">
    <input type=button class="button" value="Cancel"
     onclick='CancelBulkJournal();'>
    </td></tr>

    <input type=hidden name=bmchtotl value="%PATWEB75.18.018">
  </table>
</span>
