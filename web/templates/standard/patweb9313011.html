<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<style>
td.ClosedCell{
  background-color: red!important;
}
</style>
<script type="text/javascript" src='../js/DayWardView.js'></script>
<script type="text/javascript">
function updateParent(Ward,WardName,Bed,Bedstat,BookDate,Slot)  {
  parent.parent.ReturnWard.value = Ward;
  parent.parent.ReturnName.value = WardName;

  if (typeof(parent.parent.ReturnFunction) == 'function') {
    parent.parent.ReturnFunction();
  }

  var theDate = SelectPeriod.lastdate.options[SelectPeriod.lastdate.selectedIndex].value;
  var theTime = Slot.replace(/T/,"");
  theTime = theTime.substr(0,2) + ":" + theTime.substr(2,2) + ":00";

  if (parent.parent.ReturnDate != undefined &&
      parent.parent.ReturnTime != undefined)
  {
    if (parent.parent.ReturnDate.type.indexOf("select") != -1) {
      parent.parent.ReturnDate.value = BookDate;
    }
    else {
      parent.parent.ReturnDate.value = SetDateDDMMMYYYY(BookDate);
    }
    parent.parent.ReturnTime.value = theTime;
  }
  else {
    if ((parent.parent.pat96btf != undefined) &&
	  (parent.parent.pat96btf.trandate != undefined))
    {
      if (parent.parent.pat96btf.trandate.type.indexOf("select") != -1) {
        parent.parent.pat96btf.trandate.value = BookDate;
      }
      else {
        parent.parent.pat96btf.trandate.value = SetDateDDMMMYYYY(BookDate);
      }
      parent.parent.pat96btf.trantime.value = theTime;
    }
    else if ((parent.parent.UpdateForm != undefined) &&
	     (parent.parent.UpdateForm.ptmis001 != undefined))
    {
      parent.parent.UpdateForm.ptmis001.value = SetDateDDMMMYYYY(BookDate);
      parent.parent.UpdateForm.ptmis002.value = theTime;
    }
  }

  parent.parent.ReturnBed.value = Bed;
  parent.parent.ReturnBedStatus.value = Bedstat;
  parent.parent.document.getElementById('PopUpScreen').style.display = "none";
  parent.parent.ReturnWard.focus();
}
function BookSlot(Ward,Bed,Slot,WardName,BedStat) {
  if (document.SelectPeriod.wdbdsrch.value == "1") {
    BookDate = document.getElementById('lastdate').value;
    updateParent(Ward,WardName,Bed,BedStat,BookDate,Slot);
  }
  else {
    theDate=SelectPeriod.lastdate.options[SelectPeriod.lastdate.selectedIndex].value;
    theTime=Slot.replace(/T/,"")
    theTime=theTime.substr(0,2)+":"+theTime.substr(2,2)
    theURL="watweb01.pbl?reportno=02&template=023"+
	  "&bookward="+Ward.replace(/ /g,"+")+
	  "&bookebed="+Bed.replace(/ /g,"+")+
	  "&bookdate="+theDate+
	  "&booktime="+theTime

    Width=1100;
    Height=600;
    Top=10;
    Left=(document.body.clientWidth - Width)/2;
    DFrameLink(theURL,Top,Left,Width,Height);
  }
}
function OpenPatient(el) {
 if (dragOn) { return };

 if (document.SelectPeriod.wdbdsrch.value == "1") {
   return;  // Ward/Bed Search View (readonly)
 }

  theDate=SelectPeriod.lastdate.options[SelectPeriod.lastdate.selectedIndex].value;
  slottime=el.getAttribute("slotID").replace(/.*T/g,"")
  slottime=slottime.substr(0,2)+":"+slottime.substr(2,2);
  theURL="oprweb01.pbl?reportno=07&template=001"+
	"&urnumber="+el.getAttribute("urnumber").replace(/ /g,"+")+
	"&admissno="+el.getAttribute("admissno").replace(/ /g,"+")+
	"&wardcode="+el.getAttribute("wardcode").replace(/ /g,"+")+
	"&beddcode="+el.getAttribute("beddcode").replace(/ /g,"+")+
	"&slotdate="+theDate +
	"&slottime="+slottime

  if (el.getAttribute("ptstatus")=="2") {
   theURL="patweb89.pbl?reportno=01&template=032"+
	"&urnumber="+el.getAttribute("urnumber").replace(/ /g,"+")+
	"&admissno="+el.getAttribute("admissno").replace(/ /g,"+")
  }

  if (el.getAttribute("ptstatus")=="3") {
   theURL="patweb89.pbl?reportno=01&template=030"+
	"&urnumber="+el.getAttribute("urnumber").replace(/ /g,"+")+
	"&admissno="+el.getAttribute("admissno").replace(/ /g,"+")
  }

  if (el.getAttribute("ptstatus")=="4") {
   theURL="patweb98.pbl?reportno=01&template=049"+
	"&urnumber="+el.getAttribute("urnumber").replace(/ /g,"+")+
	"&admissno="+el.getAttribute("admissno").replace(/ /g,"+")
  }

  location.href=theURL;
}
function NewBooking() {
 theURL="watweb01.pbl?reportno=2&template=023";
 Width=1100;
 Height=600;
 Top=10;
 Left=(document.body.clientWidth - Width)/2;
 DFrameLink(theURL,Top,Left,Width,Height);
}
</script>
<link rel="stylesheet" href="../html/DayWardView.css" type="text/css">
<link rel="stylesheet" href="../html/WardMap.css" type="text/css">
%START.OF.PAGE
<link rel="stylesheet" 
      href="StyleSheet.php?reportno=1&pagekey=patweb9313011" 
      type="text/css">
<link rel="stylesheet" 
      href="StyleSheet.php?reportno=1&pagekey=patweb9313011%PATWEB93.13.044" 
      type="text/css">
<script type="text/javascript" src='../js/DayWardView%PATWEB93.13.044.js'></script>
</head>
<body onload="PageLoad(event);InitDisplay('%STANDARD.01.017.G ');">
<form name=SelectPeriod action=patweb93.pbl method=get style="margin:0">
<input type=hidden name=reportno value="13">
<input type=hidden name=template value="11">
<input type=hidden name=viewtype value="0">
<input type=hidden name=wdbdsrch value="%PATWEB93.13.069">

<div id=divWardDateSrchHeader></div>

<table width=100% cellspacing=0 border=0>
<tr><td class=HeadingCell> 
    <span id=spWardDateSrch>
      <input type=button value="<<" class=SmallButton
       onclick='location.href="%PATWEB93.13.202"'>
      %PATWEB93.13.207
      <input type=submit value="Go" class=SmallButton>
      <input type=button value=">>" class=SmallButton
       onclick='location.href="%PATWEB93.13.201"'>
      <a href='javascript:SelectDateFrame();'>
        <img src="../images/DateLookup.gif" class=Icon
         alt="Select Date" align=absmiddle>
      </a>
      <span>
      Ward
      </span>
      <select name=wardcode onchange="SelectPeriod.submit();" >
        %PATWEB93.13.001
      </select>
      <input type=button class="button" value="Create Booking"
       onclick="NewBooking();">
    </span>
    </td>
    <td style='text-align:right;' class=HeadingCell>No. of Patients: %PATWEB93.13.031 
     &nbsp; &nbsp;  <font color=red>%PATWEB93.13.032</font></td>
</tr>
</table>
</form>

<div>
<div id=OutputLocation></div>
<div id=EventLocation></div>
</div>
<table cellspacing=0 cellpadding=0 border=1 width=100% style='background-color:white;'>
<tr valign=top><td width=20%>
<table cellspacing=1 cellpadding=2 border=0 >
<tr><td style='width:40px;cursor:pointer' class=evtStatus1 align=center
    onclick='SetStyle("evtStatus1");'>Book</td>
    <td>Expected Patients (Booked and Pre-Admitted)</td></tr>
<tr><td style='width:40px;cursor:pointer' class=evtStatus2 align=center
    onclick='SetStyle("evtStatus2");'>Pre</td>
    <td>Expected Patients (Pre-Admitted)</td></tr>
<tr><td style='width:40px;cursor:pointer' class=evtStatus3 align=center
    onclick='SetStyle("evtStatus3");'>Cur</td>
    <td>Current Inpatient</td></tr>
<tr><td  style='width:40px;cursor:pointer' class=evtStatus4 align=center
    onclick='SetStyle("evtStatus4");'>Disc</td>
    <td>Discharged</td></tr>
<tr><td style='width:40px;cursor:pointer' class=evtBedReq align=center
    onclick='SetStyle("evtBedReq");'>Link</td>
    <td>Linked to Current Inpatient in Other Ward</td></tr>
</table>
</td>
<td width=20%>
<div id=RegimeLegend></div>
</td>
<td width=20%>
<div id=RegimeCombo1></div>
</td>
<td width=40%>
<div id=RegimeCombo2></div>
</td></tr>
</table>
<div id=PageSettings class=PageSettings style='display:none'>
<form name=PageSettings>
<input type=hidden name=seclevel id=seclevel value="%STANDARD.01.042.PATWEB93">
<table width=100% cellpadding=5 cellspacing=0>
<tr><td colspan=2 align=center class=HeadingCell>Settings</td></tr>
<tr><td class=DataLabel>Cell </td>
<td><div id=cellSample class=eventBlock style='width:200px'><b>SURNAME,</b>Mr Given Middle</div>
</td></tr>

<tr><td class=DataLabel>Context</td>
<td><select id=pageContext name=pageContext style='width:200px'>
    <option value="patweb9313011">Site</option>
    <option value="patweb9313011%PATWEB93.13.044">Ward</option>
    </select>
</td></tr>

<tr><td class=DataLabel>Cell Color</td>
<td><select id=cellColor name=cellColor style='width:200px' onchange='SetSample()'>
    </select>
</td></tr>

<tr><td class=DataLabel>Text Color</td>
<td><select id=textColor name=textColor style='width:200px' onchange='SetSample()'>
    <option value="" >default</option>
    <option value="black" >Black</option>
    <option value="blue"  >Blue</option>
    <option value="red"   >Red</option>
    <option value="green" >Green</option>
    <option value="purple">Purple</option>
    <option value="yellow">Yellow</option>
    <option value="white" >White</option>
    </select>
</td></tr>

<tr><td class=DataLabel>Border Color</td>
<td><select id=borderColor name=borderColor style='width:200px' onchange='SetSample()'>
    <option value="" >default</option>
    <option value="black" >Black</option>
    <option value="blue"  >Blue</option>
    <option value="red"   >Red</option>
    <option value="green" >Green</option>
    <option value="purple">Purple</option>
    <option value="yellow">Yellow</option>
    <option value="white" >White</option>
    </select>
</td></tr>
<tr><td class=DataLabel>Border Width</td>
<td><select id=borderWidth name=borderWidth style='width:200px' onchange='SetSample()'>
    <option value="1px" >default</option>
    <option value="2px" >2px</option>
    <option value="3px" >3px</option>
    <option value="4px" >4px</option>
    </select>
</td></tr>

<tr><td class=DataLabel>Marker</td>
<td><select id=Marker name=Marker style='width:200px' onchange='SetSample()'>
    <option value=''>default</option>
    <option value='CellHighlightRightBlack.png'    >Black </option>
    <option value='CellHighlightRightBlue.png'     >Blue  </option>
    <option value='CellHighlightRightGreen.png'    >Green </option>
    <option value='CellHighlightRightLightBlue.png'>LightBlue </option>
    <option value='CellHighlightRightOrange.png'   >Orange   </option>
    <option value='CellHighlightRightPurple.png'   >Purple   </option>
    <option value='CellHighlightRightRed.png'      >Red   </option>
    <option value='CellHighlightRightWhite.png'    >White   </option>
    <option value='CellHighlightRightYellow.png'   >Yellow   </option>
    </select>
</td></tr>

<tr><td class=DataLabel>Font Weight</td>
<td><select id=FontWeight name=FontWeight style='width:200px' onchange='SetSample()'>
    <option value=''>normal</option>
    <option value='bold'    >Bold </option>
    <option value='bolder'  >Bolder </option>
    <option value='lighter' >Lighter  </option>
    </select>
</td></tr>

<tr valign=top><td colspan=2 align=center>
    <input class=button type=button onclick="SaveSettings();" value=Ok>
    <input class=button type=button onclick="ClearSettings();" value=Clear>
    <input class=button type=button onclick="HideSettings();" value=Cancel></td></tr>
</table>
</form>
</div>

<span id=spWardDateSrchHeader style='display:none'>
  <table width=100% cellspacing=0 cellpadding=0 border=0>
  <tr><td class=MapHeadingCell align=center style='font-size:9pt;'>
      Ward by Time Search</td>
  </tr>
  </table>
</span>

<script type="text/javascript">
function loadEvents() {
  %PATWEB93.13.045
}
function loadBeds() {
  %PATWEB93.13.046
}
function loadRegimes() {
  %PATWEB93.13.047
}
function loadClosures() {
  %PATWEB93.13.071
}
if (document.SelectPeriod.wdbdsrch.value == "1") {
  HideChildElements('spWardDateSrch');
 
  document.getElementById('divWardDateSrchHeader').innerHTML = 
    document.getElementById('spWardDateSrchHeader').innerHTML;
}
</script>
<form name=LinkForm method=post action=patweb89.pbl>
<input type=hidden name=reportno value=3>
<input type=hidden name=template value=1>
<input type=hidden name=urnumber value="">
</form>
<div id="box1">
</div>
<form name=Registration method=get action="patweb89.pbl">
<input type=hidden name=reportno value=05>
<input type=hidden name=template value=001>
<input type=hidden name=srchsnam value="">
<input type=hidden name=srchgnam value="">
<input type=hidden name=srchpdob value="">
<input type=hidden name=srchpage value="">
<input type=hidden name=srchpsex value="">
<input type=hidden name=temporar value="0">
</form>
<form name=NewRegistration method=get action=patweb89.pbl>
<input type=hidden name=reportno value=05>
<input type=hidden name=template value=004>
<input type=hidden name=srchsnam value="">
<input type=hidden name=srchgnam value="">
<input type=hidden name=srchpdob value="">
<input type=hidden name=srchpage value="">
<input type=hidden name=srchpsex value="">
<input type=hidden name=temporar value="1">
</form>
