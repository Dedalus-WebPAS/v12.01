<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome"    content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"    content="true">
<script type="text/javascript" src="../js/patweb90.js"></script>
<script type="text/javascript">
function setUR() {
 if(!isWhitespace(document.search.urnumber.value)) {
   for (var i =0 ; i < document.search.srchtype.length; i++) {
     if (document.search.srchtype.options[i].value=="4") {
         document.search.srchtype.selectedIndex=i } };
    UpCase(document.search.urnumber)
    FormatURScan(document.search.urnumber);
    justifyRight(document.search.urnumber);
    p=document.search
      ans=validateCode(8,p.urnumber,p.dummy,p.dummy,p.dummy,p.dummy,p.dummy,
          p.dummy,p.dummy,p.dummy,p.dummy,p.dummy,p.dummy,p.dummy,p.dummy,
          p.dummy,p.dummy,p.dummy,p.dummy,p.dummy,p.dummy,p.dummy,p.gpaccess);
      if(p.gpaccess.value=="1"){
         linkURL="patweb07.pbl?&reportno=14&template=001&urnumber="+
                  document.search.urnumber.value.replace(/ /g,"+");
         showPatient(linkURL,1);
         return false;
      }
    switch (setUR.arguments.length) {
      case 3: {
        document.search.action=setUR.arguments[0];
        document.search.reportno.value=setUR.arguments[1];
        document.search.template.value=setUR.arguments[2];
        break;
      }
      default: {
        if(document.search.ptcnualt==undefined){
          document.search.action="patweb98.pbl";
          document.search.reportno.value="01";
          document.search.template.value="001";
          break;}
        if(document.search.ptcnualt.value!="1"){
          document.search.action="patweb98.pbl";
          document.search.reportno.value="01";
          document.search.template.value="001";
          break;}
          document.search.alternid.value=document.search.urnumber.value;
          document.search.alternid.maxLength=20;
          justifyRight(document.search.alternid);
          checkAlternateID(document.search.alternid.value,
                           document.search.aisearch,document.search.urnumber);
          if(document.search.aisearch.value<"2"){
            document.search.urnumber.maxLength=8;
            justifyRight(document.search.urnumber);
            document.search.action="patweb98.pbl";
            document.search.reportno.value="01";
            document.search.template.value="001";
            break;}
          else {
            document.search.urnumber.value=document.search.alternid.value;
            document.search.action="patweb90.pbl";
            document.search.reportno.value="01";
            break;}
      }
    }
    document.search.srchsnam.disabled=1;
    document.search.srchsnam.value="";
    document.search.srchgnam.disabled=1;
    document.search.srchgnam.value="";
    document.search.srchpsex[0].disabled=1;
    document.search.srchpsex[1].disabled=1;
    document.search.srchpsex[2].disabled=1;
    document.search.srchpdob.disabled=1;
    document.search.srchpdob.value="";
    document.search.srchpage.disabled=1;
    document.search.srchpage.value="";
    document.search.srcharan.disabled=1;
    document.search.srcharan.value="";
    document.search.srchtype.selectedIndex=3;
 } else {
    UpCase(document.search.srchsnam)
    UpCase(document.search.srchgnam)
    document.search.srchsnam.disabled=0;
    document.search.srchgnam.disabled=0;
    document.search.srchpsex[0].disabled=0;
    document.search.srchpsex[1].disabled=0;
    document.search.srchpsex[2].disabled=0;
    document.search.srchpdob.disabled=0;
    document.search.srchpage.disabled=0;
    document.search.srcharan.disabled=0;
    document.search.srchtype.disabled=0;
 }
}
function showPatient(linkURL,gpaccess) {
  if(gpaccess=="1"){
      DFrameLink(linkURL,50,150,650,300);
  } else {
    location.href= linkURL;
  }
}
function init() {
  setUR();
  setDefault();
}
function ProcessSubmit() {
  search.srchsnam.value.replace(/\'/g,"~")
if(!isWhitespace(document.search.admissno.value)) {
  ans=setAdm();
  if(ans==false){
    return false;}
  }
else {
  ans=setUR();
  if (ans==false){
    return false;}
  }
  setBirth(search.srchpdob);
  setMedicare(search.srchmedi);
  return true;
}
function checkbirthdate() {
 if(checkDate(document.search.srchpdob,'Date of Birth')) {
    setBirth(this);
    }
  else {
    document.search.srchpdob.value="          ";
    document.search.srchpdob.focus();
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);">
<!--      onKeyPress=IEKeyPress(); -->
<form name=search method=get action=patweb90.pbl 
 onsubmit='return ProcessSubmit();'>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=024>
<input type=hidden name=norecord value="%PATWEB90.01.032">
<input type=hidden name=redirect value="patweb98.pbl?reportno=1&template=001">
<input type=hidden name=ptcnualt value="%PATWEB90.01.023">
<input type=hidden name=alternid value="">
<input type=hidden name=aisearch value="0">
<input type=hidden name=noaltrow value="1">
<input type=hidden name=dummy value="">
<input type=hidden name=gpaccess value="0">
<input type=hidden name=mrcnlzer value="%STANDARD.01.025.097.168.0.1">

<table align="center" width=100% border=1 cellspacing=0 cellpadding=0
 bgcolor=#CCCCCC>
<tr><td>
<table width=100% border=0 cellpadding=0 cellspacing=0 bgcolor=#CCCCCC>
<tr><td align=center colspan=8 class=HeadingCell>GP Access Patient Search</TD>
<tr><td class=DataLabel>Surname<br>
    <input type=text name=srchsnam size=15 tabindex=1 value="%PATWEB90.01.003"
     onblur="UpCaseSearch(this);TextBlurHandler(this);"></td> 
    <td colspan=2 class=DataLabel>Given Name<br>
    <input type=text name=srchgnam size=15 tabindex=2 value="%PATWEB90.01.004"
     onblur="UpCaseSearch(this);TextBlurHandler(this);"></td>
    <td class=DataLabel>U/R Number<br>
    <input type=text name=urnumber maxlength=8 size=10 tabindex=3
     onblur="setUR();"></td>
    <input type=hidden name=srchmedi>
    <td class=DataLabel>
    </td>
    <td rowspan=2>
    <input type=radio name=srchpsex value=" " checked tabindex=9> All <br>
    <input type=radio name=srchpsex value="M"> Male <br>
    <input type=radio name=srchpsex value="F"> Female</td>
    <td align=center valign=middle rowspan=2>
    <input type=submit value=Search class="button" tabindex=10 ><br>
    <input type=reset value=Reset class="button" 
     onclick='location.href="patweb90.pbl?reportno=1&template=024"'>
    </td></tr>
<tr><td class=DataLabel>Date of Birth<br>
       <input type="text" size="12" name="srchpdob" tabindex=5
        onchange="checkbirthdate();"></td>
    <td><i>Age</i><br>
       <input type=text name=srchpage class="JustifyLeft Integer" 
         size=4 tabindex=6 title="Age"></td>
    <td class=DataLabel>Range<br>
       <select name=srcharan tabindex=7 > 
       <option value=2 selected>2 years</option>
       <option value=4>4 years</option>
       <option value=6>6 years</option>
       <option value=8>8 years</option>
       <option value=10>10 years</option>
       </select></td>
    <td class=DataLabel>Search Type<br>
       <select name=srchtype tabindex=8 onchange="checkType();">
       <option value=1>Surname</option>
       <option value=2>Sound-Ex</option>
       <option value=3>Date of Birth</option>
       <option value=4>U/R Number</option>
       </select></td>
       <input type=hidden name=admissno></td>
</tr>
</table>
%PATWEB90.01.012.300.0.patweb98.01.001
<table width=100% border=1 cellspacing=0 cellpadding=0>
  <tr><td>
  <table width=100% bgcolor=#CCCCCC><tr>
     <td align=center>
     <input type=button value="<< Previous" class="button"
      onclick="location.href='%PATWEB90.01.002.024';"></td>
     <td align=center width=20%><div id=RegOption></div></td>
     <td align=center>
     <input type=button value="Next >>" class="button"
     onclick="location.href='%PATWEB90.01.001.024';">
  </td></tr>
  </table>
</td></tr>
</table>
</td></tr>
</table>
</form>
<div id=YesReg style="display:none">
<!--
    <input type=button value="New Registration" class="button"
      onclick="newRegistration()">
    <input type=button value="Temp Registration" class="button"
      onclick="TemporaryRegistration()">
-->
</div>
<form name=Registration method=get action=patweb89.pbl>
<input type=hidden name=reportno value=05>
<input type=hidden name=template value=001>
<input type=hidden name=srchsnam value="">
<input type=hidden name=srchgnam value="">
<input type=hidden name=srchpdob value="">
<input type=hidden name=srchpage value="">
<input type=hidden name=srchpsex value="">
<input type=hidden name=temporar value="0">
</form>
<form name=NewRegistration method=get action=patweb89.pbl>
<input type=hidden name=reportno value=05>
<input type=hidden name=template value=004>
<input type=hidden name=srchsnam value="">
<input type=hidden name=srchgnam value="">
<input type=hidden name=srchpdob value="">
<input type=hidden name=srchpage value="">
<input type=hidden name=srchpsex value="">
<input type=hidden name=temporar value="1">
</form>
<form name=linkForm action=patweb98.pbl method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=1>
<input type=hidden name=urnumber value="">
<input type=hidden name=admissno value="">
</form>
<script type="text/javascript">
function setDefault() {
  if(document.search.ptcnualt.value=="1"){
    document.search.urnumber.maxLength=20;
    document.search.urnumber.size=20;
  }
  if (document.all.BodyDivision!=undefined) {
     BodyDivision.style.height=document.body.clientHeight - 40 -
                               BodyDivision.offsetTop
  }
   document.search.srchpage.value="%PATWEB90.01.006";
//   document.search.srchmedi.value="%PATWEB90.01.016";
   document.search.srchpdob.value="%PATWEB90.01.007";
   for (var i =0 ; i < document.search.srcharan.length; i++) {
     if (document.search.srcharan.options[i].value==trim("%PATWEB90.01.008")) {
         document.search.srcharan.selectedIndex=i } };

   for (var i =0 ; i < document.search.srchtype.length; i++) {
     if (document.search.srchtype.options[i].value=="%PATWEB90.01.009.2") {
         document.search.srchtype.selectedIndex=i; 
         checkType(); }  };

   for (var i =0 ; i < document.search.srchpsex.length; i++) {
     if (document.search.srchpsex[i].value=="%PATWEB90.01.005") {
         document.search.srchpsex[i].checked="1" } };

  if (isWhitespace(document.search.srchsnam.value)) {
    RegOption.innerHTML=""; } 
  else {
    RegOption.innerHTML=YesReg.innerHTML; } 
}
</script>
