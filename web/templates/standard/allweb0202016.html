<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
function caseTeamOnLoad()
{
  var table = document.getElementById("caseTeamRow");
  
  //passing the hcp code as a query string from parent frame
  var hcpCodeString = getQueryString("hcpCode");
  var hcpCode = new Object();

  hcpCode.value = hcpCodeString;

  returnObject = new Object();//remote script server return server
  var arr = new Array(); //temp array

  //passing the referral date as a query string from parent frame
  var caseReferralDateString = getQueryString("valdrdat");
  var caseReferralDate = new Object();
  caseReferralDate.value = "";
  caseReferralDate.value = caseReferralDateString;

  //set object properties
  returnObject.value = "";
  returnObject.name = "";

  //remote script call to patweb80 server
  validateCaseTeam(92,hcpCode,returnObject,caseReferralDate);

  arr = returnObject.value.split("|");

  for(var i = 0; i < arr.length - 1; i++)
  {
     var tr = document.createElement("tr");

     var descriptionCol = document.createElement("td");
     var codeCol = document.createElement("td");

     var codeText = document.createElement("span");
     var descriptionText = document.createElement("span");

     var link = document.createElement("a");
     
     descriptionText.innerText = (arr[i].split(":"))[1] == 
                           undefined ? " " : trim((arr[i].split(":"))[1]);

     codeText.innerText = (arr[i].split(":"))[0] == 
                           undefined ? " " : trim((arr[i].split(":"))[0]);

     link.href="javascript:setResponsibleHCP('"+codeText.innerText+"');";

     descriptionCol.appendChild(descriptionText);
     link.appendChild(codeText);
     codeCol.appendChild(link);

     tr.appendChild(codeCol);
     tr.appendChild(descriptionCol);

     table.appendChild(tr);
  }
}

function setResponsibleHCP(caseCode)
{
//  var caseTeam = parent.document.getElementById("alref087");
//  var caseTeamDescription = parent.document.getElementById("n_alref087");

  var caseTeam = parent.ReturnCode;
  var caseTeamDescription = parent.ReturnName;

  caseTeam.value = caseCode;

  validateCode2(7,caseTeam,caseTeamDescription);
  caseTeam.select();
  DFrameExit();
}

</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);caseTeamOnLoad();">
<span class=DFrameTitleBar>
<img border=0 align=right src="../images/ExitIcon.gif" onclick="DFrameExit();">
 Case Team Select  </span>
<div id=PageBodySection style="overflow: auto;">
<form name=UpdateForm onsubmit='return validateMandatory(this)' style="margin:0"
            action="allweb02.pbl" method=post>
<input type=hidden name=reportno value="2">
<input type=hidden name=updatety value="U">
<input type=hidden name=urnumber value="%ALLWEB02.02.003">
<input type=hidden name=admissno value="%ALLWEB02.02.081">
<input type=hidden name=deptcode value="%ALLWEB02.02.125.1">
<input type=hidden name=redirect value="allweb02.pbl?reportno=2&template=3">
<input type=hidden name=dummy>
<input type=hidden name=nextpage value="5">
<input type=hidden name=ptcnueoc value="%ALLWEB02.02.503">
<input type=hidden name=alref083 value="">
<input type=hidden name=wbsesite value="%STANDARD.01.023">
<input type=hidden name=hcpprovno value="%ALLWEB02.02.122.2">
<input type=hidden name=defctype value="%ALLWEB02.02.167.1">
<input type=hidden name=deftclid value="%ALLWEB02.02.188.1">
<input type=hidden name=override value="2">
<input type=hidden name=pmpmi059 value="%ALLWEB02.02.684.001">
<input type=hidden name=pmpmi060 value="%ALLWEB02.02.685.001">
<input type=hidden name=pmpmi061 value="%ALLWEB02.02.661">
<input type=hidden name=catAO value="AO">
<input type=hidden name=d_alref141 value="%ALLWEB02.02.199.012.1">


<table border="1" width="100%" cellspacing="0" cellpadding="0">
<thead>
<tr>
  <td class="HeadingCell" width="25%">Case Team Code</td>
  <td class="HeadingCell">Case Team Description</td>
</tr>
</thead>
<tbody id="caseTeamRow">
</tbody>
</table>
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td>&nbsp;</td></tr>
<tr align="center">
 <td><input type="button" value="Close" class="button" onclick="DFrameExit();"/>
 </td>
</tr>
</table>
