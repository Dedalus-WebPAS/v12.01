<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src=../js/TableSort.js></script>
<script type="text/javascript">
//----------------------------------------------------------------------------
// Columns Available
//  0 - HTML Link
//  1 - Date
//  2 - U/R
//  3 - Visit Number
//  4 - Patient Name
//  5 - Surgeon
//  6 - Patient folder
//  7 - Patient folder link
//  8 - Expected start time
//---------------------------------------------------------------------------
function InitTable(TableView) {
  f = document.SelectPeriod;
  
  switch (TableView) {
    case 0:
      t = new Table(1,0,2,"100%","center",35,35);
      t.addColumn("Name","String",1,1,"left","","0",90)
      t.addColumn("Visit Number","String",2,2,"left","","",30)
      t.addColumn("Admission Date","DateTime",3,3,"left","","",50)
      t.addColumn("Discharge Date","Date",4,4,"left","","",40)
      t.addColumn("Doctor","String",5,5,"left","","",80)
      t.addColumn("Ward","String",6,6,"left","","",80)
      t.addColumn("Outcome Measure","String",7,7,"left","","",50)
      t.addColumn("Status","String",8,8,"left","","",50)
      AddTableRows()
      TableOutput(1,1);
      break;
  }

  f.showflag.value = "0";
}
//======================================================================
// Standard Date Select View Functions
//  SelectView(ViewType)   0=by day 1 =by week 2=by month
//======================================================================
function SelectView(ViewType) {
  document.SelectPeriod.viewtype.value=ViewType
  if (document.SelectPeriod.lastdate!=undefined) {
    document.SelectPeriod.lastdate.selectedIndex = -1;
    document.SelectPeriod.lastdate.value="";
  }

  if (document.SelectPeriod.vyearmth!=undefined) {
    document.SelectPeriod.vyearmth.selectedIndex = -1;
    document.SelectPeriod.vyearmth.value="";
  }

  document.SelectPeriod.submit();
}
function AddHONOS(urn,adn,uniq,honostype){
  var temp="002";
  hontype=honostype.substr(3,1);
  if(hontype=="C"){
     temp="004";}
  if(hontype=="L"){
     temp="006";}
  if(hontype=="S"){
     temp="018";}
  if(hontype=="M"){
     temp="022";}
  linkurl="allweb06.pbl?reportno=04&template=" + temp +
           "&urnumber=" + urn.replace(/ /g,"+") +
           "&admissno=" + adn.replace(/ /g,"+") +
           "&honostyp=" + honostype.replace(/ /g,"+");
  Left=(document.body.clientWidth-1000)/2
  DFrameLink(linkurl,100,Left,1000,680);
}
function UpdateHONOS(urn,adn,uniq,honostype) {
  var temp="003";
  hontype=honostype.substr(3,1);
  if(hontype=="C"){
     temp="005";}
  if(hontype=="L"){
     temp="007";}
  if(hontype=="S"){
     temp="019";}
  if(hontype=="M"){
     temp="023";}
  linkurl="allweb06.pbl?reportno=04&template=" + temp +
           "&urnumber=" + urn.replace(/ /g,"+") +
           "&admissno=" + adn.replace(/ /g,"+") +
           "&mhhon001=" + adn.replace(/ /g,"+") +
           "&mhhon002=" + uniq.replace(/ /g,"+")
  Left=(document.body.clientWidth-1000)/2;
  DFrameLink(linkurl,100,Left,1000,680);
}
function UpdateHONOSNew(urn,adn,uniq,honostype) {
  linkurl="allweb06.pbl?reportno=04&template=027" +
           "&urnumber=" + urn.replace(/ /g,"+") +
           "&admissno=" + adn.replace(/ /g,"+") +
           "&mhhon001=" + adn.replace(/ /g,"+") +
           "&mhhon002=" + uniq.replace(/ /g,"+")
  Left=(document.body.clientWidth-1000)/2;
  DFrameLink(linkurl,100,Left,1000,680);
}
function Refresh() {
  f = document.SelectPeriod;
  i = f.d_filtoptn.selectedIndex; 
  f.filtoptn.value = f.d_filtoptn.options[i].value;
  i = f.d_filtward.selectedIndex;
  f.filtward.value = f.d_filtward.options[i].value; 
  f.filtstat.value = f.d_filtstat.value;

  f.submit();
}
//======================================================================
// 0=by day 1 =by week 2=by month
//======================================================================
function SetView(ViewType) {
  document.SelectPeriod.viewtype.value=ViewType
  if (document.SelectPeriod.lastdate!=undefined) {
    document.SelectPeriod.lastdate.selectedIndex = -1;
    document.SelectPeriod.lastdate.value="";
  }

  if (document.SelectPeriod.vyearmth!=undefined) {
    document.SelectPeriod.vyearmth.selectedIndex = -1;
    document.SelectPeriod.vyearmth.value="";
  }
}
function DisableDischargeDate() {
  f = document.SelectPeriod;
  f.filtoptn.value = f.d_filtoptn.value;
  if (f.filtoptn.value == "C") {
    document.getElementById('DschDateDet').style.display = "none";
  }
  else {
    document.getElementById('DschDateDet').style.display = "";
  }
}
function OptionChanged() {
  f = document.SelectPeriod;
  f.filtoptn.value = f.d_filtoptn.value;
  if (f.filtoptn.value == "C") {
    f.viewtype.value = 0;
    SetView(0);
    document.getElementById('DschDateDet').style.display = "none";
    f.submit();
  }
  else {
    document.getElementById('DschDateDet').style.display = "";
    f.viewtype.value = 0;
    SelectView(0);
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);
              InitTable(0);">
<div id=HeadingSection></div>
<form name=SelectPeriod action=allweb06.pbl method=get style="margin:0">
<input type=hidden name=reportno value=4>
<input type=hidden name=template value=26>
<input type=hidden name=viewtype value="%ALLWEB06.04.203">
<input type=hidden name=wbsesite value="%STANDARD.01.023">
<input type=hidden name=wbseclid value="%STANDARD.01.026">
<input type=hidden name=showflag value="%ALLWEB06.04.227">
<input type=hidden name=wbseward value="%ALLWEB06.04.223">
<input type=hidden name=deftflag value=1>
<input type=hidden name=filtoptn value="%ALLWEB06.04.228">
<input type=hidden name=filtward value="%ALLWEB06.04.229">
<input type=hidden name=filtstat value="%ALLWEB06.04.230">

<table width=100% cellspacing=0 border=0 bgcolor=#cccccc>
<tr>
  <td width=20%>Option &nbsp;&nbsp;
    <select name=d_filtoptn onchange="OptionChanged();">
      <option value="C">Current</option>
      <option value="D">Discharge</option>
    </select>
  </td>
  <td width=20% id=DschDateDet>Discharge Date &nbsp;&nbsp;
    <input type=button value="<<" class=SmallButton
     onclick='location.href="%ALLWEB06.04.225"'>
    %ALLWEB06.04.209 
    <input type=button value=">>" class=SmallButton
     onclick='location.href="%ALLWEB06.04.224"'>
    <a href='javascript:SelectDateFrame();'>
    <img src="../images/DateLookup.gif" class=Icon
     alt="Select Date"></a>
    <a href='javascript:SelectView("0");'>
    <img src=../images/DayIcon.gif class=Icon
     alt="View Today"></a>
    <a href='javascript:SelectView("1");'>
    <img src=../images/WeekIcon.gif class=Icon
     alt="View This Week"></a>
    <a href='javascript:SelectView("2");'>
    <img src=../images/MonthIcon.gif class=Icon
     alt="View This Month"></a>
  </td>
  <td width=20%>Ward &nbsp;&nbsp;
    <select name=d_filtward onchange="Refresh();" >
     <option value="">All</option>
     %ALLWEB06.04.222 
    </select>
  </td>
  <td width=20%>Status &nbsp;&nbsp;
    <select name=d_filtstat onchange="Refresh();">
      <option value="I">Incomplete/Review</option>
      <option value="N">New</option>
    </select>
  </td>
</tr>
</table>
</form>

<div id=TableLocation></div>

<form name=PatientLinks action=allweb06.pbl method=get style="margin:0">
<input type=hidden name=reportno value=4>
<input type=hidden name=template value=026>
<input type=hidden name=urnumber>
<input type=hidden name=admissno>
</form>

<script type="text/javascript">
function AddTableRows() {
%ALLWEB06.04.226
}
</script>
<script type="text/javascript">
f = document.SelectPeriod;
for (i=0; i < f.d_filtstat.options.length; i++) {
  if(f.d_filtstat.options[i].value == f.filtstat.value) {
    f.d_filtstat.selectedIndex = i;
    break;
  }
}

for (i = 0; i < f.d_filtoptn.length; i++) {
  if (f.d_filtoptn.options[i].value == f.filtoptn.value) {
    f.d_filtoptn.selectedIndex = i
    break;
  }
}

DisableDischargeDate();
</script>

