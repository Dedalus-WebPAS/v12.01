<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
function init() {
  if(document.NutritianPopUp.nonxtpat.value=="1") {
     document.NutritianPopUp.nextpatn.value=" ";  // No redirect
  }
  var txtArea = document.getElementById('textacmt');
  if (!txtArea || txtArea == undefined)
    return;

  var arrCmntLines = new Array();
  var sComments = "";
  var nCmntLines = 5;  // because we only store 5 comment lines in our file

  for (var i=0; i < nCmntLines; i++) {
    arrCmntLines[i] = document.getElementById('pmnut0' + (30+i+1) + '').value;

    if (!isWhitespace(arrCmntLines[i])) {
      sComments = sComments + trim(arrCmntLines[i]);  // trim trailing spaces
    }

    if (i < (nCmntLines-1)) {
      // not he last line
      sComments = sComments + "\n";
    }
  }

  if (!IEBrowser) {
    txtArea.style.resize = "none";
  }

  if (!isWhitespace(sComments)) {
    txtArea.value = sComments;
  }
}

function SplitComments() {
  var txtArea = document.getElementById('textacmt');
  if (!txtArea || txtArea == undefined)
    return;

  document.getElementById('pmnut031').value="";
  document.getElementById('pmnut032').value="";
  document.getElementById('pmnut033').value="";
  document.getElementById('pmnut034').value="";
  document.getElementById('pmnut035').value="";

  var lines = txtArea.value.split(/\r?\n/);

  for (var i = 0; i < 5; i++) {
    if (lines[i]) {
      document.getElementById('pmnut0' + (30+i+1) + '').value = lines[i];
    }
    else {
      document.getElementById('pmnut0' + (30+i+1) + '').value = "";
    }
  }
}
function clrMeals(code1,code2,code3,code4,code5) {
  code1.value="   ";
  code2.value="   ";
  code3.value="   ";
  code4.value="   ";
  code5.value="   ";
}
function DefaultMeal1(code1) {
  if (isWhitespace(document.getElementById('ctcol001').value)){
    document.getElementById('ctcol001').value=code1.value;}
  if (isWhitespace(document.getElementById('ctcod001').value)){
    document.getElementById('ctcod001').value=code1.value;}
}
function DefaultMeal2(code2) {
  if (isWhitespace(document.getElementById('ctcol002').value)){
    document.getElementById('ctcol002').value=code2.value;}
  if (isWhitespace(document.getElementById('ctcod002').value)){
    document.getElementById('ctcod002').value=code2.value;}
}
function DefaultMeal3(code3) {
  if (isWhitespace(document.getElementById('ctcol003').value)){
    document.getElementById('ctcol003').value=code3.value;}
  if (isWhitespace(document.getElementById('ctcod003').value)){
    document.getElementById('ctcod003').value=code3.value;}
}
function DefaultMeal4(code4) {
  if (isWhitespace(document.getElementById('ctcol004').value)){
    document.getElementById('ctcol004').value=code4.value;}
  if (isWhitespace(document.getElementById('ctcod004').value)){
    document.getElementById('ctcod004').value=code4.value;}
}
function DefaultMeal5(code5) {
  if (isWhitespace(document.getElementById('ctcol005').value)){
    document.getElementById('ctcol005').value=code5.value;}
  if (isWhitespace(document.getElementById('ctcod005').value)){
    document.getElementById('ctcod005').value=code5.value;}
}
function SupplementLink() {
//userhosp=GetCookieData("IBAUserHosp")
  userhosp=ChefMaxHosp;
  linkurl=ExternalSupplementsURL +
        "?PatientCode=" + trim(document.getElementById('urnumber').value) +
        "&UserName=" + trim(document.getElementById('wbselogn').value) +
        "&Site=" + userhosp
  window.open(linkurl);
}
function CheckTextLimit(TextArea) {
  if (!LimitText(TextArea,5,200)) {
    TextArea.onblur = null;  // clear to prevent infinite loop with alerts

    window.setTimeout(function () {
      TextArea.onblur = function() {  // restore onblur handler
        ValidateEscapeChars(TextArea);
        ValidateTextAreaLimits(TextArea,200,5,40);
      }
    },100);
  }
}
function JoinTextLines(TextArea) {
  if (!isWhitespace(TextArea.value)) {
    // remove line breaks
    TextArea.value = TextArea.value.replace(/\r?\n/gm," ");
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);document.NutritianPopUp.ctcob001.focus();">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExitRefresh();">
Update Diet - %PATWEB98.04.002
</span>
<form name=NutritianPopUp method=post action=patweb93.pbl style="margin:0">
<input type=hidden name=reportno value="8">
<input type=hidden name=template value="1">
<input type=hidden name=urnumber id=urnumber value="%PATWEB98.04.003">
<input type=hidden name=admissno id=admissno value="%PATWEB98.04.081">
<input type=hidden name=pmnut001 value="%PATWEB98.04.081">
<input type=hidden name=pmnut002 value="%PATWEB98.04.305">
<input type=hidden name=viewtype value="%PATWEB98.04.304">
<input type=hidden name=nextpatn value="patweb98.pbl?reportno=04&template=005">
<input type=hidden name=pmnut031 id=pmnut031 value="%PATWEB98.04.221">
<input type=hidden name=pmnut032 id=pmnut032 value="%PATWEB98.04.222">
<input type=hidden name=pmnut033 id=pmnut033 value="%PATWEB98.04.223">
<input type=hidden name=pmnut034 id=pmnut034 value="%PATWEB98.04.224">
<input type=hidden name=pmnut035 id=pmnut035 value="%PATWEB98.04.225">
<input type=hidden name=nonxtpat value="%PATWEB98.04.306">
<input type=hidden name=wbselogn id=wbselogn value="%STANDARD.01.043">
<input type=hidden name=ptcnuesd id=ptcnuesd
       value="%STANDARD.01.025.123.210.0.1">
<input type=hidden name=updatet2 value=1>

<table border=0 align=center width=30% cellspacing=0>
<tr>
  <td colspan=2 align=left nowrap>
%PATWEB98.04.308
  </td>
</tr>
</table>

<table border=0 align=center width=90% cellspacing=0>
<tr><td colspan=8>&nbsp;</td></tr>
<tr><td>&nbsp;</td><td class=DataField>Breakfast</td>
    <td>&nbsp;</td><td class=DataField>Lunch</td>
    <td>&nbsp;</td><td class=DataField>Dinner</td>
    <td class=DataLabel>Fasting</td>
    <td align=left><input type=checkbox name=pmnut041 tabindex=4 value="1"></td>
</tr>

<tr>
    <td class=DataLabel>Diet 1</td>
    <td><select name=ctcob001 id=ctcob001 tabindex=1
                onblur="DefaultMeal1(this)">
          <option value="   "></option>
           %PATWEB98.04.605.1.2
          </select></td>
    <td class=DataLabel>Diet 1</td>
    <td><select name=ctcol001 id=ctcol001 tabindex=2>
          <option value="   "></option>
           %PATWEB98.04.605.3.2
          </select></td>
    <td class=DataLabel>Diet 1</td>
    <td><select name=ctcod001 id=ctcod001 tabindex=3>
          <option value="   "></option>
           %PATWEB98.04.605.5.2
          </select></td>
    <td class=DataLabel>Menu/Assistance</td>
    <td><select name=pmnut012 tabindex=4>
           <option value=" "></option>
            %PATWEB98.04.209.2
        </select></td>
</tr>

<tr>
    <td class=DataLabel>Diet 2</td>
    <td><select name=ctcob002 id=ctcob002 tabindex=1
                onblur="DefaultMeal2(this)">
                <option value="   "></option>
                 %PATWEB98.04.613.1.2
        </select></td>
    <td class=DataLabel>Diet 2</td>
    <td><select name=ctcol002 id=ctcol002 tabindex=2>
                <option value="   "></option>
                 %PATWEB98.04.613.3.2
        </select></td>
    <td class=DataLabel>Diet 2</td>
    <td><select name=ctcod002 id=ctcod002 tabindex=3>
                <option value="   "></option>
                 %PATWEB98.04.613.5.2
        </select></td>
    <td class=DataLabel>Last Update</td>
    <td><input type=text class=readonly readonly size=20 name=pmnut004
               value="%PATWEB98.04.203"></td>
</tr>

<tr>
<td class=DataLabel>Diet 3</td>
    <td><select name=ctcob003 id=ctcob003 tabindex=1
                onblur="DefaultMeal3(this)">
                <option value="   "></option>
                 %PATWEB98.04.614.1.2
        </select></td>
<td class=DataLabel>Diet 3</td>
    <td><select name=ctcol003 id=ctcol003 tabindex=2>
                <option value="   "></option>
                 %PATWEB98.04.614.3.2
        </select></td>
<td class=DataLabel>Diet 3</td>
    <td><select name=ctcod003 id=ctcod003 tabindex=3>
                <option value="   "></option>
                 %PATWEB98.04.614.5.2
        </select></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>

<tr>
<td class=DataLabel>Diet 4</td>
    <td><select name=ctcob004 id=ctcob004 tabindex=1
                onblur="DefaultMeal4(this)">
                <option value="   "></option>
                 %PATWEB98.04.615.1.2
        </select></td>
<td class=DataLabel>Diet 4</td>
    <td><select name=ctcol004 id=ctcol004 tabindex=2>
                <option value="   "></option>
                 %PATWEB98.04.615.3.2
        </select></td>
<td class=DataLabel>Diet 4</td>
    <td><select name=ctcod004 id=ctcod004 tabindex=3>
                <option value="   "></option>
                 %PATWEB98.04.615.5.2
        </select></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>

<tr>
<td class=DataLabel>Diet 5</td>
    <td><select name=ctcob005 id=ctcob005 tabindex=1
                onblur="DefaultMeal5(this)">
                <option value="   "></option>
                 %PATWEB98.04.616.1.2
        </select></td>
<td class=DataLabel>Diet 5</td>
    <td><select name=ctcol005 id=ctcol005 tabindex=2>
                <option value="   "></option>
                 %PATWEB98.04.616.3.2
        </select></td>
<td class=DataLabel>Diet 5</td>
    <td><select name=ctcod005 id=ctcod005 tabindex=3>
                <option value="   "></option>
                 %PATWEB98.04.616.5.2
        </select></td>
<td><span id=InsertSupButton style="display: none">
    <input class="button" type=button value="Supplements" tabindex=4
     onclick="SupplementLink();"></span></td>
<td>&nbsp;</td>
</tr>

<tr>
<td>&nbsp;</td>
<td class=DataLabel>Erase meal type
<img src="../images/erase.gif" class=Icon
     onclick="clrMeals(NutritianPopUp.ctcob001,
                       NutritianPopUp.ctcob002,
                       NutritianPopUp.ctcob003,
                       NutritianPopUp.ctcob004,
                       NutritianPopUp.ctcob005);"></td>
<td>&nbsp;</td>
<td class=DataLabel>Erase meal type
<img src="../images/erase.gif" class=Icon
     onclick="clrMeals(NutritianPopUp.ctcol001,
                       NutritianPopUp.ctcol002,
                       NutritianPopUp.ctcol003,
                       NutritianPopUp.ctcol004,
                       NutritianPopUp.ctcol005);"></td>
<td>&nbsp;</td>
<td class=DataLabel>Erase meal type
<img src="../images/erase.gif" class=Icon
     onclick="clrMeals(NutritianPopUp.ctcod001,
                       NutritianPopUp.ctcod002,
                       NutritianPopUp.ctcod003,
                       NutritianPopUp.ctcod004,
                       NutritianPopUp.ctcod005);"></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>

</table>

<table width="90%" align=center>
<tr><td class=DataLabel>Dietitian</td>
    <td><input type="text" size=12 maxlength=10 name="pmnut010" 
               value="%PATWEB98.04.207.1" tabindex=6
               onblur="validateCode(18,
                                    NutritianPopUp.pmnut010,
                                    NutritianPopUp.doctname)">
        <input type="text" size=40 name="doctname"
               value="%PATWEB98.04.207.0">
        <img src="../images/SearchIcon.gif" class=Icon
             onclick="HCPSearchFrame(NutritianPopUp.pmnut010,
                                     NutritianPopUp.doctname)"></td></tr>
<tr><td class=DataLabel>Comment</td>
    <td>
     <textarea name=textacmt id=textacmt title="Comment"
      rows=5 cols=40 tabindex=10
      onkeydown="CheckTextLimit(this);" onfocus="JoinTextLines(this);"
      onblur="ValidateEscapeChars(this);ValidateTextAreaLimits(this,200,5,40);">
     </textarea>
    </td>
</tr>
<tr><td></td></tr>
</table>

<span id=InsertSupFields style="display: none">
<table width="90%" align=center>
  <tr><td class=HeadingCell colspan=2>Supplements-Morning</td>
      <td class=HeadingCell colspan=2>Supplements-Afternoon</td></tr>
  <tr><td>Breakfast</td>
    <td><input type=text name=pmnut042 title="Breakfast" tabindex=20
           value="%PATWEB98.04.232" size=42 maxlength=40></td>
      <td>Afternoon Tea</td>
      <td><input type=text name=pmnut045 title="Afternoon Tea" tabindex=23
           value="%PATWEB98.04.235" size=42 maxlength=40></td></tr>
  <tr><td>Morning Tea</td>
      <td><input type=text name=pmnut043 title="Morning Tea" tabindex=21
           value="%PATWEB98.04.233" size=42 maxlength=40></td>
      <td>Dinner</td>
      <td><input type=text name=pmnut046 title="Dinner" tabindex=24
           value="%PATWEB98.04.236" size=42 maxlength=40></td></tr>
  <tr><td>Lunch</td>
      <td><input type=text name=pmnut044 title="Lunch" tabindex=22
           value="%PATWEB98.04.234" size=42 maxlength=40></td>
      <td>Supper</td>
      <td><input type=text name=pmnut047 title="Supper" tabindex=25
           value="%PATWEB98.04.237" size=42 maxlength=40></td></tr>
<tr><td></td></tr>
</table>
</span>

<table border=0 align=center width=90% cellspacing=0>
<tr valign=bottom><td align=center colspan=2>
    <input class=button type=button value="Update" tabindex=31
     id=UpdButton
     onclick="tempDisable(this);
              SplitComments();
              document.NutritianPopUp.submit();">
    <input type=button class=button value="Cancel" tabindex=32
        onclick="DFrameCloseRefresh();"></td></tr>
</table>
</form>
<script type="text/javascript">
 if ("%PATWEB98.04.227"=="1")
       {
   document.NutritianPopUp.pmnut041.checked=1;
 }
 if(document.NutritianPopUp.nonxtpat.value=="1") {
     document.NutritianPopUp.nextpatn.value=" ";  // No redirect
 }
  if(document.getElementById('ptcnuesd').value==1) {
    InsertSupButton.style.display="";
    InsertSupFields.style.display="none";        // using external supplements
  } else {
    InsertSupButton.style.display="none";
    InsertSupFields.style.display="";
  }
</script>
