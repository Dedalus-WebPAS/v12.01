<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome"    content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"    content="true">
<script type="text/javascript" src="../js/patweb69.js"></script>
<script type="text/javascript">
function CheckUR() {
if (!isWhitespace(search.urnumber.value)) {
  validateCode(8,search.urnumber,search.patfname);
  parent.LinkForm.urnumber.value=search.urnumber.value;
  parent.LinkForm.submit()
  DFrameExit()
 }
}
function updateParent(fpatname,urnumber,admissno) {

  var inputbkreq001 = document.createElement('input');
  var inputbkreq004 = document.createElement('input');
  var inputupdttype = document.createElement('input');
  var inputredirect = document.createElement('input');
  var inputnextpage = document.createElement('input');

  if (isWhitespace(document.search.requestn.value)) {
    parent.LinkForm.urnumber.value=urnumber;
    parent.LinkForm.submit()
  } else {
    parent.LinkForm.action="oprweb01.pbl";
    parent.LinkForm.reportno.value=22;
    parent.LinkForm.template.value=8;
    parent.LinkForm.urnumber.value=urnumber;
    
    if (parent.LinkForm.bkreq001==undefined) {
      inputbkreq001.type = 'hidden';
      inputbkreq001.name = 'bkreq001'; 
      inputbkreq001.value = urnumber;
      parent.LinkForm.appendChild(inputbkreq001);
    } else {
      parent.LinkForm.bkreq001.value=urnumber;
    }

    if (parent.LinkForm.bkreq004==undefined) {
      inputbkreq004.type = 'hidden';
      inputbkreq004.name = 'bkreq004';
      inputbkreq004.value = document.search.requestn.value;
      parent.LinkForm.appendChild(inputbkreq004);
    } else {
      parent.LinkForm.bkreq004.value=document.search.requestn.value;
    }

    if (parent.LinkForm.updttype==undefined) {
      inputupdttype.type = 'hidden';
      inputupdttype.name = 'updttype';
      inputupdttype.value = 'L';
      parent.LinkForm.appendChild(inputupdttype);
    } else {
      parent.LinkForm.updttype.value='L';
    }

    if (parent.LinkForm.redirect==undefined) {
      inputredirect.type = 'hidden';
      inputredirect.name = 'redirect';
      inputredirect.value ='oprweb01.pbl?reportno=22&template=008' +
                           '&urnumber=' + urnumber.replace(/ /g,"+") +
                           '&requestn=' + 
                           document.search.requestn.value.replace(/ /g,"+");
      parent.LinkForm.appendChild(inputredirect);
    } else {
      parent.LinkForm.redirect.value='oprweb01.pbl?reportno=22&template=008' +
                           '&urnumber=' + urnumber.replace(/ /g,"+") +
                           '&requestn=' +
                           document.search.requestn.value.replace(/ /g,"+");
    }

    if (parent.LinkForm.nextpage==undefined) {
      inputnextpage.type = 'hidden';
      inputnextpage.setAttribute("name","nextpage");
      inputnextpage.value = '1';
      parent.LinkForm.appendChild(inputnextpage);
    } else {
      parent.LinkForm.nextpage.value='1';
    }

    SetCookie('TheatreRequestRedirect',
                              document.search.requestr.value); 

    parent.LinkForm.submit()

  }
  DFrameExit()
}
function NewUR(admissno) {
  reply=confirm("A new Patient Master Record will be" +
                " created for this zero U/R patient. Proceed? ");
  if (reply) {
     location.href="emrweb02.pbl?reportno=1&template=102&admissno=" + admissno;
   }
}
function newreg(){
  parent.Registration.srchsnam.value=document.search.srchsnam.value;
  parent.Registration.srchgnam.value=document.search.srchgnam.value;
  parent.Registration.srchpage.value=document.search.srchpage.value;
  parent.Registration.srchpdob.value=document.search.srchpdob.value;
  for (var i =0 ; i < document.search.srchpsex.length; i++) {
    if (document.search.srchpsex[i].checked=="1" ) {
      parent.Registration.srchpsex.value=document.search.srchpsex[i].value;
    }
  }
  parent.Registration.submit()
  DFrameExit()
}
function TempReg(){
  parent.NewRegistration.srchsnam.value=document.search.srchsnam.value;
  parent.NewRegistration.srchgnam.value=document.search.srchgnam.value;
  parent.NewRegistration.srchpage.value=document.search.srchpage.value;
  parent.NewRegistration.srchpdob.value=document.search.srchpdob.value;
  for (var i =0 ; i < document.search.srchpsex.length; i++) {
    if (document.search.srchpsex[i].checked=="1" ) {
      parent.NewRegistration.srchpsex.value=document.search.srchpsex[i].value;
    }
  }
  parent.NewRegistration.submit()
  DFrameExit()
}
function ProcessSubmit() {
  var p = document.search;
  if (p.ptcnuepm.value == "1") {
    p.showblhd.value = "1";  // show LHD search button on submit return
  }

  p.srchsnam.value.replace(/\'/g,"~")
  setUR();
  p.template.value="201";
  if (!isWhitespace(p.urnumber.value)) {
    CheckUR();
    return false;
  } else {
    checkDate(p.srchpdob,'Date of Birth');
    setBirth(p.srchpdob);
    setMedicare(p.srchmedi);
    return true;
  }
}
function GetRequestCookie() {
  if (GetCookieData("TheatreRequestNumber")!="unknown") {
    document.search.requestn.value=GetCookieData("TheatreRequestNumber");
  }
  ExpireCookiePath("TheatreRequestNumber");


  if (GetCookieData("TheatreRequestRedirect")!="unknown") {
    document.search.requestr.value=GetCookieData("TheatreRequestRedirect");
  }
  ExpireCookiePath("TheatreRequestRedirect");
} 
function SetExtendedTheatreSearchVariable() {
  f = document.search;
  f.extnsrch.value = "0";
  if (VariableNameExists('ExtendedTheatreSearch')) {
    if (ExtendedTheatreSearch == true) {
      f.extnsrch.value = "1";
    }
  }
} 
</script>
<script type="text/javascript" src="../js/patweb90.js">
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);setUR();setTimeout('setDefault()',100);
              checkType();GetRequestCookie();">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
<script type="text/javascript">document.write(self.document.title);</script>
</span>

<form name=search method=post action=patweb90.pbl style="margin:0"
 onsubmit="return ProcessSubmit();">
<input type=hidden name=reportno value="1">
<input type=hidden name=template value="201">
<input type=hidden name=norecord value="%PATWEB90.01.032">
<input type=hidden name=patfname value=10>
<input type=hidden name=srchadmn value="%PATWEB90.01.013">
<input type=hidden name=ptcnualt value="%PATWEB90.01.023">
<input type=hidden name=alternid value="">
<input type=hidden name=aisearch value="">
<input type=hidden name=requestn value=" ">
<input type=hidden name=requestr value=" ">
<input type=hidden name=ptcnuepm value="%STANDARD.01.025.125.155.0.1">
<input type=hidden name=showblhd value="%PATWEB90.01.036">
<input type=hidden name=extnsrch value="">

<table align="center" width=100% border=1 cellspacing=3 cellpadding=2 bgcolor=#CCCCCC>
<tr><td>

   <table width=100% border=0 cellpadding=0 cellspacing=0 bgcolor=#CCCCCC>
   <tr><td class=DataLabel>Surname<br>
       <input type=text name=srchsnam size=15
        onblur="UpCase(this);TextBlurHandler(this);"></td>
       <td class=DataLabel colspan=2>Given Name<br>
       <input type=text name=srchgnam size=15
        onblur="UpCase(this);TextBlurHandler(this);"></td>
       <td class=DataLabel>U/R Number<br>
       <input type=text name=urnumber onblur="setUR()" size=10
        maxlength=8 style="text-align:left"></td>
       <td class=DataLabel>Medicare No.<br>
       <input type=text name=srchmedi maxlength=10 size=12 
       onblur="setMedicare(this);"></td>
       <td rowspan=2>
         <input type=radio name=srchpsex value=" " checked> All <br>
         <input type=radio name=srchpsex value="M"> Male <br>
         <input type=radio name=srchpsex value="F"> Female</td>
       <td align=center valign=middle rowspan=2>
         <input type=submit class="button" value=Search name=SearchButton
          onclick="SetCookie('TheatreRequestNumber',
                              document.search.requestn.value);
                   SetCookie('TheatreRequestRedirect',
                              document.search.requestr.value);
                   SetExtendedTheatreSearchVariable();"><br> 
         <span id=spLHDSrchBtn></span>
 <input type=button class="button" value="Reset"
  onclick='location.href="patweb90.pbl?reportno=1&template=201"'></td></tr>
   <tr><td class=DataLabel>Date of Birth<br>
           <input type="text" size="12" name="srchpdob"
           onblur="checkDate(this,'Date of Birth')" ></td>
       <td class=DataLabel>Age<br>
           <input type=text name=srchpage size=4 ></td>
       <td class=DataLabel>Range<br>
           <select name=srcharan > 
            <option value=2>2 years</option>
            <option value=4>4 years</option>
            <option value=6>6 years</option>
            <option value=8 selected>8 years</option>
            <option value=10>10 years</option>
           </select></td>
       <td class=DataLabel>Search Type<br>
           <select name=srchtype onchange="checkType();">
           <option value=2>Sound-Ex</option>
           <option value=1>Surname</option>
           <option value=3>Date of Birth</option>
           <option value=4>U/R Number</option>
           <option value=5>Medicare No</option>
           </select></td></tr>
  </table>

      %PATWEB90.01.011.100.0

   <table width=100% bgcolor=#CCCCCC cellspacing=0 cellpadding=0 border=0>
   <tr><td align=center>
       <input type=button value="<< Previous" class="button"
        onclick="SetCookie('TheatreRequestNumber',
                            document.search.requestn.value);
                 SetCookie('TheatreRequestRedirect',
                            document.search.requestr.value);
                 location.href='%PATWEB90.01.002.201'">
       <td width=20%><div id=RegOption></div></td>
       <td><input type=button value="Next >>" class="button"
        onclick="SetCookie('TheatreRequestNumber',
                            document.search.requestn.value);
                 SetCookie('TheatreRequestRedirect',
                            document.search.requestr.value);
                 location.href='%PATWEB90.01.001.201'"></td></tr>
   </table>

</td></tr>
</table>
</form>

<form name=linkForm action="outweb02.pbl" method=get>
<input type=hidden name=reportno value="5">
<input type=hidden name=template value="2">
<input type=hidden name=urnumber>
<input type=hidden name=admissno>
<input type=hidden name=casekeys>
</form>

<form name=Registration method=get action="patweb89.pbl">
<input type=hidden name=reportno value=05>
<input type=hidden name=template value=001>
<input type=hidden name=srchsnam value="">
<input type=hidden name=srchgnam value="">
<input type=hidden name=srchpdob value="">
<input type=hidden name=srchpage value="">
<input type=hidden name=srchpsex value="">
<input type=hidden name=temporar value="0">
</form>

<div id=YesReg style="display:none">
     <input type=button value="New Registration" class="Bigbutton"
      onclick="SetCookie('TheatreRequestNumber',
                            document.search.requestn.value);
               SetCookie('TheatreRequestRedirect',
                            document.search.requestr.value);
               newreg();">
     <input type=button value="Temp Registration" class="Bigbutton"
      onclick="SetCookie('TheatreRequestNumber',
                            document.search.requestn.value);
               SetCookie('TheatreRequestRedirect',
                            document.search.requestr.value);
               TempReg()">
</div>

<span id=NewReg style="display:none">
  <input type=button value="New Registration" class="Bigbutton"
   onclick="SetCookie('TheatreRequestNumber',
                            document.search.requestn.value);
            SetCookie('TheatreRequestRedirect',
                            document.search.requestr.value);
            newreg();">
</span>

<span id=spLHDSrch style="display:none">
  <input type=button value="%PATWEB90.01.035" class="button"
   onclick="LHDSearchFrame('RegOption','NewReg','patweb90.pbl?reportno=1&template=201',SRCH_MODE_TH);"><br>
</span>

<script type="text/javascript">
function setDefault() {
  if (document.all.BodyDivision!=undefined) {
     BodyDivision.style.height=document.body.clientHeight - 86 -
                               BodyDivision.offsetTop
  }
}
   document.search.srchsnam.value="%PATWEB90.01.003";
   document.search.srchgnam.value="%PATWEB90.01.004";
   document.search.srchpage.value="%PATWEB90.01.006";
   document.search.srchpdob.value="%PATWEB90.01.007";

  if (document.search.ptcnuepm.value=="1") {
    document.search.srchmedi.value = "%PATWEB90.01.016";
  }

  if(document.search.ptcnualt.value=="1"){
    document.search.urnumber.maxLength=20;
    document.search.urnumber.size=20;
  }
   for (var i =0 ; i < document.search.srcharan.length; i++) {
     if (document.search.srcharan.options[i].value==trim("%PATWEB90.01.008")) {
         document.search.srcharan.selectedIndex=i } };
   for (var i =0 ; i < document.search.srchtype.length; i++) {
     if (document.search.srchtype.options[i].value=="%PATWEB90.01.009.2") {
         document.search.srchtype.selectedIndex=i } };
   for (var i =0 ; i < document.search.srchpsex.length; i++) {
     if (document.search.srchpsex[i].value=="%PATWEB90.01.005") {
         document.search.srchpsex[i].checked="1" } };

  if (document.search.ptcnuepm.value == "1") {
    if (document.search.showblhd.value == "1") {
      document.getElementById('spLHDSrchBtn').innerHTML =
        document.getElementById('spLHDSrch').innerHTML;
    }
    else {
      document.getElementById('spLHDSrchBtn').innerHTML = "";
    }
  }
  else {
    if (isWhitespace(document.search.srchsnam.value)) {
      RegOption.innerHTML=""; }
    else {
      RegOption.innerHTML=YesReg.innerHTML; 
    }
  }


if (parent.document.getElementById('PopUpFrame') != null && 
    getClientHeight(parent.document.getElementById('PopUpFrame')) > 240 &&
    document.getElementById("BodyDivision")!=null) {
  document.getElementById("BodyDivision").style.height = "240";
}

</script>
