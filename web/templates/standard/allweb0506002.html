<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script language="javascript" src="../js/allweb03.js"></script>
<script language="javascript" src="../js/allweb05.js"></script>
<script type="text/javascript">
function UpdateEncounter(theForm) {
  if((!isWhitespace(theForm.alenc017.value) &&
      isWhitespace(theForm.alenc018.value)) ||
     (isWhitespace(theForm.alenc017.value) &&
       !isWhitespace(theForm.alenc018.value))) {
      alert("The Contact End Date and Time must be populated.");
      return;
  }
  if(!isWhitespace(theForm.alenc017.value)) {
    if(theForm.alenc005.value != theForm.alenc017.value) {
      alert("The Contact Start Date and End Date must be equal.");
      return;
    }
  }
  if(!checkContactPurposeEnc(theForm)) {  // Check Contact Purpose Valid
    return;
  }
  if (validateMandatory(theForm)) {
    theForm.submit(); }
}
function ForceUpdate(theForm){
  if((!isWhitespace(theForm.alenc017.value) &&
      isWhitespace(theForm.alenc018.value)) ||
     (isWhitespace(theForm.alenc017.value) &&
       !isWhitespace(theForm.alenc018.value))) {
      alert("The Contact End Date and Time must be populated.");
      return;
  }
  if(!isWhitespace(theForm.alenc017.value)) {
    if(document.UpdateForm.alenc005.value != 
       document.UpdateForm.alenc017.value) {
       alert("The Contact Start Date and End Date must be equal.");
       return;
    }
  }
  if(!checkContactPurposeEnc(theForm)) {  // Check Contact Purpose Valid
    return;
  }
  document.UpdateForm.forceflg.value="1";
  UpdateEncounter(UpdateForm);
}
function CheckEndDate() {
  if(!checkDate(document.UpdateForm.alenc017,document.UpdateForm.alenc017.title)) {
     return;
  }
  if(!isWhitespace(document.UpdateForm.alenc005.value) &&
     !isWhitespace(document.UpdateForm.alenc017.value)) {
     if(document.UpdateForm.alenc005.value != 
        document.UpdateForm.alenc017.value) {
        alert("The Contact Start Date and End Date must be equal.");
        document.UpdateForm.alenc017.value="";
        document.UpdateForm.alenc018.value="";
     }
  }
  CalcDirectUnitEndDate(UpdateForm);
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);setMandCont();">
<span class=DFrameTitleBar>
<img border=0 align=right src="../images/ExitIcon.gif" onclick="DFrameExit();">
 %ALLWEB05.06.125.0  Contact - Referral - %ALLWEB05.06.081</span>
<div id=PageBodySection style="overflow: auto;">

<form name=UpdateForm onsubmit='return validateMandatory(this)' style="margin:0"
 target="PopUpFrame1" action="allweb05.pbl" method=post>
<input type=hidden name=reportno value="6">
<input type=hidden name=updttype value="E">
<input type=hidden name=urnumber id=urnumber value="%ALLWEB05.06.003">
<input type=hidden name=admissno id=admissno value="%ALLWEB05.06.081">
<input type=hidden name=deptcode id=deptcode value="%ALLWEB05.06.125.3">
<input type=hidden name=encoutky value="%ALLWEB05.06.301">
<input type=hidden name=alcnevty value="%STANDARD.01.025.106.183.0.1">
<input type=hidden name=nextpage value="5">
<input type=hidden name=alcndevp id=alcndevp 
 value="%STANDARD.01.025.106.225.0.1">
<input type=hidden name=forceflg value="0">
<input type=hidden name=July2019 value="01 Jul 2019">

<table align=center cellspacing=0 cellpadding=1 border=0 width=95%>

<tr><td class=DataLabel width=20%>%STANDARD.01.017.CL</td>
   <td><select class="SelectMed Readonly" disabled 
        name=alenc115 title="%STANDARD.01.017.CL">
    <option></option>
    %ALLWEB05.06.276.2
    </select></td>
    <td class=DataLabel width=20%>%STANDARD.01.017.zI</td>
    <td class=DataField><select class="SelectMed Readonly" name=alenc081 
     disabled title="%STANDARD.01.017.zI">
      <option></option>
      %ALLWEB05.06.247.35.2
      </select>
    </td></tr>

<tr><td class="DataLabel">%STANDARD.01.017.zH</td>
    <td><select class="SelectMed Readonly" name="alenc080" disabled
         title="%STANDARD.01.017.zH" style="width: 300px;">
         <option></option>
         %ALLWEB05.06.247.34.9.5
        </select>
   </td>
    <td class=DataLabel>%STANDARD.01.017.zK</td>
    <td class=DataField>
      <select class="SelectMed Readonly" name=alenc083 disabled
       title="%STANDARD.01.017.zK"> 
      <option></option>
      %ALLWEB05.06.247.37.2
      </select></td>
     </tr>

<tr><td class=DataLabel>%STANDARD.01.017.zL</td>
    <td class=DataField><select class="SelectMed Readonly" name=alenc084 
     disabled title="%STANDARD.01.017.zL">
      <option></option>
      %ALLWEB05.06.247.38.2
      </select></td>
    <td class=DataLabel>%STANDARD.01.017.zN</td>
    <td class=DataField><select class="SelectMed Readonly" name=alenc086 
       disabled title="%STANDARD.01.017.zN"
       onchange="checkDeliverySettingOthHosp(this);">
      <option></option>
      %ALLWEB05.06.247.40.2
      </select>
    </td></tr>

<tr><td class=DataLabel>%STANDARD.01.017.zE</td>
    <td class=DataField><select class="SelectMed Readonly" name=alenc077 
       disabled title="%STANDARD.01.017.zE">
      <option></option>
      %ALLWEB05.06.247.31.2
      </select></td>
    <td class=DataLabel>%STANDARD.01.017.zh</td>
    <td class=DataField><select class="SelectMed Readonly" name=alenc054
       disabled title="%STANDARD.01.017.zh">
      <option></option>
      %ALLWEB05.06.247.08.2
      </select></td>
   </tr>

<tr><td class=DataLabel>%STANDARD.01.017.zf</td>
    <td class=DataField><select class="SelectMed Readonly" name=alenc052 
       disabled title="%STANDARD.01.017.zf">
      <option></option>
      %ALLWEB05.06.247.06.2
      </select></td>
    <td class=DataLabel>%STANDARD.01.017.zg</td>
    <td class=DataField><select class="SelectMed Readonly" name=alenc053 
       disabled title="%STANDARD.01.017.zg">
      <option></option>
      %ALLWEB05.06.247.07.2
      </select></td>
    </tr>

<tr><td class=DataLabel><span id="nameContactEvp" style="display:none">
                        %STANDARD.01.017.zG
                        </span>
    </td>
    <td class=DataField><span id="fieldContactEvp" style="display:none">
       <select class="SelectMed Readonly" name=alenc079
       disabled title="%STANDARD.01.017.zG">
      <option></option>
      %ALLWEB05.06.247.33.2
      </select>
    </span>
    </td>
    <td class=DataLabel>Service Department</td>
    <td><select class="SelectMed" name=alenc127 disabled
     title="Service Department">
    <option value=""></option>
    %ALLWEB05.06.293.9.1.08.2.
    </select>
    </td><tr>

<tr><td class=DataLabel>Professional Group</td>
    <td colspan=3><input type=text name=alenc004 value="%ALLWEB05.06.204.001"
         size=10 maxlength=10 title="Professional Group" class="Mandatory"
         onblur="ValidateHCP(18,0,UpdateForm.alenc004,UpdateForm.d_alenc004);">
        <input type=text name=d_alenc004 title="Professional Group" readonly
         size=24 value="%ALLWEB05.06.204.081" class=Readonly>
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="HCPSearchFrame(UpdateForm.alenc004,UpdateForm.d_alenc004,0);">
        <img src="../images/ClearIcon.gif" class=Icon
         onclick="clrFields(UpdateForm.alenc004,UpdateForm.d_alenc004);">
    </td>
    </tr>

<tr><td class=DataLabel>Palliative Care Provider</td>
    <td colspan=3><input type=text name=alenc025 size=10 maxlength=10
     value="%ALLWEB05.06.225.001" class="Readonly" readonly
     onblur="ValidateHCP(18,13,UpdateForm.alenc025,UpdateForm.d_alenc025);"
     title="Palliative Care Provider" value="">
    <input type=text name=d_alenc025 size=24 class=Readonly readonly
     value="%ALLWEB05.06.225.081"
      title="Palliative Care Provider" value="">
    <img src=../images/SearchIcon.gif class=Icon
     onclick=HCPSearchFrame(alenc025,d_alenc025,4) >
    <img src="../images/ClearIcon.gif" class=Icon
     onclick="clrFields(UpdateForm.alenc025,UpdateForm.d_alenc025);">
    </tr>

<tr><td>Contact Start Date</td>
    <td><input type=text size=11 readonly value="%ALLWEB05.06.205" 
         title="Contact Start Date" name=alenc005 class=Readonly>
        <span style="width:30px"></span>
         Time
        <input type=text size=8 readonly value="%ALLWEB05.06.206" 
         title="Contact Start Time" name=alenc006 class=Readonly>
    <td class=DataLabel>&nbsp;</td>
    <td>&nbsp;</td>
    </tr>


<tr><td>Contact End Date</td>
    <td><input type="text" name="alenc017" class="PastDate Mandatory"
         onblur="CheckEndDate();"
         title="Contact End Date" value="%ALLWEB05.06.217">
        <img notab src="../images/DateLookup.gif" class="Icon"
         onclick="DateLookupFrame(UpdateForm.alenc017);" />
          Time
       <input type="text" name="alenc018" size="8"
        onblur="CalcDirectUnitEndTime(UpdateForm);"
        class="Mandatory"  value="%ALLWEB05.06.218" title="Contact End Time">
       <img src="../images/DateTimeStamp.gif" class="Icon"
        onclick="SetCurrentDateTime(UpdateForm.alenc017,UpdateForm.alenc018);">
        <img src="../images/TimeLookup.gif" class="Icon"
         onclick="TimeLookupFrame(UpdateForm.alenc018);">
    </td>
    <td class=DataLabel>&nbsp;</td>
    <td class=DataLabel>&nbsp;</td>
    </tr>

<tr><td>Direct Units</td>
    <td><input type=text size=12 maxsize=5 name=alenc011 id=alenc011
        value="%ALLWEB05.06.211"
        title="Direct Units" min=0 class=Mandatory
        onblur="CalcContactEndDateTime(UpdateForm);"></td>
    <td class=DataLabel>Current Inpatient Flag</td>
    <td><input type=hidden name="d_currip" id="d_currip"
         value="%ALLWEB05.06.318">
        <input type=text name="s_currip" id="s_currip"
         title="Current Inpatient Flag" class="Readonly"
         size=4 value="%ALLWEB05.06.317">
    </td>
    </tr>
</table>

<table align=center cellspacing=0 cellpadding=1 border=0 width=95%>
<tr><td colspan=4 align=center><br>
    <input type=button name=formactn value="Force Update" class="button"
     id="all05f" onclick="tempDisable(this);ForceUpdate(UpdateForm);">
    <input type=button name=formactn value="OK" class="button" tabindex=60
     id="all05u" onclick="tempDisable(this);UpdateEncounter(UpdateForm);">
    <input type=button Value="Close" class="button" tabindex=61
     onclick="DFrameClose();">
    </td></tr>
</table>
</form>
