<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome"    content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"    content="true">
<script type="text/javascript" src="../js/AutoPostCode.js"> </script>
<script type="text/javascript" src="../js/AddressSearch.js"></script>
<!--Person Responsible for Account-->

<script type="text/javascript">

function SetFieldsPRA() {
  if (isWhitespace(UpdateForm.ptpra004.value)) {
    return;
  }

  var OldSuburb=trim("%PATWEB71.01.169")
  if (UpdateForm.ptpra004.value!=OldSuburb) {
    suburb = UpdateForm.ptpra004;
    state = UpdateForm.ptpra005;
    postcode = UpdateForm.ptpra006;
    LookupPostCode(UpdateForm.ptpra004.value);
  }
}

function SubmitPRFA() {
  if(isWhitespace(document.UpdateForm.admissno.value)) {
    alert("Visit not selected.");
    return;
  }
  UpdateForm.updatety.value="2";
  document.UpdateForm.submit();
}

function SetPostVars() {
  suburb   = UpdateForm.ptpra004;
  state    = UpdateForm.ptpra005;
  postcode = UpdateForm.ptpra006;
}

//
// Functions called from AddressSearch.js
//
function InitAddressSearch() {
  // line 1 - 'ptpra002'
  // line 2 - 'ptpra003'
  // suburb - 'ptpra004'
  // state - 'ptpra005'
  // postcode - 'ptpra006'

  InitAddressSearchFields('trAddrSrch','ptpra002','ptpra003','ptpra004','ptpra005','ptpra006');
}
function ShowAddressSearch() {
  OpenAddressSearch('1',PopulateAddress,ClearSearchAddress);
}
function PopulateAddress(StreetLine, Suburb, State, Postcode) {
  LookupSuburb(Postcode);  // validate Postcode with our Lookup values
  if (SelectPC.length == 0) return;  // no match found

  LookupPostCode(Suburb);  // validate Suburb
  if (SelectPC.length == 0) return;  // no match found

  ToggleFieldReadOnly('ptpra002', true);
  ToggleFieldReadOnly('ptpra003', false);
  ToggleFieldReadOnly('ptpra004', true);
  ToggleFieldReadOnly('ptpra005', true);
  ToggleFieldReadOnly('ptpra006', true);

  SetFieldValue('ptpra002',StreetLine);
  SetFieldValue('ptpra003','');
  SetFieldValue('ptpra004',Suburb);
  SetFieldValue('ptpra005',State);
  SetFieldValue('ptpra006',Postcode);
}
function ClearSearchAddress() {
  ToggleFieldReadOnly('ptpra002', false);
  ToggleFieldReadOnly('ptpra003', false);
  ToggleFieldReadOnly('ptpra004', false);
  ToggleFieldReadOnly('ptpra005', false);
  ToggleFieldReadOnly('ptpra006', false);

  SetFieldValue('ptpra002','');
  SetFieldValue('ptpra003','');
  SetFieldValue('ptpra004','');
  SetFieldValue('ptpra005','');
  SetFieldValue('ptpra006','');
}
</script>
</head>
%START.OF.PAGE
<body onLoad="PageLoad(event);SetPostVars();InitPostCodes();
              InitAddressSearch();document.UpdateForm.ptpra001.focus();">
<div id=PageHeadingSection>
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB71.01.003";
PatientVIS="%PATWEB71.01.081";
PatientNAM="%PATWEB71.01.002";
PatientSTA="%PATWEB71.01.086.078";
PatientALT="%PATWEB71.01.084";
PatientSEX="%PATWEB71.01.019";
PatientDOB="%PATWEB71.01.020";
PatientAGE="%PATWEB71.01.021";
PatientLOC="%PATWEB71.01.083";
PatientPRI="%PATWEB71.01.086.066.1";
PatientUNT="%PATWEB71.01.066.0";
DoctorCOD="%PATWEB71.01.082.003";
DoctorNAM="%PATWEB71.01.082.002";
PatientAID="%PATWEB71.01.086.090";
PatientIND="%PATWEB71.01.086.091";
PatientCUR="%PATWEB71.01.086.092";
PatientCLC="%PATWEB71.01.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB71.01.086.094";
PatientCDM="%PATWEB71.01.086.095";
PatientVDH="%PATWEB71.01.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
</div>
<div id=PageBodySection>
<form name=UpdateForm action="patweb98.pbl" method=post
 onsubmit='return validateMandatory(this);'>
<input type=hidden name=reportno value="05">
<input type=hidden name=template value="005">
<input type=hidden name=updatety value=" ">
<input type=hidden name=formactn value="C1">
<input type=hidden name=urnumber value="%PATWEB71.01.003">
<input type=hidden name=admissno value="%PATWEB71.01.081">
<input type=hidden name=claimtyp value=" ">
<input type=hidden name=redirect value="%PATWEB71.01.001.patweb98.01.001">
<input type=hidden name=nextpage value=1>
<input type=hidden name=dummy value=0>
<input type=hidden name=ptcnuadv id=ptcnuadv
 value="%STANDARD.01.025.123.247.0.1">

<table border=1 width=100% cellspacing=1 cellpadding=1>
<tr><td colspan=4 class=HeadingCell align=center >
        Person Responsible for Account</td>
</tr>

<tr><td>
    <table width=100% border=0>
    <tr><td class=DataLabel width=10%>Name</td>
        <td colspan=3>
          <input type="text" size="80" name=ptpra001 id=ptpra001 title="Name"
           tabindex=1 maxlength="80" value="%PATWEB71.01.166"></td>
    </tr>

    <tr id=trAddrSrch style="display:none">
        <td class=DataLabel nowrap>Search Address</td>
        <td><input type=text readonly size=42 tabindex="-1"
             style="cursor:pointer;text-align:center;"
             value="Click here to search for an address"
             title="Click here to search for an address"
             onclick="ShowAddressSearch();">
        </td>
    </tr>

    <tr><td class=DataLabel>Address</td>
        <td width=40%>
          <input type="text" size="42" maxlength="35" tabindex=2
           name=ptpra002 id=ptpra002 title="Address Line 1"
           value="%PATWEB71.01.167" onchange="UpCase(this);"></td>
        <td class=DataLabel width=10%>Relation </td>
        <td><select name=ptpra009 id=ptpra009 title="Relation" tabindex=7>
              <option value=""></option>
              %STANDARD.01.030
            </select></td>
    </tr>

    <tr><td class=DataLabel></td>
        <td>
          <input type="text" size="42" maxlength="35" tabindex=3
           name=ptpra003 id=ptpra003 title="Address Line 2"
           value="%PATWEB71.01.168" onchange="UpCase(this);" ></td>
        <td class=DataLabel>Home Phone</td>
        <td>
          <input type="text" size="14" maxlength="20" name=ptpra007 id=ptpra007
           title="Home Phone" value="%PATWEB71.01.171" tabindex=8></td>
    </tr>

    <tr><td class=DataLabel>Suburb</td>
        <td>
          <input type="text" size="42" maxlength="35" name=ptpra004 id=ptpra004
           title="Suburb" value="%PATWEB71.01.169" tabindex=4 
           onblur="SetFieldsPRA();"></td>
        <td class=DataLabel>Work Phone</td>
        <td>
          <input type="text" size="14" maxlength="20" name=ptpra008 id=ptpra008
           title="Work Phone" value="%PATWEB71.01.172" tabindex=9></td>
    </tr>

    <tr><td class=DataLabel>State</td>
        <td>
          <input type="text" size="42" maxlength="35" name=ptpra005 id=ptpra005
           title="State" value="%PATWEB71.01.182" tabindex=5></td>
        <td class=DataLabel>Mobile Phone</td>
        <td>
          <input type="text" size="14" maxlength="20" name=ptpra010 id=ptpra010
           title="Mobile Phone" value="%PATWEB71.01.199.012" tabindex=10></td>
    </tr>

    <tr><td class=DataLabel>Post Code</td>
        <td><input type="text" size="4" maxlength="8" tabindex=6
             name=ptpra006 id=ptpra006 title="Post Code"
             value="%PATWEB71.01.170" onchange="LookupSuburb(this.value);"></td>
    </tr>
    </table>
</td></tr>

<tr><td colspan=4 align=center>
    <input type=button value="Update" class="button" tabindex=20
     onclick="SubmitPRFA()";>
    <input type=button value="Cancel" class="button" tabindex=21 
     onclick="SetClose()";>
</td></tr>
</table>

</form>

<script type="text/javascript">
PageBodySection.style.height = document.body.clientHeight -
                                 PageHeadingSection.clientHeight + "px";

for (var i =0 ; i < document.UpdateForm.ptpra009.length; i++) {
  if (document.UpdateForm.ptpra009.options[i].value=="%PATWEB71.01.173") {
    document.UpdateForm.ptpra009.selectedIndex=i;
  }
};

function SetClose() {
  var urnumber ="%PATWEB71.01.003";
  var admissno ="%PATWEB71.01.081";
  var link = "patweb98.pbl?reportno=01&template=001&urnumber="+urnumber+"&admissno="+admissno;                                              
  location.href= link;
}
</script>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=regexstm value=102>
<input type=hidden name=newstand value=1>
<input type=hidden name=urnumber value="%PATWEB71.01.003">
<input type=hidden name=admissno value="%PATWEB71.01.081">
<input type=hidden name=MenuType value="%PATWEB71.01.088">
</form>
