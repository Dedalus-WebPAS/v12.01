<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
function DisplayTrnSrc() {
  var i=document.UpdateForm.trnlvtyp.selectedIndex;
  var ind = document.UpdateForm.trnlvtyp.options[i].value.substring(14,15);
  if(document.UpdateForm.ptcnhdps.value!="3"){
    if (ind != "C") {
      TranSrcDesc.innerHTML="";
      TranSrcField.innerHTML=transferblank.innerHTML;
      document.UpdateForm.transrce.value=" ";
    } else {
      TranSrcDesc.innerHTML="Leave Transfer Source";
      TranSrcField.innerHTML=transfersrc.innerHTML;
    }
  }
}
function DisplayContract() {
  i=document.UpdateForm.trnlvtyp.selectedIndex;
  ind=document.UpdateForm.trnlvtyp.options[i].value.substring(14,15)
  if (ind=="C" || ind=="S" || ind=="H") {
    ContractHeading.innerHTML=contracthd.innerHTML;
    ContractType.innerHTML=contracttype.innerHTML;
    Contrac1Heading.innerHTML=contracrhd.innerHTML;
    ContractRole.innerHTML=contractrole.innerHTML;
    Contrac2Heading.innerHTML=contracihd.innerHTML;
    ContractId.innerHTML=contractid.innerHTML;
  } else {
    ContractHeading.innerHTML=blanklabel.innerHTML;
    ContractType.innerHTML="";
    Contrac1Heading.innerHTML=blanklabel.innerHTML;
    ContractRole.innerHTML="";
    Contrac2Heading.innerHTML=blanklabel.innerHTML;
    ContractId.innerHTML="";
  }
  if (ind=="S"||ind=="H") {
     document.UpdateForm.ptasf001.className="Readonly";
     document.UpdateForm.ptasf002.className="Readonly";
     document.UpdateForm.ptasf001.value="";
     document.UpdateForm.ptasf002.value="";
   } else if (ind=="C"){
     document.UpdateForm.ptasf001.className="Mandatory";
     document.UpdateForm.ptasf002.className="Mandatory";
  }
}
function ContTypeAlert() {
  alert("Valid Contract Type Number\n\n" +
"1 - B    A (health authority/other external purchaser) contracts B (hospital) for admitted service\n" +
"\n" +
"2 - ABA  Patient admitted by Hospital A. Hospital A contracts Hospital B for admitted or non-admitted patient service.\n" +
"Patient Returns to Hospital A on completion of service by Hospital B.\n" +
"\n" +
"3 - AB   Patient admitted by Hospital A. Hospital A contracts Hospital B for admitted or non-admitted patient service\n" +
"Patient Does not return to Hospital A on conmpletion of service by Hospital B.\n" +
"\n" +
"4 - (A)B Patient not admitted by Hospital A. Hospital A contracts Hospital B for the whole admitted patient service\n" +
"\n" +
"5 - BA   Hospital A, which does not initially admit the patient, contracts Hospital B for an admitted patient service\n" +
"following which the patient is transferred to and admitted by Hospital A." )
}
function ContRoleAlert() {
  alert("Valid Contract Role Character\n\n" +
"A - The Contracting (purchasing) hospital is termed Hospital A.\n" +
"\n" +
"B - The contracted (service provider) hospital is termed Hospital B." )
}
function ContRole(role) {
  var ValidCodes = "AB "
  if (ValidCodes.indexOf(role.value)==-1) {
  alert ("Invalid Contract Role");
  role.value="";
  role.focus();
  }
}
function ContType(type) {
  var ValidCodes = "12345 "
  if (ValidCodes.indexOf(type.value)==-1) {
  alert ("Invalid Contract Type");
  type.value="";
  type.focus();
  }
}
function convertDate(datevalue) {
  cent = datevalue.substring(0,2)
  year = datevalue.substring(2,4)
  mon  = datevalue.substring(4,6)
  day  = datevalue.substring(6,8)

  monthName = GetMonthName(mon);

  document.UpdateForm.trandate1.value = day + " " + monthName + " " + cent + year;
}
</script>
</head>
%START.OF.PAGE
<body  onLoad="PageLoad(event);DisplayTrnSrc();DisplayContract();">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
Update Contracted Leave Details
</span>
<form name=UpdateForm action="patweb96.pbl" method=post>
<input type=hidden name=reportno value=14>
<input type=hidden name=template value=001>
<input type=hidden name=updttype value="U">
<input type=hidden name=tranfkey value="%PATWEB96.14.073">
<input type=hidden name=ptcnhdps value="%STANDARD.01.025.080.250.1.1">
<input type=hidden name=trandate1>
<input type=hidden name=nextpage value="0">

<table align=center cellspacing=0 cellpadding=3 border=0 width=100%>
<tr><td class=DataLabel>On-Leave Date</td> 
    <td class=DataField>
      <input type=text size=11 readonly class=ReadOnly value="%PATWEB96.14.064"
       name=trandate>
    </td>
</tr>

<tr><td class=DataLabel>On-Leave Time</td>
    <td class=DataField>
      <input type=text size=11 readonly class=ReadOnly value="%PATWEB96.14.065">
    </td>
</tr>

<tr><td class=DataLabel>%STANDARD.01.017.TL</td>
    <td class=DataField>
      <select name=trnlvtyp class=Mandatory title="%STANDARD.01.017.TL"
       id=trnlvtyp onchange="DisplayTrnSrc();DisplayContract();">
        %PATWEB96.14.074.2
      </select>
    </td>
</tr>

   <tr>
       <td class=DataLabel><div id=TranSrcDesc></div></td>
       <td><div id=TranSrcField></div></td></tr>

    <tr>
       <td class=DataLabel><div id=Contrac2Heading></div></td>
       <td><div id=ContractId></div></td>
           </tr>

    <tr><td class=DataLabel><div id=ContractHeading></div></td>
        <td><div id=ContractType></div></td>
        </tr>

    <tr>
          <td class=DataLabel><div id=Contrac1Heading></div></td>
          <td><div id=ContractRole></div></td>
          </tr>

<tr><td colspan=2 align=center><br>
    <input type=button Value="Update" class="button" id=btnAdd 
     onclick="  tempDisable(this);
	if (validateMandatory(UpdateForm)){UpdateForm.submit();}">
    <input type=button Value="Cancel" class="button" onclick="DFrameExit();">
    </td></tr>
</table>
</form>

<span id=transfersrc style="display:none">
  <input type="text" size=7 maxlength=5 id=transrce name=transrce 
  class=Mandatory title="Transfer Destination" value="%PATWEB96.14.067"
   onblur="convertDate(trandate.value);validateTransSrc(transrce,trandate1,trandesc);">
   <input type=text size=27 name=trandesc notab class=Readonly readonly
    id=trandesc value="%PATWEB96.14.068">
   <img src="../images/SearchIcon.gif" class=Icon
    onclick="TransferSourceFrame(transrce,trandesc)">
</span>

<span id=transferblank style="display:none">
   <input type=hidden name=transrce>
</span>

<script type="text/javascript">
    TranSrcDesc.innerHTML="";
    TranSrcField.innerHTML=transferblank.innerHTML;
    document.UpdateForm.transrce.value=" ";
</script>
<span id=contracthd style="display:none">
Contract Type
</span>

<span id=contracrhd style="display:none">
Contract Role
</span>

<span id=contracihd style="display:none">
 Contract Id
</span>

<span id=contracttype style="display:none">
  <input type="text" name=ptasf001 size=2 maxlength=1 class=Mandatory
   id=ptasf001 value="%PATWEB96.14.071" title="Contract Type"
   onblur="ContType(this);">
   <img src="../images/SearchIcon.gif" class=Icon
   onclick="ContTypeAlert();">
</span>

<span id=contractrole style="display:none">
  <input type="text" name=ptasf002 size=2 maxlength=1 class=Mandatory
   id=ptasf002 value="%PATWEB96.14.072"
   title="Contract Role"
   onblur="ContRole(this);">
   <img src="../images/SearchIcon.gif" class=Icon
   onclick="ContRoleAlert();">
</span>

<span id=contractid style="display:none">
<input type="text" size=7 maxlength=5 id=ptasf003 name=ptasf003
      value="%PATWEB96.14.069" class=Mandatory title="Contract Id"
      tabindex=29 onblur="validateCode(9,ptasf003,d_ptasf003);">
     <input type=text size=27 id=d_ptasf003 name=d_ptasf003 notab
       value="%PATWEB96.14.070"
      class=Readonly readonly>
     <img src="../images/SearchIcon.gif" class=Icon
      onclick="TransferSourceFrame(ptasf003,d_ptasf003)">
</span>
<span id=blanklabel style="display:none">&nbsp;</span>
