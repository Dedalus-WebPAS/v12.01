<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src=../js/TableSort.js></script>
<script type="text/javascript">
function InitTable(TableView) {
//--------------------------------------------------
// Columns : 0 - Link
//           1 - UR
//           2 - Admission No
//           3 - Patient Name
//           4 - Patient folder
//           5 - Admission Date
//           6 - Sex
//           7 - Ward/Bed
//           8 - Leave type
//           9 - Attending Doctor
//           10- Risk
//           11- O/L Time
//           12- Status button
//           13- Destination  
//           14- Return time  
//           15- Carer
//           16- Leave Count
//           17- Leave time  
//           18- Leave time  
//           19- Cumulative Leave time  
//           20- Record Type
//--------------------------------------------------
switch (TableView) {
case 0: {
 t = new Table(1,0,2,"100%","center",25);
 t.addColumn("Patient","ImageText",4,4,"left nowrap ","PatientFolder","0",140,3)
 t.addColumn("Ward/Bed","String",7,7,"left","","",60)
 t.addColumn("Record Type","String",20,20,"left","","",60)
 t.addColumn("Risk","String",10,10,"center","","",50)
 t.addColumn("Doctor","String",9,9,"left","","",60)
 t.addColumn("Type of Leave","String",8,8,"left","","",40)
 t.addColumn("On-Leave Date/Time","String",11,11,"left","","",50)
 t.addColumn("Return Date/Time","String",21,21,"left","","",50)
 t.addColumn("Status","String",12,12,"center","","",40)
 t.addColumn("Exp. Return","String",14,14,"left","","",40)
 t.addColumn("Carer","String",15,15,"left","","",40)
// t.addColumn("No.Leave Today/Overall","String",16,16,"left","","",40)
// t.addColumn("Leave Min Current/Overall","String",18,18,"left","","",40)
 t.addColumn("Cumulative Leave Mins","String",19,19,"left","","",40)
 AddTableRows()
 TableOutput(0,1);    // Order Column,Asc Dsc
 break; }
 }
}
</script>
</head>
<body onload="PageLoad(event);InitTable(0);">
%START.OF.PAGE
<div id=HeadingSection>
<form name=SelectPeriod action=patweb92.pbl method=get style="margin:0">
<table width=100% cellspacing=0 border=0>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=136>
<input type=hidden name=srchtype value=17>
<input type=hidden name=privacyo value="%PATWEB92.01.106">
<input type=hidden name=showflag value="%PATWEB92.01.202">
<input type=hidden name=viewtype value="%PATWEB92.01.019">
<input type=hidden name=leavereg value="%PATWEB92.01.109">
<table width=100% cellspacing=0 border=0>
<tr><td class=HeadingCell>Ward </td>
    <td class=HeadingCell><select name=leavward class=SelectMed
                onchange="submit();">
         <option value="  ">ALL</option>
         %PATWEB92.01.101
        </select></td>
    <td class=HeadingCell align=center>
    %STANDARD.01.017.vd
    <select name=leavrisk onchange="submit();">
        <option value="   ">All</option>
        %PATWEB92.01.104.2
        </select></td>
    <td class=HeadingCell align=center>
    Status
    <select name=leavstat onchange="submit();">
        <option value=" ">All</option>
        <option value="L">On Leave</option>
        <option value="R">Returned</option>
        <option value="A">Absconded</option>
        <option value="O">Discharged On Leave</option>
        </select></td>
    <td class=HeadingCell align=center>
    %STANDARD.01.017.CC
    <select name=leavcare onchange="submit();">
        <option value="   ">All
       <script type="text/javascript">document.write(document.SelectPeriod.leavereg.value);</script>
        </option>
        %PATWEB92.01.103.9.1.24.2.    
        </select></td>
      <td class=HeadingCell><input type=button value="<<" class=SmallButton
                 onclick='location.href="%PATWEB92.01.011"'>
          %PATWEB92.01.016
          <input type=button value=">>" class=SmallButton
                 onclick='location.href="%PATWEB92.01.010"'>
          <a href='javascript:SelectDateFrame();'>
<img src="../images/DateLookup.gif" class=Icon
                  alt="Select Date"></a>
          <a href='javascript:SelectView("0");'>
<img src=../images/DayIcon.gif class=Icon
                  alt="View Today"></a>
          <a href='javascript:SelectView("1");'>
<img src=../images/WeekIcon.gif class=Icon
                  alt="View This Week"></a>
      </td>

<td align=right class=Headingcell>
   <input id=btnRegister type=button value='Return to Register' class=bigbutton  onclick='RegisterView();'</td>
    </tr>
</table>
</form>
</div>

<div id=TableLocation></div>
<script type="text/javascript">
function AddTableRows() {
%PATWEB92.01.030.patweb98.01.048
}
function init(){
LeaveStatus = "%PATWEB92.01.105";
  for (var i =0 ; i < document.SelectPeriod.leavstat.length; i++) {
   if(document.SelectPeriod.leavstat.options[i].value==LeaveStatus.substr(0,1)){
       document.SelectPeriod.leavstat.selectedIndex=i } };
}
function PatientLeaveReg(ur,adm){
 location.href="patweb96.pbl?reportno=03&template=023&urnumber="+ur+
               "&admissno="+adm;
}
function UpdateWorkingDiag(ur,adm){
 return;
}
function UpdateLeaveReg(ur,adm,astat){
 return;
}
function RegisterView() {
  p=document.SelectPeriod
  location.href="patweb92.pbl?reportno=01&template=135"+
                "&leavward="+p.leavward.value+"&leavrisk="+p.leavrisk.value+
                "&leavereg="+p.leavereg.value+
                "&leavstat="+p.leavstat.value+"&leavcare="+p.leavcare.value
}

</script>
