<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
function PostUpdate() {
  document.UpdateForm.UpdButton.disabled=true;
  setTimeout('document.UpdateForm.UpdButton.disabled=false;',1500);
  setFormactn('U');
}
function SetExpBed() {
 ToggleReadyDT(document.UpdateForm.pmbrq009); // Enable Ready Date if Ward Selected
 if(isWhitespace(document.UpdateForm.pmbrq009.value) ||
    isWhitespace(document.UpdateForm.d_pmbrq010.value)) {
   return;
 }
 selectOptions2('31',document.UpdateForm.pmbrq009,document.UpdateForm.pmbrq010,'1');
 for (var i =0 ; i < document.UpdateForm.pmbrq010.length; i++) {
 if (document.UpdateForm.pmbrq010.options[i].value==
     document.UpdateForm.d_pmbrq010.value) {
     document.UpdateForm.pmbrq010.selectedIndex=i } };
 document.UpdateForm.d_pmbrq010.value="";
}

function ShowReadyDT() {
  if(document.getElementById('ReadyDateTime')) {
     document.getElementById('ReadyDateTime').style.display="";
  }
}

function HideReadyDT() {
  if (document.getElementById('ReadyDateTime')) {
    document.UpdateForm.pmbrq016.value = "";
    document.UpdateForm.pmbrq017.value = "";
    document.getElementById('ReadyDateTime').style.display="none";
  }
}

function ToggleReadyDT(DDLWard) {
  // Show Ward Bed Ready Date & Time
  if (!DDLWard || DDLWard == undefined)
    return;

  if (DDLWard.selectedIndex != 0) {
    ShowReadyDT();
  }
  else {
    HideReadyDT();
  }
}
function ShowBedReqNotes() {
  if (VariableNameExists('WBRFreeFormatDescDisplay')) {
    if (WBRFreeFormatDescDisplay == true) {
      document.getElementById('BedReqNotes').style.display = "";
    }
    else {
      document.getElementById('BedReqNotes').style.display = "none";
    }
  }
  else {
    document.getElementById('BedReqNotes').style.display = "none";
  }
}
function GetBedReqNotesLabel() {
  if (VariableNameExists('WBRFreeFormatDescDescription')) {
    document.write(WBRFreeFormatDescDescription);
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);ShowReadyDT();ShowBedReqNotes();">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExitRefresh();">
<script type="text/javascript">
  document.write('Ward/Bed Request - %PATWEB10.08.002');</script>
</span>
<form id=UpdateForm name=UpdateForm method=post action=patweb10.pbl
 style="margin:0">
<input type=hidden id=reportno name=reportno value="8">
<input type=hidden id=template name=template value="003">
<input type=hidden id=updttype name=updttype value=" ">
<input type=hidden id=urnumber name=urnumber value="%PATWEB10.08.003">
<input type=hidden id=admissno name=admissno value="%PATWEB10.08.101">
<input type=hidden id=pmbrq001 name=pmbrq001 value="%PATWEB10.08.101">
<input type=hidden id=d_pmbrq007 name=d_pmbrq007 value="%PATWEB10.08.107.1">
<input type=hidden id=ibcnmhos name=ibcnmhos 
 value="%STANDARD.01.025.000.043.1.1">
<input type=hidden id=d_pmbrq010 name=d_pmbrq010 value="">

<table align=center width=100% border=0>
<tr><td class=DataLabel width=20%>Request Date</td>
    <td><input type=text size=12 id=pmbrq002 name=pmbrq002 class="Readonly" 
         title="Admission Date" readonly value="%PATWEB10.08.102"
         tabindex=1>
         Time
        <input class=Readonly readonly type=text id=pmbrq003 name=pmbrq003 
         size=8 tabindex=2
         value="%PATWEB10.08.103" title="Request Time">
    </td>
    </tr>

<tr><td class=DataLabel>Requesting Department</td>
    <td><select id=pmbrq004 name=pmbrq004 class=Mandatory 
        title="Requesting Department" tabindex=3>
        <option></option>
        %PATWEB10.08.104.9.1.02.2.R
        </select>
    </td></tr>

<tr><td class=DataLabel>Requesting Ward</td>
    <td><select id=pmbrq012 name=pmbrq012 title="Requesting Ward" tabindex=4>
        <option></option>
        %PATWEB10.08.127
        </select>
    </td></tr>

<tr><td class=DataLabel>Admitting Dr/Unit</td>
   <td><input type=text id=pmbrq005 name=pmbrq005 size=10 maxlength=8 
        title="Admitting Dr/Unit" class=Mandatory tabindex=5
        value="%PATWEB10.08.105.1"
        onchange="UpCase(this); ValidateHCP(18,14,UpdateForm.pmbrq005,
                  UpdateForm.n_pmbrq005);">
       <input type=text id=n_pmbrq005 name=n_pmbrq005 size=35 readonly 
        title="HCP Name" tabindex=-1
        class=Readonly tabindex=-1 value="%PATWEB10.08.105.0">
       <img src="../images/SearchIcon.gif" class=Icon
        onclick="HCPSearchFrame(UpdateForm.pmbrq005,UpdateForm.n_pmbrq005,1);">
        <img src="../images/ClearIcon.gif" class=Icon
        onclick="clrFields(UpdateForm.pmbrq005,UpdateForm.n_pmbrq005);">
       </td></tr>

<tr><td class=DataLabel>Type of Bed Required</td>
    <td><select id=pmbrq006 name=pmbrq006 class=Mandatory tabindex=6
         title="Type of Bed Required">
        <option></option>
        %PATWEB10.08.106.2
        </select>
    </td></tr>

<tr><td class=DataLabel>Speciality Bed Required</td>
    <td><select id=pmbrq013 name=pmbrq013 title="Speciality Bed Required"
         tabindex=7>
        <option></option>
        %PATWEB10.08.128.2
        </select>
    </td></tr>
</table>

<div id="Hospital"></div>

<table align=center width=100% border=0>
<tr><td class=DataLabel width=20%>Diagnosis</td>
    <td colspan=2><input type=text size=12 maxlength=10 id=pmbrq008 
     name=pmbrq008 tabindex=9
     onchange="validateCode(6,UpdateForm.pmbrq008,UpdateForm.n_pmbrq008);"
     value="%PATWEB10.08.108.1">
    <input type=text id=n_pmbrq008 name=n_pmbrq008 readonly class=Readonly 
     size=50
     tabindex=-1 value="%PATWEB10.08.108.0">
    <img src=../images/SearchIcon.gif class=Icon
     onclick="Icd10DisSearchFrame(UpdateForm.pmbrq008,UpdateForm.n_pmbrq008);">
    <img src="../images/ClearIcon.gif" class=Icon
     onclick="clrFields(UpdateForm.pmbrq008,UpdateForm.n_pmbrq008);">
    </td>
</tr>

<tr id=BedReqNotes>
    <td class=DataLabel>
      <script type="text/javascript">GetBedReqNotesLabel();</script>
    </td>
    <td class=DataField>
      <input type=text name=pmbrq015 id=pmbrq015 size=90 maxlength=70
        value="%PATWEB10.08.132" tabindex=10>
    </td>
</tr>
</table>

<table align=center width=100% border=0>
<tr><td class=DataLabel valign=top>Notes</td>
    <td colspan=2>
    <textarea id=bedrqcom name=bedrqcom wrap=hard rows=4 cols=70 tabindex=11>
%PATWEB10.08.124</textarea>
    </td></tr>

<tr><td align=center colspan=3 rows=4><hr></td></tr>

<tr><td class=DataLabel width=20%>Expected Ward / Bed </td>
    <td><input type=hidden id=bedstat1 name=bedstat1>
        <input type=hidden id=warddesc name=warddesc>
        <select id=pmbrq009 name=pmbrq009 tabindex=13 title="Ward" 
       onfocus="SetExpBed();" 
       onchange="selectOptions2('31',UpdateForm.pmbrq009,UpdateForm.pmbrq010,'1');
                 ToggleReadyDT(this);">
        <option> </option>
         %PATWEB10.08.109.2
        </select>
        <select id=pmbrq010 name=pmbrq010 title="Expected Bed" tabindex=14>
        <option></option>
         %PATWEB10.08.130
        </select>
        <img notab src=../images/SearchIcon.gif class=Icon
         id=wardsrch name=wardsrch
         onclick="WardBedSearchFrame(UpdateForm.pmbrq009,UpdateForm.warddesc,
                  UpdateForm.d_pmbrq010,UpdateForm.bedstat1);">
        <img src="../images/ClearIcon.gif" class=Icon
         id=wardbclr name=wardbclr
         onclick="UpdateForm.pmbrq009.selectedIndex=0;
                  UpdateForm.d_pmbrq010.value='';
                  UpdateForm.pmbrq010.options.length=0;HideReadyDT();">
    </td>
    <td class=DataLabel>
      <span id=ReadyDateTime style="display:none">
        &nbsp;&nbsp;Ward Bed Ready Date
        <input type="text" id=pmbrq016 name=pmbrq016 size=12 title="Date"
         value="%PATWEB10.08.134" tabindex=15>
        <img src=../images/DateLookup.gif class=Icon
         onclick="DateLookupFrame(UpdateForm.pmbrq016);">Time&nbsp;
        <input type="text" id=pmbrq017 name=pmbrq017 size=8 title="Time"
         value="%PATWEB10.08.135" tabindex=16>
        <img src="../images/DateTimeStamp.gif" class=Icon
         onclick="SetCurrentDateTime(UpdateForm.pmbrq016,UpdateForm.pmbrq017);">
        <img src="../images/TimeLookup.gif" class=Icon
         onclick="TimeLookupFrame(UpdateForm.pmbrq017);">
      </span>
    </td>
</tr>

<tr><td class=DataLabel>Created By</td>
    <td>%PATWEB10.08.120 &nbsp;%PATWEB10.08.118 %PATWEB10.08.119</td></tr>

<tr><td class=DataLabel>Allocated By</td>
    <td>%PATWEB10.08.114 &nbsp;%PATWEB10.08.112 %PATWEB10.08.113</td></tr>

<tr><td class=DataLabel><span id=InsertCanBy style="display: none">
                         Cancelled By
                        </span>
    </td><td>
    <span id=InsertCanDet style="display: none">
     %PATWEB10.08.117 &nbsp;%PATWEB10.08.115 %PATWEB10.08.116
     </span>
    </td></tr>

</table>

<table align=center width=100% border=0>
<tr><td align=center><br>
   <span id=InsertUpdButton style="display: none">
   <input type=button value="Update" class=button
    id=UpdButton name=UpdButton tabindex=17
    onclick="PostUpdate();">
   </span>

   <span id=InsertDelButton style="display: none">
   <input type=button value="Delete" class="button" tabindex=18
    onclick="setFormactn('D');">
   </span>

   <input type=button value=Close class="button" tabindex=19
    onclick="DFrameCloseRefresh()">
</td></tr>
</table>
</form>

<span id="ShowHospital" style="display: none">
<table align=center width=100% border=0>
<tr><td class=DataLabel width=20%>Preferred Hospital</td>
    <td><select id=pmbrq014 name=pmbrq014 class=Mandatory tabindex=8 
        title="Preferred Hospital">
        <option></option>
        %PATWEB10.08.129.1
        </select>
    </td></tr>
</table>
</span>

<script type="text/javascript">
if(document.UpdateForm.d_pmbrq007.value=="3" ||
   document.UpdateForm.d_pmbrq007.value=="4") {
   document.UpdateForm.pmbrq009.disabled=true;
   document.UpdateForm.pmbrq010.disabled=true;
   document.UpdateForm.wardsrch.disabled=true;
   document.UpdateForm.wardbclr.disabled=true;
   InsertUpdButton.style.display="none";
} else {
   InsertUpdButton.style.display="";
}
if(document.UpdateForm.d_pmbrq007.value==" " ||
   document.UpdateForm.d_pmbrq007.value=="1") {
   InsertDelButton.style.display="";
} else {
   InsertDelButton.style.display="none";
}
if(document.UpdateForm.d_pmbrq007.value=="4") {
   InsertCanBy.style.display="";
   InsertCanDet.style.display="";
} else {
   InsertCanBy.style.display="none";
   InsertCanDet.style.display="none";
}
if(document.UpdateForm.ibcnmhos.value=="1") {
  document.getElementById('Hospital').innerHTML=ShowHospital.innerHTML
  document.getElementById('Hospital').style.display="";
}

if(document.UpdateForm.d_pmbrq007.value=="2") {
  // Show Ward Bed Ready Date & Time if status = 'Allocated'
  document.getElementById('ReadyDateTime').style.display="";
}
</script>
