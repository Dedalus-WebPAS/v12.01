<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="CrossBrowser" content="true">
<meta name="HelpFileName"    content="NoContextSet.html">
<script type="text/javascript">

var confirmUpdate = "WARNING\nAre you sure you want to change this to patient";
confirmUpdate += " level hold? This will \n replace the Health Fund On Hold";

var confirmDelete = "WARNING\nAre you sure you want to remove the invoice";
confirmDelete += " hold for this patient?\nIf the Fund is on hold, this will";
confirmDelete += " take effect immediately. If the fund is not on hold, the";
confirmDelete += " invoice will be able to be raised."


function HoldInvoice() {
  if(!isWhitespace(document.UpdateForm.ptipe001.value)) {
    if(document.UpdateForm.trnsupty.value == 1) {
       if (confirm(confirmUpdate)) {
         setFormactn('U');
       } else {
         return;
       }
    } else {
      setFormactn('U');
    }
  } else {
   alert('Reason for Hold Invoice must be entered');
   return;
  }
}
function DeleteHoldInv() {
  if(isWhitespace(document.UpdateForm.ptipe001.value)) {
    DFrameExitRefresh();
    return;
  }

     if(confirm(confirmDelete)) {
//  var serverURL = "../cgi-bin/patweb79.pbl?reportno=8" +
//        "&admissno=" + UpdateForm.admissno.value.replace(/ /g,"+")
//  var returnValue = RSExecute(serverURL);
//  if (returnValue.status==0) {
//    ReturnValue=returnValue.return_value.split("|");
//    reasonhold=trim(ReturnValue[2]);
//    hfdesc=trim(ReturnValue[1]);
//    invstat=trim(ReturnValue[0]);
//    if (invstat==1 || invstat==2) {
//      if (confirm('Warning: ' + hfdesc + ' currently on hold.\n'+
//              'Reason: ' + reasonhold + '.\n'+
//              'Do you want to apply this hold to this invoice also ?\n' +
//              'Click Ok to apply, or CANCEL to remove all invoice holds.')) {
//       setFormactn('F');
//       return;
//      }
//    }
//   }
  setFormactn('R');
 }
}

function SetDescription() {
 if (document.UpdateForm.ptipe001 != undefined) {
  if(!isWhitespace(document.UpdateForm.ptipe001.value)) {
    document.UpdateForm.ptipe002.className="";
    document.UpdateForm.ptipe002.readOnly=false;
  } else {
    document.UpdateForm.ptipe002.value="";
    document.UpdateForm.ptipe002.className="Readonly";
    document.UpdateForm.ptipe002.readOnly=true;
    document.UpdateForm.delbutton.disabled=true;
  }
 }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);SetDescription();">
<span id="titleBar" class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon"
 src="../images/ExitIcon.gif" onclick="DFrameExitRefresh();">
%PATWEB75.16.108Hold Invoice  - Visit %PATWEB75.16.081
</span>
<form name=UpdateForm action=patweb75.pbl method=post style="margin:0">
<input type=hidden name=reportno value=16>
<input type=hidden name=template value=002>
<input type=hidden name=updttype value="">
<input type=hidden name=admissno value="%PATWEB75.16.081">
<input type=hidden name=urnumber value="%PATWEB75.16.003">
<input type=hidden name=hinvcode value="%PATWEB75.16.104.3">
<input type=hidden name=hfinvcde value="%PATWEB75.16.107.3">
<input type=hidden name=trnsupty value="%PATWEB75.16.106">

<table width=95% align=center border=0 cellspacing=0 cellpadding=1>
<tr><td width=25% class=DataLabel>&nbsp;</td>
    <td class=DataField>&nbsp;</td></tr>
</table>

<div id=ReasonHold></div>

<table width=95% align=center border=0 cellspacing=0 cellpadding=1>
<tr><td width=25% class=DataLabel>Description for Hold Invoice</td>
    <td><input type="text" name=ptipe002 size=82 maxlength=80
        value="%PATWEB75.16.105" title="Description for Hold Invoice">
    </td></tr>

<tr><td class=DataLabel>&nbsp;</td>
    <td class=DataField>&nbsp;</td></tr>
</table>

<div id=AvailableOption></div>

</form>

<span id=ChangeInv style="display:none">
<table width=95% align=center border=0 cellspacing=0 cellpadding=1>
<tr><td width=25% class=DataLabel>Reason for Hold Invoice</td>
    <td><select name="ptipe001" title="Reason for Hold Invoice"
         onchange="SetDescription();">
        <option></option>
        %PATWEB75.16.104.9.6.02.1.P
        </select>
    </td></tr>
</table>
</span>

<span id=DisplayInv style="display:none">
<table width=95% align=center border=0 cellspacing=0 cellpadding=1>
<tr><td width=25% class=DataLabel>Reason for Hold Invoice</td>
    <td><input type="text" name=d_ptipe001 class=Readonly readonly
        value="%PATWEB75.16.104.0" title="Reason for Hold Invoice">
    </td></tr>
</table>
</span>

<span id=ChangeOption style="display:none">
<table width=95% align=center border=0 cellspacing=0 cellpadding=1>
<tr><td colspan=2 align=center>
    <input type=button class="button" value="Update"
     onclick="HoldInvoice();">
    <input type=button class="button" value="Delete" name=delbutton
     onclick="DeleteHoldInv();">
    <input type=button class="button" value="Cancel" 
     onclick="DFrameExitRefresh();">
    </td></tr>
</table>
</span>

<span id=CloseOption style="display:none">
<table width=95% align=center border=0 cellspacing=0 cellpadding=1>
<tr><td colspan=2 align=center>
    <input type=button class="button" value="Close" 
     onclick="DFrameExitRefresh();">
    </td></tr>
</table>
</span>

<span id="titleBar02" class=DFrameTitleBar style="display:none">
<img align="right" alt="Exit" class="MenuIcon"
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
Supervisor Hold Invoice  - Visit %PATWEB75.16.081
</span>

<script type="text/javascript">

if(((document.UpdateForm.hinvcode.value.substr(4,1)) == "H") &&
   (document.UpdateForm.trnsupty.value != "1")) {
    ReasonHold.innerHTML=DisplayInv.innerHTML;
    AvailableOption.innerHTML=CloseOption.innerHTML;
    document.UpdateForm.ptipe002.className="Readonly";
    document.UpdateForm.ptipe002.readOnly=true;
} else if ((document.UpdateForm.hinvcode.value.substr(4,1) == "H") &&
    (document.UpdateForm.trnsupty.value =="1")) {
    ReasonHold.innerHTML=ChangeInv.innerHTML;
    AvailableOption.innerHTML=ChangeOption.innerHTML;
    document.UpdateForm.delbutton.style.display = "none";
} else if ((document.UpdateForm.hinvcode.value.substr(4,1) == "H") ||
    (document.UpdateForm.trnsupty.value =="1")) {
    ReasonHold.innerHTML=ChangeInv.innerHTML;
    AvailableOption.innerHTML=ChangeOption.innerHTML;
} else {
    ReasonHold.innerHTML=ChangeInv.innerHTML;
    AvailableOption.innerHTML=ChangeOption.innerHTML;
}

</script>
