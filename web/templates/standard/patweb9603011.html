<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<style type=text/css> 
.TransferOption {
position: relative; 
}
</style>
<script type="text/javascript">
function SubmitInsurance() {
  if (!validateMandatory(pat96ins)) {
     return;
  }
  if (!isWhitespace(pat96ins.tranfund.value)) {
     if (!validateHFT(20,pat96ins.tranfund,pat96ins.trantabl,
                         pat96ins.funddesc,pat96ins.tabldesc)) {
        ans=confirm("Select another active health fund table? ");
        if (ans==true) {
           return;
        }
     }
  }

  ValidatePublicClaim();
  UpdHealthFund();
  setRedirect()
  SubmitHidden(pat96ins);
}
function UpdHealthFund() {
  updhf=document.pat96ins.ptcnpmhf.value;
  if (updhf=="1") {
    if((trim(pat96ins.pmihfund.value)!=trim(pat96ins.tranfund.value)) ||
       (trim(pat96ins.pmihftab.value)!=trim(pat96ins.trantabl.value)) ||
       (trim(pat96ins.pmihndmm.value)!=trim(pat96ins.tranmemb.value)))  {
    if(!confirm("Do you want to Update the PMI Health Fund/Table/Membership Number?\n" +
                "Press OK to update the PMI record with the new Fund details.\n" +
                "Press Cancel to retain the existing PMI Fund details.")){
         pat96ins.updhfund.value="1";   // NOT to Update PMI Health fund
         return;
      }
    }
  pat96ins.updhfund.value="0";     // default to Update PMI Health fund
  }
}
function setRedirect() {
   if(document.pat96ins.ptcnmfin.value == "1") {
     document.pat96ins.redirect.value="patweb96.pbl?reportno=03&template=004"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value;
    return;
   }
   if (document.pat96ins.traclaim.value.substr(3,1) == "M") {
     document.pat96ins.redirect.value="patweb89.pbl?reportno=01&template=006"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value;
   } else if (document.pat96ins.traclaim.value.substr(3,1) == "V") {
     document.pat96ins.redirect.value="patweb89.pbl?reportno=01&template=007"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value;
   } else if (document.pat96ins.traclaim.value.substr(3,1) == "W") {
     document.pat96ins.redirect.value="patweb89.pbl?reportno=01&template=005"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value;
   } else if (document.pat96ins.traclaim.value.substr(8,1) == "C") {
     document.pat96ins.redirect.value="patweb89.pbl?reportno=01&template=021"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value;
   } else if ((document.pat96ins.traclaim.value.substr(5,1)=="A")&&
             (document.pat96ins.ptcnueoc.value==1)) {
     document.pat96ins.redirect.value="eocweb01.pbl?reportno=01&template=006"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value
     + "&returncd=TRF";
   } else {
     document.pat96ins.redirect.value="patweb96.pbl?reportno=03&template=004"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value;
   }
}
function ShowClaimcode() {
  if(document.pat96ins.ptcnmfin.value!="1") {
    ClaimCode1.innerHTML=DisplayClaimField.innerHTML;
    ClaimCode2.innerHTML=DisplayClaimCode.innerHTML;
  }
}
// Validate if changing from/to public and trigger additional A11/A01 HL7 msg
function ValidatePublicClaim() {
  var p = document.pat96ins;

  if (p.ptcnmfin.value == "1")
    return;  // Claim Code not being changed

  // Parameter set to send A11 message?
  if (p.ptcnsa11.value == "1") {
    // going from Public to Non-Public
    if ((p.claimcod.value.substr(3,1) == "P") &&
        (p.traclaim.value.substr(3,1) != "P")) {
      p.trigra11.value = "1";
    }
  }

  // Parameter set to send A01 message?
  if (p.ptcnsa01.value == "1") {
    // going from Non-Public to Public
    if ((p.claimcod.value.substr(3,1) != "P") &&
        (p.traclaim.value.substr(3,1) == "P")) {
      p.trigra01.value = "1";
    }
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);ShowClaimcode();">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB96.03.003";
PatientVIS="%PATWEB96.03.081";
PatientNAM="%PATWEB96.03.002";
PatientSTA="%PATWEB96.03.086.078";
PatientALT="%PATWEB96.03.084";
PatientSEX="%PATWEB96.03.019";
PatientDOB="%PATWEB96.03.020";
PatientAGE="%PATWEB96.03.021";
PatientLOC="%PATWEB96.03.083";
PatientPRI="%PATWEB96.03.086.066.1";
PatientUNT="%PATWEB96.03.066.0";
DoctorCOD="%PATWEB96.03.082.003";
DoctorNAM="%PATWEB96.03.082.002";
PatientAID="%PATWEB96.03.086.090";
PatientIND="%PATWEB96.03.086.091";
PatientCUR="%PATWEB96.03.086.092";
PatientCLC="%PATWEB96.03.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB96.03.086.094";
PatientCDM="%PATWEB96.03.086.095";
PatientVDH="%PATWEB96.03.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>

<form name=pat96ins id=pat96ins style="margin:0" %PATWEB96.03.201.001
<input type=hidden name=reportno id=reportno value="10">
<input type=hidden name=urnumber id=urnumber value="%PATWEB96.03.003">
<input type=hidden name=admissno id=admissno value="%PATWEB96.03.081">
<input type=hidden name=redirect id=redirect
 value="%PATWEB96.03.001.patweb96.03.004">
<input type=hidden name=nextpage id=nextpage value="7">
<input type=hidden name=trnleave id=trnleave value="0">
<input type=hidden name=updhfund id=updhfund value="">
<input type=hidden name=bedstat1 id=bedstat1>
<input type=hidden name=warddesc id=warddesc >
<input type=hidden name=admistat id=admistat value="%PATWEB96.03.104">
<input type=hidden name=ptcnueoc id=ptcnueoc value="%PATWEB96.03.224">
<input type=hidden name=ptcnmfin id=ptcnmfin
 value="%STANDARD.01.025.118.134.0.1">
<input type=hidden name=tranfund id=tranfund value="%PATWEB96.03.114.0">
<input type=hidden name=trantabl id=trantabl value="%PATWEB96.03.115.0">
<input type=hidden name=ptcnsa11 id=ptcnsa11
 value="%STANDARD.01.025.124.218.0.1">
<input type=hidden name=ptcnsa01 id=ptcnsa01
 value="%STANDARD.01.025.124.219.0.1">
<input type=hidden name=claimcod id=claimcod value="%PATWEB96.03.126.3">
<input type=hidden name=trigra11 id=trigra11 value="0">
<input type=hidden name=trigra01 id=trigra01 value="0">
<input type=hidden name=pmihfund id=pmihfund value="%PATWEB96.03.040.0">
<input type=hidden name=pmihftab id=pmihftab value="%PATWEB96.03.041.0">
<input type=hidden name=pmihndmm id=pmihndmm value="%PATWEB96.03.042">
<input type=hidden name=ptcnpmhf id=ptcnpmhf id=ptcnpmhf
                                 value="%STANDARD.01.025.124.157.0.1">

<table border=1 width=100% cellspacing=0 cellpadding=1>
<tr><td class=HeadingCell align=center colspan=2 width=100%>
      Bed Transfer & Leave Maintenance </td>
</tr>

<tr valign=top><td>
  <table border=0 width=100% cellspacing=1>
  <tr><td class=HeadingCell align=center colspan=2>Current Status</td>
      <td align=center class=HeadingCell colspan=2>Insurance Details</td></tr>

  <tr><td class=DataLabel>Ward / Bed </td>      
      <td><input type=text size=25 readonly value="%PATWEB96.03.105.0">
          <input type=text size=15 readonly value="%PATWEB96.03.106"></td>
      <td><div id="ClaimCode1"></div></td>
      <td><div id="ClaimCode2"></div></td>
  </tr>

  <tr><td class=DataLabel>Transfer In Date & Time </td>
      <td><input type=text size=11 readonly value="%PATWEB96.03.204" >
          <input type=text size=5 readonly value="%PATWEB96.03.205">
      </td>
      <td class=DataLabel>Health Fund</td>
      <td><input type=text size=35 name=funddesc id=funddesc maxlength="30"
           value="%PATWEB96.03.114.1" notab readonly> 
      </td>
  </tr>

  <tr><td class=DataLabel>Attending Doctor</td>
      <td><input type=text size=35 readonly value="%PATWEB96.03.108.002"></td>
      <td>Table</td>
      <td>
        <input type="text" size=20 maxlength=30 name="tabldesc" id="tabldesc"
         value="%PATWEB96.03.115.1" notab readonly>
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="HealthFundSearchFrameNoFocus(pat96ins.tranfund,
                                               pat96ins.funddesc,
                                               pat96ins.trantabl,
                                               pat96ins.tabldesc);">
        <img src="../images/erase.gif" class=Icon 
         onclick="clrDoc(pat96ins.funddesc,pat96ins.tabldesc);
                  clrDoc(pat96ins.tranfund,pat96ins.trantabl);">
      </td>
  </tr>

  <tr><td class=DataLabel>%STANDARD.01.017.A </td>
      <td><input type=text readonly size=30 value="%PATWEB96.03.111.0"></td>
      <td class=DataLabel>Member Number</td>
      <td><input type=text name=tranmemb id=tranmemb size=25
           value="%PATWEB96.03.116"></td>
  </tr>

  <tr><td class=DataLabel>%STANDARD.01.017.CC</td>
      <td><input type=text readonly size=30 value="%PATWEB96.03.113.0"></td>
      <td align=center colspan=2>
          <input type=button name=formactn id=formactn value=Update
           class="button"
           onclick="tempDisable(this);SubmitInsurance();">
          <input type=button value=Cancel class="button"
           onclick="PatientLinkTo('patweb96.pbl',3,4,0);"></td>
  </tr>

  <tr><td class=DataLabel>%STANDARD.01.017.AC</td>
      <td><input type=text readonly size=30 value="%PATWEB96.03.124.0"></td>
  </tr>

  <tr><td class=DataLabel>%STANDARD.01.017.CL</td>
      <td><input type=text readonly value="%PATWEB96.03.126.0"></td>
  </tr>

  <tr><td class=DataLabel>Health Fund</td>
      <td><input type=text size=35 maxlength=30 readonly
           value="%PATWEB96.03.114.1"></td>
  </tr>

  <tr><td>Table</td>
      <td><input type=text size=20 maxlength=30 readonly
           value="%PATWEB96.03.115.1"></td>
  </tr>
  </table>
</td></tr>

</table>
</form>
</div>

<form name=PatientLinks id=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%PATWEB96.03.003">
<input type=hidden name=admissno value="%PATWEB96.03.081">
<input type=hidden name=MenuType value="%PATWEB96.03.088">
<input type=hidden name=alert001 value="">
</form>

<div id="DisplayClaimField" style="display:none">
  %STANDARD.01.017.CL
</div>

<div id="DisplayClaimCode" style="display:none">
  <select name=traclaim id=traclaim class=Mandatory>
    <option></option>
    %PATWEB96.03.126.9.1.10.2.X
  </select>
</div>
