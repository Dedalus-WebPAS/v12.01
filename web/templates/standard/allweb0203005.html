<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="">
<meta name="CrossBrowser" content="true">
<script language="javascript" src="../js/allweb03.js"></script>
<script language="javascript" src="../js/allweb02.js"></script>
<script language="javascript" src="../js/allweb0202.js"></script>
<script type="text/javascript" src="../js/OutpatientSelect.js"></script>
<script type="text/javascript" src="../js/OutpatientTypeClinic.js"></script>
<script type="text/javascript">


function displayDiagnosisPopupFrame(linkUrl)
{
  var left = (document.body.clientWidth-780)/2;
  DFrameLink(linkUrl,25,left,800,550);
}

function removeHealthCondition(code)
{
 DeleteForm.diagcode.value = code;

 if(confirm("Are you sure you want to Delete?"))
     SubmitHiddenNew(DeleteForm);

}

function sendDiagnosisToParentFrame()
{
 var updateSACFlag = parent.document.getElementById("rerfflag");
 var Condition2 = parent.document.getElementById("mhcon002");

 if(updateSACFlag)
 {
   if(Condition2) {
     itemExistInCollection2("btnMainHealth",MAINHEALTH_3);
   } else {
     itemExistInCollection("btnMainHealth",MAINHEALTH);
   }
   setParentDisplay();
   DFrameExit();
 }
 else 
   DFrameExitRefresh();
}

function itemExistInCollection(id,variable)
{
  var btn = parent.document.getElementById(id);

  if(btn)
  {
    if(variable==1)
      btn.style.color = "red";
    else
      btn.style.color = "black";
  }
}
function itemExistInCollection2(id,variable)
{
  var btn = parent.document.getElementById(id);

  if(btn)
  {
    if(variable!="")
      btn.style.color = "red";
    else
      btn.style.color = "black";
  }
}

function setParentDisplay() {
  var Condition1 = parent.document.getElementById("mhcon001");
  var Condition1U = parent.document.getElementById("mhunq001");
  var Condition2 = parent.document.getElementById("mhcon002");
  var Condition2U = parent.document.getElementById("mhunq002");
  var Cbtn = parent.document.getElementById("btnMainHealth");
  
  if(!Condition1 || !Condition2 || !Cbtn) {
    return;
  }
  Condition1.value=MAINHEALTH_1;
  Condition1U.value=MAINHEALTH_1U;
  Condition1.focus();
  Condition2.value=MAINHEALTH_2;
  Condition2U.value=MAINHEALTH_2U;
  Condition2.focus();
  Cbtn.focus();
}

function getDeptcodeQueryString()
{
  UpdateForm.deptcode.value = getQueryString("deptcode");
  AddForm.deptcode.value =  UpdateForm.deptcode.value;
  DeleteForm.deptcode.value = UpdateForm.deptcode.value;
}

function addMainHealthcondition()
{
  if(validateMandatory(UpdateForm))
  {
    AddForm.diagcode.value = UpdateForm.diagcode.value;
    SubmitHiddenNew(AddForm);
  }
}
function VLDiag() {
  if(document.getElementById("chkvinah").value=="1") {
    validateAHDiagV(UpdateForm.deptcode,UpdateForm.diagcode,
                    UpdateForm.d_diagcode,UpdateForm.valddate);
  } else {
    validateAHDiagV(UpdateForm.deptcode,UpdateForm.diagcode,
                    UpdateForm.d_diagcode);
  }
}
function SRDiag() {
  if(document.getElementById("chkvinah").value=="1") {
    AHDiagSearchFrameV(UpdateForm.deptcode,UpdateForm.diagcode,
                       UpdateForm.d_diagcode,UpdateForm.valddate);
  } else {
    AHDiagSearchFrame(UpdateForm.deptcode,UpdateForm.diagcode,
                      UpdateForm.d_diagcode);
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);getDeptcodeQueryString();">
<script>
MAINHEALTH="%ALLWEB02.03.608";
MAINHEALTH_1="%ALLWEB02.03.623.1.0";
MAINHEALTH_1U="%ALLWEB02.03.623.1.2";
MAINHEALTH_2="%ALLWEB02.03.623.2.0";
MAINHEALTH_2U="%ALLWEB02.03.623.2.2";
MAINHEALTH_3="%ALLWEB02.03.623.3.0";
</script>
<span class=DFrameTitleBar>
<img border=0 align=right src=../images/ExitIcon.gif onclick="sendDiagnosisToParentFrame();">
Episode Health Conditions
</span>
<div id=PageBodySection>
<form id=AddForm name=AddForm action="allweb02.pbl" method=post
 onsubmit='return validateMandatory(this)'>
<input type=hidden name=reportno value=3>
<input type=hidden name=template value=005>
<input type=hidden name=updatety value="Q">
<input type=hidden name=nextpage value=0>
<input type=hidden name=redirect value="">
<input type=hidden name=admissno value="%ALLWEB02.03.081" />
<input type=hidden name=deptcode value="" />
<input type=hidden name=diagcode value="" />
</form>
<form id=DeleteForm name=DeleteForm action="allweb02.pbl" method=post
 onsubmit='return validateMandatory(this)'>
<input type=hidden name=reportno value=3>
<input type=hidden name=template value=005>
<input type=hidden name=updatety value="M">
<input type=hidden name=nextpage value=0>
<input type=hidden name=redirect value="">
<input type=hidden name=admissno value="%ALLWEB02.03.081" />
<input type=hidden name=deptcode value="" />
<input type=hidden name=diagcode value="" />
</form>

<form id=UpdateForm name=UpdateForm action="allweb02.pbl" method=post
 onsubmit='return validateMandatory(this)'>
<input type=hidden name=reportno value=3>
<input type=hidden name=template value=005>
<input type=hidden name=updatety value="U">
<input type=hidden name=nextpage value=0>
<input type=hidden name=redirect value="">
<input type=hidden name=admissno value="%ALLWEB02.03.081" />
<input type=hidden id=deptcode name=deptcode value="" />
<input type=hidden id="chkvinah" name=chkvinah value="%ALLWEB02.03.788" />
<input type=hidden id="valddate" name=valddate value="%ALLWEB02.03.789" />
<table align=center cellspacing=0 cellpadding=1 border=1 width=100%>
<tr>
  <td class="HeadingCell">Code</td>
  <td class="HeadingCell">Description</td>
</tr>
<tr>
  <td class="DataLabel">
    <input type="text" id="diagcode" name="diagcode" class="Mandatory" size="10"
           title="Episode Health Condition Code"
    onblur="VLDiag();" />
  </td>
  <td class="DataLabel">
    <input type="text" id="d_diagcode" name="d_diagcode" class="ReadOnly" 
           readonly="true" size="70"/>
    <img src="../images/SearchIcon.gif" class="Icon" id="imgSearch"
         onclick="SRDiag()" />
     <img src="../images/ClearIcon.gif" class=Icon
        onclick="clrFields(diagcode,d_diagcode);">
    <input type="button" class="button" value="Add" id="addbutton"
           onclick="tempDisable(this);addMainHealthcondition();" />
    <input type="button" class="button" value="Ok" id="okbutton"
           onclick="tempDisable(this);sendDiagnosisToParentFrame();" />
  </td>
</tr>
</table>
<br />
<div style="height:300px;overflow:auto;">
<table id="mainHealthTable" border="1" width="99%">
<tr><td class="HeadingCell" width="50">Remove</td>
<td class="HeadingCell">Code</td>
<td class="HeadingCell">Description</td>
</tr>
%ALLWEB02.03.605
</table>
</div>
</form>
</div>
