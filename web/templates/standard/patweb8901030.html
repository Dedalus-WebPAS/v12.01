<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/admission.js"></script>
<script type="text/javascript" src="../js/ndis.js"></script>
<script type="text/javascript">
function SubmitUpd() {
    MandatoryOk=true;
    intstay=document.UpdateForm.ptvis043.value.substr(3,1)
    criteria=document.UpdateForm.ptvis041.value.substr(3,1)
    valIntStay(intstay,criteria);
    if(errorflag=="true"){
       return;}

    if  (!validateMandatory(document.UpdateForm)) {
        return;
    }

    // Set 'Planned Length of Stay' to ZERO if no value is specified
    if (isWhitespace(UpdateForm.ptmis030.value)) 
      UpdateForm.ptmis030.value=0;

    if (MandatoryOk) {
       document.UpdateForm.ptvis115.value=document.UpdateForm.d_ptvis115.value;
       if(!validateMRFD(document.UpdateForm.admisdte,document.UpdateForm.mrfddate)) {
             return;
      }
       UpdHealthFund();
       setRedirect();
       document.UpdateForm.submit();
    }
}
function MyHealthRec() {
  document.getElementById('MyhealthRecLebel').innerHTML=DescriptionPCEHR;
  document.UpdateForm.ptvis115.title=DescriptionPCEHR;
}
function validateMRFD(adat,mrfd) {
  if (isWhitespace(adat.value) || isWhitespace(mrfd.value)) {
    return true;
  }
  if (SetDateYYYYMMDD(adat.value) > SetDateYYYYMMDD(mrfd.value)) {
    alert(mrfd.title + " can't be prior to the Admission Date.");
    FocusDelay(mrfd);
    return false;
  }
  return true;
}
function disDelay(cliDis) {
  if (!isWhitespace(cliDis.value)) {
    document.getElementById("rsndisde").style.display = "";
    document.getElementById("vsxdc014").className = "Mandatory";
    document.getElementById("vsxdc014").disabled = false;
  } else {
    document.getElementById("rsndisde").style.display = "none";
    document.getElementById("vsxdc014").className = "";
    document.getElementById("vsxdc014").disabled = true;
    document.getElementById("vsxdc014").value = "";
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);DisplayTrnSrc();ShowNdisPartVal();
              document.UpdateForm.ptmis011.focus();MyHealthRec();">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB89.01.003";
PatientVIS="%PATWEB89.01.081";
PatientNAM="%PATWEB89.01.002";
PatientSTA="%PATWEB89.01.086.078";
PatientALT="%PATWEB89.01.084";
PatientSEX="%PATWEB89.01.019";
PatientDOB="%PATWEB89.01.020";
PatientAGE="%PATWEB89.01.021";
PatientLOC="%PATWEB89.01.083";
PatientPRI="%PATWEB89.01.086.066.1";
PatientUNT="%PATWEB89.01.066.0";
DoctorCOD="%PATWEB89.01.082.003";
DoctorNAM="%PATWEB89.01.082.002";
PatientAID="%PATWEB89.01.086.090";
PatientIND="%PATWEB89.01.086.091";
PatientCUR="%PATWEB89.01.086.092";
PatientCLC="%PATWEB89.01.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB89.01.086.094";
PatientCDM="%PATWEB89.01.086.095";
PatientVDH="%PATWEB89.01.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<form name=linkForm action=patweb89.pbl method=post style=margin:0>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=1>
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name=admissno value="%PATWEB89.01.101">
</form>
<form name=UpdateForm method=post action=patweb89.pbl style=margin:0>
<input type="hidden" name="reportno" value="2">
<input type="hidden" name="template" value="030">
<input type="hidden" name="urnumber" value="%PATWEB89.01.003">
<input type="hidden" name="admissno" value="%PATWEB89.01.081"> 
<input type="hidden" name="updatety" value="6">
<input type="hidden" name="allocate" value="1">
<input type="hidden" name="redirect" value="%PATWEB89.01.001.patweb98.01.002">
<input type="hidden" name="chckname" value="0">
<input type="hidden" name="emradmit" value="0">
<input type="hidden" name="emradmis" value="0">
<input type="hidden" name="newbmand" value="0">
<input type="hidden" name="agebmand" value="0">
<input type="hidden" name="ptmis027" value="%PATWEB89.01.126.3">
<input type="hidden" name="ptmis073" value=" ">
<input type="hidden" name="ptmis075" value="N">
<input type="hidden" name="ptmis074" value="N">
<input type="hidden" name="ptmas046" value="0">
<input type="hidden" name="chdisdte" value="1">
<input type="hidden" name=o_ptmis030 value="%PATWEB89.01.129">
<input type="hidden" name="admnstat" value="%PATWEB89.01.924">
<input type="hidden" name="ptasf003" value="%PATWEB89.01.199.003.1">
<input type="hidden" name="admisdte" value="%PATWEB89.01.102">
<input type="hidden" name="wardcode" value="%PATWEB89.01.105.1">
<input type="hidden" name="mvmedrec">

<input type=hidden name=ptcndigp id=ptcndigp
 value="%STANDARD.01.025.124.122.0.1">
<input type=hidden name=ptcndumh id=ptcndumh
 value="%STANDARD.01.025.124.240.0.1">

<input type="hidden" name="updhfund" value="">
<input type="hidden" name="pmihfund" value="%PATWEB89.01.040.0">
<input type="hidden" name="pmihftab" value="%PATWEB89.01.041.0">
<input type="hidden" name="pmihndmm" value="%PATWEB89.01.042">
<input type="hidden" name="ptcnpmhf" id="ptcnpmhf"
     value="%STANDARD.01.025.124.157.0.1">
<input type=hidden name=mh_visit value="%PATWEB89.01.999.008">
<input type=hidden name=ptcnhdps id=ptcnhdps
       value="%STANDARD.01.025.080.250.1.1">
<input type=hidden name=d_ptvis121 id=d_ptvis121
       value="%PATWEB89.01.298.043">

<table border=1 colspan=1 width=100% cellspacing=1 cellpadding=1 >
<tr><td class=HeadingCell align=center>
    Update Admission Details</tr>
<tr>
<tr><td>
    <table border=0 width=100% class=TableBody cellpadding=0 cellspacing=0>
       <tr><td class=DataLabel>Admission Date</td>
           <td class=DataLabel>
           <input class=readonly readonly value="%PATWEB89.01.102">
           at 
           <input class=readonly readonly value="%PATWEB89.01.103">
          </td>
       <td>Admitting Point</td>
       <td>
         <select name=ptvis046 tabindex=9>
           <option> </option>
            %PATWEB89.01.290.2
         </select>
         </td></tr>
      <tr><td class=DataLabel>%STANDARD.01.017.P </td>
          <td><select name=ptmis011 tabindex=1  
               title="%STANDARD.01.017.P " class=Mandatory>
              <option> </option>
                 %PATWEB89.01.112.2
              </select></td>
          <td class=DataLabel>Ward / Bed </td>
          <td><input type=text class=ReadOnly readonly size=30 
               value="%PATWEB89.01.105.0">
              <input type=text class=ReadOnly readonly maxlength=3 size=3
               name=beddcode title="Bed" value="%PATWEB89.01.106">
      </td>
      <tr>
          <td class=DataLabel>Admission Source</td>
          <td><select name=ptmis009 tabindex=2 class=Mandatory id=ptmis009
                 title="Admission Source" onchange="DisplayTrnSrc()">
                 <option> </option>
                 %PATWEB89.01.110.2
                 </select></td>
          <td class=DataLabel>Attending Doctor</td>
          <td><input type=text size=45 class=readonly readonly 
               value="%PATWEB89.01.108.002">
                 </td></tr>

          <tr><td><div id=TranSrcHeading></div></td>
          <td><div id=TranSrc></div></td>
          <td class=DataLabel>Unit</td>
          <td><input size=30 class=readonly readonly value="%PATWEB89.01.124.0">
          </td></tr>
         <tr><td align=left>Prior Days Hospitalisation</td>
          <td><input type=text name=ptmis031 
            title='Prior Days Hospitalisation'
            class=Integer size=5 maxlength=4 tabindex=4
            onblur=checkInteger(this,this.title) value="%PATWEB89.01.130">
         </td>
          <td class=DataLabel>Diagnosis </td>
          <td><input type=text name="ptmis020" size=50 maxlength=80 tabindex=10 
        value="%PATWEB89.01.121">
   </td></tr>
       <tr><td>Mode of Arrival</td>
       <td>
         <select name=ptvis054 tabindex=5>
         <option></option> %PATWEB89.01.257.2
         </select>
       </td>
          <td class=DataLabel>Provisional DRG</td>
          <td><input type=text name=ptmis066 size=5 maxlength=4 tabindex=11
              onblur='validateCode(5,ptmis066,drgdesc1)' id=ptmis066
              value="%PATWEB89.01.140.0">
              <input type=text name=drgdesc1 size=45 id=drgdesc1 
               value="%PATWEB89.01.140.1">
              <img src="../images/SearchIcon.gif" class=Icon
               onclick="DrgSearchFrame(ptmis066,drgdesc1)">
          </td></tr>
        <tr><td class=DataLabel>Criteria for Admission</td>
    <td>
       <select name=ptvis041 tabindex=6 class=Mandatory 
               title="Criteria for admission">
       <option> </option>
       %PATWEB89.01.244.2
       </select>
    </td>
            <td class=DataLabel> Diet Code </td>
          <td><select name=ptmis028 tabindex=12>
              <option> </option>
               %PATWEB89.01.127.2
              </select>
          </td></tr>
         <tr><td class=DataLabel>Care Type</td>
          <td><input type=text size=30 class=readonly readonly 
               value="%PATWEB89.01.113.0">
              <td class=DataLabel>Referring GP</td>
         <td>
        <input type=hidden name=genpprac id=genpprac>
        <input type=hidden name=ptvis029 id=ptvis029 value="%PATWEB89.01.232.1">
        <input type=hidden name=ptvis030 id=ptvis030 value="%PATWEB89.01.233.1">
        <input type=hidden name=genpprov id=genpprov>
        <input type="text" size=10 maxlength=10 tabindex=13
           name=ptvis028 id=ptvis028 value="%PATWEB89.01.231.1"
onchange="ReadDoc(18,0,ptvis028,doctnam1,ptvis029,genpprac,ptvis030,genpprov);">
          <input type="text" size=25 name=doctnam1 id=doctnam1
           value="%PATWEB89.01.231.0">
          <img src="../images/SearchIcon.gif" class=Icon
onclick="GPHCPSearchFrame(ptvis028,doctnam1,genpprov,ptvis029,genpprac,ptvis030,0);">
          </td></tr>
          <tr><td class=DataLabel> Intended Stay </td>
          <td> <select name=ptvis043 tabindex=7 class=Mandatory 
                       title="Intended Stay">
           <option> </option>
           %PATWEB89.01.246.2
           </select> </td>
          <td class=DataLabel>Inform GP</td>
      <td><select name=ptvis022 tabindex=14 title="Inform GP">
         <option value=" "></option>
         <option value="0">No</option>
         <option value="1">Yes</option>
        </select></td></tr>
       <tr><td class=DataLabel> Planned Length of Stay</td>
        <td>
        <input type=text size=5 maxlength=3 name=ptmis030
         tabindex=8 title='Expected Length of Stay'
         class=Integer onblur="checkInteger(this,this.value);" 
             value="%PATWEB89.01.129">
        </td>
        <td>Valuables Location</td>
         <td>
           <input type=text name=ptvis020 size=40 maxlength=40
                   tabindex=16 value="%PATWEB89.01.223">
         </td>
       </tr>
    <tr><td>&nbsp;</td>
        <td>&nbsp;</td>
        <td><div id=MyhealthRecLebel 
            title="Consent to upload Episode documents/results to MyHR"></div></td>
        <td><input type=hidden name=ptvis115 id=ptvis115> 
            <select name=d_ptvis115 id=d_ptvis115 tabindex=17 title="PCEHR">
            <option value=" "></option>
            <option value="1">Yes</option>
            <option value="0">No</option>
            </select></td>
    </tr>

       <tr><td>&nbsp;</td>
           <td>&nbsp;</td>
           <td class=DataLabel>Clinically Ready for Discharge Date</td>
           <td><input type=text size=15 maxlength=12 name=mrfddate
                id=mrfddate title="Clinically Ready for Discharge Date"
                onblur="checkDate(this,'Date');disDelay(this);" class="Date"
                value="%PATWEB89.01.999.122" >
                <img notab src="../images/DateTimeStamp.gif" class=Icon
                 alt="Current"
                 onclick="SetCurrentDateTime(mrfddate,null);">
                <img notab src="../images/DateLookup.gif" class=Icon
                alt="Calendar" date="UpdateForm.mrfddate"></td>
       </tr>
       <tr id=rsndisde style="display: none;"><td class=DataLabel>&nbsp;</td>
       <td>&nbsp;</td>
       <td class=DataLabel>Reason for Discharge Delay</td>
       <td><select name=vsxdc014 id=vsxdc014 title="Reason for Discharge Delay">
            <option></option>
            %STANDARD.01.007.z1
            </select></td></tr>
       <tr align=left>
         <td align=center colspan="4">
         <hr>
         </td>
       </tr>
   <tr><td class=DataLabel>Consent</td>
       <td><select name=ptmis037 title="Consent" tabindex=30>
           <option></option>
           %PATWEB89.01.133.2
           </select>
         <input type=text size=12 name=ptvis068 tabindex=31 id=ptvis068
             class="Date" value="%PATWEB89.01.271" title="Consent Date">

         <img notab src=../images/DateLookup.gif class=Icon
          onclick="DateLookupFrame(ptvis068);">
        <img notab src=../images/DateTimeStamp.gif 
         class=Icon onclick="SetCurrentDateTime(ptvis068,null);">
          </td>
       <td class=DataLabel>Religious Visit</td>
       <td>
         <select name=ptmis017 tabindex=35>
          <option value="2">No</option>
          <option value="1">Yes</option>
         </select>
       </td></tr>
    <tr><td class=DataLabel width=15%>Training</td>
        <td><select name=ptvis085 tabindex=32>
         %PATWEB89.01.298.004.2
        </td><td class=DataLabel> Marketing
        </td><td><select name=ptvis082 tabindex=36>
         %PATWEB89.01.298.001.2
       </td></tr>
   <tr> <td class=DataLabel> Research
        </td><td><select name=ptvis084 tabindex=33>
         %PATWEB89.01.298.003.2
        </td>
        <td class=DataLabel width=15%>Pref. Next of Kin
        </td><td><select name=ptvis087 tabindex=37 >
         %PATWEB89.01.298.006.2
       </td></tr>
   <tr><td width=15%> Enduring POA
        <td><select name=ptvis086 tabindex=34>
         %PATWEB89.01.298.005.2
        </td><td class=DataLabel> Emergency Contact
        </td><td><select name=ptvis088 tabindex=38 >
         %PATWEB89.01.298.007.2
       </td></tr>

<tr><td class=DataLabel></td>
     <td>
     </td>
      <td class=DataLabel>Program</td>
      <td><input type=text size=8 maxlength=8 name=ptvis099
         title="Program" tabindex=38 value="%PATWEB89.01.298.021.1"
          onchange="findPrgmdesc();">
          <select name=prgmcode Readonly class=readonly tabindex=166
          onchange="savePrgmcode();">
          <option> </option>
           %PATWEB89.01.298.021.2
          </select></td>
     </tr>

    <tr id=ndispart style="display:none"><td>&nbsp;</td>
        <td>&nbsp;</td>
        <td class=DataLabel>%STANDARD.01.035.N </td>
        <td><select name=ptvis121 id=ptvis121 title="%STANDARD.01.017.N "
             tabindex=40>
            <option> </option>
             %PATWEB89.01.298.066.9.2
            </select></td></tr>

       <tr align=left>
         <td align=center colspan="4">
         <hr>
         </td>
       </tr>

       <tr><td class=DataLabel>%STANDARD.01.017.CL</td>
      <td><input type=text class=readonly readonly size=30 
              value="%PATWEB89.01.126.0">
       </td></tr>
      <tr><td class=DataLabel>%STANDARD.01.017.A </td>
          <td><input type=text class=readonly readonly 
               size=30 value="%PATWEB89.01.111.0"></td>
          <td class=DataLabel>Contract Spoke Id</td>
          <td><input type=text class=readonly readonly size=30 
               value="%PATWEB89.01.199.003.2"></td>
      <tr>

      <tr><td class=DataLabel>Contract Type</td>
          <td><input type=text size=1 name=ptasf001 notab
           class=Readonly readonly value="%PATWEB89.01.199.001"></td>
           <td class=DataLabel>Contract Role</td>
          <td><input type=text size=1 name=ptasf002 notab
           class=Readonly readonly value="%PATWEB89.01.199.002"></td>
      </tr>

<tr><td class=DataLabel>Health Fund
        <input type="hidden" name="ptmis013" value="%PATWEB89.01.114.0"></td>
    <td class=DataLabel colspan=2>
        <input type=text size=35 name="funddesc" maxlength="30"
         value="%PATWEB89.01.114.1" readonly class=readonly> 
         Level
        <input type="hidden" name="ptmis014" value="%PATWEB89.01.115.0">
        <input type="text" size=20 maxlength=30 name="tabldesc"
         value="%PATWEB89.01.115.1" readonly class=readonly>
    </td>
</tr>
     
<tr><td class=DataLabel> Member Number &nbsp;
    <td><input type=text size=20 maxlength=19 value="%PATWEB89.01.116" 
         name=ptmis015 readonly class=readonly>
    </td>
</tr>


      <tr align=center>
       <td colspan=4 align=center><br>
       <input type=button value="Update" class="button" tabindex=51
        id="pat89sub"
        onclick="tempDisable(this);isChangedExpectedDate();
                 checkFiveDayWard(UpdateForm.wardcode.value,
                 UpdateForm.beddcode.value, UpdateForm.admisdte.value,
                 UpdateForm.ptmis030.value, SubmitUpd);">
       <input type=button value="Cancel" class="button" tabindex=52
        onclick="history.go(-1);">
    </table>
</td></tr>
</table>
</form>
<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name=admissno value="%PATWEB89.01.081">
<input type=hidden name=MenuType value="%PATWEB89.01.088">
</form>

<span id=WaitingList style="display:none">
<table width=100% height=100% border=0 cellspacing=0 cellpadding=0>
<tr><td class=DataLabel width=37%>Date of Referral</td>
    <td><input type=text size=12 name=ptmis058 tabindex=18 id=ptmis058
         onblur="checkDate(this,'ReferralDate')">
         <img notab src=../images/DateLookup.gif 
          class=Icon onclick="DateLookupFrame(ptmis058);"></td></tr>
<tr><td class=DataLabel>Date of 1st Spec Consult</td>
    <td><input type=text size=12 name=ptmis059 tabindex=19 id=ptmis059
         onblur="checkDate(this,'SpecConDate')">
         <img notab src=../images/DateLookup.gif 
          class=Icon onclick="DateLookupFrame(ptmis059);"></td></tr>
</table>
</span>

<span id=BabyAge style="display:none">
<table width=100% height=100% border=0 cellspacing=0 cellpadding=0>
<tr><td class=DataLabel width=37%>Admission Weight</td>
    <td><input type=text name=ptmis051 size=8 maxlength=6 tabindex=20
         onchange=justifyRight(this);>grams</td></tr>
</table>
</span>

<span id=NewBorn style="display:none">
<table width=100% height=100% border=0 cellspacing=0 cellpadding=0>
<tr><td class=DataLabel width=37%>Gestation Period</td>
    <td><input type=text name=ptmis041 maxlength=3 size=4 tabindex=21> weeks
    </td></tr>
</table>
</span>

<script type="text/javascript">
  
for (var i=0;i<document.UpdateForm.ptmis017.length;i++){
if (document.UpdateForm.ptmis017.options[i].value=="%PATWEB89.01.118.0"){
    document.UpdateForm.ptmis017.selectedIndex=i}};
  
MergePsy="%PATWEB89.01.050"
  if(MergePsy=="Yes"){
    document.UpdateForm.ptmas046.value="1"
  }
 if(MergePsy=="No "){
    document.UpdateForm.ptmas046.value="0"
  }
  
admstat="%PATWEB89.01.950";
if (trim(admstat) != "0") {
   document.UpdateForm.ptmis031.className="Readonly";
}
 
FilterMentalHealth(document.UpdateForm.mh_visit.value);

  MyHealthRecVisit=trim("%PATWEB89.01.298.037");
  for (var i =0 ; i < document.UpdateForm.d_ptvis115.length; i++) {
   if (document.UpdateForm.d_ptvis115.options[i].value == MyHealthRecVisit) {
       document.UpdateForm.d_ptvis115.selectedIndex=i } };

  //Upload myhr - Set mandatory/non-mandatory
  if (document.UpdateForm.ptcndumh.value > 2){
     document.UpdateForm.d_ptvis115.className="Mandatory";}
    else{
     document.UpdateForm.d_ptvis115.className="";}

  for (var i=0;i<document.UpdateForm.ptvis022.length;i++){
  if (document.UpdateForm.ptvis022.options[i].value=="%PATWEB89.01.225.0"){
     document.UpdateForm.ptvis022.selectedIndex=i}};
  //Inform GP - Set mandatory/non-mandatory
  if (document.UpdateForm.ptcndigp.value > 2){
     document.UpdateForm.ptvis022.className="Mandatory";}
    else{
     document.UpdateForm.ptvis022.className="";}

disDelay(document.getElementById('mrfddate'));
for (var j=0; j < document.getElementById('vsxdc014').length; j++) {
  if (document.getElementById('vsxdc014').options[j].value.substr(0,3)
      =="%PATWEB89.01.999.133") {
      document.getElementById('vsxdc014').selectedIndex=j;
  }
}
</script>

<span id=transferhd style="display:none" class=DataLabel>
Transfer Source
</span>
<span id=transfersrc style="display:none">
<input type="text" size=7 maxlength=5 name=trnsfsrc class=Mandatory
      title="Transfer Source" tabindex=3 id=trnsfsrc
      value="%PATWEB89.01.193.0"
      onchange="validateCode(9,trnsfsrc,trandesc);">
     <input type=text size=27 name=trandesc notab id=trandesc
      class=Readonly readonly value="%PATWEB89.01.193.1">
     <img src="../images/SearchIcon.gif" class=Icon
      onclick="TransferSourceFrame(trnsfsrc,trandesc,ptmis009)"></td>
</span>
<span id=transferblank style="display:none">
   <input type=hidden name=trnsfsrc>
</span>
<span>

</span>
