<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/patweb9603.js"></script>
<script type="text/javascript">
function GetBedType() {
  if(isWhitespace(pat96ret.trntowrd.value)) {
    return;
  }
  if((document.pat96ret.cfinan.value=="0") ||
     (document.pat96ret.cfinan.value=="1")) {
    return;
  }
  var serverURL   = "../cgi-bin/comweb80.pbl?reportno=39" +
                    "&valdward=" + pat96ret.trntowrd.value.replace(/ /g,"+") +
                    "&valdabed=" + pat96ret.trntobed.value.replace(/ /g,"+")
  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0) {
    ReturnValue=returnValue.return_value.split("|")
    for (var i =0 ; i < pat96ret.newbtype.length; i++) {
      if (pat96ret.newbtype.options[i].value.substr(0,3)==ReturnValue[0]) {
          pat96ret.newbtype.selectedIndex=i } };
  }
   else {
      pat96ret.newbtype.value="";}
}

function SubmitTransfer() {
 if (validateMandatory(pat96ret)) {

  if (document.pat96ret.cfinan.value=="1") {
   if (document.pat96ret.casepaym.value=="1") {
     document.pat96ret.redirect.value="patweb71.pbl?reportno=04&template=009"
       + "&urnumber=" + document.pat96ret.urnumber.value.replace(/ /g,"+")
       + "&admissno=" + document.pat96ret.admissno.value.replace(/ /g,"+")
       + "&chngdate=" + document.pat96ret.trandate.value.replace(/ /g,"+")
       + "&chngtime=" + document.pat96ret.trantime.value.replace(/ /g,"+");
    }
   else {
     document.pat96ret.redirect.value="patweb71.pbl?reportno=04&template=007"
       + "&urnumber=" + document.pat96ret.urnumber.value.replace(/ /g,"+")
       + "&admissno=" + document.pat96ret.admissno.value.replace(/ /g,"+")
       + "&chngdate=" + document.pat96ret.trandate.value.replace(/ /g,"+")
       + "&chngtime=" + document.pat96ret.trantime.value.replace(/ /g,"+");
  }
 }
   SubmitHidden(pat96ret);
  }
}
function CheckSTLeave() {
  leavtyp=document.pat96ret.trnlvtyp.value.substr(3,1)
    if (leavtyp!=" "){
       alert("This is not a short term leave code.")
       document.pat96ret.trnlvtyp.value="";
       return;
    }
}
function ShowBedType() {
  if((document.pat96ret.cfinan.value=="2") ||
     (document.pat96ret.cfinan.value=="3")) {
    DaysHos1.innerHTML=DisplayDaysHos1.innerHTML;
    DaysHos2.innerHTML=DisplayDaysHos2.innerHTML;
    BedType1.innerHTML=DisplayBedType1.innerHTML;
    BedType2.innerHTML=DisplayBedType2.innerHTML;
    GetBedType();
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);diffDate();ShowBedType();">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB96.03.003";
PatientVIS="%PATWEB96.03.081";
PatientNAM="%PATWEB96.03.002";
PatientSTA="%PATWEB96.03.086.078";
PatientALT="%PATWEB96.03.084";
PatientSEX="%PATWEB96.03.019";
PatientDOB="%PATWEB96.03.020";
PatientAGE="%PATWEB96.03.021";
PatientLOC="%PATWEB96.03.083";
PatientPRI="%PATWEB96.03.086.066.1";
PatientUNT="%PATWEB96.03.066.0";
DoctorCOD="%PATWEB96.03.082.003";
DoctorNAM="%PATWEB96.03.082.002";
PatientAID="%PATWEB96.03.086.090";
PatientIND="%PATWEB96.03.086.091";
PatientCUR="%PATWEB96.03.086.092";
PatientCLC="%PATWEB96.03.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB96.03.086.094";
PatientCDM="%PATWEB96.03.086.095";
PatientVDH="%PATWEB96.03.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>

<form name=pat96ret id=pat96ret style="margin:0" %PATWEB96.03.201.001
    <input type=hidden name=urnumber id=urnumber value="%PATWEB96.03.003">
    <input type=hidden name=admissno id=admissno value="%PATWEB96.03.081">
    <input type=hidden name=redirect id=redirect
     value="%PATWEB96.03.001.patweb96.03.004">
    <input type=hidden name=nextpage id=nextpage value="7">
    <input type=hidden name=trnleave id=trnleave value="0">
    <input type=hidden name=mhminhol id=mhminhol value="%PATWEB96.03.220">
    <input type=hidden name=mhmintri id=mhmintri value="%PATWEB96.03.221">
    <input type=hidden name=leaveend id=leaveend value="%PATWEB96.03.223">
    <input type=hidden name=mehvisfl id=mehvisfl value="%PATWEB96.03.219">
    <input type=hidden name=leavtype id=leavtype value="%PATWEB96.03.222">
    <input type=hidden name=casepaym id=casepaym value="%PATWEB96.03.232">
    <input type=hidden name=mhredirc id=mhredirc
     value="%PATWEB96.03.001.patweb89.07.001">
    <input type=hidden name=bedstat1 id=bedstat1>
    <input type=hidden name=warddesc id=warddesc >
    <input type=hidden name=formactn id=formactn value="Return">
    <input type=hidden name=cfinan id=cfinan
     value="%STANDARD.01.025.018.206.1.1">

    <input type="hidden" name=ptrgm001 id=ptrgm001 value="%PATWEB96.03.229. 1">
    <input type="hidden" name=ptrgm002 id=ptrgm002 value="%PATWEB96.03.229. 2">
    <input type="hidden" name=ptrgm003 id=ptrgm003 value="%PATWEB96.03.229. 3">

<table border=1 width=100% cellspacing=0 cellpadding=1 >
  <tr><td class=HeadingCell align=center colspan=2 width=100%>
        Bed Transfer & Leave Maintenance </td></tr>
</table>

<table border=0 width=100% cellspacing=1>
  <tr><td class=HeadingCell align=center colspan=2>Current Status</td>
      <td align=center class=HeadingCell colspan=2>Return from Leave
      </td></tr>

   <tr><td class=DataLabel>Ward / Bed </td>      
       <td><input type=text size=25 readonly value="%PATWEB96.03.105.0">
       <input type=text size=15 readonly value="%PATWEB96.03.106"></td>

        <td class=DataLabel> Ward / Bed</td>
        <td><select name=trntowrd id=trntowrd onblur="GetBedType();">
        <option></option>
        %PATWEB96.03.212.0
        </select>
        <input type=text name=trntobed id=trntobed maxlength=3 size=3
         onblur="GetBedType();"
         value="%PATWEB96.03.212.1">
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="WardBedSearchFrame(pat96ret.trntowrd,
                                     pat96ret.warddesc,
                                     pat96ret.trntobed,
                                     pat96ret.bedstat1);">
        </td></tr>

   <tr><td class=DataLabel>Transfer In Date & Time </td>
       <td><input type=text size=11 name=tranin id=tranin readonly
            value="%PATWEB96.03.204" >
           <input type=text size=5 readonly value="%PATWEB96.03.205"></td>

        <td class=DataLabel>Return From Leave Date & Time </td>
        <td><select name=trandate id=trandate class=Mandatory
             title="Return date" 
             onchange="diffDate();">
        %PATWEB96.03.202
        </select>
        <input type=text size=8 name=trantime id=trantime class=Mandatory
         title="Return Time" value="%STANDARD.01.016">
        <img src="../images/DateTimeStamp.gif" class=Icon
         onclick="SetCurrentDateTime(null,pat96ret.trantime);">
        <img src="../images/TimeLookup.gif" class=Icon
         onclick="TimeLookupFrame(pat96ret.trantime);"></td></tr>

   <tr><td class=DataLabel>Attending Doctor</td>
       <td><input type=text size=35 readonly value="%PATWEB96.03.108.002">
       </td>
          <td><div id=STLTHeading></div>
          <td><div id=STLT></div></td></tr>


   <tr><td class=DataLabel>%STANDARD.01.017.A </td>
        <td><input type=text readonly size=30 
             value="%PATWEB96.03.111.0"> </td>

          <td><div id=LEHeading></div> 
          <td><div id=LE></div></td></tr>


   <tr><td class=DataLabel>%STANDARD.01.017.CC</td>
       <td><input type=text readonly size=30 
           value="%PATWEB96.03.113.0"></td>
         <td><div id="DaysHos1"></div></td>
         <td><div id="DaysHos2"></div></td>
        </tr>

   <tr><td class=DataLabel>%STANDARD.01.017.AC</td>
       <td><input type=text readonly size=30 
           value="%PATWEB96.03.124.0"></td>
         <td><div id="BedType1"></div></td>
         <td><div id="BedType2"></div></td>
        </tr>

    <tr><td class=DataLabel>%STANDARD.01.017.CL</td>
        <td><input type=text value="%PATWEB96.03.126.0"></td>
        <td align=center colspan=2>
        <input type=button value=Update class="button" id='updatebutton'
         onclick="tempDisable(this);
                  checkBedStatus(pat96ret.trntowrd.value,
                                 pat96ret.trntobed.value,
                                 SubmitTransfer);">
        <input type=button value=Cancel class="button"
         onclick="PatientLinkTo('patweb96.pbl',3,4,0);">
        </td>
        </tr>

     <tr><td class=DataLabel>Health Fund</td>
         <input type="hidden" value="%PATWEB96.03.114.0">
         <td class=DataLabel colspan=2>
         <input type=text size=35 name="funddesc" id="funddesc" maxlength="30"
          value="%PATWEB96.03.114.1"></td></tr>
     <tr><td>Table</td>
         <td><input type="hidden" value="%PATWEB96.03.115.0">
             <input type="text" size=20 maxlength=30 name="tabldesc"
              id="tabldesc"
              value="%PATWEB96.03.115.1"></td></tr>

</table>
</form>
</div>

<form name=ShowBedFee id=ShowBedFee action=patweb71.pbl method=get>
<input type=hidden name=reportno value="4">
<input type=hidden name=template value="007">
<input type=hidden name=urnumber value="%PATWEB96.03.003">
<input type=hidden name=admissno value="%PATWEB96.03.081">
<input type=hidden name=chngdate value="%PATWEB71.04.411">
<input type=hidden name=chngtime value="%PATWEB71.04.412">
</form>

<form name=PatientLinks id=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%PATWEB96.03.003">
<input type=hidden name=admissno value="%PATWEB96.03.081">
<input type=hidden name=MenuType value="%PATWEB96.03.088">
<input type=hidden name=alert001 value="">
</form>

<span id=stltheading style="display:none">
Short Term Leave Type
</span>
<span id=leheading style="display:none">
Leave End Reason
</span>
<span id=leaveblank style="display:none">
<!--   <input type=hidden name=trnlvtyp id=trnlvtyp>-->
</span>
<span id=stlt style="display:none">
       <td><select name=trnlvtyp id=trnlvtyp class=Mandatory
            onchange="CheckSTLeave();">
           <option> </option>
           %PATWEB96.03.206.2
          </select></td>
</span>
<span id=le style="display:none">
       <td><select name=endleave id=endleave class=Mandatory>
           <option> </option>
           %STANDARD.01.018.LE.XXX.2
          </select></td>
</span>

<div id="DisplayDaysHos1" style="display:none">
No of days of hospitalisation
</div>

<div id="DisplayDaysHos2" style="display:none">
  <input type=text name=dayshosp id=dayshosp
   title='No of days of hospitalisation'
   class=ReadOnly readonly size=5 value="%PATWEB96.03.130">
</div>

<div id="DisplayBedType1" style="display:none">
Bed Type
</div>

<div id="DisplayBedType2" style="display:none">
  <select name=newbtype id=newbtype title="Bed Type" value="%PATWEB96.03.234">
  <option> </option>
     %PATWEB96.03.233.2
  </select>
</div>
