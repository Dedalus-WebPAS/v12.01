<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/TableSort.js"> </script>
<style type="text/css">
#box1{
   position: absolute;
   top: 100px;
   left: 100px;
   border-style: outset;
   background-color: #fff8ff;
   padding: 3px;
   visibility: hidden;
}
</style>
<script type="text/javascript">
var box1;
var mousex = 0;
var mousey = 0;
var maxx = 0;
var maxy = 0;

function TableHeading(OrderColumn) {
  printOrder=OrderColumn;
  TableString = [];
  TableString[TableString.length] = '<div id=HeadingDivision >';
             "</td></tr></table>"

  TableString[TableString.length] = "<table style=\"table-layout:fixed\"" +
                " border=" + t.Border +
                " cellspacing=" + t.Cellspacing +
                " cellpadding=" + t.Cellpadding +
                " width=" + t.Width +
                " align=" + t.Align + " >";
  TableString[TableString.length] = "<tr height=" + t.HeadingHeight + ">";

  if (printWidth.length==0) {  // Save the widths on the first pass for printing
    for(var i = 0; i < t.columns.length; i++) {
       printWidth[i]=t.columns[i][7] }
  }
  if (isFinite(t.columns[0][7])) {
    TotalWidth=0;
    for(var i = 0; i < t.columns.length; i++) {
       TotalWidth+=parseInt(t.columns[i][7],10) }
    for(var i = 0; i < t.columns.length; i++) {
       t.columns[i][7]=(Math.round(1000*(parseInt(t.columns[i][7],10)/TotalWidth))/10)+'%' }
  }

  for(var i = 0; i < t.columns.length; i++) {
    if (printFormat) t.columns[i][7]=printWidth[i];
    TableString[TableString.length] = "<td class=HeadingCell align=" + t.columns[i][4] +
                   " width=" + t.columns[i][7] + " >" ;
    if (t.columns[i][3] == -1) {
      if (OrderColumn == i) { TableString[TableString.length] = "<b>" }
      TableString[TableString.length] = t.columns[i][0] + "</td>"; }
    else {
      TableString[TableString.length] = "<a href='javascript:onclick=TableSort(" + i + ")'>";
      if (OrderColumn == i) { TableString[TableString.length] = "<b>" }
      TableString[TableString.length] = t.columns[i][0] + "</a></td>"; }
  }
  TableString[TableString.length] = "</tr>";
  TableString[TableString.length] = "</table>";
  TableString[TableString.length] = "</div>";
  TableString[TableString.length] = '<div id=BodyDivision>'
  TableString[TableString.length] = "<table style=\"table-layout:fixed\" border=" + t.Border +
                 " cellspacing=" + t.Cellspacing +
                 " cellpadding=" + t.Cellpadding +
                 " width=" + t.Width +
                 " align=" + t.Align + " >";
}

function TableEnding()
{
  TableString[TableString.length] = "</table>"+
    "<table border=0 align=center width=100%>"+
       "<tr align=center height=35>"+
           "<td width=25%></td>"+
           "<td width=10% class=AvailableCell align=center>"+
               "Available Bed</td>"+
           "<td width=10% class=ClosedCell align=center bgcolor=gray>"+
               "Closed Bed</td>"+
           "<td width=10% class=StandbyCell align=center>"+
               "Standby Patient</td>"+
           "<td width=10% class=PastDischDate align=center>"+
               "Past Date </td>"+
           "<td width=10% class=CurrDischDate align=center>"+
               "Current Date </td>"+
           "<td width=25%></td></tr>"+
    "</table>"+
                                    "</div>";

  // these are defined in the html
  var TableLocation = document.getElementById('TableLocation');
  var HeadingSection = document.getElementById('HeadingSection');

  // unload the array into continuous html render
  if (TableString.join) // if join method is available;
  {
    TableLocation.innerHTML = TableString.join("");
  }
  else
  {
    var TableStringX="";
    for (i=0;i < TableString.length; i++)
    {
       TableStringX+=TableString[i];
    }
    TableLocation.innerHTML = TableStringX;
  }

  var HeadingDivision = document.getElementById('HeadingDivision');
  var BodyDivision    = document.getElementById('BodyDivision');

  var height = document.body.clientHeight;

  var secHeight = 0;
  if (HeadingSection) {
    secHeight = HeadingSection.clientHeight || HeadingSection.offsetHeight;
  }
  else {
    TableLocation.style.top = '0px';
  }


  //
  // Set the height of the table rows section (i.e. <div id=BodyDivision>)
  //
  if (TableLocation.offsetTop > 0) {  // TableLocation is not at the top
    _setListHeight();
  }
  else {
    BodyDivision.style.height = height - secHeight - HeadingDivision.clientHeight - 1 + "px";
  }

  _setVerticalScrollbar();
}

function _setListHeight() {
  var TableLocation = document.getElementById('TableLocation');
  var HeadingDivision = document.getElementById('HeadingDivision');
  var BodyDivision = document.getElementById('BodyDivision');

  var sBorderStyle = TableLocation.style.border;  // save current border style

  // We need to do the following to force Chrome to render; before we can set
  // the height values (for more accuracy)
  TableLocation.style.border = "1px solid transparent";

  var height = document.body.clientHeight;

  var listHeight = height - TableLocation.offsetTop - HeadingDivision.offsetHeight - 1;

  TableLocation.style.border = sBorderStyle;  // restore the border style

  if (listHeight > 0) {
    BodyDivision.style.height = listHeight + "px";
  }
}

function _setVerticalScrollbar() {
  var HeadingDivision = document.getElementById('HeadingDivision');
  var BodyDivision    = document.getElementById('BodyDivision');

  // Show the vertical scrollbar accordingly

  if (BodyDivision.scrollHeight >  BodyDivision.clientHeight) {
    // List overflows (i.e. vertical scrollbar visible)
    HeadingDivision.style.overflowY = 'scroll';  // force vertical scrollbar
                                                 // on list heading section
  }
  else {
    // List does NOT overflow (i.e. no vertical scrollbar in BodyDivision)
    if (window.navigator.userAgent.indexOf("MSIE 7.0") >= 1) {
      // Since IE 8 will always show the vertical scrollbar for the BodyDivision
      // (even when scrolling is not needed) we need to also show the
      // vertical scrollbar for HeadingDivision so columns line up.
      HeadingDivision.style.overflowY = 'scroll';
    }
    else {
      HeadingDivision.style.overflowY = 'hidden';
    }
  }
}

function funcDoctorViewFrame(doctor) {
  doctor=doctor.replace(/\+/g," ");
  DoctorViewFrame(doctor);
}

function init()
{
  box1 = document.getElementById('box1');
  document.onmousemove = getMouseXY;
  maxx = getClientWidth();
  maxy = getClientHeight();
}

function PatFolLink(urlstring) {
  location.href=urlstring;
}

function getMouseXY(e) // works on IE6,FF,Moz,Opera7
{
  if (!e) e = window.event; // works on IE only (others rely on browser passing us the event)

  if (e)
  {
    if (e.pageX || e.pageY)
    { // this doesn't work on IE6!! (works on FF,Moz,Opera7)
      mousex = e.pageX;
      mousey = e.pageY;
    }
    else if (e.clientX || e.clientY )
    { // works on IE6,FF,Moz,Opera7
      mousex = e.clientX + document.body.scrollLeft;
      mousey = e.clientY + document.body.scrollTop;
    }
  }
}
function showit(ptbrsnam,ptbrgnam,ptbrgend,ptbrbdat,psageyrs,ptbradr1,ptbradr2,
                ptbradr3,ptbradr4,ptbrpost,ptbrhphn,ptbrwphn,ptbrmphn,ptbremal,
                ptbrsdat,ptbrstim,ptbrlurn,ptbrtitl,ptitl,psname,pgname) {

  ptbrsnam=ptbrsnam.replace(/\+/g," "); 
  ptbrgnam=ptbrgnam.replace(/\+/g," ");
  ptbrgend=ptbrgend.replace(/\+/g," ");
  ptbrbdat=ptbrbdat.replace(/\+/g," ");
  psageyrs=psageyrs.replace(/\+/g," ");
  ptbradr1=ptbradr1.replace(/\+/g," ");
  ptbradr2=ptbradr2.replace(/\+/g," ");
  ptbradr3=ptbradr3.replace(/\+/g," ");
  ptbradr4=ptbradr4.replace(/\+/g," ");
  ptbrpost=ptbrpost.replace(/\+/g," ");
  ptbrhphn=ptbrhphn.replace(/\+/g," ");
  ptbrwphn=ptbrwphn.replace(/\+/g," ");
  ptbrmphn=ptbrmphn.replace(/\+/g," ");
  ptbremal=ptbremal.replace(/\+/g," ");
  ptbrsdat=ptbrsdat.replace(/\+/g," ");
  ptbrstim=ptbrstim.replace(/\+/g," ");
  ptbrlurn=ptbrlurn.replace(/\+/g," ");
  ptbrtitl=ptbrtitl.replace(/\+/g," ");
  ptitl=ptitl.replace(/\+/g," ");
  psname=psname.replace(/\+/g," ");
  pgname=pgname.replace(/\+/g," ");

  var dispvar = "<b>Boarder details for " + ptitl + " " + 
                pgname + 
                psname  + "</b>";
  dispvar = dispvar + "<br>Boarder Name: " + 
                      "<b>" + ptbrtitl + " " + ptbrgnam + " " 
                      + ptbrsnam  + "</b>";
  dispvar = dispvar + "<br>U/R Number: " + "<b>" + ptbrlurn + "</b>";
  dispvar = dispvar + "<br>Age/Gender: " + "<b>" + psageyrs + "/" + ptbrgend  +
                      "</b>";
  dispvar = dispvar + "<br>Date of Birth: " + "<b>" + ptbrbdat + "</b>";
  dispvar = dispvar + "<br>Boarder Start Date: " + "<b>" + ptbrsdat + " @ " +
                    ptbrstim + "</b>";
  dispvar = dispvar + "<br>Address" +
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;"+
                      " : " + "<b>" + ptbradr1 + "</b>";
  dispvar = dispvar + "<br>&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;: " + "<b>" + ptbradr2 + "</b>";
  dispvar = dispvar + "<br>Suburb"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;"+
                           "&nbsp;: " + "<b>" + ptbradr3 + "</b>";
  dispvar = dispvar + "<br>&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;&nbsp;&nbsp;"+
                           "&nbsp;: " + "<b>" + ptbradr4 + "</b>";
  dispvar = dispvar + "<br>Post Code: " + "<b>" + ptbrpost + "</b>";
  dispvar = dispvar + "<br>Home Phone: " + "<b>" + ptbrhphn + "</b>";
  dispvar = dispvar + "<br>Work Phone: " + "<b>" + ptbrwphn + "</b>";
  dispvar = dispvar + "<br>Mobile Phone: " + "<b>" + ptbrmphn + "</b>";
  dispvar = dispvar + "<br>Email: " + "<b>" + ptbremal + "</b>";
  box1.innerHTML  = dispvar;
  var x = mousex;
  var y = mousey;
  // rendered dimensions or estimates;
  var rx = ( box1.sclrollLeft ) ?  box1.scrollLeft : 200;
  var ry = ( box1.scrollHeight ) ? box1.scrollHeight : 300;

  x = (maxx - x - 70  < rx ) ? x - 70  - rx : x + 70;
  y = (maxy - y < ry)         ? y - ry : y ;

  box1.style.top  =  y + 'px';
  box1.style.left =  x + 'px';
  box1.style.visibility = "visible";
}
function hideit() {
  box1.style.visibility = "hidden";
}
function gotoBoarder(urnumber,admissno,ptbrbrdn) {
  linkurl="patweb83.pbl?reportno=5&template=001" +
  "&urnumber=" + urnumber + "&admissno=" + admissno + "&borduniq=" + ptbrbrdn
  location.href=linkurl
}
function UpdateCondition(urnumber,admissno) {
  SetCookie("SortWardCookie",'1');
  linkurl="patweb93.pbl?reportno=5&template=001" +
          "&urnumber=" + urnumber + "&admissno=" + admissno
  DFrameLink(linkurl,50,250,850,670)
}
function UpdateDiet(urnumber,admissno) { 
  SetCookie("SortWardCookie",'1');
  linkurl="patweb98.pbl?reportno=4&template=004" +
          "&urnumber=" + urnumber + "&admissno=" + admissno +
          "&viewtype=0"
  DFrameLink(linkurl,0,75,720,420)
}
function PatientAlerts(urnumber,admissno) { 
  linkurl="patweb98.pbl?reportno=1&template=003" +
          "&urnumber=" + urnumber + "&admissno=" + admissno
  location.href=linkurl
}
function MHLegStat(urnumber,admissno) {
  linkurl="mehweb01.pbl?reportno=9&template=001" +
          "&urnumber=" + urnumber + "&admissno=" + admissno
  location.href=linkurl
}
function PatientResults(urnumber,admissno) { 
  linkurl="cliweb03.pbl?reportno=1&template=001" +
          "&urnumber=" + urnumber + "&admissno=" + admissno
  location.href=linkurl
}
function BedAllocation(urnumber,admissno) {
  linkurl="patweb96.pbl?reportno=3&template=005" +
          "&urnumber=" + urnumber + "&admissno=" + admissno
  DFrameLink(linkurl,50,250,300,120)
}
function ModBeds() {
  document.cookie = "WardListPath=" + escape(location.href) + ";";
  var ward = document.SelectWard.wardcode.value.replace(/ /g,"+");
  location.href="patweb95.pbl?reportno=5&template=001&wardcode=" + ward;
}
function ChangeWard() {
  document.cookie = "WardListPath=" + escape(location.href) + ";";
  var ward = document.SelectWard.wardcode.value.replace(/ /g,"+");
  location.href="websec01.pbl?reportno=5&template=001&wardcode=" + ward +"&wardflag=1";
}
function InitTable(TableView) {
  ward=document.SelectWard.wardcode.value;
  bed=document.SelectWard.wbedtype.value;
  if (TableView==0) {
      linkurl="patweb93.pbl?reportno=1&template=010" +
              "&wardcode=" + ward +
              "&wbedtype=" + bed
      }
  SetCookie("SortWardCookie",'1');
  location.href=linkurl;
}
</script>
%START.OF.PAGE
<body onload="PageLoad(event);SetCount();initTable();"
 style="overflow:hidden">
<div id=HeadingSection>
<form name=SelectWard action=patweb93.pbl method=get style="margin:0">
<input type=hidden name=reportno value="1">
<input type=hidden name=template value="50">

<table width=100% cellspacing=0 border=0>
<tr><td class=HeadingCell>
        <img src="../images/TableViewIcon.gif" class=Icon
             alt="Default View" border=0 onclick='InitTable(0);'></td>
    <td class=HeadingCell align=center>
     Current Admission for %PATWEB93.01.105</td>
    <td class=HeadingCell width=10%><input type=button value="Change Ward (D)"
        class=Bigbutton onclick="ChangeWard();"></td>
    <td class=HeadingCell width=10%><input type=button value="Mod Avail Beds"
        class="button" onclick="ModBeds();"></td>
    </tr>
</table>
<table width=100% cellspacing=0 border=0>
<tr><td class=HeadingCell> Ward
        <select name=wardcode onchange="SelectWard.submit();" >
         %PATWEB93.01.001
        </select></td>

    <td class=HeadingCell> Type of Bed
        <select name=wbedtype onchange="SelectWard.submit();" >
                <option value="0">All Beds</option>
                <option value="1">Open Beds</option>
                <option value="2">Empty Beds Only</option>
    </select></td>

     <td class=HeadingCell>Display Empty Beds
     <input type=checkbox name=debdindc value="1" 
          onclick="SelectWard.submit();"></td>

    <td class=HeadingCell> Number of Patients 
        <input type=text readonly name=numofpat size=3></td>

    <td class=HeadingCell>Patients in Un-Allocated Beds
        <input type=text readonly name=numunbed size=3></td>

</tr>
</table>
</form>
</div>

<div id="TableLocation"></div>

<span id=WaitBoxDisplay class=WaitBox style="display:none">
<img class=WaitImage src="../images/wait.gif">
<p>Please Wait ...</p>
</span>

<div id=PageLayer class=DimmedLayer style="display:none"></div>

<script type="text/javascript">
function initTable() {
 ShowWaitScreen();

 window.setTimeout(function() {
   document.title="";
   t = new Table(1,0,1,"100%","center",35);    // Create New Table Object
   template = 1

   // Add Columns in Order Required

   // Heading,Type,Display Column,Sort Column,Align

   t.addColumn("Bed","String",1,1,"center","","",30,"","","","0")
   t.addColumn("Patient","String",2,2,"left","","",120)
   t.addColumn("Patient Condition","String",3,3,"left","","",60)
   t.addColumn("Diet","String",4,4,"left","","",50)
   t.addColumn("Fasting","String",5,5,"left","","",30)
   t.addColumn("Unit","String",6,6,"left","","",60)
   t.addColumn("Doctor","String",7,7,"left","","",80)
   t.addColumn("Adm. Date Time","DateTime",8,8,"left","","",60)
   t.addColumn("Exp. Discharge","DateTime",9,9,"left","","",60,"","","","11")
   t.addColumn("Exp. Return Date","String",10,10,"left","","",70)


   // Add Rows to Table (Output from Web Server)
   %PATWEB93.01.059.patweb98.01.001.patweb99.01.001.0. . . .1

   OrderColumn=0;
   AscDsc=1;
   lastOrderColumn=OrderColumn;
   TableOutput(OrderColumn,AscDsc,template);
   HideWaitScreen();
 },50);
}
</script>

<script type="text/javascript">
function SetCount() {
  document.SelectWard.numofpat.value="%PATWEB93.01.012" 
  document.SelectWard.numunbed.value="%PATWEB93.01.010" 
}
BedType="%PATWEB93.01.013"
for (var i =0 ; i < document.SelectWard.wbedtype.length; i++) {
  if (document.SelectWard.wbedtype.options[i].value==BedType.substr(0,1)) {
       document.SelectWard.wbedtype.selectedIndex=i } };

if ("%PATWEB93.01.051"=="1") {
  document.SelectWard.debdindc.checked=true;
}
</script>

<div id="box1"></div>
