<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/TableSort.js"></script>
<script type="text/javascript" src="../js/patweb7101001.js"></script>
<script type="text/javascript">
function initSP() 
{
  if(document.ItemForm.showhead.value=="1") {
    ToggleHeader(HeaderExpandIcon);
  }

   var UpdateForm = document.forms['UpdateForm'];
   var ItemForm   = document.forms['ItemForm'];

   if (ItemForm.theacomp.value == "1") 
   {
      document.getElementById('ReasonTheaHeading').innerHTML 
        = document.getElementById('RTheatreHd').innerHTML;
      document.getElementById('ReasonTheaOption').innerHTML 
        = document.getElementById('RTheatre').innerHTML;
   }
   else 
   {
      document.getElementById('ReasonTheaHeading').innerHTML = "";
      document.getElementById('ReasonTheaOption').innerHTML  = "";
    }

      document.getElementById('InvDateHeading').innerHTML
        = document.getElementById('InvDateHd').innerHTML;
      document.getElementById('InvDateOption').innerHTML 
        = document.getElementById('InvDate').innerHTML;
      if (document.ItemForm.invtodat!=undefined) {
      setTimeout('document.ItemForm.invtodat.focus();',400);
      }

    if (UpdateForm.codingwr.value == "1") 
      alert("Warning: Coding is not yet completed");
   
     if (ItemForm.dayofhos.value!=0) {
        HospsHeading.innerHTML=DaysOfHospHd.innerHTML;
        HospsOption.innerHTML=DaysOfHosp.innerHTML;
        } else {
        HospsHeading.innerHTML="";
        HospsOption.innerHTML="";
        }

    if ( ItemForm.ptcnplan.value == "1" ) 
    {
       UpdateForm.actncode.className = "";
       UpdateForm.initdate.className = "";
       UpdateForm.actncode.disabled  = true;
       UpdateForm.initdate.disabled  = true;
    }

   if (document.forms['PatientLinks'].superlev.value == "1") return;

}

function DeleteItem(urnumber,admissno,transnum,chngdesc,chngamnt) 
{
    linkURL="patweb71.pbl?reportno=1&template=009" +
            "&isblflag=1" +
            "&urnumber=" + urnumber.replace(/ /g,"+") +
            "&admissno=" + admissno.replace(/ /g,"+") +
            "&transnum=" + transnum.replace(/ /g,"+") +
            "&chngdesc=" + chngdesc.replace(/ /g,"+") +
            "&chngamnt=" + chngamnt.replace(/ /g,"+");

    Left=(document.body.clientWidth-450)/2;
    DFrameLink(linkURL,90,Left,450,290);
}

function PayersBreak() {
//  document.getElementById('RaiseInvDiv').innerHTML
//        = document.getElementById('RaiseInvSpan').innerHTML;
  document.title= "Payer Breakdown"

  if (document.UpdateForm.prntflag.value == "1") 
   {
     if (document.UpdateForm.printbut!=undefined) {
      document.getElementById('RaiseInvDiv').style.display = "";
        document.UpdateForm.printbut.disabled  = true;
        document.UpdateForm.selprint.disabled  = true;
        document.UpdateForm.selprint.className = "Readonly";
        document.UpdateForm.nocopies.disabled  = true;
     }
   } else {
      document.getElementById('RaiseInvDiv').style.display = "";
        document.UpdateForm.printbut.disabled  = false;
        document.UpdateForm.selprint.disabled  = false;
        document.UpdateForm.selprint.className = "";
        document.UpdateForm.nocopies.disabled  = false;
   }

  InitTable(0);
  SetListHeight();
}
function DispInv() {
  if (validateMandatory(ItemForm)) {
      document.ItemForm.updttype.value="I";
      document.ItemForm.chngdate.value=document.ItemForm.invtodat.value;
      document.ItemForm.redirect.value="patweb71.pbl?reportno=01&template=050" +
             "&urnumber=" + document.ItemForm.urnumber.value.replace(/ /g,"+") +
             "&admissno=" + document.ItemForm.admissno.value.replace(/ /g,"+") +
             "&chngdate=" + document.ItemForm.invtodat.value.replace(/ /g,"+") +
             "&invtodat=" + document.ItemForm.invtodat.value.replace(/ /g,"+");

      ItemForm.submit();
  }
}

function InitTable(TableView) {
switch (TableView) {
case 0: {
 t = new Table(1,0,2,"100%","center",35,35);
 t.addColumn("Counter","String",6,6,"left","","",40)
 t.addColumn("Name","String",1,1,"left","MaintenanceIcon.gif","0",100)
 t.addColumn("Address","String",2,2,"left","","",140)
 t.addColumn("Claim Type","String",3,3,"left","","",100)
 t.addColumn("Default","String",5,5,"left","","",40)
 t.addColumn("Total","String",4,4,"right","","",80)
 t.addColumn("Invoice Todate","String",7,7,"left","","",60)
 AddTableRows()
 TableOutput(0,1);
 break; }
 }
}

function UpdateLink(urnumber,claimtype,effdate,defpayer,chngdate) {
  if (defpayer=="1") {
    alert('No Payer Breakdown for Default Payer.');
  }else {
    if (defpayer=="3") {
      alert('The order of Payer has not been Allocated yet.');
    } else {
      var LinkUrl="patweb71.pbl?reportno=01&template=051" +
           "&urnumber=" + urnumber.replace(/ /g,"+") +
           "&pmpyr001=" + urnumber.replace(/ /g,"+") +
           "&pmpyr003=" + claimtype.replace(/ /g,"+") +
           "&pmpyr018=" + effdate.replace(/ /g,"+") +
           "&chngdate=" + chngdate.replace(/ /g,"+") +
           "&admissno=" + PatientLinks.admissno.value.replace(/ /g,"+") +
           "&updttype=B"

      Left=(document.body.clientWidth-650)/2
      DFrameLink(LinkUrl,100,Left,650,450);
    }
  }
}

</script>
</head>
<body onload="PageLoad(event);setTimeout('initSP();',350);">
%START.OF.PAGE

<span id=WaitBoxDisplay class=WaitBox style="display:none">
<img class=WaitImage src="../images/wait.gif">
<p>Processing, please wait..Do NOT Refresh the page or click the BACK button</p>
</span>
<div id=PageLayer class=DimmedLayer style="display:none"></div>

<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB71.01.003";
PatientVIS="%PATWEB71.01.081";
PatientNAM="%PATWEB71.01.002";
PatientSTA="%PATWEB71.01.086.078";
PatientALT="%PATWEB71.01.084";
PatientSEX="%PATWEB71.01.019";
PatientDOB="%PATWEB71.01.020";
PatientAGE="%PATWEB71.01.021";
PatientLOC="%PATWEB71.01.083";
PatientPRI="%PATWEB71.01.086.066.1";
PatientUNT="%PATWEB71.01.066.0";
DoctorCOD="%PATWEB71.01.082.003";
DoctorNAM="%PATWEB71.01.082.002";
PatientAID="%PATWEB71.01.086.090";
PatientIND="%PATWEB71.01.086.091";
PatientCUR="%PATWEB71.01.086.092";
PatientCLC="%PATWEB71.01.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB71.01.086.094";
PatientCDM="%PATWEB71.01.086.095";
PatientVDH="%PATWEB71.01.086.099.015";
InsertPatientHeader()

ShowWaitScreen();
</script>
<div id="PatientMenu"></div>
<div id="PageBodySection">

<form name=ItemForm action="patweb71.pbl" method=get style="margin:0">
  <input type=hidden name=reportno value="1">
  <input type=hidden name=template value=050>
  <input type=hidden name=updttype value="">
  <input type=hidden name=nextpage value="1">
  <input type=hidden name=dayofhos value="%PATWEB71.01.130">
  <input type=hidden name=backdate value="%PATWEB71.01.331">
  <input type=hidden name=theacomp value="%PATWEB71.01.715">
  <input type=hidden name=chngdate value="%PATWEB71.01.327">
  <input type=hidden name=urnumber value="%PATWEB71.01.003">
  <input type=hidden name=admissno value="%PATWEB71.01.081">
  <input type=hidden name=transnum value="%PATWEB71.01.323">
  <input type=hidden name=redirect value="%PATWEB71.01.001.patweb98.01.001">
  <input type=hidden name=ptcnplan value="%STANDARD.01.025.114.249.1.1">
  <input type=hidden name=showhead value="%PATWEB71.01.364">
  <input type=hidden name=isblflag value="1">
  
<table cellspacing=0 cellpadding=1 border=0 width=100%>
<tr><td align=left>
    <div id=HeaderExpandIcon class='x-tool-left x-tool-expand' 
     onclick='ToggleHeader(this)'></div>
    <input type=button value="Inv Pending" class="button" name=invcpend
     id=invcpend
     onclick="tempDisable(this);InvPendRedir();"> 
    <input type=button value="Certificates" class="button" name=certbutt
     id=certbutt
     onclick="tempDisable(this);LinkCertificate();"> 
    </td>
    <td align=right><div id=ReasonTheaHeading></div></td>
    <td><div id=ReasonTheaOption></div></td>
    <td align=right><div id=HospsHeading></div></td>
    <td><div id=HospsOption></div></td>
    <td align=right><div id=InvDateHeading></div></td>
    <td><div id=InvDateOption></div></td></tr>
</table>

<div id=InvoiceHeader></div>

<table cellspacing=0 cellpadding=1 border=0 width=100%>
  <tr><td align=center class=HeadingCell>
    Invoice from Date : %PATWEB71.01.302 to %PATWEB71.01.327</td>
      <td align=center class=HeadingCell>%PATWEB71.01.334</td>
   </tr>
</table>
</form>

<span id=ActionPlanSpan style="display:none">
  Action Plan
  <input type=checkbox name=d_actionplan onclick="setCheckedValue();" >
  <select name=actncode title="Action Code">
    <option selected></option>
    %PATWEB71.01.362
  </select>
  Initiate From Date
  <input type=text name=initdate size=12
   title='Initiate FromDate' class='FutureDate'
   value="%PATWEB71.01.327" onblur="checkDate(this,'Initiate FromDate');">
  <img notab src=../images/DateTimeStamp.gif class=Icon
   onclick="SetCurrentDateTime(UpdateForm.initdate,null);">
  <img src=../images/DateLookup.gif class=Icon
   onclick="DateLookupFrame(UpdateForm.initdate);">
</span>


<form name=UpdateForm action="patweb71.pbl" method=post
 onsubmit="return validateMandatory(this);" style="margin:0">
  <input type=hidden name=reportno value=2>
  <input type=hidden name=template value=050>
  <input type=hidden name=nextpage value="5">
  <input type=hidden name=updttype value="">
  <input type=hidden name=chngdate value="%PATWEB71.01.327">
  <input type=hidden name=prntflag id=prntflag value="%PATWEB71.01.328">
  <input type=hidden name=urnumber value="%PATWEB71.01.003">
  <input type=hidden name=admissno value="%PATWEB71.01.081">
  <input type=hidden name=ptcnicls value="%PATWEB71.01.361">
  <input type=hidden name=actnplan value="">
  <input type=hidden name=isblflag value="1">
  <input type=hidden name=codingwr value="%PATWEB71.01.352">
  <input type=hidden name=upadmtyp value="0">
  <input type=hidden name=redirect value="%PATWEB71.01.001.patweb98.01.001">
  <input type=hidden name=ecliindc value="%PATWEB71.01.377">
  <input type=hidden name=raclindc value="0">
  <input type=hidden name=showpayr value="%PATWEB71.01.393">

<table border=1 cellspacing=0 cellpadding=2 width=100%>
%PATWEB71.01.326.1
</table>

<table border=0 cellpadding=2 cellspacing=0 width=95% align=center>
<tr><td class=DataLabel>Printer</td> 
    <td><select name=selprint class=Mandatory> 
        %STANDARD.01.001.PATWEB71.02
        </select></td>
    <td DataLabel>Copies</td>
    <td><select name=nocopies>
        <option value=" 1">1</option>
        <option value=" 2">2</option>
        <option value=" 3">3</option>
        <option value=" 4">4</option>
        <option value=" 5">5</option>
        <option value=" 6">6</option>
        <option value=" 7">7</option>
        <option value=" 8">8</option>
        <option value=" 9">9</option>
        <option value=" 10">10</option>
        </select></td></tr>
<tr><td class=DataLabel><div id=ActionPlanDiv></div></td></tr>
<tr><td class=DataLabel><div id=CertMsgDiv></div></td></tr>
<tr><td align=center colspan=4>
    <div id=RaiseInvDiv style="display:none">
      <input type=button value="Raise" class="button" name=printbut id=printbut
       onclick='RaiseInv();'>
    </div>
    <input type=button value="Add Items" class="button" onclick="AddItem();">
    <input type=button value="Comments" name=comntbut class="button" 
     id="comntbut" onclick="Comments();">
    <input type=button value="Insurance" name=insurbut class="button" 
     onclick="Insurance();">
    <input type=button value="%STANDARD.01.017.A " name=admtybut class="button" 
     onclick="AdmissType();">
    <input type=button value="Payer Breakdown" name=insurbut class="Bigbutton" 
     onclick="PayersBreak();">
  </td></tr>
</table>
</form>

<div id=TableLocation></div>

<script language="Javascript">
function AddTableRows() {
%PATWEB71.01.390
}
</script>

<form name="PatientLinks" method="get">
<input type="hidden" name="reportno" value="1">
<input type="hidden" name="template" value="050">
<input type="hidden" name="urnumber" value="%PATWEB71.01.003">
<input type="hidden" name="admissno" value="%PATWEB71.01.081">
<input type="hidden" name="MenuType" value="%PATWEB71.01.088">
<input type="hidden" name="superlev" value="%PATWEB71.01.353">
</form>

<!--<span id=RaiseInvSpan style="display:none">
    <input type=button value="Raise" class="button" name=printbut
     id=printbut
     onclick='tempDisable(this);RaiseInv();'>
</span>-->

<span id=CertMsgSpan style="display:none">
    <font color=red>Please Check all Certificates have been completed.</font>
</span>

<span id=InvDateHd style="display:none">
  Invoice&nbsp;To&nbsp;Date&nbsp;
</span>

<span id=InvDate style="display:none">
    <input type=text name=invtodat size=12 
         title='Invoice Date' class='Mandatory PastDate' 
         value="%PATWEB71.01.394" onblur="checkDate(this,'Invoice Date');">
        <img notab src=../images/DateTimeStamp.gif border=0 hspace=4 
         align=absmiddle onclick="SetCurrentDateTime(ItemForm.invtodat,null);">
        <img src=../images/DateLookup.gif border=0 hspace=4
        align=absmiddle onclick="DateLookupFrame(ItemForm.invtodat);">
    <input type=button value="Recalculate" class=button 
     name=recabutt id=recabutt onclick="tempDisable(this);DispInv()">
</span>

<span id="ShowInvoiceHeader" style="display:none">
<table cellspacing=0 cellpadding=1 border=0 width=100%>
<tr><td class=DataLabel>Prosthetic Complete Date</td>
    <td>&nbsp;</td>
    <td class=DataLabel>&nbsp;%PATWEB71.01.720.0</td>
    <td>&nbsp;%PATWEB71.01.720.1</td>
    </tr>
<tr> <td class=DataLabel>Program Code</td>
    <td>&nbsp;%PATWEB71.01.369.0 %PATWEB71.01.369.1</td>
    <td class=DataLabel>&nbsp;%PATWEB71.01.719</td>
    <td>&nbsp;%PATWEB71.01.716.0</td>
    </tr>
<tr><td class=DataLabel>Contract ID</td>
    <td>&nbsp;%PATWEB71.01.368</td>
    <td class=DataLabel>Coding Complete Date</td>
    <td>&nbsp;%PATWEB71.01.370</td>
    <td class=DataLabel>&nbsp;%PATWEB71.01.372</td>
    <td>&nbsp;%PATWEB71.01.373.0</td>
    </tr>
<tr><td class=DataLabel>&nbsp;%PATWEB71.01.371.0</td>
    <td>&nbsp;%PATWEB71.01.371.1</td>
    <td class=DataLabel>&nbsp;</td>
    <td>&nbsp;</td>
    <td class=DataLabel>&nbsp;</td>
    <td>&nbsp;%PATWEB71.01.373.1</td>
    </tr>
</table>
</span>

<span id=RTheatreHd style="display:none">
  <b>Reason&nbsp;Theatre&nbsp;Incomplete:</b>
</span>

<span id=RTheatre style="display:none">
  %PATWEB71.01.716.0
</span>

<span id=DaysOfHospHd style="display:none">
  <b>Days&nbsp;of&nbsp;Hospitalisation:</b>
</span>

<span id=DaysOfHosp style="display:none">
  %PATWEB71.01.130
</span>


<script type="text/javascript">

HideWaitScreen();

  var CmntIndic = "%PATWEB71.01.803";
  if ( CmntIndic =="1" ) {
     document.UpdateForm.comntbut.className="RedButton";
  }

  var CertIndc = "%PATWEB71.01.354"
  if ( CertIndc == "1") {
    document.getElementById('CertMsgDiv').innerHTML = document.getElementById('CertMsgSpan').innerHTML;
  }

  var ActPlan = "%STANDARD.01.025.114.249.1.1"
  if ( ActPlan == "1") {
    document.getElementById('ActionPlanDiv').innerHTML = document.getElementById('ActionPlanSpan').innerHTML;
  } else {
    document.getElementById('ActionPlanDiv').innerHTML = "";
  }

  var Certificates = "%PATWEB71.01.363";
  if ( Certificates =="1" ) {
     document.ItemForm.certbutt.className="RedButton";
  }

   if (document.UpdateForm.showpayr.value == "1")
   {
     PayersBreak();
    }

function SetListHeight() {
  var TableLocation = document.getElementById('TableLocation');
  var HeadingDivision = document.getElementById('HeadingDivision');
  var BodyDivision = document.getElementById('BodyDivision');

  var listTables = TableLocation.getElementsByTagName("TABLE");
  var h = 0;
  for (var i=0; i < listTables.length; i++) {
    h += listTables[i].offsetHeight;
  }

  BodyDivision.style.height = h - HeadingDivision.offsetHeight + "px";
}
</script>

