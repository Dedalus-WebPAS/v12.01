<meta name="TemplateVersion" content="V12.01.01">
<meta name="TemplateHome"    content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"      content="true">
<script type="text/javascript" src="../js/patweb90.js"></script>
<!--  Copy of patweb9001010.html & patweb9001011.html  -->
<script type="text/javascript">
function CheckUR() {
if(document.search.aisearch.value>1){
    return;}
  if (!isWhitespace(search.urnumber.value)) {
    justifyRight(document.search.urnumber)
    if (validateCode(8,search.urnumber,search.patfname,
                               search.srchpsex,
                               search.srchpdob,
                               search.admissno)) {
      updateParent(search.patfname.value,search.urnumber.value,
                   search.admissno.value);
    }
  }
}
function CheckAdm() {
  var p=search
  if (!isWhitespace(search.admissno.value)) {
    justifyRight(document.search.admissno);
    UpCase(document.search.admissno);
    if(validateCode(12,p.admissno,p.dummy,p.dummy,p.dummy,p.dummy,p.urnumber,p.dummy,p.dummy,p.dummy,p.dummy)) {

    updateParent(p.patfname.value,p.urnumber.value,p.admissno.value);
    }
  }
}
function ProcessSubmit() {
if(document.search.aisearch.value>1){
    return true;}
 if(!isWhitespace(search.urnumber.value)) {
    CheckUR();
    return false;
 } else if(!isWhitespace(search.admissno.value)) {
    CheckAdm();
    return false;
 } else {
   search.srchsnam.value.replace(/\'/g,"~")
//   setUR("patweb90.pbl","01","018");
   setUR();
   checkDate(search.srchpdob,'Date of Birth');
   setBirth(search.srchpdob);
   setMedicare(search.srchmedi);
   return true;
 }
}
function updateParent(name,urnumber,visit) {
  parent.ReturnUR.value=urnumber
  parent.ReturnName.value=name
  system=parent.IBASystem;
  urllink="patweb98.pbl?reportno=1&template=252"+
          "&srchview=1" + "&norecord=" + document.search.norecord.value + 
          "&urnumber=" + urnumber.replace(/ /g,"+");
  if (system==97) {     // Inpatient
    urllink+="&filtvtyp=2";
  }
  else if (system==91) {     // Outpatient
    urllink+="&filtvtyp=3";
  }
  else if (system==90) {     // Emergency
    urllink+="&filtvtyp=4";
  }
  else if (system==96) {     // Referral Management - Private Practice
    urllink+="&filtvtyp=6";
  }
  else if ((system==1) ||     // patient Billing                 
           (system==2) ||     // Private Practice
           (system==5) ||     // Account Receivable
           (system==6)) {     
    urllink="patweb76.pbl?reportno=1&template=019"+
            "&urnumber=" + urnumber.replace(/ /g,"+");
  }
  else if (system==0) {       // Unknown
    urllink="patweb76.pbl?reportno=1&template=020"+
            "&urnumber=" + urnumber.replace(/ /g,"+");
  }
  location.href=urllink;
}
</script>
</head>
%START.OF.PAGE
<body onload='PageLoad(event);setUR();checkType();setDefault();'>
<!--        Sub-Frame Header Section       -->
<span class=DFrameTitleBar>
<img border=0 align=right src=../images/ExitIcon.gif onclick=DFrameExit()>
<script type="text/javascript">document.write(self.document.title);</script>
</span>
<!--        Search Options                 -->
<div id=PageBodySection style="overflow: auto;">
<form name=search method=get action=patweb90.pbl
 onsubmit="return ProcessSubmit();">
<input type=hidden name=reportno value="1">
<input type=hidden name=template value=18>
<input type=hidden name=norecord value="%PATWEB90.01.032">
<input type=hidden name=patfname value=20>
<input type=hidden name=srchadmn value="%PATWEB90.01.013">
<input type=hidden name=redirect value="patweb98.pbl?reportno=1&template=018">
<input type=hidden name=ptcnualt value="%PATWEB90.01.023">
<input type=hidden name=alternid value="">
<input type=hidden name=aisearch value="">
<input type=hidden name=dummy value="">

<table width="100%" align=center cellpadding=0 cellspacing=0 border=0 
       bgcolor=#CCCCCC>
<tr><td>
<table width=100% border=0 cellpadding=0 cellspacing=0 bgcolor=#CCCCCC>
   <tr><td class=DataLabel>Surname<br>
       <input type=text name=srchsnam size=15
        onblur="UpCase(this);TextBlurHandler(this);"></td>
       <td class=DataLabel colspan=2>Given Name<br>
       <input type=text name=srchgnam size=15
        onblur="UpCase(this);TextBlurHandler(this);"></td>
       <td class=DataLabel>U/R Number<br>
       <input type=text name=urnumber onchange='setUR()'
        size=10 maxlength=8 textalign=left></td>
       <td class=DataLabel>Medicare No.<br>
       <input type=text name=srchmedi maxlength=10 size=12
        value="%PATWEB90.01.016"
        onblur="setMedicare(this);">
       </td>
       <td rowspan=2>
       <input type=radio name=srchpsex value=" " checked> All <br>
       <input type=radio name=srchpsex value="M"> Male <br>
       <input type=radio name=srchpsex value="F"> Female</td>
       <td align=center valign=middle rowspan=2>
       <input type=submit class="button" value=Search name=SearchButton><br>
       <input type=reset class="button" value=Reset></td></tr>

   <tr><td class=DataLabel>Date of Birth<br>
       <input type="text" size="12" name="srchpdob"
        onblur="checkDate(this,'Date of Birth')" ></td>
       <td class=DataLabel>Age<br>
       <input type=text name=srchpage size=4 ></td>
       <td class=DataLabel>Range<br>
       <select name=srcharan > 
            <option value=2 selected>2 years</option>
            <option value=4>4 years</option>
            <option value=6>6 years</option>
            <option value=8>8 years</option>
            <option value=10>10 years</option>
           </select></td>
       <td class=DataLabel>Search Type<br>
           <select name=srchtype onchange="checkType();">
           <option value=1>Surname</option>
           <option value=2>Sound-Ex</option>
           <option value=3>Date of Birth</option>
           <option value=4>U/R Number</option>
           <option value=5>Medicare No</option>
           <option value=7>Visit No</option>
           </select></td>
       <td class=DataLabel>Visit Number<br>
           <input type=text name=admissno maxlength=8 size=10>
       </td></tr>
</table>

%PATWEB90.01.011.100.0

<table width=100% border=1>
  <tr><td>
  <table width=100% bgcolor=#CCCCCC cellspacing=0 cellpadding=0 border=0>
    <tr><td align=center>
      <input type=button value="<< Previous" class="button"
       onclick='location.href="%PATWEB90.01.002.018"'>
      <td align=center colspan=2>
      <input type=button value="Next >>" class="button"
      onclick='location.href="%PATWEB90.01.001.018"'></td></tr>
    <tr><td>&nbsp;</td></tr>
  </table>
</tr></td>
</table>

</td></tr>
</table>
</form>
</div>

<script type="text/javascript">
function setDefault() {
//
   document.search.srchpage.value="%PATWEB90.01.006";
   document.search.srchpdob.value="%PATWEB90.01.007";
//
  if(document.search.ptcnualt.value=="1"){
    document.search.urnumber.maxLength=20;
    document.search.urnumber.size=20;
  }
//
   for (var i =0 ; i < document.search.srcharan.length; i++) {
     if (document.search.srcharan.options[i].value==trim("%PATWEB90.01.008")) {
         document.search.srcharan.selectedIndex=i } };
//
   for (var i =0 ; i < document.search.srchtype.length; i++) {
     if (document.search.srchtype.options[i].value=="%PATWEB90.01.009.2") {
         document.search.srchtype.selectedIndex=i; 
         checkType(); }  };
//
   for (var i =0 ; i < document.search.srchpsex.length; i++) {
     if (document.search.srchpsex[i].value=="%PATWEB90.01.005") {
         document.search.srchpsex[i].checked="1" } };
//
}
</script>
