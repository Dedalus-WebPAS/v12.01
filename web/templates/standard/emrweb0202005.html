<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome"    content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"    content="true">
<link rel="stylesheet" href="../html/postcode.css" type="text/css">
<script type="text/javascript" src="../js/IBA_Category_C_.js"></script>
<script type="text/javascript" src="../js/AutoPostCode.js"></script>
<script type="text/javascript" src="../js/EmrRegistration.js"></script>
<script type="text/javascript" src="../js/emrweb0202005.js"></script>
<script type="text/javascript" src="../js/emrweb0201102.js"></script>
<script type="text/javascript" src="../js/AddressSearch.js"></script>
<script type="text/javascript">
function Register() {
  CheckVerifiedAddr();
  setFormactn();
}

//
// Functions called from AddressSearch.js
//
function InitAddressSearch() {
  // line1 - 'ptmas008'
  // line2 - 'ptmas009'
  // suburb - 'ptmas010'
  // state - 'ptmas085'
  // postcode - 'ptmas011'

  InitAddressSearchFields('trAddrSrch','ptmas008','ptmas009','ptmas010','ptmas085','ptmas011');
}
function ShowAddressSearch() {
  OpenAddressSearch('2',PopulateAddress,ClearSearchAddress);
}
function PopulateAddress(StreetLine, Suburb, State, Postcode) {
  LookupSuburb(Postcode);  // validate Postcode with our Lookup values
  if (SelectPC.length == 0) return;  // no match found

  LookupPostCode(Suburb);  // validate Suburb
  if (SelectPC.length == 0) return;  // no match found

  ToggleFieldReadOnly('ptmas008', true);
  ToggleFieldReadOnly('ptmas009', false);
  ToggleFieldReadOnly('ptmas010', true);
  ToggleFieldReadOnly('ptmas085', true);
  ToggleFieldReadOnly('ptmas011', true);

  SetFieldValue('ptmas008',StreetLine);
  SetFieldValue('ptmas009','');
  SetFieldValue('ptmas010',Suburb);
  SetFieldValue('ptmas085',State);
  SetFieldValue('ptmas011',Postcode);

  document.getElementById('verifiedLabl').style.display = "";
}
function ClearSearchAddress() {
  ToggleFieldReadOnly('ptmas008', false);
  ToggleFieldReadOnly('ptmas009', false);
  ToggleFieldReadOnly('ptmas010', false);
  ToggleFieldReadOnly('ptmas085', false);
  ToggleFieldReadOnly('ptmas011', false);

  SetFieldValue('ptmas008','');
  SetFieldValue('ptmas009','');
  SetFieldValue('ptmas010','');
  SetFieldValue('ptmas085','');
  SetFieldValue('ptmas011','');

  document.getElementById('verifiedLabl').style.display = "none";
}

function CheckVerifiedAddr() {
  if (document.getElementById('ptcnuadv').value == "1") {
    if (document.getElementById('verifiedLabl').style.display == "") {
      document.getElementById('pmpxi113').value = "1";  // verified address
    }
    else {
      document.getElementById('pmpxi113').value = "0";  // address not verified
    }
  }
  else {
    document.getElementById('pmpxi113').disabled = true;
  }
}
</script>
%START.OF.PAGE
<body onLoad="PageLoad(event);SetFields();InitPostCodes();checkReferred();
              ChkIdentifyGenderPronounTitle(document.UpdateForm);
              InitAddressSearch();
              displayPrefNames(document.UpdateForm.ptcnnmpr.value);"> 
<form name=UpdateForm action="emrweb02.pbl" method=post style="margin:0">
<input type=hidden name=reportno value="02">
<input type=hidden name=emvis006 value="WR">
<input type=hidden name=formactn>
<input type=hidden name=updttype>
<input type=hidden name=chckname>
<input type=hidden name=redirflg value="1">
<input type=hidden name=nextpage value="3">
<input type=hidden name=updateky value="%EMRWEB02.02.700">
<input type=hidden name=ptcnueoc value="%EMRWEB02.02.454">
<input type=hidden name=redirect value="patweb89.pbl?reportno=1&template=13">
<input type=hidden name=ptcnuadv id=ptcnuadv
 value="%STANDARD.01.025.123.247.0.1">
<input type=hidden name=pmpxi113 id=pmpxi113>
<input type=hidden name=ptcnnewc id=ptcnnewc 
 value="%STANDARD.01.025.118.138.0.1">
<input type=hidden name=ptcnnmpr value="%STANDARD.01.025.128.226.1.1">

<table align=center width=100% border=0 cellspacing=0 cellpadding=2>
<tr><td>

<table align=center width=100% border=0 cellspacing=0 cellpadding=1>
<tr><td class=HeadingCell colspan=6 width=100% align=center>
    New Emergency Patient Registration</td>
</tr>

<tr id=trAddrSrch style="display:none">
  <td class=DataLabel></td>
  <td class=DataLabel></td>
  <td class=DataLabel nowrap>Search Address</td>
  <td><input type=text readonly size=42 tabindex="-1"
       style="cursor:pointer;text-align:center;"
       value="Click here to search for an address"
       title="Click here to search for an address"
       onclick="ShowAddressSearch();">
  </td>
</tr>

<tr><td class=DataLabel>Title</td>
    <td><select title="Title" name=ptmas001 id=ptmas001 tabindex=1>
          <option></option>
          %STANDARD.01.029
        </select>
    </td>
    <td class=DataLabel>Address&nbsp;
      <span id=verifiedLabl style="display:none;color:red">(Verified)</span>
    </td>
    <td><input type="text" size="42" maxlength="35" tabindex=6
         name=ptmas008 id=ptmas008 title="Address Line 1" onblur="UpCase(this)">
    </td>
    <td class=DataLabel>Home Phone</td>
    <td><input type="text" size="23" maxlength="20" tabindex=11
         name=ptmas012 id=ptmas012 title="Home Phone">
    </td>
</tr>

<tr><td class=DataLabel>Surname </td>
    <td><input type=text size=40 maxlength=40 name=ptmas005 id=ptmas005
         class=Mandatory title="Surname"
         onblur="UpCase(this)" value="%EMRWEB02.02.009" tabindex=2>
    </td>
    <td class=DataLabel></td>
    <td><input type="text" size="42" maxlength="35" tabindex=7
         name=ptmas009 id=ptmas009 title="Address Line 2" onblur="UpCase(this)">
    </td>
    <td class=DataLabel>Work Phone</td>
    <td><input type="text" size="23" maxlength="20" tabindex=12
         name=ptmas013 id=ptmas013 title="Work Phone">
    </td>
</tr>

<tr id=PrefSurname style="display:none">
  <td class=DataLabel>Preferred Surname</td>
  <td><input type=text size=20 maxlength=20 name=pmpxi082
       title="Preferred Surname" value="%EMRWEB02.02.697"
       tabindex=2 onchange="UpCase(this);"></td>
  <td>&nbsp;</td><td>&nbsp;</td>
  <td>&nbsp;</td><td>&nbsp;</td>
</tr>

<tr><td class=DataLabel>Given Name </td>
    <td><input type=text size=25 max=25 name=ptmas006 id=ptmas006
         class=Mandatory title="Given Name"
         onblur="UpCase(this)" value="%EMRWEB02.02.010" tabindex=3></td>
    <td class=DataLabel>Suburb</td>
    <td><input type="text" size="42" maxlength="35" tabindex=8 class=Mandatory
         name=ptmas010 id=ptmas010 title="Suburb"
         onchange="LookupPostCode(ptmas010.value);"></td>
    <td class=DataLabel>Mob. Phone</td>
    <td><input type="text" size="23" maxlength="20" tabindex=13
         name=ptmsx042 id=ptmsx042 title="Mobile Phone" class=MobilePhone>
    </td>
</tr>

<tr id=PrefGivenName style="display:none">
  <td class=DataLabel>Preferred Given Name</td>
  <td><input type=text size=25 maxlength=25 name=pmpxi083
       title="Preferred Given Name" value="%EMRWEB02.02.698"
       tabindex=4 onchange="UpCase(this);"></td>
  <td>&nbsp;</td><td>&nbsp;</td>
  <td>&nbsp;</td><td>&nbsp;</td>
</tr>

<tr><td class=DataLabel>%STANDARD.01.017.G </td>
    <td><select class="Mandatory SelectMed" tabindex=4
         name=ptmas014 id=ptmas014
         title="%STANDARD.01.017.G "
         onchange="ChkIdentifyGenderPronounTitle(document.UpdateForm);">
          <option></option>
          %EMRWEB02.02.086.099.061.9.1.19.3.H
        </select>
    </td>
    <td class=DataLabel>State</td>
    <td><input type="text" size="42" maxlength="35" tabindex=9
         name=ptmas085 id=ptmas085 title="State">
    </td>
</tr>

<tr><td class=DataLabel>Date of Birth</td>
    <td><input type="text" size="12" value="%EMRWEB02.02.020"
         name=ptmas016 id=ptmas016 tabindex=5
         class="Mandatory PastDate" title="Date of Birth">
         <img notab src="../images/DateLookup.gif" class="Icon"
          alt="Show Calendar" date="UpdateForm.ptmas016">
         <img notab src="../images/DateTimeStamp.gif" class="Icon"
          alt="Current" date="UpdateForm.ptmas016">
    </td>
      <td class=DataLabel>Post Code</td>
      <td><input type="text" size="4" maxlength="4" tabindex=10
           name=ptmas011 id=ptmas011 class=Mandatory title="Post Code"
           onchange="LookupSuburb(this.value)"></td></tr>

<tr id=GenderExtra>
  <td><div id=IdenGenLbl></div></td>
  <td><div id=IdenGenDetail></div></td>
  <td><div id=IdenProLbl></div></td>
  <td><div id=IdenProDetail></div></td>
</tr>

<tr><td class=HeadingCell colspan=6 width=100% align=center>
    PMI Details</td></tr>

<tr><td class=DataLabel>Country of Birth</td>
    <td><select class="Mandatory SelectMed" tabindex=14
         name=ptmas018 id=ptmas018 title="Country of Birth">
        <option></option>
        </select></td>
        <script type="text/javascript"> {
        SetCategoryC_(document.UpdateForm.ptmas018,"VIC") }
        </script>
    <td class=DataLabel>Marital Status</td>
    <td><select  class=Mandatory select120 name=ptmas015 id=ptmas015 tabindex=14
         title="Marital Status">
        <option></option>
        %EMRWEB02.02.069.2
        </select></td>
    <td class=DataLabel>Religion</td>
    <td><select  class=Mandatory select120 name=ptmas019 id=ptmas019 tabindex=14
         title="Religion">
        <option></option>
        %EMRWEB02.02.023.2
        </select></td></tr>

<tr><td class=DataLabel>Previous Name</td>
    <td><input type=text size=19 max=19 name=ptmas007 id=ptmas007 tabindex=14
         title="Previous Name">
    </td>
    <td class=DataLabel>Preferred Language</td>
    <td><select class="Mandatory SelectMed" tabindex=14
         name=ptmas039 id=ptmas039
         title="Preferred Language">
        <option></option>
        %EMRWEB02.02.044.2
        </select></td>
    <td colspan=1 class=DataLabel>Indigenous Status</td>
    <td><select class="Mandatory SelectMed" tabindex=14 title="Indigenous Status"
         name=pmpxi065 id=pmpxi065 
         title="Aboriginality">
        <option></option>
        %EMRWEB02.02.665.2
        </select></td></tr>
<tr><td class=DataLabel>Med. Alert</td>
    <td><select class=select120 name=ptmas042 id=ptmas042 tabindex=14
         title="Medical Alert">
        <option></option>
        %EMRWEB02.02.047.2
        </select></td>
    <td class=DataLabel>Drug Alert</td>
    <td><select class=select120 name=ptmas043 id=ptmas043 tabindex=14
         title="Drug Alert">
        <option></option>
        %EMRWEB02.02.048.2
        </select></td></tr>
<tr><td class=DataLabel>Curr. Indicator</td>
    <td><select class=select120 name=ptmas038 id=ptmas038 tabindex=14
         title="Current Indicator">
        <option></option>
        %EMRWEB02.02.043.2
        </select></td>
    <td class=DataLabel>Hist. Indicator</td>
    <td><select class=select120 name=ptmas040 id=ptmas040 tabindex=14
         title="History Indicator">
        <option></option>
        %EMRWEB02.02.045.2
        </select></td></tr>
<tr><td class=DataLabel>Local GP</td>
    <td colspan=5>
        <input type=hidden name=name_pmpxi059 id=name_pmpxi059
         value="%EMRWEB02.02.684.081" title="Local GP">
        <input type=text name=pmpxi059 id=pmpxi059 size=20 maxlength=20 readonly
        value="%EMRWEB02.02.684.001" title="Local GP" notab>
	<input type=hidden name=select059 id=select059 value="">
        <input type=hidden name=name_pmpxi060 id=name_pmpxi060 value="">
        <input type=hidden name=name_select059 id=name_select059 value="">
        <img class=Icon src="../images/SearchIcon.gif" tabindex=16
        onclick="GPSearch(pmpxi059,name_pmpxi059,name_pmpxi060,select059,name_select059);">
        <img class=Icon src="../images/erase.gif"
         onclick="clrDoc(name_pmpxi059,pmpxi059);">
</td></tr>

<tr><td class=HeadingCell colspan=6 width=100% align=center>
    Emergency Visit Details</td></tr>

<tr><td class=DataLabel>Arrival Date and Time</td>
    <td colspan=3>
    <input type=text size=11 max=11 name=emvis001 id=emvis001 tabindex=17
     title="Arrival Date" class="Mandatory PastDate">
    <img notab src="../images/DateLookup.gif" class="Icon" 
     alt="Show Calander" date="UpdateForm.emvis001">
    <input type=text size=8 max=8 name=emvis002 id=emvis002 tabindex=18
     title="Arrival Time" class=Mandatory>
    <img notab src="../images/DateTimeStamp.gif" class="Icon"
     alt="Current" date="UpdateForm.emvis001" time="UpdateForm.emvis002">
    <img notab src="../images/TimeLookup.gif" class="Icon"
     alt="Time Select" time="UpdateForm.emvis002">
    <td class=DataLabel>Attendance Type</td>
    <td><select class="Mandatory SelectMed" name=emvis053 id=emvis053
         tabindex=19 title="Attendance Type">
        <option></option>
        %EMRWEB02.02.213.2
        </select></td></tr>

<tr><td class=DataLabel>Compensable Status</td>
    <td><select class="Mandatory SelectMed" name=emvis008 id=emvis008
         tabindex=19 title="Compensable Status">
        <option></option>
        %EMRWEB02.02.108.2
        </select></td>
    <td class=DataLabel>Attendance Source</td>
    <td><select class="Mandatory SelectMed" name=emvis061 id=emvis061
         tabindex=19 title="Attendance Source"
        onchange="checkReferred(emvis061,emvis032);">
        <option></option>
        %EMRWEB02.02.221.2
        </select></td>
    <td><div id=TranSrcHeading></div></td>
    <td><div id=TranSrc></div></td>
    </tr>

<tr><td class=DataLabel>Arrival Transport</td>
    <td><select class="Mandatory SelectMed" name=emvis013 id=emvis013
         tabindex=21 title="Arrival Transport"
         onchange='document.UpdateForm.emvis034.disabled=0;'>
        <option></option>
        %EMRWEB02.02.113.2
        </select></td>
     <td class=DataLabel>Amb. Case No</td>
     <td><input type=text size=10 maxlength=15 name=emvis034 id=emvis034
          tabindex=22 onfocus="CheckAmbType()" value="%EMRWEB02.02.134"></td>
     <td class=DataLabel>Clerical ID</td>
     <td><input type=text size=3 maxlength=3 name=emvis062 id=emvis062
          tabindex=23 class=Mandatory title="Clerical ID"
          value="%EMRWEB02.02.222.1" onblur="CheckCode(emvis062,v062name)">
         <select name=v062name id=v062name class="Mandatory SelectMed" 
          onchange="UpdateCode(emvis062,v062name)">
         <option></option>
          %EMRWEB02.02.222.2
         </select></td></tr>

<tr valign=top><td class=DataLabel>Presenting Complaint </td>
    <input type=hidden name=emrviscat id=emrviscat value="el">
    <td><input type="text" size=10 tabindex=24
      onKeyUp='UpCase(this);getPresentCom(this,UpdateForm.emvis060,emrviscat);'>
    <select name=emvis060 id=emvis060 class="SelectBig Mandatory"
     title="Presenting Complaint" tabindex=25>
    </select></td>
    <td colspan=4>
    <textarea type="text" name=prcom001 id=prcom001 wrap=hard tabindex=26
     title="Presenting Complaint Comments" cols=50 rows=2 class=AsciiOnly
     onkeydown="LimitText(this,6,300);"
     onblur="TextareaBlurHandler(this);Validateprecom001();">
    </textarea>
    </td></tr>
</table>
<br>
<table width=100% border=0 cellspacing=0 cellpadding=2>
<tr><td align=center width=100%>
    <input type=button value="Add and Register" class="Bigbutton" tabindex=30
     onclick="Register();">
    <input type=button value="Cancel" class="button" tabindex=31
     onclick="history.go(-1)">
    </td></tr>
</table>
</td></tr>
</table>
</form>

<div id=SelectHeading></div>
<div id=SelectLocation></div>

<span id=transferhd style="display:none">
<td class=DataLabel>Transfer Source</td>
</span>

<span id=transferblank style="display:none">
   <input type=hidden name=emvis032 id=emvis032 value="" notab>
</span>

<span id=transfersrc style="display:none">
<td><input type="text" size=8 maxlength=6 name=emvis032 id=emvis032
     tabindex=28 value="%EMRWEB02.02.132.1" class="Mandatory"
     onchange='validateCode(9,emvis032,trnsfsrc);'>
    <input type=text  size=25 name=trnsfsrc id=trnsfsrc readonly notab
     value="%EMRWEB02.02.132.0">
    <img src="../images/SearchIcon.gif" class=Icon 
     onclick=" TransferSourceFrame(emvis032,trnsfsrc)"></td>
    <img src="../images/erase.gif" class=Icon
     onclick="clrDoc(emvis032,trnsfsrc);">
</span>

<span id=idenGenLblShow style="display:none">
  <td class=DataLabel>%STANDARD.01.035.Gi</td>
</span>
<span id=idenGenDetailShow style="display:none">
  <td><select name=pmpxi125 id=pmpxi125 class=Mandatory tabindex=5
       title="%STANDARD.01.035.Gi"
       onchange="IdenGenderChange(document.UpdateForm);">
      <option></option>
       %EMRWEB02.02.086.099.063.9.2
      </select><br>
      <span id=IdenGenFreeTxt></span>
  </td>
</span>
<span id=idenGenDetailBlank style="display:none">
  <td><input type=hidden name=pmpxi125 id=pmpxi125 value=""></td>
  <td><input type=hidden name=pmpxi126 id=pmpxi126 value=""></td>
</span>
<span id=idenGenFreeTxtShow style="display:none">
  <input type=text name=pmpxi126 id=pmpxi126 size=80 maxlength=80
   class=Mandatory tabindex=5
   title="Identifying Gender Free Text"
   value="%EMRWEB02.02.086.099.065">
</span>
<span id=idenGenFreeTxtBlank style="display:none">
  <td><input type=hidden name=pmpxi126 id=pmpxi126 value=""></td>
</span>

<span id=idenProLblShow style="display:none">
  <td class=DataLabel>%STANDARD.01.035.Gp</td>
</span>
<span id=idenProDetailShow style="display:none">
  <td><select name=pmpxi127 id=pmpxi127 class=Mandatory tabindex=10
       title="%STANDARD.01.035.Gp"
       onchange="IdenPronounChange(document.UpdateForm);">
      <option></option>
       %EMRWEB02.02.086.099.064.9.2
      </select><br>
      <span id=IdenProFreeTxt></span>
  </td>
</span>
<span id=idenProDetailBlank style="display:none">
  <td><input type=hidden name=pmpxi127 id=pmpxi127 value=""></td>
  <td><input type=hidden name=pmpxi128 id=pmpxi128 value=""></td>
</span>
<span id=idenProFreeTxtShow style="display:none">
  <input type=text name=pmpxi128 id=pmpxi128 size=80 maxlength=80
   class=Mandatory tabindex=10
   title="Identifying Pronoun Free Text"
   value="%EMRWEB02.02.086.099.066">
</span>
<span id=idenProFreeTxtBlank style="display:none">
  <td><input type=hidden name=pmpxi128 id=pmpxi128 value=""></td>
</span>

<script type="text/javascript">

if (document.UpdateForm.emvis061.value.substr(5,1) == "1") {
  document.UpdateForm.emvis032.className="Mandatory";
}

</script>
 
