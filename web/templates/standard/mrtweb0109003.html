<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
function DueDate(ReturnCode){
  var serverURL   = "../cgi-bin/mrtweb01.pbl?reportno=13" +
                    "&mrtme005=" + ReturnCode.value +
                    "&mrtme001=" + medrecrq.mrtme001.value
  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0) {
    document.medrecrq.mrtme007.value=returnValue.return_value }
  else {
    ReturnCode.select();  }
}

function ChkHist(ReturnCode) {
  if (ReturnCode.checked) {
  if (isWhitespace(medrecrq.mrtme003.value)) {
    alert("Destination is required !");
    return;
    }
  var serverURL   = "../cgi-bin/mrtweb01.pbl?reportno=16" +
                    "&mrkeyarr=" + ReturnCode.value +
                    "&mrtme001=" + medrecrq.mrtme001.value +
                    "&mrtme002=" + medrecrq.mrtme002.value +
                    "&mrtme003=" + medrecrq.mrtme003.value
  var returnValue = RSExecute(serverURL);
  ReturnValue=returnValue.return_value.split("|");
  if (returnValue.status==0) {
    if (ReturnValue[0]==1) {
    alert("Warning : Record Moving to a Home Location that is not its own !");
    }
    if (ReturnValue[1]==1) {
    alert("Warning : Patient has an admission with Incomplete Coding !");
    }
    if (ReturnValue[2]==1) {
    alert("Warning : Movement date is before last movement date " + ReturnValue[3] );
    }
    if (ReturnValue[4]==1) {
    alert("Warning : Unfilled requests exist for this record !");
    }

  }
  else {
    ReturnCode.select();  }
}
}
function reSend() {
document.medrecrq.updttype.value="";
document.medrecrq.submit()
}
function MoveRecord(){

    document.medrecrq.redirect.value="patweb98.pbl?reportno=1&template=043" +
        "&admissno=" + document.medrecrq.admissno.value.replace(/ /g,"+") +
        "&urnumber=" + document.medrecrq.urnumber.value.replace(/ /g,"+")

SubmitHidden(medrecrq);
}
function SetReq() {
  if (document.medrecrq.requtype.value=="1") {
    RequestType.innerHTML=ReqFree.innerHTML;
  } else {
    RequestType.innerHTML=ReqSelect.innerHTML;
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);setTimeout('SetReq()',100);">
<div id=PageHeadingSection>
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%MRTWEB01.09.003";
PatientVIS="%MRTWEB01.09.081";
PatientNAM="%MRTWEB01.09.002";
PatientSTA="%MRTWEB01.09.086.078";
PatientALT="%MRTWEB01.09.084";
PatientSEX="%MRTWEB01.09.019";
PatientDOB="%MRTWEB01.09.020";
PatientAGE="%MRTWEB01.09.021";
PatientLOC="%MRTWEB01.09.083";
PatientPRI="%MRTWEB01.09.086.066.1";
PatientUNT="%MRTWEB01.09.066.0";
DoctorCOD="%MRTWEB01.09.082.003";
DoctorNAM="%MRTWEB01.09.082.002";
PatientAID="%MRTWEB01.09.086.090";
PatientIND="%MRTWEB01.09.086.091";
PatientCUR="%MRTWEB01.09.086.092";
PatientCLC="%MRTWEB01.09.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%MRTWEB01.09.086.094";
PatientCDM="%MRTWEB01.09.086.095";
PatientVDH="%MRTWEB01.09.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
</div>
<div id=PageBodySection>
<form name=medrecrq action="mrtweb01.pbl" method=post style="margin:0">
<input type=hidden name=reportno value=9>
<input type=hidden name=template value=003>
<input type=hidden name=urnumber value="%MRTWEB01.09.303">
<input type=hidden name=admissno value="%MRTWEB01.09.081">
<input type=hidden name=updttype value="A">
<input type=hidden name=nextpage value="5">
<input type=hidden name=redirect value="patweb89.pbl?reportno=01&template=043">
<input type=hidden name=MenuType value="%MRTWEB01.09.088">
<input type=hidden name=ptmis027 value="">
<input type=hidden name=mrtst013 value="%PATWEB89.01.126.0">
<input type=hidden name=requtype value="%MRTWEB01.09.129">

<table align=center cellspacing=1 cellpadding=0 border=0 width=95%>
  <tr><td class=DataLabel>Document Type </td>
  <td><select name=mrtme010 id=mrtme010 class=Mandatory title="Document Type"
      onchange="reSend()"> 
      <option></option>
      %MRTWEB01.09.304.2  
      </select></td>

  <td class=DataLabel>Requested By</td> 
  <td><div id=RequestType></div></td>
</tr>

<tr><td class=DataLabel>Date Required</td>
    <td><input type=text size=12 name=mrtme001 id=mrtme001
         class="Mandatory Date" title="Date Required" value="%STANDARD.01.015">
         <img notab src=../images/DateLookup.gif border=0 hspace=4
         align=absmiddle onclick="DateLookupFrame(mrtme001);">
    </td>

    <td class=DataLabel>Time Required</td>
    <td><input class=Mandatory type=text name=mrtme002 id=mrtme002
         size=8 value="%STANDARD.01.016" title="Time">
        <img notab src=../images/DateTimeStamp.gif border=0 hspace=4
         align=absmiddle onclick="SetCurrentDateTime(mrtme001,mrtme002);">
       <img notab src=../images/TimeLookup.gif border=0 hspace=4
        onclick="TimeLookupFrame(mrtme002);">
</td></tr>

<tr><td>Reason</td>
    <td><select name=mrtme005 id=mrtme005 title="Reason" class=Mandatory
         onchange='DueDate(this);'>
    <option></option>
    %MRTWEB01.09.204
    </select>
    </td>
    <td>Due Date</td>
    <td><input type=text name=mrtme007 id=mrtme007 class=Mandatory size=12
         class="Mandatory Date" title="Due Date" value="">
         <img notab src=../images/DateLookup.gif class=Icon
         onclick="DateLookupFrame(mrtme007);">
    </td></tr>

<tr><td class=DataLabel>Destination</td>
    <td><select name=mrtme003 id=mrtme003 class=Mandatory title="Department"> 
        <option></option>
        %MRTWEB01.09.201.2
        </select></td>
        <td>Post Discharge</td>
        <td><select name=mrtme012 id=mrtme012 title="Post Discharge">
        <option></option>
        %MRTWEB01.09.205.2
        </select>
        </td></tr>

<tr><td class=DataLabel>Extension #</td>
    <td><input type=text name=mrtme013 id=mrtme013 size=15 maxlength=20
         title="Extension"></td>
    <td class=DataLabel>Pager #</td>
    <td><input type=text name=mrtme014 id=mrtme014 size=15 maxlength=20
         title="Pager Number"></td></tr>
</table>
<table align=center cellspacing=0 cellpadding=0 border=0 width=95%>
%MRTWEB01.09.302
</table>


<table align=center cellspacing=1 cellpadding=0 border=0 width=95%>
  <tr><td align=center>
    <input type=button value="Move" class="button" id="movebutt"
    onclick="tempDisable(this);MoveRecord();">
    <input type=button Value="Cancel" class="button" onclick="history.go(-1)">
  </td> </tr>

</table>
</form>
</div>
<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%MRTWEB01.09.003">
<input type=hidden name=admissno value="%MRTWEB01.09.081">
<input type=hidden name=MenuType value="%MRTWEB01.09.088">
<input type=hidden name=nextpage value="5">
<input type=hidden name=ptmis027 value="%PATWEB89.01.126">
</form>

<span id=ReqFree style="display:none">
  <input type=text name=mrtme016 id=mrtme016 size=37 maxlength=35
       title="Requested By" value="%STANDARD.01.009">
</span>
<span id=ReqSelect style="display:none">
  <select name=mrtme016 id=mrtme016 title="Requested By">
    <option></option>
    %MRTWEB01.09.130
  </select>
</span>
