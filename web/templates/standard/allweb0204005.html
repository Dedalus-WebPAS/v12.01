<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script language=javascript src="../js/TableSort.js"></script>
<script language="Javascript">
function EncounterLink(ReferralKey,ReferralDep,EncounterKey) {
  var message = "Do you want to move this event?";
  if (!confirm(message)) {
    return;
  }
  if(document.UpdateReferral.d_alredept.value != ReferralDep &&
     document.UpdateReferral.d_intrvent.value == "1") {
    alert("Warning: Interventions exist and will not be moved");
  }
  document.UpdateReferral.referral.value = ReferralKey;
  document.UpdateReferral.encoutky.value = EncounterKey;
  document.UpdateReferral.submit();
}
function FilterReferral() {
  document.PatientLinks.filtstat.value=document.getElementById("d_filtstat").value;
  PatientLinkDFrame('allweb02.pbl',4,5,0,0,0);
}
//----------------------------------------------------------------------------
// Create New Table Object
// Border, Cellspacing, Cellpadding, Width, Align, Heading Height, Row Height
//----------------------------------------------------------------------------
// Add Columns in Order Required
// Heading,Type,Display Column,Sort Column, Align, Icon, Link Column
// Columns Available
// 0. Referral Link
// 1. Department Description
// 2. Referral Date
// 3. Status Description
// 4. Referred By
// 5. Problem Description
// 6. Referral/Visit Number
// 7. Last Encounter Date
// 8. Priority
// 9. Compensation
// |
// 21.Linked Referral
// 22.Compensation Desc
// 23.Case Team Code
// 24.Case Team Desc
// 25.Responsible HCP code
// 26.Responsible HCP Name
//---------------------------------------------------------------------------
function InitTable(TableView) {
document.title = "Allied Health Referrals";
switch (TableView) {
case 0: {
 t = new Table(1,0,2,"100%","center",35,35);
 t.addColumn("Date","Date",2,2,"left","EditIcon.gif","39",90)
 t.addColumn("Department","String",1,1,"left","","",110)
 t.addColumn("Problem","String",33,33,"left","","",90)
 t.addColumn("Referred By","String",4,4,"left","","",90)
 t.addColumn("Responsible HCP","String",26,26,"left","","",90)
// t.addColumn("Case Team","String",23,23,"left","","",40)
// t.addColumn("Case Team","String",24,24,"left","","",80)
// t.addColumn(PatientLinks.claimcode.value,"String",22,22,"left","","",30)
// t.addColumn("Type/Link","String",21,21,"left","","",60)
 t.addColumn("Type/Link","String",21,21,"left","","",90)
 t.addColumn("Status","String",3,3,"left","","",50)
//
// if(document.AddReferral.ptcndcdm.value=="1") {
//   t.addColumn("CDM","String",30,30,"left","","",70)
// }
//
 AddTableRows()
 t.sortTable(1,1);    // By Department
 TableOutput(0,2);    // By Date Order Column,Asc Dsc
 break; }
case 1: {
 t = new Table(1,0,2,"100%","center",35,35);
 t.addColumn("Date","Date",2,2,"right","EditIcon.gif","0",100,"","","",32)
 t.addColumn("Department","String",1,1,"left","","",100)
 t.addColumn("Problem","String",33,33,"left","","",90)
 t.addColumn("Referred By","String",4,4,"left","","",90)
 t.addColumn("Responsible HCP","String",26,26,"left","","",50)
// t.addColumn("Case Team","String",23,23,"left","","",40)
// t.addColumn("Case Team","String",24,24,"left","","",80)
// t.addColumn(PatientLinks.claimcode.value,"String",22,22,"left","","",30)
 t.addColumn("Type/Link","ImageText",21,31,"left","UpdateLink","27",90,28)
 t.addColumn("Status","String",3,3,"left","","",50)
 AddTableRows()
 TableOutput(7,0);    // By Date Order Column,Asc Dsc
 break; }
 }
}
</script>
%START.OF.PAGE
<body onload="PageLoad(event);InitTable(0);">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon"
 src="../images/ExitIcon.gif" onclick="DFrameExitRefresh();">
<script type="text/javascript">document.write('Referrals');</script>
</span>
<form name=UpdateReferral method=post action=allweb02.pbl style="margin:0">
    <input type=hidden name=reportno value=4>
    <input type=hidden name=template value=5>
    <input type=hidden name=urnumber value="%ALLWEB02.04.003">
    <input type=hidden name=admissno value="%ALLWEB02.04.081">
    <input type=hidden name=linkvist value="%ALLWEB02.04.304">
    <input type=hidden name=referral value="">
    <input type=hidden name=unlkvist value="%ALLWEB02.04.304">
    <input type=hidden name=updatety value="E">
    <input type=hidden name=encoutky value="">
    <input type="hidden" name="ptcndcdm" value="%STANDARD.01.025.116.214.0.1">
    <input type=hidden name=d_alredept value="%ALLWEB02.04.125.1">
    <input type=hidden name=d_intrvent value="%ALLWEB02.04.323">
<div>

<table cellspacing=0 cellpadding=0 border=1 width=100% class=HeadingCell>
<tr><td>
    <table cellspacing=0 cellpadding=0 border=0 width=100% >
      <tr>
        <td align=left class=HeadingCell>Status
        <select name=d_filtstat id=d_filtstat onchange="FilterReferral();">
        <option>All</option>
        <option value="0">Waiting</option>
        <option value="1">Active</option>
        <option value="2">Closed</option>
        <option value="3">Inactive</option>
        <option value="4">Cancelled</option>
        <option value="5">Rejected</option>
        <option value="7">Waiting & Active</option>
        <option value="8">Closed & Rejected</option>
        <option value="9">Inactive & Cancelled</option>
        </select>
        </td>
      </tr>
    </table>
</td></tr>
</table>

</div>
</form>

<div id=TableLocation></div>

<script language="Javascript">
function AddTableRows() {
%ALLWEB02.04.201
}
</script>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value="4">
<input type=hidden name=template value="005">
<input type=hidden name=urnumber value="%ALLWEB02.04.003">
<input type=hidden name=admissno value="%ALLWEB02.04.081">
<input type=hidden name=MenuType value="%ALLWEB02.04.088">
<input type=hidden name=wbsedall value="%STANDARD.01.028">
<input type=hidden name=filtstat value="">
<input type=hidden name=dummy    value="" />
<input type=hidden name=filtdept value="">
<input type=hidden name=claimcode value="%STANDARD.01.017.CL">
<input type=hidden name=encoutky value="%ALLWEB02.04.306">
<input type=hidden name=contdate value="%ALLWEB02.04.325">
</form>

<script language="Javascript">
 stat="%ALLWEB02.04.222";
 fs = document.getElementById("d_filtstat");
 for (var i =0 ; i < fs.length; i++) {
  if (fs.options[i].value==stat.substr(0,3)) {
       fs.selectedIndex=i } };
</script>
