<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
  function AddTerminal(){
    var af = document.AddForm;
    if(af.d_fmept003.checked){
      af.fmept003.value="1";
    }
    if (validateMandatory(af)) af.submit();
  }

  function TestTerminal(){
    var uf  = document.AddForm;
    var url = "../php/fmsweb0504.php?addr=" + uf.fmept004.value
    +"&port=" + uf.fmept005.value + "&httprand=" + Math.random();

    uf.response.style.display = "block";
    xmlHttp = createHttpObject();
    xmlHttp.open("GET",url,false);
    xmlHttp.send(null)
    if(xmlHttp.responseText.substring(0,3)!="000"){
      uf.d_fmept003.checked = false;
      uf.response.innerHTML = "FAIL\n" + xmlHttp.responseText.slice(4);
    }
    else{
      uf.response.innerHTML = "SUCCESS";
    }
  }

</script>
</head>

%START.OF.PAGE
<body onLoad="PageLoad(event);">

<span class=DFrameTitleBar>
  <img align="right" alt="Exit" class="MenuIcon" 
   src="../images/ExitIcon.gif" onClick="DFrameExitRefresh();">
   Add EFTPOS Terminal
</span>

<form name=AddForm method=post action=fmsweb05.pbl style="margin:0">
<input type=hidden name=reportno value="04">
<input type=hidden name=template value="002">
<input type=hidden name=updttype value="A">
<input type=hidden name=nextpage value="0">
<input type=hidden name=fmept001 value="%FMSWEB05.04.004">

  <table align=center width=95% border=0>
    <tr>
      <td width=25% class=DataLabel>Terminal ID</td>
      <td>
        <input type=text name="fmept002" title="Terminal ID" class=Mandatory 
         size=3 maxlength=3>
      </td>
    </tr>
    <tr>
      <td class=DataLabel>Description</td>
      <td>
        <input type=text name="fmept006" title="Description" class=Mandatory 
         size=30 maxlength=30>
      </td>
    </tr>
    <tr>
      <td class=DataLabel>Address IP/URL</td>
      <td>
        <input type=text name="fmept004" title="Address IP/URL" class=Mandatory
         size=40 maxlength=40>
      </td>
    </tr>
    <tr>
      <td class=DataLabel>Port Number</td> 
      <td>
        <input type=text name="fmept005" title="Port Number" class=Mandatory
         size=5 maxlength=5>
      </td>
    </tr>
    <tr>
      <td class=DataLabel>Active</td>
      <td>
        <input type=checkbox name="d_fmept003" title="Active">
        <input type=hidden name="fmept003" value="">
      </td>
    </tr>
    <tr>
      <td colspan=2>
        <textarea name="response" rows=3
         style="width:100%;overflow:hidden;display:none;" readonly
         disabled></textarea>
      </td>
    </tr>
    <tr>
      <td colspan=2 align=center><br>
        <input type=button value="Test" class="button" id="fmd05test"
         onclick="tempDisable(this);TestTerminal();">
        <input type=button value="Add" class="button" id="fms05add"
         onclick="tempDisable(this);AddTerminal();">
        <input type=button value="Cancel" class="button" 
         onclick="DFrameCloseRefresh();">
      </td>
    </tr>
  </table>
</form>
