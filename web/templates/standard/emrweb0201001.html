<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome"    content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"    content="true">
<link rel="stylesheet" href="../html/postcode.css" type="text/css">
<script type="text/javascript" src="../js/IBA_Category_C_.js"></script>
<script type="text/javascript" src="../js/IBA_Category_LA.js"></script>
<script type="text/javascript" src="../js/AutoPostCode.js"></script>
<script type="text/javascript" src="../js/EmrRegistration.js"></script>
<script type="text/javascript" src="../js/emrweb0201102.js"></script>
<script type="text/javascript" src="../js/AddressSearch.js"></script>

<script type="text/javascript">
function ReadDocOnly(OptionNumber,OptionType,ReturnCode,ReturnName) {
  ReturnName.value="";
  if (isWhitespace(ReturnCode.value)) return;;
  var serverURL  = "../cgi-bin/patweb80.pbl?reportno=" + OptionNumber +
               "&returnfm=2" + "&valdtype=" + OptionType +
               "&valdcode=" + ReturnCode.value.replace(/ /g,"+")

  var returnValue = RSExecute(serverURL);

  if (returnValue.status==0) {
    ReturnValue=returnValue.return_value.split("|");
    ReturnName.value=trim(ReturnValue[0]); }
 else {
    ReturnCode.value="";
    ReturnCode.select();
    return false; }
}
// Copy of HCPSearchFrame without all clears that effect GPHCGSearchFrame //
function HCPSearchFrame(ReturnCode,ReturnName,ReturnProv,ReturnPrac,ReturnDesc,ReturnCntr) {
  DFrameStart()
  SearchType="" ;
  window.ReturnFunction="" ;
  for (var i=6; i < HCPSearchFrame.arguments.length; i++) {
    if (typeof(HCPSearchFrame.arguments[i]) == 'function') {
      window.ReturnFunction=HCPSearchFrame.arguments[i] }
    else {
      SearchType=HCPSearchFrame.arguments[i]
    } }

  window.ReturnCode=ReturnCode ;
  window.ReturnName=ReturnName ;
  window.ReturnProv=ReturnProv ;
  window.ReturnPrac=ReturnPrac ;
  window.ReturnDesc=ReturnDesc ;
  window.ReturnCntr=ReturnCntr ;
  document.getElementById('PopUpFrame').src="../lookups/HCPSearchFrame"+SearchType+".html"
  SearchFrameShow()
}
function init() {
  SetFields();
  InitPostCodes();
  SetCategoryC_(document.UpdateForm.ptmas018,HiddenFields.cob.value);
  SetCategoryLA(document.UpdateForm.pmpxi002,HiddenFields.pl1.value);
  SetCategoryLA(document.UpdateForm.pmpxi003,HiddenFields.pl2.value);
  if (isWhitespace(top.menu.location.search)) { }
  else {
  PageLocation="?reportno=1&template=4" +
               "&urnumber=" + PatientURN.replace(/ /g,"+") +
               "&admissno=" + PatientVIS.replace(/ /g,"+");
  if (top.content.location.search!=PageLocation) {
    if(!top.content.location.search.match(/regiflag/)) {
      top.content.location.href="emrweb02.pbl" + PageLocation;}
    } 
  }
  checkReferred();
  CheckAmbType();
  CheckAccom();
  ShowOptOutSMS();
}
function checkLang01() {
  if(document.UpdateForm.pmpxi001.checked == true) {
    document.UpdateForm.pmpxi002.className="Mandatory";
    document.UpdateForm.pmpxi002.focus();
  } else {
    document.UpdateForm.pmpxi002.className="";
  }
}
function valClaimCode() {
// Do not default the claim code if one has already been entered
  if(!isWhitespace(document.UpdateForm.deftclam.value)) {
    return;                      
  }
  validateCode(41,UpdateForm.urnumber,UpdateForm.claimc);
  for (var i =0 ; i < document.UpdateForm.emvis008.length; i++) {
    if (document.UpdateForm.claimc.value==
        trim(document.UpdateForm.emvis008.options[i].value.substr(0,3))){
          document.UpdateForm.emvis008.selectedIndex=i;
    }
  }
}
// Do VEMD Error 132 check
//   If Referred by is a 5 - Emergency department review from this hospital
//   then Type of visit must be either 2 - return visit-planned
//                                  or 4 - outpatient/outpatient clinic
//   AND vis versa
//   Do VEMD E142
//   Display warning if Type of visit is 10 - Dead on Arrival
//
function valEmrVisit() {

   checkSecondName(document.UpdateForm.ptcnusgn,document.UpdateForm.ptmas006,
                  document.UpdateForm.pmpxi084,document.UpdateForm.pmpxi085);

  validateSuspension(UpdateForm.urnumber,UpdateForm.emvis001,UpdateForm.datefrom,UpdateForm.dateto);

  if( UpdateForm.datefrom.value != "0" ){
         if(!confirm("Error : Patient has a Suspension record for period \n" +
               "\t" + UpdateForm.datefrom.value  + " - " + UpdateForm.dateto.value + "\n" +
               "\nWould you like to continue with the Registration?")) {
          return;
        }
  }

  i=document.UpdateForm.emvis061.selectedIndex;
  SrcInd=trim(document.UpdateForm.emvis061.options[i].value.substr(14,4));
  j=document.UpdateForm.emvis053.selectedIndex;
  TypInd=trim(document.UpdateForm.emvis053.options[j].value.substr(14,4));
  if (TypInd=="10") {
    if (!confirm("Warning: Patient is Dead on Arrival.")) {
      return;
    }
  }
  if (!ValMedicare01()) {
    return;
  }
  if (document.getElementById('ptcnuadv').value != "1" &&
      !CheckValPostCode()) {
    return;
  }
  SetOptOutSMS();
  CheckVerifiedAddr();
  UpdatePage();
}
function setAddrLine4(theForm) {
  if (theForm.oseasflg.checked==1) {
     AddressLine4H.innerHTML=OseasCountryH.innerHTML
     AddressLine4.innerHTML=OseasCountry.innerHTML
     if (trim(theForm.ptmas011.value)!="8888") {
         theForm.ptmas085.value="";
         theForm.ptmas011.value="8888";
     }
  } else {
     AddressLine4H.innerHTML=AustStateH.innerHTML
     AddressLine4.innerHTML=AustState.innerHTML
     if (trim(theForm.ptmas011.value)=="8888") {
         theForm.ptmas085.value="";
         theForm.ptmas011.value="";
     }
  }
  state = theForm.ptmas085;
}
function SetPostCode01() {
 suburb   = document.UpdateForm.ptmas010;
 state    = document.UpdateForm.ptmas085;
 postcode = document.UpdateForm.ptmas011;
 if (document.UpdateForm.oseasflg!=undefined) {
    if (trim(postcode.value)=="8888") {
       document.UpdateForm.oseasflg.checked=true;
    } else {
       document.UpdateForm.oseasflg.checked=false;
    }
    setAddrLine4(UpdateForm)
 }
}
function checkOverseas(){
  if(trim(document.UpdateForm.ptmas011.value)=="8888"){
     document.UpdateForm.oseasflg.checked=true;
  }
  else{
     document.UpdateForm.oseasflg.checked=false;
  }

  setAddrLine4(UpdateForm);

  CheckReadOnly();
}
function displayReferralFields() {
//Display referral fields only if Eclipse Store and Forward parameter is
//turned on and the Source of Referral (cat em) has indicator4 = R
  if (document.getElementById('ptcnuesf') != null &&
      document.getElementById('ptcnuesf').value == "1" &&
      document.UpdateForm.emvis061.value.substr(6,1) == "R") {
      emvis174TitleDIV.innerHTML = emvis174TitleSPAN.innerHTML;
//    emvis175TitleDIV.innerHTML = emvis175TitleSPAN.innerHTML;
      emvis176TitleDIV.innerHTML = emvis176TitleSPAN.innerHTML;
      emvis174FieldDIV.innerHTML = emvis174FieldSPAN.innerHTML;
//    emvis175FieldDIV.innerHTML = emvis175FieldSPAN.innerHTML;
      emvis176FieldDIV.innerHTML = emvis176FieldSPAN.innerHTML;
      emvis020TitleDIV.innerHTML = emvis020TitleSPAN.innerHTML;
      emvis020FieldDIV.innerHTML = emvis020FieldSPAN.innerHTML;

      displaycatRF();
  }
  else {
       emvis174TitleDIV.innerHTML = "";
       emvis175TitleDIV.innerHTML = "";
       emvis176TitleDIV.innerHTML = "";
       emvis174FieldDIV.innerHTML = "";
       emvis175FieldDIV.innerHTML = "";
       emvis176FieldDIV.innerHTML = "";
       emvis020TitleDIV.innerHTML = "";
       emvis020FieldDIV.innerHTML = "";
  }
}
function displaycatRF() {
    if (document.UpdateForm.emvis174.value.substr(3,1) == "N") {
      emvis175TitleDIV.innerHTML = emvis175TitleSPAN.innerHTML;
      emvis175FieldDIV.innerHTML = emvis175FieldSPAN.innerHTML;
    } else {
      emvis175TitleDIV.innerHTML = "";
      emvis175FieldDIV.innerHTML = "";
    }
}

//
// Functions called from AddressSearch.js
//
function InitAddressSearch() {
  // line1 - 'ptmas008'
  // line2 - 'ptmas009'
  // suburb - 'ptmas010'
  // state - 'ptmas085'
  // postcode - 'ptmas011'

  if (document.getElementById('ptcnuadv').value == "1") {
    InitAddressSearchFields('trAddrSrch','ptmas008','ptmas009','ptmas010','ptmas085','ptmas011');

    if (document.getElementById('oseasflg').checked) {  // Overseas address
      ToggleSearchAddress(false);  // hide 'Search Address' row & enable fields
    }
  }
}
function ShowAddressSearch() {
  OpenAddressSearch('2',PopulateAddress,ClearSearchAddress);
}
function PopulateAddress(StreetLine, Suburb, State, Postcode) {
  LookupSuburb(Postcode);  // validate Postcode with our Lookup values
  if (SelectPC.length == 0) return;  // no match found

  LookupPostCode(Suburb);  // validate Suburb
  if (SelectPC.length == 0) return;  // no match found

  ToggleFieldReadOnly('ptmas008', true);
  ToggleFieldReadOnly('ptmas009', false);
  ToggleFieldReadOnly('ptmas010', true);
  ToggleFieldReadOnly('ptmas085', true);
  ToggleFieldReadOnly('ptmas011', true);

  SetFieldValue('ptmas008',StreetLine);
  SetFieldValue('ptmas009','');
  SetFieldValue('ptmas010',Suburb);
  SetFieldValue('ptmas085',State);
  SetFieldValue('ptmas011',Postcode);

  document.getElementById('verifiedLabl').style.display = "";

  checkAdd01();  // flag Previous Address save
}
function ClearSearchAddress() {
  ToggleFieldReadOnly('ptmas008', false);
  ToggleFieldReadOnly('ptmas009', false);
  ToggleFieldReadOnly('ptmas010', false);
  ToggleFieldReadOnly('ptmas085', false);
  ToggleFieldReadOnly('ptmas011', false);

  SetFieldValue('ptmas008','');
  SetFieldValue('ptmas009','');
  SetFieldValue('ptmas010','');
  SetFieldValue('ptmas085','');
  SetFieldValue('ptmas011','');

  document.getElementById('verifiedLabl').style.display = "none";
}
function CheckVerifiedAddr() {
  if (document.getElementById('ptcnuadv').value == "1") {
    if (document.getElementById('verifiedLabl').style.display == "") {
      document.getElementById('pmpxi113').value = "1";  // verified address
    }
    else {
      document.getElementById('pmpxi113').value = "0";  // address not verified
    }
  }
  else {
    document.getElementById('pmpxi113').disabled = true;
  }
}
function ToggleSearchAddressFields(ReadOnly) {
  ToggleFieldReadOnly('ptmas008', ReadOnly);
  ToggleFieldReadOnly('ptmas009', ReadOnly);
  ToggleFieldReadOnly('ptmas010', ReadOnly);
  ToggleFieldReadOnly('ptmas085', ReadOnly);
  ToggleFieldReadOnly('ptmas011', ReadOnly);
}
function ToggleSearchAddress(Show) {
  ToggleSearchAddressRow('trAddrSrch', Show);
  ToggleSearchAddressFields(Show);
}
function ToggleOverseas() {
  if (document.getElementById('ptcnuadv').value == "1") {
    if (document.getElementById('oseasflg').checked) {  // Overseas address
      ToggleSearchAddress(false);  // hide 'Search Address' row
      document.getElementById('verifiedLabl').style.display = "none";
    }
    else {
      ToggleSearchAddress(true);  // show 'Search Address' row
      SetFieldValue('ptmas010','');  // Suburb
      SetFieldValue('ptmas085','');  // State
      SetFieldValue('ptmas011','');  // Postcode
    }
  }

  setAddrLine4(UpdateForm);

  if (!document.getElementById('oseasflg').checked) {  // NOT Overseas address
    SetFieldValue('ptmas085','');  // State
  }

  CheckReadOnly();
}
function CheckReadOnly() {
  if (document.getElementById('ptcnuadv').value != "1") return;

  if (document.getElementById('ptmas008').readOnly) {
    // preserve 'readonly' state of address fields
    ToggleSearchAddressFields(true);  // readonly address fields
  }
}
function ToggleSearchRow() {
  if (document.getElementById('ptcnuadv').value != "1") return;

  if (trim(document.getElementById('ptmas012').value) != "8888") {
    ToggleSearchAddressRow('trAddrSrch',true);  // show 'Search Address' row
  }
  else {
    ToggleSearchAddressRow('trAddrSrch',false);  // hide 'Search Address' row
  }
}
</script>
%START.OF.PAGE
<body onLoad="PageLoad(event);valClaimCode();SetPostCode01();
              ChkIdentifyGenderPronounTitle(document.UpdateForm);
              turnOnSecondGivenName(document.UpdateForm.ptcnusgn.value,
                                    document.UpdateForm.ptmas006,
                                    document.UpdateForm.pmpxi084,
                                    document.UpdateForm.pmpxi085);
              displayReferralFields();InitAddressSearch();
              checkZeroUr();
              document.UpdateForm.ptmas001.focus();
              FilterClaimType(document.UpdateForm.emvis008);
              displayPrefNames(document.UpdateForm.ptcnnmpr.value);">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%EMRWEB02.01.003";
PatientVIS="%EMRWEB02.01.081";
PatientNAM="%EMRWEB02.01.002";
PatientSTA="%EMRWEB02.01.086.078";
PatientALT="%EMRWEB02.01.084";
PatientSEX="%EMRWEB02.01.019";
PatientDOB="%EMRWEB02.01.020";
PatientAGE="%EMRWEB02.01.021";
PatientLOC="%EMRWEB02.01.083";
PatientPRI="%EMRWEB02.01.086.066.1";
PatientUNT="%EMRWEB02.01.066.0";
PatientIND="%EMRWEB02.01.086.091";
GpCOD="%EMRWEB02.01.086.084.001";
GpNAM="%EMRWEB02.01.086.084.081";
GpPRAC="%EMRWEB02.01.086.085.001";
GpPRACCNT="%EMRWEB02.01.086.085.002";
GpPRACNAM="%EMRWEB02.01.086.085.005";
PatientARR="%EMRWEB02.01.101.0 %EMRWEB02.01.102";
PatientSEE="%EMRWEB02.01.199.008";
PatientTRI="%EMRWEB02.01.103.3";
PatientECLC="%EMRWEB02.01.484.1";
PatientCLH="%STANDARD.01.017.CL";
PatientEHFT="%EMRWEB02.01.485";
InsertEmergencyHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>

<form name=UpdateForm action="emrweb02.pbl" method=post style="margin:0">
<input type=hidden name=reportno value="01">
<input type=hidden name=updatety value="4">
<input type=hidden name=formactn value="C1">
<input type=hidden name=updttype value="TRIAG">
<input type=hidden name=updateky value="%EMRWEB02.01.404">
<input type=hidden name=admissno value="%EMRWEB02.01.146">
<input type=hidden name=urnumber value="%EMRWEB02.01.003">
<input type=hidden name=emvis118 value="%EMRWEB02.01.003">
<input type=hidden name=ptcnnmpr value="%STANDARD.01.025.128.226.1.1">
<input type=hidden name=emvis147>
<input type=hidden name=dummyadm><input type=hidden name=fpatname>
<input type=hidden name=chckname><input type=hidden name=redirflg value="1">
<input type=hidden name=mvmedrec>
<input type=hidden name=datefrom>
<input type=hidden name=dateto>
<input type=hidden name=dontchec value=1>
<input type=hidden name=nextpage value="11">
<input type=hidden name=redirect id=redirect>
<input type=hidden name=ptcnueoc value="%EMRWEB02.01.454">
<input type=hidden name=ptcnxcom value="%STANDARD.01.025.116.222.0.1">
<input type=hidden name="savealia" value="0">
<input type=hidden name="aliasset" value="0">
<input type=hidden name="prevaddr" value="0">
<input type=hidden name="preaddset" value="0">
<input type=hidden name="claimc">
<input type=hidden name=deftclam value="%EMRWEB02.01.108.1">
<input type=hidden name=ptcnhdps value="%STANDARD.01.025.080.250.1.1">
<input type=hidden name="ptcnusgn"  value="%STANDARD.01.025.114.219.0.1">
<input type=hidden name=ptcnnewc id=ptcnnewc
 value="%STANDARD.01.025.118.138.0.1">
<input type=hidden name="ptcnsmsn" id="ptcnsmsn"
 value="%STANDARD.01.025.120.243.0.1">
<input type=hidden name="ptmsx050" id="ptmsx050"
 value="%EMRWEB02.01.085.066.1">
<input type=hidden name="stfrefin" id="stfrefin"
 value="%EMRWEB02.01.919">
<input type=hidden name=dummx id=dummx value="">
<input type=hidden name="ptcnuesf" id="ptcnuesf"
 value="%STANDARD.01.025.124.222.0.1">
<input type=hidden name=ptcnuadv id=ptcnuadv
 value="%STANDARD.01.025.123.247.0.1">
<input type=hidden name=pmpxi113 id=pmpxi113 value="%EMRWEB02.01.699.049">

<table align=center width=100% border=0 cellspacing=0 cellpadding=0>
<tr><td class=HeadingCell colspan=6 align=center>
      Demographics Details</td>
</tr>

<tr><td colspan=2></td>
    <td class=DataLabel>Overseas Address</td>
    <td><input type=checkbox name=oseasflg id=oseasflg tabindex=6
         onclick='ToggleOverseas();'></td>
</tr>

<tr id=trAddrSrch style="display:none">
  <td colspan=2>&nbsp;</td>
  <td class=DataLabel nowrap>Search Address</td>
  <td><input type=text readonly size=42
       style="cursor:pointer;text-align:center;"
       value="Click here to search for an address"
       title="Click here to search for an address"
       onclick="ShowAddressSearch();">
  </td>
</tr>

<tr><td class=DataLabel>Title </td>
    <td><select title="Title"
       name=ptmas001 id=ptmas001 tabindex=1>
       <option></option>
       %STANDARD.01.029
       </select>
    </td>
    <td class=DataLabel>Address&nbsp;
      <span id=verifiedLabl style="display:none;color:red">(Verified)</span>
    </td>
    <td><input type="text" size="42" maxlength="35" name=ptmas008 id=ptmas008
         title="Address Line 1" value="%EMRWEB02.01.012" tabindex=6
         onchange="checkAdd01();UpCase(this);"></td>
    <td class=DataLabel>Home Phone</td>
    <td><input type="text" size="20" maxlength="20" tabindex=11
         name=ptmas012 id=ptmas012 title="Home Phone" value="%EMRWEB02.01.017"
         onchange="checkAdd01();"></td></tr>

<tr><td class=DataLabel>Surname</td>
    <td><input type=text size=40 maxlength=40 class=Mandatory tabindex=2
         name=ptmas005 id=ptmas005 title="Surname" value="%EMRWEB02.01.009"
         onchange="UpCase(this);checkAlias01();"></td>
    <td class=DataLabel></td>
    <td><input type="text" size="42" maxlength="35" tabindex=7
         name=ptmas009 id=ptmas009 title="Address Line 2"
         value="%EMRWEB02.01.013"
         onchange="checkAdd01();UpCase(this);"></td>
    <td class=DataLabel>Work Phone</td>
    <td><input type="text" size="20" maxlength="20" tabindex=12
         name=ptmas013 id=ptmas013 title="Work Phone"
         value="%EMRWEB02.01.018" onchange="checkAdd01();"></td></tr>

<tr id=PrefSurname style="display:none">
  <td class=DataLabel>Preferred Surname</td>
  <td><input type=text size=20 maxlength=20 name=pmpxi082
       title="Preferred Surname" value="%EMRWEB02.01.697"
       tabindex=2 onchange="UpCase(this);"></td>
  <td>&nbsp;</td><td>&nbsp;</td>
  <td>&nbsp;</td><td>&nbsp;</td>
</tr>

<tr><td class=DataLabel id="givenNameLabel">Given Names</td>
    <td><input type=hidden name=ptmas006 id=ptmas006 title="Given Name"
         value="%EMRWEB02.01.010">
        <input type=text size=30 maxlength=40
        title="First Given Name" class=Mandatory tabindex=3
        name=pmpxi084 id=pmpxi084 value="%EMRWEB02.01.699.001"
        onchange="checkAlias01();UpCase(this);">
    </td>
    <td class=DataLabel>Suburb</td>
    <td><input type="text" size="42" maxlength="35" class=Mandatory tabindex=8
         name=ptmas010 id=ptmas010 title="Suburb" value="%EMRWEB02.01.014"
         onchange="LookupPostCode(UpdateForm.ptmas010.value);checkAdd01();">
    </td>
    <td class=DataLabel>Mobile Phone</td>
    <td><input type="text" size="20" maxlength="20" tabindex=13
         name=ptmsx042 id=ptmsx042 title="Mobile Phone" class=MobilePhone
         value="%EMRWEB02.01.343" onchange="checkAdd01();">
      <span id=DisplaySMS style="display: none">
      Opt-Out SMS<input type=checkbox name="d_ptmsx050" id="d_ptmsx050" value=1
            tabindex=13 onclick="checkAdd01();">
      </span></td></tr>

<tr><td class=DataLabel id="secondGivenNameLabel">Second Given Name</td>
    <td><input type=text size=30 maxlength=40
        title="Second Given Name" tabindex=4
        name=pmpxi085 id=pmpxi085 value="%EMRWEB02.01.699.002"
        onchange="checkAlias01();UpCase(this);">
    </td>
    <td class=DataLabel><div id=AddressLine4H></div></td>
    <td><div id=AddressLine4></div></td>
    <td class=DataLabel>E-Mail</td>
    <td><input type=text size=20 maxlength=80
         name=pmpxi005 id=pmpxi005 title="E-Mail" tabindex=13
         value="%EMRWEB02.01.605" onchange="checkAdd01();"></td></tr>

<tr id=PrefGivenName style="display:none">
  <td class=DataLabel>Preferred Given Name</td>
  <td><input type=text size=25 maxlength=25 name=pmpxi083
       title="Preferred Given Name" value="%EMRWEB02.01.698"
       tabindex=4 onchange="UpCase(this);"></td>
  <td>&nbsp;</td><td>&nbsp;</td>
  <td>&nbsp;</td><td>&nbsp;</td>
</tr>

<tr><td class=DataLabel>%STANDARD.01.017.G </td>
    <td><select name=ptmas014 id=ptmas014 size="1" tabindex=4 
         class=Mandatory title="%STANDARD.01.017.G "
         onchange="ChkIdentifyGenderPronounTitle(document.UpdateForm);">
         <option></option>
         %EMRWEB02.01.086.099.061.9.1.19.3.H
        </select></td>
    <td class=DataLabel>Post Code</td>
    <td><input type="text" size="4" maxlength="4" class=Mandatory tabindex=10
         name=ptmas011 id=ptmas011 title="Post Code"
         value="%EMRWEB02.01.016"
         onchange="checkOverseas();LookupSuburb(this.value);ToggleSearchRow();">
    </td></tr>

<tr><td class=DataLabel>Date of Birth</td>
    <td><input type="text" size="12" class="Mandatory PastDate" tabindex=5 
         name=ptmas016 id=ptmas016 title="Date of Birth"
         value="%EMRWEB02.01.020">
        <img notab src="../images/DateLookup.gif" class="Icon"
          alt="Show Calendar" date="UpdateForm.ptmas016">
        <img notab src="../images/DateTimeStamp.gif" class="Icon"
          alt="Current" date="UpdateForm.ptmas016">
    </td></tr>

<tr id=GenderExtra>
  <td><div id=IdenGenLbl></div></td>
  <td><div id=IdenGenDetail></div></td>
  <td><div id=IdenProLbl></div></td>
  <td><div id=IdenProDetail></div></td>
</tr>

<tr><td class=HeadingCell colspan=6 align=center>
     PMI Details </td></tr>
<tr><td class=DataLabel>Marital Status</td>
    <td><select name=ptmas015 id=ptmas015 tabindex=14 class=Mandatory select120
         title="Marital Status">
        <option></option>
         %EMRWEB02.01.069.2
        </select></td>
    <td class=DataLabel>Medicare Number</td>
    <td><input type=text size=12 maxlength=50 tabindex=22
         name=ptmas022 id=ptmas022 value="%EMRWEB02.01.027"
         onblur="checkMedicare(ptmas022,pmpxi016);">
        <input type=text size=3 maxlength=2 tabindex=22
         name=ptmsx048 id=ptmsx048 value="%EMRWEB02.01.349"></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    </tr>

<tr><td class=DataLabel>Religion</td>
      <td><select class=select120 name=ptmas019 id=ptmas019 tabindex=15 
           title="Religion">
        <option></option>
        %EMRWEB02.01.023.2
        </select></td>
    <td class=DataLabel>Valid to</td>
    <td><input type=text size=12 name=pmpxi016 id=pmpxi016 title="Valid to"
         value="%EMRWEB02.01.616" tabindex=23
       onblur="checkDateSV(this,'Valid to');" ></td>
    <td class=DataLabel>Local GP </td>
    <td><input type=hidden name=pmpxi059 id=pmpxi059
         value="%EMRWEB02.01.684.001">
        <input type=text readonly name=genpname id=genpname
         value="%EMRWEB02.01.684.081">
        <img class=Icon src="../images/SearchIcon.gif" tabindex=28
         onclick="HCPSearchFrame(pmpxi059,genpname,3)">
        <img class=Icon src="../images/erase.gif"
         onclick="clrFields(pmpxi059,genpname);"></td></tr>

  <tr><td class=DataLabel>Country of Birth</td>
      <td><select class="Mandatory SelectMed" tabindex=16
           name=ptmas018 id=ptmas018 title="Country of Birth">
          <option></option>
          </select>
      </td>
    <td class=DataLabel>Pension/HealthCareCard #</td>
    <td><input type=text size=20 maxlength=15 tabindex=24
         name=ptmas023 id=ptmas023 value="%EMRWEB02.01.028"></td>
    <td class=DataLabel>Privacy Indicator</td>
    <td><select name=pmpxi066 id=pmpxi066 class=select120 tabindex=29>
        <option></option>
         %EMRWEB02.01.666.2
        </select></td></tr>

<tr><td class=DataLabel>Resident</td>
    <td><select name=ptmas020 id=ptmas020 tabindex=17 class=Mandatory
         title="Resident" onchange="CheckAccom();">
         <option></option>
         %EMRWEB02.01.024.2
        </select></td>
    <td class=DataLabel>Occupation</td>
    <td><input type=text size=20 maxlength=14 tabindex=25
         name=ptmas021 id=ptmas021 value="%EMRWEB02.01.025"
         onchange="UpCase(this);"></td>
        <td class=DataLabel>Folder Selection</td>
    <td><select name=pmpxi077 id=pmpxi077 tabindex=30 title="Folder Selection">
         <option></option>
         %EMRWEB02.01.679.2
         </select></td>
    </tr>  

  <tr><td class=DataLabel>Indigenous Status</td>
      <td><select class="Mandatory SelectMed" tabindex=18
           name=pmpxi065 id=pmpxi065 title="Indigenous Status">
          <option></option>
          %EMRWEB02.01.665.2
          </select></td>
    <td class=DataLabel> Safety Net Number </td>
    <td><input type=text size=12 maxlength=10 tabindex=26
         name=pmpxi075 id=pmpxi075 value="%EMRWEB02.01.675" ></td>
    <td class=DataLabel>Health Fund </td>
    <td><input type=hidden name=emvis017 id=emvis017
         value="%EMRWEB02.01.040.0">
        <input type=text size=31 name=funddesc id=funddesc maxlength="30"
         readonly value="%EMRWEB02.01.040.1" ></td>
    </tr>

  <tr><td class=DataLabel>Interpreter Required</td>
      <td><select name=pmpxi001 id=pmpxi001 tabindex=19
           title="Interpreter Required">
          %EMRWEB02.01.601.2
          </select></td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
       <td class=DataLabel>Health Fund Level</td>
    <td width=22%><input type=hidden name=emvis018 id=emvis018
        value="%EMRWEB02.01.041.0" >
        <input type="text" size=15 maxlength=22 name=tabldesc id=tabldesc
         readonly value="%EMRWEB02.01.041.1" >
        <img class=Icon src="../images/SearchIcon.gif" tabindex=31
        onclick="HealthFundSearchFrameNoFocus(emvis017,funddesc,
                                              emvis018,tabldesc);">
        <img class=Icon src="../images/erase.gif"
          onclick="clrDoc(funddesc,tabldesc);clrDoc(emvis017,emvis018);"></td>
     </tr>

  <tr><td class=DataLabel>Pref. Language 1</td>
      <td><select class="Mandatory SelectMed" tabindex=20
           name=pmpxi002 id=pmpxi002 title="Preferred Language">
          <option></option>
          </select></td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td class=DataLabel> Member Number </td>
      <td><input type=text size=20 maxlength=19 tabindex=31
           name=emvis124 id=emvis124 value="%EMRWEB02.01.042"></td>
     </tr>
<tr><td class=DataLabel>Pref Language 2</td>
    <td><select name=pmpxi003 id=pmpxi003 class=SelectMed tabindex=21
         title="Preferred Language">
          <option></option>
        </select></td>
    <td class=DataLabel>&nbsp;</td>
    <td class=DataLabel>&nbsp;</td>
    <td class=DataLabel>&nbsp;</td>
    <td class=DataLabel>&nbsp;</td>
    </tr>

<tr>
  <td class=DataLabel>Weight</td>
  <td class=DataField>%EMRWEB02.01.552</td>
  <td class=DataLabel>Height</td>
  <td class=DataField>%EMRWEB02.01.551</td>
  <td class=DataLabel>BMI</td>
  <td class=DataField>%EMRWEB02.01.553</td>
</tr>

<tr>
  <td class=DataLabel></td>
  <td class=DataField></td>
  <td class=DataLabel></td>
  <td class=DataField></td>
  <td class=DataLabel>BMI Date/Time</td>
  <td class=DataField>%EMRWEB02.01.554</td>
</tr>

  <tr><td class=HeadingCell colspan=6 align=center>
     Emergency Visit Details </td></tr>
    <tr><td class=DataLabel>Arrival Date/Time </td>
        <td><input type=text size=11 max=11 name=emvis001 id=emvis001
             value="%EMRWEB02.01.101.0" readonly>
            <input type=text size=8 max=8 name=emvis002 id=emvis002
             value="%EMRWEB02.01.102" readonly></td>

    <td class=DataLabel>Attendance Type</td>
    <td><select class="Mandatory SelectMed" tabindex=36
         name=emvis053 id=emvis053 title="Attendance Type">
     <option></option>
     %EMRWEB02.01.213.2
     </select></td>

    <td class=DataLabel>Usual Accommodation</td>
    <td><select class="Mandatory SelectMed" tabindex=39
         name=pmsvx091 id=pmsvx091 title="Usual Accommodation">
     <option></option>
     %EMRWEB02.01.507.2
     </select></td></tr>

<tr><td class=DataLabel>%STANDARD.01.017.CL</td>
     <td><select class="Mandatory SelectMed" tabindex=33
          name=emvis008 id=emvis008 title="%STANDARD.01.017.CL">
     <option></option>
     %EMRWEB02.01.108.2
     </select></td>
     <td class=DataLabel>Attendance Source</td>
     <td><select class="Mandatory SelectMed" tabindex=37
          name=emvis061 id=emvis061 title="Attendance Source" 
          onchange="checkReferred();displayReferralFields();">
           <option></option>
           %EMRWEB02.01.221.2
         </select></td>
     <td class=DataLabel><div id=TranSrcHeading></div></td>
     <td><div id=TranSrc></div></td>
     </tr>

<tr><td class=DataLabel>Arrival Transport</td>
    <td><select name=emvis013 id=emvis013 tabindex=34 title="Arrival Transport"
         class="Mandatory SelectMed"
         onchange="document.UpdateForm.emvis034.disabled=0;CheckAmbType();">
     <option></option>
     %EMRWEB02.01.113.2
     </select></td>
     <td class=DataLabel>Amb Case No</td>
     <td><input type=text size=10 maxlength=15 tabindex=38
          name=emvis034 id=emvis034 title="Amb Case No" value="%EMRWEB02.01.134"
          onFocus="CheckAmbType();" onblur="ValidateAmbCase();"></td>
     <td class=DataLabel>Clerical ID</td>
     <td><input type=text size=3 maxlength=3 tabindex=41 class=Mandatory
          name=emvis062 id=emvis062 title="Clerical ID"
          value="%EMRWEB02.01.222.1" onchange="CheckCode(emvis062,v062name)">
      <select name=v062name id=v062name class="Mandatory SelectMed" 
       onchange="UpdateCode(emvis062,v062name)">
      <option></option>
      %EMRWEB02.01.222.2
      </select></td></tr>

<tr><td class=DataLabel>%STANDARD.01.017.et</td>
     <td><select class="SelectMed" tabindex=35
          name=emvis068 id=emvis068 title="%STANDARD.01.017.et">
     <option></option>
     %EMRWEB02.01.228.2
     </select></td>
     <td class=DataLabel>
       <div id="emvis174TitleDIV">
       </div>
     </td>
     <td>
       <div id="emvis174FieldDIV">
       </div>
     </td>
     <td class=DataLabel>
       <div id="emvis176TitleDIV">
       </div>
     </td>
     <td>
       <div id="emvis176FieldDIV">
       </div>
     </td>
     </tr>

<tr><td class=DataLabel></td>
     <td></td>
     <td class=DataLabel>
       <div id="emvis175TitleDIV">
       </div>
     </td>
     <td>
       <div id="emvis175FieldDIV">
       </div>
     </td>
     <td class=DataLabel>
       <div id="emvis020TitleDIV">
       </div>
     </td>
     <td>
       <div id="emvis020FieldDIV">
       </div>
     </td>
</tr>

<tr><td colspan=6 align=center class=DataLabel>
    <input type=button name=UpdateButton id=UpdateButton tabindex=50
     value="Update" class="button" onclick="tempDisable(this);valEmrVisit()">
    <input type=button value="Cancel" class="button" tabindex=51
     onclick='fnPatientLink("%EMRWEB02.01.003","%EMRWEB02.01.081");'>
    <input type=button class="button" value="BMI" tabindex=58 
     name=bmibuttn id=bmibuttn
     onclick='PatientLinkTo("patweb07.pbl",17,1,1,700,400);'></td>
</tr>
</table>
</form>
</div>
<div id=SelectHeading></div>
<div id=SelectLocation></div>
<script type="text/javascript">

 for (var i=0; i < document.UpdateForm.ptmas001.length; i++) {
  if (document.UpdateForm.ptmas001.options[i].value=="%EMRWEB02.01.005.0"){
      document.UpdateForm.ptmas001.selectedIndex=i; } }

 InterpReq="%EMRWEB02.01.601.0";
 if ( InterpReq == "1") {
   document.UpdateForm.pmpxi001.checked=1;
   document.UpdateForm.pmpxi002.className="Mandatory";
 }
 CTypeAdm="%EMRWEB02.01.252";
 if ( CTypeAdm == "Yes") {
   document.UpdateForm.emvis147.value=1; }
 else { 
   document.UpdateForm.emvis147.value=0; }

 ChgClaim="%EMRWEB02.01.488"
 if ( ChgClaim == "1") {
   document.UpdateForm.emvis008.disabled=true;
   document.UpdateForm.emvis008.className=""; }
 else {
   document.UpdateForm.emvis008.disabled=false;
   document.UpdateForm.emvis008.className=""; }

 ChgClaim="%EMRWEB02.01.488"
 if ( ChgClaim == "1") {
   document.UpdateForm.emvis008.disabled=true;
   document.UpdateForm.emvis008.className=""; }

 BMIIndicator="%EMRWEB02.01.555";
 if ( BMIIndicator =="1" ) {
    document.UpdateForm.bmibuttn.className="RedButton";
 }

 if (document.getElementById('ptcnuadv').value == "1" &&
     document.getElementById('pmpxi113').value == "1") {  // Verified address
   document.getElementById('verifiedLabl').style.display = "";
 }
 function checkZeroUr() {
  if(document.UpdateForm.urnumber.value=='       0') {
    alert("This is a zero U/R visit. Please allocate a U/R.");
    fnPatientLink("%EMRWEB02.01.003","%EMRWEB02.01.081");
  }
}
</script>
<form name=HiddenFields method=get>
<input type=hidden name=cob value="%EMRWEB02.01.022.1">
<input type=hidden name=pl1 value="%EMRWEB02.01.602.1">
<input type=hidden name=pl2 value="%EMRWEB02.01.603.1">
</form>
<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=regexstm value=102>
<input type=hidden name=newstand value=1>
<input type=hidden name=urnumber value="%EMRWEB02.01.003">
<input type=hidden name=admissno value="%EMRWEB02.01.081">
<input type=hidden name=MenuType value="%EMRWEB02.01.088">
<input type=hidden name=emrgflag value="Y">
<input type=hidden name=nextpage value="4">
</form>

<span id=transferhd style="display:none">
Transfer Source
</span>

<span id=transferblank style="display:none">
   <input type=hidden name=emvis032 id=emvis032 value="" notab>
</span>

<span id=transfersrc style="display:none">
  <input type="text" size=8 maxlength=6 tabindex=40 class=Mandatory
   name=emvis032 id=emvis032 value="%EMRWEB02.01.132.1"
   title="Transfer Source"
   onchange='validateCode(9,emvis032,trnsfsrc);'>
  <input type=text  size=25 name=trnsfsrc id=trnsfsrc readonly notab
   value="%EMRWEB02.01.132.0">
  <img class=Icon src="../images/SearchIcon.gif" notab
   onclick=" TransferSourceFrame(emvis032,trnsfsrc)">
  <img class=Icon src="../images/erase.gif"
   onclick="clrFields(emvis032,trnsfsrc);">
</span>

<span id=AustStateH style="display:none">
  State
</span>
<span id=AustState style="display:none">
  <input type=text size=42 maxlength=35
   name=ptmas085 id=ptmas085 title="State" tabindex=9 value="%EMRWEB02.01.015"
   onchange="checkAdd01();UpCase(this);">
</span>
<span id=OseasCountryH style="display:none">
  Country
</span>
<span id=OseasCountry style="display:none">
  <select name=ptmas085 id=ptmas085 tabindex=10 class="select120 Mandatory"
   title="Country Address">
    <option></option>
    %EMRWEB02.01.085.060
  </select>
</span>

<span id="emvis174TitleSPAN" style="display:none">
  %STANDARD.01.017.RF
</span>
<span id="emvis174FieldSPAN" style="display:none">
  <select name=emvis174 id=emvis174 tabindex=38 class="SelectMed"
   title="%STANDARD.01.017.RF" onchange="displaycatRF();">
    <option></option>
    %EMRWEB02.01.293.2
  </select>
</span>

<span id="emvis176TitleSPAN" style="display:none">
  Referral Date
</span>
<span id="emvis176FieldSPAN" style="display:none">
  <input type=text size=12 tabindex=41 name=emvis176 id=emvis176 
   title="Referral Date" value="%EMRWEB02.01.295" 
   onblur="checkDateSV(this,'Valid to');" >
  <img notab src="../images/DateLookup.gif" class="Icon"
   alt="Show Calendar" date="UpdateForm.emvis176">
</span>

<span id="emvis175TitleSPAN" style="display:none">
  Referral Period (Months)
</span>
<span id="emvis175FieldSPAN" style="display:none">
  <input type=text name=emvis175 id=emvis175 title="Referral Period (Months)"
   class=Number size=15 maxlength=2 min=1 max=98 value="%EMRWEB02.01.294">
</span>

<span id="emvis020TitleSPAN" style="display:none">
 Referring HCP
</span>
<span id="emvis020FieldSPAN" style="display:none">
  <input type="text" size=8 maxlength=10 tabindex=47
   name=emvis020 id=emvis020 value="%EMRWEB02.01.120.001"
   onchange="ReadDocOnly(18,0,emvis020,doctnam1);">
  <input type=text size=20 readonly name=doctnam1 id=doctnam1 tabindex=-1
   value="%EMRWEB02.01.120.081">
  <img src="../images/SearchIcon.gif" class=Icon
   onclick="HCPSearchFrame(UpdateForm.emvis020,doctnam1,dummx,dummx,dummx,dummx);">
  <img src="../images/erase.gif" class=Icon
   onclick="clrFields(emvis020,doctnam1);">
</span>

<span id=idenGenLblShow style="display:none">
  <td class=DataLabel>%STANDARD.01.035.Gi</td>
</span>
<span id=idenGenDetailShow style="display:none">
  <td><select name=pmpxi125 id=pmpxi125 class=Mandatory tabindex=5
       title="%STANDARD.01.035.Gi"
       onchange="IdenGenderChange(document.UpdateForm);">
      <option></option>
       %EMRWEB02.01.086.099.063.9.2
      </select><br>
      <span id=IdenGenFreeTxt></span>
  </td>
</span>
<span id=idenGenDetailBlank style="display:none">
  <td><input type=hidden name=pmpxi125 id=pmpxi125 value=""></td>
  <td><input type=hidden name=pmpxi126 id=pmpxi126 value=""></td>
</span>
<span id=idenGenFreeTxtShow style="display:none">
  <input type=text name=pmpxi126 id=pmpxi126 size=80 maxlength=80
   class=Mandatory tabindex=5
   title="Identifying Gender Free Text"
   value="%EMRWEB02.01.086.099.065">
</span>
<span id=idenGenFreeTxtBlank style="display:none">
  <td><input type=hidden name=pmpxi126 id=pmpxi126 value=""></td>
</span>

<span id=idenProLblShow style="display:none">
  <td class=DataLabel>%STANDARD.01.035.Gp</td>
</span>
<span id=idenProDetailShow style="display:none">
  <td><select name=pmpxi127 id=pmpxi127 class=Mandatory tabindex=10
       title="%STANDARD.01.035.Gp"
       onchange="IdenPronounChange(document.UpdateForm);">
      <option></option>
       %EMRWEB02.01.086.099.064.9.2
      </select><br>
      <span id=IdenProFreeTxt></span>
  </td>
</span>
<span id=idenProDetailBlank style="display:none">
  <td><input type=hidden name=pmpxi127 id=pmpxi127 value=""></td>
  <td><input type=hidden name=pmpxi128 id=pmpxi128 value=""></td>
</span>
<span id=idenProFreeTxtShow style="display:none">
  <input type=text name=pmpxi128 id=pmpxi128 size=80 maxlength=80
   class=Mandatory tabindex=10
   title="Identifying Pronoun Free Text"
   value="%EMRWEB02.01.086.099.066">
</span>
<span id=idenProFreeTxtBlank style="display:none">
  <td><input type=hidden name=pmpxi128 id=pmpxi128 value=""></td>
</span>

