<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"      content="true">
<script type="text/javascript" src="../js/rcpweb03.js"></script>
<script type="text/javascript">
function init() {
    AddForm.rcpbk002.value=AddForm.currdate.value;
  //
  // Disable header if receipt already allocated.
  //
  if (!isWhitespace(AddForm.rcpbk001.value)) {   // Receipt Number Allocated
  // disable receipt header
    GetCookieCashierPassword();
    AddForm.finshbut.disabled=false;            // Allocate Button
    AddForm.addclmbt.disabled=false;            // Add Claim Button
    AddForm.rcpbk004.className="Readonly";      // Drawer
    AddForm.rcpbk004.disabled=true;
    AddForm.password.className="Readonly";      // Password
    AddForm.password.readOnly=true;
    AddForm.rcpbk014.className="Readonly";      // cheque account number
    AddForm.rcpbk014.readOnly=true;
    AddForm.rcpbk014.disabled=true;
//    AddForm.rcpbk002.className="Readonly";      // Payment Date
//    AddForm.rcpbk002.readOnly=true;
//    AddForm.currbutt.disabled=true;
//    AddForm.cldtbutt.disabled=true;
    document.AddForm.rcpbt023.focus();
    AddForm.rcpbt023.tabIndex=1;
    AddForm.addclmbt.tabIndex=2;
    AddForm.finshbut.tabIndex=3;
    AddForm.printflg.tabIndex=4;
    AddForm.selprint.tabIndex=5;
    AddForm.nocopies.tabIndex=6;
    AddForm.cancelbt.tabIndex=7;
  }
  else {                                        // Receipt Not Allocated yet
    GetCookieCashierPassword();
    if (isWhitespace(AddForm.rcpbk014.value)) {
      for (var i=0; i < AddForm.rcpbk014.length; i++) {
        if (AddForm.rcpbk014.options[i].value==AddForm.defchqno.value){
        AddForm.rcpbk014.selectedIndex=i; }
      }
    }
//    AddForm.rcpbk002.value=AddForm.currdate.value;
    AddForm.finshbut.disabled=true;
    AddForm.addclmbt.disabled=true;
    AddForm.rcpbk004.tabIndex=1;
    AddForm.password.tabIndex=2;
//    AddForm.rcpbk002.tabIndex=3;
    AddForm.printflg.tabIndex=4;
    AddForm.selprint.tabIndex=5;
    AddForm.nocopies.tabIndex=6;
    AddForm.rcpbt023.tabIndex=7;
    AddForm.cancelbt.tabIndex=8;
  }
  AddForm.rcpbt023.value="";
}
function ShowDetail(linkurl) {
  var width = 440;
  var left=(document.body.clientWidth-width)/2;
  DFrameLink(linkurl,150,left,width,400);
}

function AddReceipt() {
  if (isWhitespace(AddForm.rcpbt023.value)) {
    return;
  }
  if (isWhitespace(AddForm.rcpbk001.value)) {
    if (validateMandatory(AddForm)) {
      if (!checkPasswrd(AddForm.rcpbk004,AddForm.password)) {
        AddForm.rcpbt023.selectedIndex=0;
        return;
      }
    }
    else {
      AddForm.rcpbt023.selectedIndex=0;
      return;
    }
  }
  linkurl="rcpweb03.pbl?reportno=7&template=002" +
          "&paymtype=" + AddForm.rcpbt023.value.replace(/ /g,"+");

  ShowDetail(linkurl);
}
function UpdateReceipt(receiptno,uniqueno,paycode) {
     linkurl="rcpweb03.pbl?reportno=7&template=003" +
             "&paymtype=" + paycode.replace(/ /g,"+") +
             "&rcpbk001=" + receiptno.replace(/ /g,"+") +
             "&rcpbt003=" + uniqueno.replace(/ /g,"+");
     ShowDetail(linkurl);
}
function AddClaim() {
     linkurl="rcpweb03.pbl?reportno=7&template=004" +
             "&rcpbk001=" + AddForm.rcpbk001.value.replace(/ /g,"+");
     ShowRegDetail1(linkurl);
}
function DeleteClaim(receiptno,trncount) {
  if (confirm('Are you sure you want to delete this invoice?')) {
    AddForm.updttype.value="E";
    AddForm.rcpbk001.value=receiptno;
    AddForm.rcpde003.value=trncount;
    AddForm.submit();
  }
}
function CancelReceipt() {
    AddForm.updttype.value="C";
    AddForm.submit();
}
function FinishReceipt() {
  // disable button to avoid double clicking
  DisButton();
  if (parseFloat(AddForm.totalbdt.value)==0) {
    alert("Receipt amount cannot be zero.");
    AddForm.rcpbt023.focus();
    return;
  }
  if (parseFloat(AddForm.totalbdt.value)!=
      parseFloat(AddForm.totaldte.value)) {
    alert("Total Payment Amounts do not match Total Invoices.");
    return;
  }
  AddForm.rcpbt023.className="";
  if (validateMandatory(AddForm)) {
    AddForm.rcpbk004.disabled=false;
    AddForm.updttype.value="F";
    AddForm.submit();
  }
}
function DisButton() {
  document.AddForm.finshbut.disabled=true;
  setInterval('document.AddForm.finshbut.disabled=false',6000);
}
</script>
</head>
%START.OF.PAGE
<body onload=PageLoad(event);removePaymentType('rcpbt023');>
<form name=AddForm method=get action=rcpweb03.pbl>
<table width=100% align=center border=0 cellspacing=0>
<input type=hidden name=reportno value=7>
<input type=hidden name=template value=001>
<input type=hidden name=updttype>
<input type=hidden name=nextpage value=1>
<input type=hidden name=redirect value="rcpweb03.pbl?reportno=7&template=1">
<input type=hidden name=currdate value="%STANDARD.01.015">
<input type=hidden name=dummy>
<input type=hidden name=incmpflg>
<input type=hidden name=totalbdt value="%RCPWEB03.07.306">
<input type=hidden name=totaldte value="%RCPWEB03.07.308">
<input type=hidden name=defchqno value="%RCPWEB03.07.309">
<input type=hidden name=rcpbk001 value="%RCPWEB03.07.001">
<input type=hidden name=rcpbk003 value="%RCPWEB03.07.003">
<input type=hidden name=rcpbk007 value="%RCPWEB03.07.007">
<input type=hidden name=rcpbk008 value="%RCPWEB03.07.008">
<input type=hidden name=rcpde003>
<input type=hidden name=rccnrcct id=rccnrcct 
value="%STANDARD.01.025.108.096.0.1" />

<tr><td class=HeadingCell align=center colspan=2>
     Input Receipt for Private Practice Bulk Billing</td></tr>
<tr><td>
<table width=95% align=center border=0 cellspacing=2 cellpadding=1>
<tr><td colspan=8>&nbsp;</td></tr>
<tr><td class=DataLabel width=12%>Cash Drawer</td>
    <td width=35%><select name=rcpbk004 title="Cash Drawer" class=Mandatory 
                onchange="getChqAcct(document.AddForm.rcpbk004,
                                     document.AddForm.rcpbk014,
                                     document.AddForm.defchqno);
                          checkPR(document.AddForm.rcpbk004,
                                  document.AddForm.password);">
        <option value=""></option>
        %RCPWEB03.07.301.1
        </select></td>
    <td class=DataLabel width=12%>Password</td>
    <td><input size=12 type=password name=password title="Password" 
               onblur="checkPasswrd(document.AddForm.rcpbk004,
                                    document.AddForm.password);"></td>
    <td colspan=4>&nbsp;</td>     
    <td width=12%>Receipt Number</td>
    <td align=right width=8%>&nbsp;<b>%RCPWEB03.07.001</b></td>
</tr>
</table>
<table width=95% align=center border=0 cellspacing=2 cellpadding=1>
<tr><td class=DataLabel width=12%>Cheque Account</td>
    <td><select name=rcpbk014 title="Cheque Account Number" class=Mandatory>
        <option value=""></option>
        %RCPWEB03.07.327
        </select>
    </td>
    <td colspan=8>&nbsp;</td>     
</tr>
</table>
<table width=95% align=center border=0 cellspacing=2 cellpadding=1>
<tr><td class=DataLabel width=12%>Cashier</td>
    <td><input size=20 type=text name=wusrname title="Cashier" 
               value="%RCPWEB03.07.303" class=readOnly readonly tabindex=-1>
    </td>
    <td colspan=6>&nbsp;</td>     
</tr>
<tr><td class=DataLabel>Date of Payment</td>
    <td><input type=text name=rcpbk002 title="Date of Payment"
               value="%RCPWEB03.07.002" size=12 class=readonly readonly>
<!--
               maxlength=12 class="Mandatory PastDate"
               onblur="checkDate(this,'Date of Payment');">
        <img notab src="../images/DateTimeStamp.gif" class="Icon" name=currbutt
             alt="Current" date="AddForm.rcpbk002">
        <img notab src="../images/DateLookup.gif" class="Icon" name=cldtbutt
             alt="Show Calendar" date="AddForm.rcpbk002"></td>
 -->
    <td colspan=6>&nbsp;</td>     
</tr>
</table>

<table width=95% align=center border=0 cellspacing=2 cellpadding=1>
<tr><td colspan=6 align=center><hr width=100%></td></tr>
<tr><td class=DataLabel>Print Receipt</td>
    <td><select name=printflg>
       <option value="1">Yes</option>
       <option value="0">No</option>
       </select></td>
    <td class=DataLabel>Select Printer </td>
    <td><select name=selprint>
        %STANDARD.01.001.RCPWEB03.07
        </select></td>
    <td class=DataLabel>Copies</td>
    <td><select name=nocopies>
       <option value=" 1">1</option>
       <option value=" 2">2</option>
       <option value=" 3">3</option>
       <option value=" 4">4</option>
       <option value=" 5">5</option>
       <option value=" 6">6</option>
       <option value=" 7">7</option>
       <option value=" 8">8</option>
       <option value=" 9">9</option>
       <option value=" 10">10</option>
       </select></td>
</tr>
</table>


<table width=95% align=center border=0 cellspacing=2 cellpadding=1>
<tr><td colspan=3 align=center><hr width=100%></td></tr>
<tr><td class=HeadingCell width=12%>&nbsp;Payment Type</td>
    <td class=HeadingCell width=10% align=right>Amount&nbsp;</td>
    <td class=HeadingCell width=75%>&nbsp;Reference</td></tr>
<tr><td><select name=rcpbt023 id=rcpbt023 title="Payment Type" class=Mandatory
                onchange="AddReceipt();">
        <option value=""></option>
        %RCPWEB03.07.123.2
        </select></td>
    <td colspan=2>&nbsp;</td>
</tr>
    %RCPWEB03.07.305.1
<tr><td width=12%><b>Total Payments&nbsp;&nbsp;</b></td>
    <td align=right width=10%><b>$%RCPWEB03.07.306&nbsp;</b></td>
    <td colspan=1>&nbsp;</td></tr>
</table>

<table width=95% align=center border=0 cellspacing=2 cellpadding=1>
<tr><td colspan=5 align=center><hr width=100%></td></tr>
    <tr><td class=HeadingCell width=15%>&nbsp;Register</td>
    <td class=HeadingCell width=15%>&nbsp;U/R Number</td>
    <td class=HeadingCell width=15%>&nbsp;Invoice Number</td>
    <td class=HeadingCell width=13% align=right>&nbsp;Balance</td>
    <td class=HeadingCell width=13% align=right>&nbsp;Amount</td>
%RCPWEB03.07.353
<tr><td colspan=3><input type=button value='Add Claim' class="button" 
        name=addclmbt id=addclmbt onclick='tempDisable(this);AddClaim();'></td>
    <td><b>Total Invoices&nbsp;&nbsp;</b></td>
    <td align=right><b>$%RCPWEB03.07.308&nbsp;</b></td>
    </tr>

</table>

<table width=95% align=center border=0 cellspacing=2 cellpadding=1>
<tr><td colspan=7 align=center><hr width=100%></td></tr>
<tr><td align=center><br>
    <input type=button value=Finish class=RedButton name=finshbut id=finshbut
     onclick='tempDisable(this);FinishReceipt();'>
    <input type=button value=Cancel class="button" name=cancelbt id=cancelbt
     onclick='tempDisable(this);CancelReceipt();' >
    </td>
</tr>
</table>

</tr></td>
</table>
</form>

<script type="text/javascript">
printflag="%RCPWEB03.07.336";
for (var i=0; i<AddForm.printflg.length; i++) {
  if (AddForm.printflg.options[i].value==printflag){
        AddForm.printflg.selectedIndex=i; }
}
selectprinter="%RCPWEB03.07.337";
for (var i=0; i<AddForm.selprint.length; i++) {
  if (AddForm.selprint.options[i].value==selectprinter){
        AddForm.selprint.selectedIndex=i; }
}
numbercopies="%RCPWEB03.07.338";
for (var i=0; i<AddForm.nocopies.length; i++) {
  if (parseInt(AddForm.nocopies.options[i].value)==parseInt(numbercopies)){
        AddForm.nocopies.selectedIndex=i; }
}
</script>
