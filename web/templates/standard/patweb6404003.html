<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard" />
<meta name="HelpFileName" content="NoContextSet.html" />
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/TableSort.js"></script>
<script type="text/javascript">
function SelectSubmit() {
  document.SelectPeriod.submit();
}
function InitTable() {
  p = document.SelectPeriod;
  document.title="SMS History";
  t = new Table(1,0,2,"100%","center",40);
  t.addColumn("Patient","ImageText",18,18,"left","PatientFolder","0",120,19)
  t.addColumn("Date & Time Sent","DateTime",6,6,"left","","",60)
  if (p.ibcnmhos.value == "1") {
    t.addColumn("Hospital/Ward","String",21,21,"left","","",60)
  }
  else {
    t.addColumn("Ward","String",21,21,"left","","",60)
  }
  t.addColumn("Message Type","String",13,13,"left","","",50)
  t.addColumn("Contact Type","String",20,20,"left","","",70)
  t.addColumn("Mobile","String",9,9,"left","","",50)
  t.addColumn("SMS Type","String",15,15,"left","","",70)
  t.addColumn("Message","String",11,11,"left","","",110)
  t.addColumn("Status","String",17,17,"left","","",60)
  AddTableRows();
  TableOutput(1,2);    // Sort by Date/Time
  t.sortTable(0,2);    // Name
}
function linkPatient(ur,vtype,key) {
  linkurl="patweb64.pbl?reportno=03&template=001" + 
          "&urnumber="+ur.replace(/ /g,"+");
  if(vtype==" 2" || vtype==" 3") {
    linkurl+="&admissno="+key.replace(/ /g,"+");
  } else {
    linkurl+="&allvisit=1";
  }
  location.href=linkurl;
}
function SetHospital() {
  p = document.SelectPeriod;
  if (p.ibcnmhos.value == "1") {
    HospHead.innerHTML = hosphead.innerHTML;
    HospOptn.innerHTML = hospoptn.innerHTML;
  }
  else {
    HospHead.innerHTML = "";
    HospOptn.innerHTML = hospblank.innerHTML;
  }
}
function reSendSMS(MessageID) {
  linkurl="patweb64.pbl?reportno=05&template=001" +
          "&messagid=" + MessageID;
  Left=(document.body.clientWidth-1000)/2;
  DFrameLink(linkurl,100,Left,1000,450);
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);SetHospital();InitTable();">
<div id="HeadingSection">
 <form name="SelectPeriod" action="patweb64.pbl" method="get" style="margin:0">
  <input type=hidden name=reportno value="04" />
  <input type=hidden name=template value="003" />
  <input type=hidden name=viewtype value="%PATWEB64.04.012" />
  <input type=hidden name=ibcnmhos value="%STANDARD.01.025.000.043.1.1">
  <input type=hidden name=showflag value="%PATWEB64.04.024">
  <input type=hidden name=dfallhsp value="%PATWEB64.04.025">

  <table cellpadding="3" bgcolor="#CCCCCC" border="0" width="100%">
   <tr><td class="DataLabel">
           <input type="button" value="<<" class=SmallButton title="Previous"
            onclick='location.href="%PATWEB64.04.017.001"'/>
           %PATWEB64.04.013
           <input type="button" value=">>" class=SmallButton title="Next"
                  onclick='location.href="%PATWEB64.04.016.001"' />
           <a href='javascript:SelectDateFrame();'>
              <img src="../images/DateLookup.gif" class=Icon
                   alt="Select Date" title="Select Date"></a>
           <a href='javascript:SelectView("0");'>
              <img src="../images/DayIcon.gif" class=Icon
                   alt="View Today" title="View Today"></a>
           <a href='javascript:SelectView("1");'>
              <img src="../images/WeekIcon.gif" class=Icon
                   alt="View This Week" title="View This Week"></a>
           <a href='javascript:SelectView("2");'>
              <img src="../images/MonthIcon.gif" class=Icon
                   alt="View This Month" title="View This Month"></a></td>
       <td><div id=HospHead></div></td>
       <td><div id=HospOptn></div></td>
       <td class=DataLabel>Ward</td>
       <td><select name=filtward id=filtward class="SelectMed" title="Ward"
             onchange="SelectSubmit();">
             <option value="">All</option>
               %PATWEB64.04.023
           </select></td>
        <td align=right width=35%>Patient U/R&nbsp;
            <input type=text name=filturno id=filturno size=10 maxlength=8 
                   tabindex=2 title="Patient U/R" value="%PATWEB64.04.021.0"
                   onblur="UpCase(this);justifyRight(this);
                   validateCode(8,SelectPeriod.filturno,SelectPeriod.patname);
                   SelectSubmit();">
            <input type=text name=patname id=patname size=38 maxlength=8 notab
                   readonly class=Readonly value="%PATWEB64.04.021.1">
            <input type=hidden name=dummy id=dummy>
            <img src="../images/SearchIcon.gif" class=Icon title="Patient Search"
                 onclick="PatientSearchFrame(SelectPeriod.patname,
                 SelectPeriod.filturno,SelectPeriod.dummy,SelectSubmit);">
            <img src="../images/ClearIcon.gif" class=Icon title="Clear"
                 onClick="clrFields(filturno,patname,SelectSubmit);"></td>
   </tr>
  </table>
 </form>
</div>

<div id="TableLocation"></div>

<script type="text/javascript">
function AddTableRows() {
%PATWEB64.04.020
}
</script>
<span id=hosphead style="display:none">
  Hospital
</span>
<span id=hospoptn style="display:none">
  <select name=filthosp id=filthosp class="SelectMed" title="Hospital"
   onchange="SelectSubmit();">
    <option value="">All</option>
    %PATWEB64.04.022
  </select>
</span>
<span id=hospblank style="display:none">
  <input type=hidden name=filthosp value="">
</span>
