<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script language="JavaScript">
function ProcessForm() {
  if (trim(document.UpdateForm.ecacc001.value) ==
      trim(document.UpdateForm.savaccno.value)) {
    if (SetRedirect()) 
      setFormactn('U'); 
  }
  else {
    var serverURL = "../cgi-bin/eocweb01.pbl?reportno=4&updatety=1&admissno="
                  + document.UpdateForm.admissno.value.replace(/ /g,"+") 
                  + "&ecacc001="
                  + document.UpdateForm.ecacc001.value.replace(/ /g,"+")
                  + "&savaccno="
                  + document.UpdateForm.savaccno.value.replace(/ /g,"+");
    var returnValue = RSExecute(serverURL);
    if (returnValue.status==0) {
      ReturnValue=returnValue.return_value.split("|");
      if (ReturnValue[0]==1) {
        alert("Accident number already exists!"); 
      }
      else {
        SetRedirect();
        setFormactn('U'); 
      }
    }
    else {
      alert("Unable to validate Accident number!");
    }
  }
}
function SetRedirect() {
  if (document.UpdateForm.returncd.value=="PRE") {
    document.UpdateForm.redirect.value = "patweb98.pbl?reportno=01&template=002"
          + "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+")
          + "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+");
  }
  else if (document.UpdateForm.returncd.value=="PR2") {
    document.UpdateForm.redirect.value = "patweb98.pbl?reportno=01&template=001"
          + "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+")
          + "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+");
  }
  else if (document.UpdateForm.returncd.value=="ADM") {
    document.UpdateForm.redirect.value = "patweb98.pbl?reportno=01&template=043"
          + "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+")
          + "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+");
  }
  else if (document.UpdateForm.returncd.value=="MEH") {
    document.UpdateForm.redirect.value="patweb89.pbl?reportno=07&template=001"
          + "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+")
          + "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+");
  }
  else if (document.UpdateForm.returncd.value=="TRF") {
    document.UpdateForm.redirect.value="patweb96.pbl?reportno=03&template=004"
          + "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+")
          + "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+");
  }
  else if (document.UpdateForm.returncd.value=="OUT") {
    document.UpdateForm.redirect.value = "outweb02.pbl?reportno=03&template=001"
          + "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+")
          + "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+");
  }
  else if (document.UpdateForm.returncd.value=="OTR") {  // Outpatient Referrals
    document.UpdateForm.redirect.value = "outweb01.pbl?reportno=04&template=001"
          + "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+")
          + "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+");
  }
  else if (document.UpdateForm.returncd.value=="AL1") {
    document.UpdateForm.redirect.value = "allweb02.pbl?reportno=02&template=002"
          + "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+")
          + "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+");
  }
  else if (document.UpdateForm.returncd.value=="AL2") {
    document.UpdateForm.redirect.value = "allweb03.pbl?reportno=01&template=001"
          + "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+")
          + "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+");
  }
  else if (document.UpdateForm.returncd.value=="EMR") {
    document.UpdateForm.redirect.value = "patweb89.pbl?reportno=01&template=014"
          + "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+")
          + "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+");
  }
  else {
    PatientLinkTo("eocweb01.pbl","1","6",0,0,0)
  }
  return true;
}
function CancelForm() {
  if (document.UpdateForm.returncd.value=="PRE") {
    PatientLinkTo("patweb98.pbl","1","2",0,0,0)
  }
  if (document.UpdateForm.returncd.value=="PR2") {
    PatientLinkTo("patweb98.pbl","1","1",0,0,0)
  }
  else if (document.UpdateForm.returncd.value=="ADM") {
    PatientLinkTo("patweb98.pbl","1","43",0,0,0)
  }
  else if (document.UpdateForm.returncd.value=="MEH") {
    PatientLinkTo("patweb89.pbl","7","1",0,0,0)
  }
  else if (document.UpdateForm.returncd.value=="TRF") {
    PatientLinkTo("patweb96.pbl","3","4",0,0,0)
  }
  else if (document.UpdateForm.returncd.value=="OUT") {
    PatientLinkTo("outweb02.pbl","3","1",0,0,0)
  }
  else if (document.UpdateForm.returncd.value=="OTR") {
    PatientLinkTo("outweb01.pbl","4","1",0,0,0)
  }
  else if (document.UpdateForm.returncd.value=="AL1") {
    PatientLinkTo("allweb02.pbl","2","2",0,0,0)
  }
  else if (document.UpdateForm.returncd.value=="AL2") {
    PatientLinkTo("outweb03.pbl","1","1",0,0,0)
  }
  else if (document.UpdateForm.returncd.value=="EMR") {
    PatientLinkTo("patweb89.pbl","1","14",0,0,0)
  }
  else {
    PatientLinkTo("eocweb01.pbl","1","6",0,0,0)
  }
}     
</script>
</head>
%START.OF.PAGE
<body onload=PageLoad(event)>
<div id=HeadingSection>
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%EOCWEB01.03.003";
PatientVIS="%EOCWEB01.03.081";
PatientNAM="%EOCWEB01.03.002";
PatientSTA="%EOCWEB01.03.086.078";
PatientALT="%EOCWEB01.03.084";
PatientSEX="%EOCWEB01.03.019";
PatientDOB="%EOCWEB01.03.020";
PatientAGE="%EOCWEB01.03.021";
PatientLOC="%EOCWEB01.03.083";
PatientPRI="%EOCWEB01.03.086.066.1";
PatientUNT="%EOCWEB01.03.066.0";
DoctorCOD="%EOCWEB01.03.082.003";
DoctorNAM="%EOCWEB01.03.082.002";
PatientAID="%EOCWEB01.03.086.090";
PatientIND="%EOCWEB01.03.086.091";
PatientCUR="%EOCWEB01.03.086.092";
PatientCLC="%EOCWEB01.03.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%EOCWEB01.03.086.094";
PatientCDM="%EOCWEB01.03.086.095";
PatientVDH="%EOCWEB01.03.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>

   <form name=UpdateForm method=post action=eocweb01.pbl>
   <input type=hidden name=reportno value="3">
   <input type=hidden name=template value="002">
   <input type=hidden name=updttype value="">
   <input type=hidden name=urnumber value="%EOCWEB01.03.003">
   <input type=hidden name=admissno value="%EOCWEB01.03.081">
   <input type=hidden name=epsofcar value="%EOCWEB01.03.143">
   <input type=hidden name=nextpage value="6">
   <input type=hidden name=redirect
    value="%EOCWEB01.03.138.eocweb01.01.006">
   <input type=hidden name=returncd value="%EOCWEB01.03.144">
   <input type=hidden name=lnkecacc value="1">
   <input type=hidden name=savaccno value="%EOCWEB01.03.201">

<table border=1 width="100%" cellspacing="0" cellpadding="1">
<tr><td class=HeadingCell align=center>
         Episode of Care Accident Details 
</td></tr>
</table>

<table border=1 cellspacing="0" cellpadding="1" width=100%>
<tr valign=top><td>
<table border=0 cellspacing="0" cellpadding="1">

<tr><td class=DataLabel>ACC Number </td>
    <td><input type=text name=ecacc001 class=Mandatory title="ACC Number"
         value="%EOCWEB01.03.201" size=20>
         
    </td></tr>

<tr valign=top><td class=DataLabel>Accident Date</td>
    <td><input type=text id=ecacc003 name=ecacc003 class="Mandatory PastDate" 
         title="ACC Date"
         value="%EOCWEB01.03.203" size=12 maxlength=10
         onblur="checkDate(this,'Date')">
    <img src=../images/DateLookup.gif class=Icon 
           onclick="DateLookupFrame(ecacc003);">
</td></tr>

<tr><td class=DataLabel>Insurer Approval </td>
    <td><input type=checkbox name=ecacc002 value="1">
    </td></tr>

<tr valign=top><td class=DataLabel>Acc Declined Date</td>
    <td><input type=text id=ecacc004 name=ecacc004 
         value="%EOCWEB01.03.204" size=12 maxlength=10
         onblur="checkDate(this,'Date')">
    <img src=../images/DateLookup.gif class=Icon 
           onclick="DateLookupFrame(ecacc004);">
</td></tr>

<tr valign=top>
    <td nowrap><i>Accident Description </i></td>
    <td><input type=text name=ecacc034 
         value="%EOCWEB01.03.234" size=50 maxlength=60>
        <input type=text name=ecacc035 
         value="%EOCWEB01.03.235" size=50 maxlength=60>
    </td></tr>

<tr><td class=DataLabel>Work Related </td>
    <td><input type=checkbox name=ecacc028 value="1">
    </td></tr>

</table>
</td></tr>

<tr><td align=center>
<input type=button value="Update" class="button" id=btnAdd 
      onclick="tempDisable(this); ProcessForm();">
<input type=button class="button" value="Cancel" 
     onclick='CancelForm()'>
</td></tr>
</table>
</form>
<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%EOCWEB01.03.003">
<input type=hidden name=admissno value="%EOCWEB01.03.081">
<input type=hidden name=epsofcar value="%EOCWEB01.03.143">
<input type=hidden name=MenuType value="%EOCWEB01.03.088">
<input type=hidden name=returncd value="%EOCWEB01.03.144">
</form>
</div>
<SCRIPT LANGUAGE=javascript>
if  ("%EOCWEB01.03.202" == "1")
 {
    document.UpdateForm.ecacc002.checked=1
 }
if  ("%EOCWEB01.03.228" == "1")
 {
    document.UpdateForm.ecacc028.checked=1
 }
</SCRIPT>
