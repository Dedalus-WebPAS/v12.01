<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
function ChkDate(strtDate,endDate) {
  var strtDay  = strtDate.value.substring(0,2);
  var strtMon  = strtDate.value.substring(3,6);
  var strtYear = strtDate.value.substring(7,11);

  var endDay   = endDate.value.substring(0,2);
  var endMon   = endDate.value.substring(3,6);
  var endYear  = endDate.value.substring(7,11);

  var strtHH;
  var strtMM;
  var strtSS;
  var endHH;
  var endMM;
  var endSS;

  strtMon = GetMonthNumber(strtMon);
  endMon  = GetMonthNumber(endMon);

  var strtDate = strtYear + strtMon + strtDay 
  var endDate  = endYear + endMon + endDay 
  if (endDate < strtDate) return false;
  return true;
}
function updateParent(effadate) {
  if (!isWhitespace(UpdateForm.effadate.value)) {
    if (!ChkDate(UpdateForm.admndate,UpdateForm.effadate)) {
      alert("Effective Date must be greater than or equal to Admission Date");
      return;}
    if (!ChkDate(UpdateForm.effadate,UpdateForm.discdate)) {
      alert("Effective Date must be less than or equal to Discharged Date"); 
      return;}
  }
  MandatoryOk=true;
  if  (!validateMandatory(UpdateForm)) {
      return;
  }

//  alert(parent.idate.name + " = " + parent.idate.value)
//  alert(parent.session.name + " = " + parent.session.value)

//
//  Set effective dates for rows with same Dates and Session numbers
//
  for (var i=0; i < parent.document.AddForm.length; i++) {
    if (parent.document.AddForm.elements[i].name.match(/mdate/)) {

//      alert(parent.document.AddForm.elements[i].name); 
//      alert(parent.document.AddForm.elements[i+1].name); 
//      alert(parent.document.AddForm.elements[i+5].name); 

      var savdate=parent.document.AddForm.elements[i].value;
      var itemno=parent.document.AddForm.elements[i+1].value;
      var savsess=parent.document.AddForm.elements[i+5].value;
      if ((savdate==parent.idate.value) && (savsess==parent.session.value) &&
          (!isWhitespace(itemno))) {
        parent.document.AddForm.elements[i-3].value=effadate.value;     
//        alert(parent.document.AddForm.elements[i-2].name); 
      } 
    }
  }
  parent.document.AddForm[parent.amount.name].focus();
  DFrameExit();
}
function init() {
  setTimeout('document.UpdateForm.effadate.focus()',400);
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon"
src="../images/ExitIcon.gif" onclick="DFrameExit();">
Subsequent Primary MBS changes
</span>
  <form name=UpdateForm  action="patweb75.pbl" method=post>
  <input type="hidden" name="reportno" value="1">
  <input type="hidden" name="template" value="005">
  <input type="hidden" name="urnumber" value="%PATWEB75.01.003">
  <input type="hidden" name="admissno" value="%PATWEB75.01.107">
  <input type="hidden" name="admndate" value="%PATWEB75.01.108">
  <input type="hidden" name="discdate" value="%PATWEB75.01.109">
  <input type="hidden" name="nextpage" value="1">
  <table border=0 colspan=1 width=95% align=center cellspacing=1 cellpadding=1 >
  <tr><td colspan=2>
  <table border=0 width=100%>

  <tr><td width=50% class=DataLabel>Effective Date</td>
    <td><input type=text size=12 name=effadate 
         class="Mandatory PastDate" title="Effective Date" 
         tabindex=1 value="%PATWEB75.01.110">
         <img notab src=../images/DateLookup.gif border=0 hspace=4 
         align=absmiddle onclick="DateLookupFrame(document.UpdateForm.effadate);"> 
      </td></tr>

</table>
</td></tr>
<tr><td colspan=2 align=center>
    <input type=button value="Ok" class="button" tabindex=2 
     name=okaybutt id=okaybutt
     onclick="tempDisable(this);updateParent(document.UpdateForm.effadate);">
    <input type=button value="Cancel" class="button" tabindex=3
     onclick="DFrameExit();">
</td></tr>


</table>
</form>

<script type="text/javascript">
</script>
