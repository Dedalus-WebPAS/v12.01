<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome"    content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"    content="true">
<link rel="stylesheet" href="../html/postcode.css" type="text/css">
<script type="text/javascript" src="../js/IBA_Category_LA.js"></script>
<script type="text/javascript" src="../js/IBA_Category_C_.js"></script>
<script type="text/javascript" src="../js/AutoPostCode.js"></script>
<script type="text/javascript" src="../js/patweb89.js"></script>
<script type="text/javascript" src="../js/AddressSearch.js"></script>

<script type="text/javascript">
function clickRegisterButton() {
  if (document.AddForm.quickreg.checked==false)
  {
    if (document.getElementById('ptcnuadv').value != "1" &&
        !CheckValPostCode()){
      return;
    }
  }
  var str = document.AddForm.ptmas006.value;
  document.AddForm.ptmas006.value = str.replace(/^\s+|\s+$/g,'');
  str = document.AddForm.pmpmi084.value;
  document.AddForm.pmpmi084.value = str.replace(/^\s+|\s+$/g,'');

 checkSecondName(document.AddForm.ptcnusgn,
                   document.AddForm.ptmas006,document.AddForm.pmpmi084,
                   document.AddForm.pmpmi085);

  if(checkMedicare(document.AddForm.ptmas023)) {
    if(checkDuplicates(document.AddForm.ptmas005.value,AddForm.pmpmi084.value,
      document.AddForm.pmpmi085.value,document.AddForm.ptmas017.value,PostReg)){
    }
  }
}

function PostReg() {
  SetOptOutSMS();
  CheckVerifiedAddr();
  SubmitHidden05(document.AddForm);
}
function EnableButton(){
  AddForm.RegisterButton.disabled=false;
}
function valUR(theField){
  if(theField.value.length < 1){
     alert ("Invalid UR Number "); 
     return;
  }
  justifyRight(theField)
}
function valPostCode(){
  if (document.AddForm.quickreg.checked==true
      && isWhitespace(AddForm.ptmas010.value)) return;
  UpCase(AddForm.ptmas010);
  if(trim(AddForm.ptmas012.value)!="8888"){
    LookupPostCode(AddForm.ptmas010.value);
  }
}
function clrMandatory(Sname,Gname,Sex,Dob) {
  if (document.AddForm.quickreg.checked) {
    if (document.getElementById('ptcnuadv').value == "1") {
      ToggleSearchAddressFields(false);  // not readonly
    }
    for (i=0; i<document.AddForm.elements.length; i++) {
      el=document.AddForm.elements[i];
      if (el.className.match(/Mandatory/)) {
        el.className="";
      }
    }
    if (isWhitespace(document.AddForm.ptmas017.value)){
    checkDefDOB(document.AddForm.ptmas017,document.AddForm.d_cwebDDOB);
    document.AddForm.ptmas017.focus();
    document.AddForm.ptmas017.blur();
    document.AddForm.ptmas017.className="Mandatory PastDate";
    }

    if (!isWhitespace(Sex)) {
      //document.AddForm.ptmas015.value=Sex.substr(0,1);
    }

    if (isWhitespace(Sname)) {
      if (isWhitespace(document.AddForm.ptmas005.value)) {
      document.AddForm.ptmas005.value="Unknown";
      }
    }  
    if (isWhitespace(Gname)) {
      if (isWhitespace(document.AddForm.ptmas006.value)) {
      document.AddForm.ptmas006.value="Unknown";
      }  
    }

    if (isWhitespace(Dob)) {
      if (isWhitespace(document.AddForm.ptmas017.value)) {
      document.AddForm.ptmas017.value="";
      }
    }  
    else {
      document.AddForm.ptmas017.value=Dob;
    }
  } else {
    location.reload();
  }
}
function init() {
  SetPostCode05();
  InitPostCodes();
  SetCategoryC_(document.AddForm.ptmas019,"");
  SetCategoryLA(document.AddForm.pmpmi002,"");
  SetCategoryLA(document.AddForm.pmpmi003,"");
  if ( HiddenFields.cgenrur.value == "0" ) {
    document.AddForm.urnumber.focus();
  }else{
    document.AddForm.ptmas001.focus();
  }
  ShowOptOutSMS();
  if(document.AddForm.ptcnnewc.value=="1") {
     document.AddForm.redirect.value="patweb07.pbl?reportno=6&template=004";
  }
  InitAddressSearch();
}

//
// Functions called from AddressSearch.js
//
function InitAddressSearch() {
  // line1 - 'ptmas008'
  // line2 - 'ptmas009'
  // suburb - 'ptmas010'
  // state - 'ptmas011'
  // postcode - 'ptmas012'

  InitAddressSearchFields('trAddrSrch','ptmas008','ptmas009','ptmas010','ptmas011','ptmas012');
}
function ShowAddressSearch() {
  OpenAddressSearch('2',PopulateAddress,ClearSearchAddress);
}
function PopulateAddress(StreetLine, Suburb, State, Postcode) {
  LookupSuburb(Postcode);  // validate Postcode with our Lookup values
  if (SelectPC.length == 0) return;  // no match found

  LookupPostCode(Suburb);  // validate Suburb
  if (SelectPC.length == 0) return;  // no match found

  ToggleFieldReadOnly('ptmas008', true);
  ToggleFieldReadOnly('ptmas009', false);
  ToggleFieldReadOnly('ptmas010', true);
  ToggleFieldReadOnly('ptmas011', true);
  ToggleFieldReadOnly('ptmas012', true);

  SetFieldValue('ptmas008',StreetLine);
  SetFieldValue('ptmas009','');
  SetFieldValue('ptmas010',Suburb);
  SetFieldValue('ptmas011',State);
  SetFieldValue('ptmas012',Postcode);

  document.getElementById('verifiedLabl').style.display = "";
}
function ClearSearchAddress() {
  ToggleFieldReadOnly('ptmas008', false);
  ToggleFieldReadOnly('ptmas009', false);
  ToggleFieldReadOnly('ptmas010', false);
  ToggleFieldReadOnly('ptmas011', false);
  ToggleFieldReadOnly('ptmas012', false);

  SetFieldValue('ptmas008','');
  SetFieldValue('ptmas009','');
  SetFieldValue('ptmas010','');
  SetFieldValue('ptmas011','');
  SetFieldValue('ptmas012','');

  document.getElementById('verifiedLabl').style.display = "none";
}
function ToggleSearchAddressFields(ReadOnly) {
  ToggleFieldReadOnly('ptmas008', ReadOnly);
  ToggleFieldReadOnly('ptmas009', ReadOnly);
  ToggleFieldReadOnly('ptmas010', ReadOnly);
  ToggleFieldReadOnly('ptmas011', ReadOnly);
  ToggleFieldReadOnly('ptmas012', ReadOnly);
}
function CheckVerifiedAddr() {
  if (document.getElementById('ptcnuadv').value == "1") {
    if (document.getElementById('verifiedLabl').style.display == "") {
      document.getElementById('pmpmi113').value = "1";  // verified address
    }
    else {
      document.getElementById('pmpmi113').value = "0";  // address not verified
    }
  }
  else {
    document.getElementById('pmpmi113').disabled = true;
  }
}
function ClearVerified() {
  if (document.getElementById('ptcnuadv').value != "1")
    return;

  document.getElementById('verifiedLabl').style.display = "none";
}
</script>
</head>
%START.OF.PAGE
<body onLoad="PageLoad(event);
turnOnSecondGivenName(document.AddForm.ptcnusgn.value,
                      document.AddForm.ptmas006,
                      document.AddForm.pmpmi084,
                      document.AddForm.pmpmi085);
                      displayPrefNames(document.AddForm.ptcnnmpr.value);">
<form name=AddForm action="patweb89.pbl" method=post style="margin:0"
 onsubmit='return validateMandatory(this)'>
<input type=hidden name=reportno value="05">
<input type=hidden name=formactn value="NR">
<input type=hidden name=updttype value="">
<input type=hidden name=chckname>
<input type=hidden name=redirflg value="1">
<input type=hidden name=nextpage value="3">
<input type=hidden name=updateky value="%PATWEB89.05.700">
<input type=hidden name=redirect value="patweb89.pbl?reportno=1&template=022">
<input type=hidden name=dummy    value="">
<input type=hidden name=pmpmi076 value="">
<input type=hidden name=manalloc value="1">
<input type=hidden name=praflag  value="0">
<input type=hidden name=sesskeys value="%PATWEB89.05.918">
<input type=hidden name=noofdays value="%PATWEB89.05.919">
<input type=hidden name=theaflag value="%PATWEB89.05.920">
<input type=hidden name=hidsname id=hidsname value="%PATWEB89.05.009">
<input type=hidden name=hidgname id=hidgname value="%PATWEB89.05.010">
<input type=hidden name=ptcnusgn value="%STANDARD.01.025.114.219.0.1">
<input type=hidden name=ptcnsmsn id=ptcnsmsn
                                 value="%STANDARD.01.025.120.243.0.1">
<input type=hidden name=ptmsx050 id=ptmsx050 value="">
<input type=hidden name=ptcnnewc value="%STANDARD.01.025.118.138.0.1">
<input type=hidden name=ptcnhdps value="%STANDARD.01.025.080.250.1.1">
<input type=hidden name=ptcnuadv id=ptcnuadv
                                 value="%STANDARD.01.025.123.247.0.1">
<input type=hidden name=ptcnnmpr value="%STANDARD.01.025.128.226.1.1">
<input type=hidden name=pmpmi113 id=pmpmi113 value="%PATWEB89.01.899.049">
<input type=hidden name="d_cwebDDOB" value="%STANDARD.01.025.101.098.0.8">

<table align=center width=100% border=1 cellspacing=0 cellpadding=0>
<tr><td class=HeadingCell colspan=6 align=center>
     New Patient Details </td>
</tr>
</table>

<table align=center width=100% border=0 cellspacing=0 cellpadding=0>
<tr><td class=DataLabel> U/R Number </td>
    <td colspan=3>
      <input type=text size=10 maxlength=8 class=mandatory tabindex=1
       name=urnumber id=urnumber title="U/R Number"
       onchange="justifyRight(this)">
    </td>
    <td class=DataLabel><font color=red> QUICK REGISTRATION </font></td>
    <td><input type=checkbox name=quickreg id=quickreg tabindex="-1" value="1"
         onclick='clrMandatory(hidsname,hidgname,"%PATWEB89.05.019",
                               "%PATWEB89.05.020");'>
    </td>
</tr>

<tr id=trAddrSrch style="display:none">
    <td class=DataLabel></td>
    <td class=DataLabel></td>
    <td class=DataLabel nowrap>Search Address</td>
    <td><input type=text readonly size=42 tabindex="-1"
         style="cursor:pointer;text-align:center;"
         value="Click here to search for an address"
         title="Click here to search for an address"
         onclick="ShowAddressSearch();">
    </td>
</tr>

<tr><td class=DataLabel>Title</td>
    <td><select title="Patient Title"
         name=ptmas001 id=ptmas001 tabindex=2>
          <option></option>
          %STANDARD.01.029
        </select>
    </td>
    <td class=DataLabel>Address&nbsp;
      <span id=verifiedLabl style="display:none;color:red">(Verified)</span>
    </td>
    <td><input type=text size=42 maxlength=35 class=Mandatory tabindex=6
        name=ptmas008 id=ptmas008 title="Address Line 1"
        onblur="UpCase(this);ClearVerified();">
    </td>
    <td class=DataLabel>Home Phone</td>
    <td><input type=text size=23 maxlength=20 tabindex=9
        name=ptmas013 id=ptmas013 title="Home Phone Number">
    </td>
</tr>

<tr><td class=DataLabel> Surname</td>
    <td><input type=text size=40 maxlength=40 class=Mandatory tabindex=2
         name=ptmas005 id=ptmas005 value="%PATWEB89.05.009"
         title="Patient Surname" onblur="UpCase(this)">
    </td>
    <td class=DataLabel></td>
    <td><input type=text size=42 maxlength=35 tabindex=7
        name=ptmas009 id=ptmas009 title="Address Line 2"
        onblur="UpCase(this)">
    </td>
    <td class=DataLabel>Work Phone</td>
    <td><input type=text size=23 maxlength=20 tabindex=10
        name=ptmas014 id=ptmas014 title="Work Phone Number">
    </td>
</tr>

<tr id=PrefSurname style="display:none">
  <td class=DataLabel>Preferred Surname</td>
  <td><input type=text size=20 maxlength=20 name=pmpmi082
       title="Preferred Surname"
       tabindex=2 onchange="UpCase(this);"></td>
  <td>&nbsp;</td><td>&nbsp;</td>
  <td>&nbsp;</td><td>&nbsp;</td>
</tr>

<tr><td class=DataLabel id="givenNameLabel">Given Names</td>
    <td><input type=hidden name=ptmas006 id=ptmas006 title="Given Name"
         value="%PATWEB89.05.010">
        <input type=text size=42 maxlength=40 class=Mandatory tabindex=3 
         name=pmpmi084 id=pmpmi084 title="First Given Name" 
         value="%PATWEB89.05.010" onblur="UpCase(this)">
    </td>
    <td class=DataLabel>Suburb</td>
    <td><input type=text size=42 maxlength=35 class=Mandatory tabindex=8
         name=ptmas010 id=ptmas010 title="Suburb"
         value="%PATWEB89.05.015" onchange="valPostCode();ClearVerified();">
    </td>
    <td class=DataLabel>Mobile Phone</td>
    <td><input type=text size=23 maxlength=20 class=MobilePhone tabindex=11
         name=ptmsx039 id=ptmsx039 title="Mobile Phone Number">
        <span id=DisplaySMS style="display: none"> Opt-Out SMS
          <input type=checkbox name=d_ptmsx050 id=d_ptmsx050 value=1
           tabindex=11>
        </span>
    </td>
</tr>

<tr><td class=DataLabel id="secondGivenNameLabel">Second Given Name</td>
    <td><input type=text size=42 maxlength=40 id="secondGivenName"
        title="Second Given Name" tabindex=4
        name=pmpmi085 value=""
        onblur="UpCase(this);">
    </td>
</tr>

<tr id=PrefGivenName style="display:none">
  <td class=DataLabel>Preferred Given Name</td>
  <td><input type=text size=25 maxlength=25 name=pmpmi083
       title="Preferred Given Name"
       tabindex=4 onchange="UpCase(this);"></td>
  <td>&nbsp;</td><td>&nbsp;</td>
  <td>&nbsp;</td><td>&nbsp;</td>
</tr>

<tr><td class=DataLabel>%STANDARD.01.017.G </td>
    <td><select name=ptmas015 id=ptmas015 tabindex=4 class=Mandatory 
         title="%STANDARD.01.017.G " onchange="checkGenderInd(this);">
        <option></option>
         %PATWEB89.05.086.099.061.9.1.19.3.H
        </select>
    </td>
    <td class=DataLabel>State</td>
    <td><input type=text size=42 maxlength=35 tabindex=8
         name=ptmas011 id=ptmas011 title="State"
         onchange="UpCase(this);ClearVerified();">
    </td>
    <td class=DataLabel>E-Mail</td>
    <td><input type=text size=23 maxlength=80 tabindex=12
         name=pmpmi005 id=pmpmi005 title="E-Mail">
    </td>
</tr>

<tr><td class=DataLabel>Date of Birth</td>
    <td><input type=text size=12 class="Mandatory PastDate" tabindex=5
         name=ptmas017 id=ptmas017 title="Date of Birth"
         value="%PATWEB89.05.020"
         onblur="checkDate(this,'Date of Birth');">
    </td>
    <td class=DataLabel>Post Code</td>
    <td><input type=text size=4 maxlength=4 class=Mandatory tabindex=8
         name=ptmas012 id=ptmas012 title="Post Code" value="%PATWEB89.05.016"
         onchange="LookupSuburb(this.value);ClearVerified();">
    </td>
</tr>

<tr><td class=HeadingCell colspan=6 width=100% align=center>
    PMI Details</td>
</tr>

<tr><td class=DataLabel>Marital Status</td>
    <td><select class="select120 Mandatory" tabindex=12
         name=ptmas016 id=ptmas016 title="Marital Status">
          <option></option>
          %PATWEB89.05.069.2
        </select>
    </td>
    <td class=DataLabel>Medicare #</td>
    <td><input type=text size=10 maxlength=10 tabindex=21 
         name=ptmas023 id=ptmas023 onblur="checkMedicare(ptmas023);">
        <input type=text size=5 maxlength=2 tabindex=22
         name=ptmsx045 id=ptmsx045>
    </td>
</tr>

<tr><td class=DataLabel>Religion</td>
    <td><select name=ptmas020 id=ptmas020 tabindex=13 class="select120"
         title="Religion">
          <option></option>
          %PATWEB89.05.023.2
        </select>
    </td>
    <td class=DataLabel>Valid to</td>
    <td><input type=text size=12 tabindex=23 name=pmpmi016 id=pmpmi016 
         title="Valid to" onblur="checkDateSV(this,'Valid to');" >
    </td>
    <td class=DataLabel>Local GP </td>
    <td><input type=hidden name=pmpmi059 id=pmpmi059>
        <input type=text readonly name=genpname id=genpname>
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="HCPSearchFrame(pmpmi059,genpname,3)">
        <img src="../images/erase.gif" class=Icon
         onclick="clrFields(pmpmi059,genpname);">
    </td>
</tr>

<tr><td class=DataLabel>Country of Birth</td>
    <td><select name=ptmas019 id=ptmas019 tabindex=14 
         class="select120 Mandatory" title="Country of Birth" >
          <option></option>
        </select>
    </td>
    <td align=centre class=DataLabel>Pension/Health Care Card #</td>
    <td><input type=text size=15 maxlength=15 tabindex=24
         name=ptmas024 id=ptmas024></td>
    <td class=DataLabel>Privacy Indicator</td>
    <td><select name=pmpmi066 id=pmpmi066 class=select120 tabindex=29>
        <option></option>
        %STANDARD.01.007.PV
        </select>
    </td>
</tr>

<tr><td class=DataLabel>Resident</td>
    <td><select name=ptmas021 id=ptmas021 tabindex=15 class=Mandatory
         title="Resident">
         <option></option>
          %PATWEB89.05.024.2
        </select>
    </td> 
    <td class=DataLabel>Occupation</td>
    <td><input type=text size=20 maxlength=14 tabindex=24
         name=ptmas022 id=ptmas022 onchange="UpCase(this);"></td>
    <td class=DataLabel>Folder Selection</td>
    <td><select name=pmpmi077 id=pmpmi077 tabindex=33 title="Folder Selection">
          <option></option>
          %STANDARD.01.007.FS
         </select>
    </td>
</tr>

<tr><td class=DataLabel>Indigenous Status</td>
    <td><select class="select120 Mandatory" tabindex=16
         name=pmpmi065 id=pmpmi065 title="Indigenous Status">
          <option></option>
          %STANDARD.01.007.VA
        </select>
    </td>
    <td class=DataLabel> Safety Net Number </td>
    <td><input type=text size=12 maxlength=10 tabindex=26
         name=pmpmi075 id=pmpmi075>
    </td>
    <td class=DataLabel>Health Fund </td>
    <td><input type=text size=6 maxlength=6 tabindex=220
         name=ptmas036 id=ptmas036 title="Health Fund"
         onchange="validateCode(16,ptmas036,funddesc);checkTable05();">
        <input type=text size=25 maxlength=30 name=funddesc id=funddesc
         class=readonly Readonly notab >
    </td>
</tr>

<tr><td class=DataLabel>Interpreter Required</td>
    <td><select name=pmpmi001 id=pmpmi001 tabindex=17
         title="Interpreter Required">
          %PATWEB89.05.801.2
        </select>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td class=DataLabel>Level</td>
    <td><input name=ptmas037 id=ptmas037 size=8 maxlength=8 
         tabindex=225 title="Level"
         onblur="validateHFT(20,ptmas036,ptmas037,funddesc,tabldesc);">
        <input type="text" size=15 maxlength=17 name=tabldesc id=tabldesc
         class=readonly Readonly notab >
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="HealthFundSearchFrame(ptmas036,funddesc,ptmas037,tabldesc);">
        <img src="../images/erase.gif" class=Icon
         onclick="clrFields(ptmas036,ptmas037,funddesc,tabldesc);
                  checkTable05();" >
    </td>
</tr>

<tr><td class=DataLabel>Pref Language 1</td>
    <td><select class="select120 Mandatory" tabindex=18 
         name=pmpmi002 id=pmpmi002 title="Preferred Language">
          <option></option>
        </select>
    </td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td class=DataLabel>Member Number </td>
    <td><input type=text size=20 maxlength=19 tabindex=34
         name=ptmas038 id=ptmas038>
    </td>
</tr>

<tr><td class=DataLabel>Pref Language 2</td>
    <td><select name=pmpmi003 id=pmpmi003 tabindex=19 class=select120
         title="Preferred Language">
          <option></option>
        </select>
    </td>
</tr>

<tr><td colspan=6 class=HeadingCell align=center > 
      Death Details </td>
</tr>

<tr><td class=DataLabel> Date of Death</td>
    <td><input type=hidden name=ptmas029 id=ptmas029>
        <input type=text size=12 name=ptmas061 id=ptmas061 notab
         title="Date of Death" onblur="confirmDeath05(this,'Date of Death')">
        <img notab src="../images/DateLookup.gif" class=Icon 
         onclick="DateLookupFrame(ptmas061);">
    </td>
    <td class=DataLabel>Unknown Date of Death </td>
    <td><input type=checkbox name=ptmas067 id=ptmas067 value="Y" notab
         onclick="confirmDeath05(ptmas061,'Date of Death')">
    </td>
    <td class=DataLabel>Death Type </td>
    <td><select name=pmpmi017 id=pmpmi017 class=select120 notab
         title="Death Type">
        <option></option>
         %STANDARD.01.007.DY
        </select>
    </td>
</tr>

<tr><td colspan=6 class=HeadingCell align=center > 
      <script type="text/javascript">URDesc();</script> Comments 
    </td>
</tr>

<tr><td colspan=6 align=center>
      <textarea wrap=hard name=urcommnt id=urcommnt rows=4 cols=70></textarea>
    </td>
</tr>
</table>

<table width=100% border=0>
<tr><td align=center>
      <input type=button value="Register" class="button" 
       tabindex=47 name=RegisterButton id=RegisterButton
       onclick="tempDisable(this);clickRegisterButton();">
      <input type=button value="Cancel" class="button" tabindex=48
       onclick="history.go(-1)">
    </td>
</tr>
</table>

</form>

<script type="text/javascript">
   UsualPRFA="%PATWEB89.05.909"
</script>

<form name=HiddenFields method=get>
<input type=hidden name=cgenrur id=cgenrur value="%PATWEB89.05.097">
</form>

