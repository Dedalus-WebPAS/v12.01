<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/discharge507.js"></script>
<script type="text/javascript" src="../js/patweb96.js"></script>
<script type="text/javascript" src="../js/patweb9605.js"></script>
<script type="text/javascript">
function discharge() {
  MandatoryOk=validateMandatory(document.pat96pdf)
  if (MandatoryOk) {
    document.pat96pdf.submit();
  }
}

function Update() {
  MandatoryOk=validateMandatory(document.pat96pdf)
  if (MandatoryOk) {
    var divInfrmGP = document.getElementById('divInformGP');
    if (divInfrmGP != undefined && !isWhitespace(divInfrmGP.innerHTML)) {
      var ddlInfGP = document.getElementById('ddlInformGP');
      document.pat96pdf.dschingp.value = ddlInfGP.options[ddlInfGP.selectedIndex].value;
    }
    if(!validateMRFD(document.pat96pdf.d_adate,document.pat96pdf.mrfddate)) {
      return;
    }
    document.pat96pdf.submit();
  }
}

function DisplayTrnSrc() {
  f = document.pat96pdf;
  var i=document.pat96pdf.dschdest.selectedIndex;
  var ind=document.pat96pdf.dschdest.options[i].value.substring(4,5)
  var ind1=document.pat96pdf.dschdest.options[i].value.substring(3,4)

  f.DDind01.value = ind1;

  if (ind!="1") {
    TranSrcDesc.innerHTML=""
    TranSrcField.innerHTML=transferblank.innerHTML;
    document.pat96pdf.trnsfsrc.value="";
  } else {
    TranSrcDesc.innerHTML="Transfer Destination"
    TranSrcField.innerHTML=transfersrc.innerHTML;
  }
  var ind1=document.pat96pdf.dschdest.options[i].value.substring(3,4)
  if (ind1!="D") {
      document.pat96pdf.dschdety.value="   "
  }
  if (ind1=="Z")
   {
      document.pat96pdf.dschsref.className="Mandatory"
      document.pat96pdf.dschsref.readOnly= false;
    }
    else{
      document.pat96pdf.dschsref.value= "";
      document.pat96pdf.dschsref.className="ReadOnly";
      document.pat96pdf.dschsref.readOnly= true;
    }
   if(document.pat96pdf.privateh.value=="0"){
      document.pat96pdf.dschsref.className="";}

}

function DisplayAutopsy() {
  // Check indicator for deceased
  i=document.pat96pdf.dschstat.selectedIndex
  ind=document.pat96pdf.dschstat.options[i].value.substring(3,4)
  if (ind=="D") {
    document.pat96pdf.dschdind.value="1"
    Autop.innerHTML=autopsyDiv.innerHTML;
  }
  else {
    Autop.innerHTML="";
    document.pat96pdf.dschdind.value="0"}
}

function moveMREC() {
  var msg="Do you want to move Medical Record?";
  if (confirm(msg)) {
    document.pat96pdf.movemrec.value=1;
  } else {
    document.pat96pdf.movemrec.value=0;
  }
  document.pat96pdf.submit();
}

function ShowACAS() {
   if(document.pat96pdf.statevic.value!="3"){   // Only show for victoria
     return;
   }
   var pattern="1246789FEJM";
   if((pattern.match(document.pat96pdf.acascare.value.substr(14,1))) ||
     (document.pat96pdf.acascare.value.substr(14,2))=="R1" ||
     (document.pat96pdf.acascare.value.substr(14,2))=="R2") {
     if(document.pat96pdf.acasage.value=="1") {
       DisplayACAS1.innerHTML=agedcare1.innerHTML;
       DisplayACAS2.innerHTML=agedcare2.innerHTML;
     }
   } else {
      DisplayACAS1.innerHTML="";
      DisplayACAS2.innerHTML="";
   }
}

function checkTrans() {
  DisplayTrnSrc();
  deceasedIndicator = document.pat96pdf.dschdest.value.substr(3,1);
   if ((deceasedIndicator=="D") && (document.pat96pdf.genericu.value=="1")) {
    UserDesc.innerHTML="Username/Password"
    UserField.innerHTML=userpassw.innerHTML;
  } else {
    UserDesc.innerHTML=""
    UserField.innerHTML=userblank.innerHTML;
  }

  deceasedIndicator = document.pat96pdf.dschdest.value.substr(3,1);
  checkDeceasedINP(deceasedIndicator);
}

function ShowUDFs() {
  var arrUDFs = [ '1', '2', '3', '4', '5' ];
  ShowUserDefinedFields(arrUDFs);
}

</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);DisplayTrnSrc();ShowACAS();ShowUDFs();
              ShowFaxFields();FilterDischargeDestination();
              ShowHideLateDischargeReason();">
<div id=PageHeadingSection>
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB96.11.003";
PatientVIS="%PATWEB96.11.081";
PatientNAM="%PATWEB96.11.002";
PatientSTA="%PATWEB96.11.086.078";
PatientALT="%PATWEB96.11.084";
PatientSEX="%PATWEB96.11.019";
PatientDOB="%PATWEB96.11.020";
PatientAGE="%PATWEB96.11.021";
PatientLOC="%PATWEB96.11.083";
PatientPRI="%PATWEB96.11.086.066.1";
PatientUNT="%PATWEB96.11.066.0";
DoctorCOD="%PATWEB96.11.082.003";
DoctorNAM="%PATWEB96.11.082.002";
PatientAID="%PATWEB96.11.086.090";
PatientIND="%PATWEB96.11.086.091";
PatientCUR="%PATWEB96.11.086.092";
PatientCLC="%PATWEB96.11.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB96.11.086.094";
PatientCDM="%PATWEB96.11.086.095";
PatientVDH="%PATWEB96.11.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>

<form onsubmit='return validateMandatory(this)' name=pat96pdf style="margin:0"
 %PATWEB96.11.201.001
<input type=hidden name=reportno value="6">
<input type=hidden name=urnumber value="%PATWEB96.11.003">
<input type=hidden name=admissno value="%PATWEB96.11.101">
<input type=hidden name=updatety value="1">
<input type=hidden name=movemrec value="0">
<input type=hidden name=redirect value="%PATWEB96.11.001.patweb98.01.001">
<input type=hidden name=nextpage value="2">
<input type=hidden name=formactn value="Update">
<input type=hidden name=patsex   value="%PATWEB96.11.019">
<input type=hidden name=patage   value="%PATWEB96.11.021">
<input type=hidden name=acasage  value="%PATWEB96.11.223">
<input type=hidden name=acascare value="%PATWEB96.11.113.3">
<input type=hidden name=statevic value="%PATWEB96.11.224">
<input type=hidden name=privateh value="%STANDARD.01.025.021.210.1.1">
<input type=hidden name=dschrcct value="%PATWEB96.11.448.1">
<input type=hidden name=ismrtmas value="%PATWEB96.11.841">
<input type=hidden name=genericu value="%PATWEB96.11.856">
<input type=hidden name=dscdeath value="%PATWEB96.11.304.3">
<input type=hidden name=ptcnusr1 id=ptcnusr1 value="%PATWEB96.11.332">
<input type=hidden name=ptcnusr2 id=ptcnusr2 value="%PATWEB96.11.333">
<input type=hidden name=ptcnusr3 id=ptcnusr3 value="%PATWEB96.11.334">
<input type=hidden name=ptcnusr4 id=ptcnusr4 value="%PATWEB96.11.335">
<input type=hidden name=ptcnusr5 id=ptcnusr5 value="%PATWEB96.11.336">
<input type=hidden name=ptcnusm1 id=ptcnusm1 value="%PATWEB96.11.337">
<input type=hidden name=ptcnusm2 id=ptcnusm2 value="%PATWEB96.11.338">
<input type=hidden name=ptcnusm3 id=ptcnusm3 value="%PATWEB96.11.339">
<input type=hidden name=ptcnusm4 id=ptcnusm4 value="%PATWEB96.11.340">
<input type=hidden name=ptcnusm5 id=ptcnusm5 value="%PATWEB96.11.341">
<input type=hidden name=ptcnacas value="%STANDARD.01.025.109.195.0.1">
<input type=hidden name=dschfaxt value="%STANDARD.01.025.119.247.0.6">
<input type=hidden name=informgp value="%PATWEB96.11.425.0">
<input type=hidden name=refgpnam value="%PATWEB96.11.431.0">
<input type=hidden name=refgpfax value="%PATWEB96.11.498.061">
<input type=hidden name=fxprintr value="%STANDARD.01.025. 89.244.0.6">
<input type=hidden name=hcpactvs value="%PATWEB96.11.860">
<input type=hidden name=hcgactvs value="%PATWEB96.11.861">
<input type=hidden name=mulhosid value="%PATWEB96.11.498. 13.1">
<input type=hidden name=faxitflg value="0">
<input type=hidden name=faxprcod value=" ">
<input type=hidden name=dschingp value=" ">
<input type=hidden name=ptcnhdps id="ptcnhdps"
 value="%STANDARD.01.025.080.250.1.1">
<input type=hidden name=mh_visit value="%PATWEB96.11.863">
<input type=hidden name=d_adate id=d_adate value="%PATWEB96.11.102">
<input type=hidden name=atime id=atime value="%PATWEB96.11.103">
<input type=hidden name=ptcndptm id=ptcndptm value="%PATWEB96.11.248">
<input type=hidden name=BTInd11 id=BTInd11 value="%PATWEB96.11.251">
<input type=hidden name=RTInd07 id=RTind07 value="%PATWEB96.11.252">
<input type=hidden name=DDind01 id=DDind01 value="">

<table border=1 width=100% cellspacing=0 cellpadding=0>
<tr><td class=HeadingCell align=center colspan=4>
      Update Discharge Form</td></tr>
</table>

<table border=0 width=100% cellspacing=0 cellpadding=4>
  <tr><td class=DataLabel>Discharge Date </td>
      <td><input type=text size=15 maxlength=12 name=trandate1 id=trandate1
           title="Discharge Date" readonly class="ReadOnly"
           value="%PATWEB96.11.301">
      </td>
      <td class=DataLabel width=250> Discharge Time</td>
      <td>
          <input type=text size=8 name=trantime  readonly class="ReadOnly" 
              title="Discharge time" value="%PATWEB96.11.302">
      </tr>
  <tr><td class=DataLabel>Discharge Destination </td>
      <td><select name=dschdest id=dschdest 
           class=Mandatory title="Discharge Destination"
           onchange="checkTrans();ShowHideLateDischargeReason();"
           value="%PATWEB96.11.304">
          <option></option>
          %PATWEB96.11.205
          </select></td>
      <td class=DataLabel><div id=TranSrcDesc></div></td>
      <td><div id=TranSrcField></div></td>
  </tr>
<tr valign=top><td class=DataLabel>Discharge Consultant</td>
   <td class=DataLabel> 
    <input type=text class=readonly readonly name=dschadta size=10 value="%PATWEB96.11.108.003" notab>
    <input type=text class=readonly readonly name=dschname size=25 value="%PATWEB96.11.108.002" notab>
   </td> 
   <td class=DataLabel>Death Type</td>
   <td><select name=dschdety>
        <option> </option>
        %PATWEB96.11.517.2
        </select></td></tr>

 <tr><td class=DataLabel>Intention to Re-admit</td>
      <td>
      <select name=dschirad title="Intention to readmit" class="Mandatory">
        <option> </option>
        %PATWEB96.11.445.2
      </select></td>
      <td class=DataLabel>Mental Health Legal Status</td>
      <td>
      <select name=dschmhls>
        <option> </option>
        %PATWEB96.11.489.2
      </select></td>
 <tr><td class=DataLabel>Separation Referral</td>
        <td><input type=text name=dschsref class=Mandatory 
             size=10 title="Separation Referral" value="%PATWEB96.11.326" 
             onblur="SeparationRef(pat96pdf.dschsref,
                                   pat96pdf.patsex.value,
                                   pat96pdf.patage);">
          <img src="../images/SearchIcon.gif" class=Icon
           onclick="SeparationAlert();"></td>
     <td class=DataLabel>Clinically Ready for Discharge Date</td>
     <td><input type=text size=15 maxlength=12 name=mrfddate
         id=mrfddate title="Clinically Ready for Discharge Date"
         value="%PATWEB96.11.247"
         onblur="checkDate(this,'Date');disDelay(this);" class="Date" >
         <img notab src="../images/DateTimeStamp.gif" class=Icon
          alt="Current"
          onclick="SetCurrentDateTime(pat96pdf.mrfddate,null);">
         <img notab src="../images/DateLookup.gif" class=Icon
          alt="Calendar" date="pat96pdf.mrfddate"></td>
      <tr id=rsndisde style="display: none;"><td class=DataLabel>&nbsp;</td>
      <td>&nbsp;</td>
      <td class=DataLabel>Reason for Discharge Delay</td>
      <td><select name=vsxdc014 id=vsxdc014 title="Reason for Discharge Delay">
        <option></option>
        %STANDARD.01.007.z1
        </select></td></tr>
 </tr>  
  <tr><td class=DataLabel>Carer Availability</td>
      <td>
      <select name=dschcrav title="Carer Availability" class=Mandatory>
        <option> </option>
        %PATWEB96.11.447.2
      </select></td>
 </tr>  
<tr valign=top><td class=DataLabel>Comments</td>
        <td><input type=text name=dschcom1 size=50 maxlength=40
                      value="%PATWEB96.11.131"><br>
                      <input type=text name=dschcom2 size=50 maxlength=30
                      value="%PATWEB96.11.132"></td>
    <td class=DataLabel>Discharge Diagnosis</td>
        <td colspan=3><input type=text name=dschdia1 size=50 maxlength=50
                       value="%PATWEB96.11.305"><br>
                      <input type=text name=dschdia2 size=50 maxlength=50
                       value="%PATWEB96.11.306"></td></tr>

<tr valign=top><td><div id=DisplayACAS1></div></td>
    <td><div id=DisplayACAS2></div></td>
    </tr>

<tr>
  <td class=DataLabel><div id=divUDF1Label></div></td>
  <td><div id=divUDF1Field></td>
  <td class=DataLabel><div id=divUDF2Label></td>
  <td><div id=divUDF2Field></td>
</tr>

<tr>
  <td class=DataLabel><div id=divUDF3Label></div></td>
  <td><div id=divUDF3Field></td>
  <td class=DataLabel><div id=divUDF4Label></td>
  <td><div id=divUDF4Field></td>
</tr>

<tr>
  <td class=DataLabel><div id=divUDF5Label></td>
  <td><div id=divUDF5Field></td>
</tr>

<tr><td width=18%>&nbsp;</td>
    <td width=32%>&nbsp;</td>
    <td width=18% class=DataLabel><div id=UserDesc></div></td>
    <td><div id=UserField></div></td>
</tr>

<tr id=LateDiscReason>
    <td width=18%>&nbsp;</td>
    <td width=32%>&nbsp;</td>
    <td class=DataLabel width=18%>Reason for Late Discharge</td>
    <td width=32%>
      <select name=ltdsresn id=ltdsresn title="Reason for Late Discharge"
       class="SelectBig" onchange="LateDischargeReasonChanged();">
      <option></option>
       %PATWEB96.11.253.015.2
      </select>
    </td>
</tr>
<tr id=LateDiscReasonComm1>
    <td width=18%>&nbsp;</td>
    <td width=32%>&nbsp;</td>
    <td class=DataLabel width=18%>Reason for Late Discharge Comments</td>
    <td width=32%>
        <input type=text size=45 maxlength=40 name=ltdscom1 id=ltdscom1
         title="Reason for Late Discharge Comments 1"
         value="%PATWEB96.11.253.016">
    </td>
</tr>
<tr id=LateDiscReasonComm2>
    <td width=18%>&nbsp;</td>
    <td width=32%>&nbsp;</td>
    <td width=18%>&nbsp;</td>
    <td width=32%>
      <input type=text size=45 maxlength=40 name=ltdscom2 id=ltdscom2
        title="Reason for Late Discharge Comments 2"
	value="%PATWEB96.11.253.017">
    </td>
</tr>

</table>

<div id="divInformGP"></div>

<br>

<table border=0 width=100% cellspacing=0 cellpadding=4>
<tr valign=bottom>
  <td colspan=4 width=100% align=center valign=bottom>
    <input type=button value="Update" class=button id=btnUpdate
     onclick="Update();">
    <input type=button value="Cancel" class=button onclick="history.go(-1);">
    <span id=spFax style="display:none">
      <input type=button class=button value="Fax" onclick="Fax();">
    </span>
  </td>
</tr>
</table>

</form>
</div>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%PATWEB96.11.003">
<input type=hidden name=admissno value="%PATWEB96.11.081">
<input type=hidden name=MenuType value="%PATWEB96.11.088">
<input type=hidden name=alert001 value="">
</form>

<script type="text/javascript">
document.pat96pdf.dschsref.readonly= true;
document.pat96pdf.dschsref.ClassName= "Readonly";

for (var i =0 ; i < document.pat96pdf.trantime.length; i++) {
  if (document.pat96pdf.trantime.options[i].value=="%PATWEB96.11.103") {
      document.pat96pdf.trantime.selectedIndex=i;
  }
};

caretype="%PATWEB96.11.113.3"
if (caretype.substr(14,1)==5){
  document.pat96pdf.dschmhls.className="Mandatory"
}

privatehosp="%STANDARD.01.025.021.210.1.1"
if (privatehosp=="0"){
  document.pat96pdf.dschsref.className="";
  document.pat96pdf.dschcrav.className="";
}

disDelay(document.getElementById('mrfddate'));
for (var j=0; j < document.getElementById('vsxdc014').length; j++) {
  if (document.getElementById('vsxdc014').options[j].value.substr(0,3)
      =="%PATWEB96.11.255") {
      document.getElementById('vsxdc014').selectedIndex=j;
  }
}
</script>

<span id=transfersrc style="display:none">
      <input type="text" size=7 maxlength=5 name=trnsfsrc id=trnsfsrc
       class=Mandatory title="Transfer Destination" value="%PATWEB96.11.327.0"
       onblur="validateTransSrc(pat96pdf.trnsfsrc,
                                pat96pdf.trandate1,
                                pat96pdf.trandesc);">
      <input type=text size=27 name=trandesc id=trandesc notab
       class=Readonly readonly value="%PATWEB96.11.327.1">
      <img src="../images/SearchIcon.gif" class=Icon
       onclick="TransferSourceFrame(pat96pdf.trnsfsrc,pat96pdf.trandesc);">
</span>

<span id=transferblank style="display:none">
   <input type=hidden name=trnsfsrc id=trnsfsrc>
</span>

<span id=autopsyDiv style="display:none">
<table>
<tr>
<td> Autopsy <input type=checkbox name=dschautp value=1 checked></td>
</tr></table>
</span>

<span id=agedcare1 style="display:none">
    <td class=DataLabel>ACAS Status</td>
</span>

<span id=agedcare2 style="display:none">
    <td><select name=agecaras title="ACAS Status"
        class=Mandatory>
    <option> </option>
     %PATWEB96.11.222.2
     </select></td>
</span>

<span id=userpassw style="display:none">
    <input type=text size=12 name=username class=Mandatory
         title="User ID">
    <input type=password size =12 name=password class=Mandatory
         title="Password" onblur="GenericPass();">
</span>

<span id=userblank style="display:none">
   <input type=hidden name=username>
   <input type=hidden name=password>
</span>

<span id="spUDF1Label" style="display:none">%STANDARD.01.017.D1</span>
<span id="spUDF1Field" style="display:none">
  <select id=dschusr1 name=dschusr1 title="%STANDARD.01.017.D1">
    <option></option>
    %PATWEB96.11.307.2
  </select>
</span>

<span id="spUDF2Label" style="display:none">%STANDARD.01.017.D2</span>
<span id="spUDF2Field" style="display:none">
  <select id=dschusr2 name=dschusr2 title="%STANDARD.01.017.D2">
    <option></option>
    %PATWEB96.11.308.2
  </select>
</span>

<span id="spUDF3Label" style="display:none">%STANDARD.01.017.D3</span>
<span id="spUDF3Field" style="display:none">
  <select id=dschusr3 name=dschusr3 title="%STANDARD.01.017.D3">
    <option></option>
    %PATWEB96.11.309.2
  </select>
</span>

<span id="spUDF4Label" style="display:none">%STANDARD.01.017.D4</span>
<span id="spUDF4Field" style="display:none">
  <select id=dschusr4 name=dschusr4 title="%STANDARD.01.017.D4">
    <option></option>
    %PATWEB96.11.310.2
  </select>
</span>

<span id="spUDF5Label" style="display:none">%STANDARD.01.017.D5</span>
<span id="spUDF5Field" style="display:none">
  <select id=dschusr5 name=dschusr5 title="%STANDARD.01.017.D5">
    <option></option>
    %PATWEB96.11.311.2
  </select>
</span>

<span id="spInformGP" style="display:none">
<table border=0 width=100% cellspacing=0 cellpadding=4>
<tr>
  <td class=DataLabel width=250>Inform GP</td>
  <td>
    <select name=ddlInformGP id=ddlInformGP title="Inform GP"
     onchange="ToggleInformGP(this);">
      <option value="0">No</option>
      <option value="1">Yes</option>
    </select>
  </td>
</tr>
<tr>
  <td class=DataLabel>Referring GP</td>
  <td class=DataField><div id="divRefGP">%PATWEB96.11.431.0</div></td>
</tr>
<tr>
  <td class=DataLabel>Fax Number</td>
  <td class=DataField><div id="divFaxNo">%PATWEB96.11.498.061</div></td>
</tr>
<tr>
  <td class=DataLabel>Printer</td>
  <td><div id="divFaxPrinter"></div></td>
</tr>
</table>
</span>

<span id="spFaxPrinter" style="display:none">
  <select name=ddlprntr id=ddlprntr title="Default Fax Printer"
   onchange="PrinterSelect(this);">
    <option> </option>
    %PATWEB96.11.859
  </select>
</span>
