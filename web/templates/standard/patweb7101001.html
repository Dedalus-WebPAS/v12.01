<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/patweb7101001.js"></script>
<script type="text/javascript">
function initSP() 
{
  if(document.ItemForm.showhead.value=="1") {
    ToggleHeader(HeaderExpandIcon);
  }

   var UpdateForm = document.forms['UpdateForm'];
   var ItemForm   = document.forms['ItemForm'];


   if (ItemForm.backdate.value == 1) 
   {
      document.getElementById('InvDateHeading').innerHTML
        = document.getElementById('InvDateHd').innerHTML;
      document.getElementById('InvDateOption').innerHTML 
        = document.getElementById('InvDate').innerHTML;
      setTimeout('document.ItemForm.invtodat.focus();',400);
   }
   else 
   {
      document.getElementById('InvDateHeading').innerHTML = "";
      document.getElementById('InvDateOption').innerHTML  = InvDateBlank.innerHTML;
   }

    if (UpdateForm.codingwr.value == "1") 
      alert("Warning: Coding is not yet completed");
   
    if ( ItemForm.ptcnplan.value == 1 ) 
    {
       UpdateForm.actncode.className = "";
       UpdateForm.initdate.className = "";
       UpdateForm.actncode.disabled  = true;
       UpdateForm.initdate.disabled  = true;
    }


   if (document.forms['PatientLinks'].superlev.value == "1") {
        if (UpdateForm.ecliindc.value==1) {
          RaiseClaimBDIV.innerHTML=RaiseClaimBSPAN.innerHTML;
        }
       return;
   }

   if (UpdateForm.prntflag.value == 1) 
   {
          UpdateForm.printbut.disabled  = true;
          UpdateForm.selprint.disabled  = true;
          UpdateForm.selprint.className = "Readonly";
          UpdateForm.nocopies.disabled  = true;
    }
    else
    {
        if (UpdateForm.ecliindc.value==1) {
          RaiseClaimBDIV.innerHTML=RaiseClaimBSPAN.innerHTML;
        }
    }

  if((document.getElementById('ptcnuabf').value == "1") &&
     (document.getElementById('abfindic').value.substr(4,1) == "A")) {
          ABFMTXDIV.innerHTML=ABFSPAN.innerHTML;
  } else {
          ABFMTXDIV.innerHTML=NONABFSPAN.innerHTML;
  }

  if (typeof DisplayDRG != "undefined" && DisplayDRG == true) {
      DRGVerDIV.innerHTML=DRGSPAN.innerHTML;
  } else {
      DRGVerDIV.innerHTML="";
  }

}

function DeleteItem(urnumber,admissno,transnum,chngdesc,chngamnt,patpor,rebpor) 
{
//alert(rebpor);
    if (rebpor==undefined) {
      linkURL="patweb71.pbl?reportno=1&template=009" +
              "&urnumber=" + urnumber.replace(/ /g,"+") +
              "&admissno=" + admissno.replace(/ /g,"+") +
              "&transnum=" + transnum.replace(/ /g,"+") +
              "&chngdesc=" + chngdesc.replace(/ /g,"+") +
              "&chngamnt=" + chngamnt.replace(/ /g,"+") +
              "&patamoun=" + patpor.replace(/ /g,"+");
    } else {
      linkURL="patweb71.pbl?reportno=1&template=009" +
              "&urnumber=" + urnumber.replace(/ /g,"+") +
              "&admissno=" + admissno.replace(/ /g,"+") +
              "&transnum=" + transnum.replace(/ /g,"+") +
              "&chngdesc=" + chngdesc.replace(/ /g,"+") +
              "&chngamnt=" + chngamnt.replace(/ /g,"+") +
              "&patamoun=" + patpor.replace(/ /g,"+") +
              "&rebamoun=" + rebpor.replace(/ /g,"+");
    }
    Left=(document.body.clientWidth-500)/2;
    DFrameLink(linkURL,90,Left,500,350);
}

function AnasTypeEnable() {
   if(document.ItemForm.anastype.value=="0" &&
      document.UpdateForm.ecliindc.value=="1") {
       document.UpdateForm.anatybut.style.visibility="visible";
       document.UpdateForm.anatybut.disabled=false;
   }
}

function Anaesthetic() {
    linkURL="patweb98.pbl?reportno=01&template=097" +
            "&urnumber=" + document.UpdateForm.urnumber.value.replace(/ /g,"+") +
            "&admissno=" + document.UpdateForm.admissno.value.replace(/ /g,"+");
    Left=(document.body.clientWidth,900)/2;
    DFrameLink(linkURL,250,Left,400,150);
}
</script>
</head>
<body onload="PageLoad(event);setTimeout('initSP();',350); AnasTypeEnable();">
%START.OF.PAGE
<span id=WaitBoxDisplay class=WaitBox style="display:none">
<img class=WaitImage src="../images/wait.gif">
<p>Processing, please wait..Do NOT Refresh the page or click the BACK button</p>
</span>
<div id=PageLayer class=DimmedLayer style="display:none"></div>

<div id=PatientHeading></div>
<script type="text/javascript">
  PatientURN="%PATWEB71.01.003";
  PatientVIS="%PATWEB71.01.081";
  PatientNAM="%PATWEB71.01.002";
  PatientSTA="%PATWEB71.01.086.078";
  PatientALT="%PATWEB71.01.084";
  PatientSEX="%PATWEB71.01.019";
  PatientDOB="%PATWEB71.01.020";
  PatientAGE="%PATWEB71.01.021";
  PatientLOC="%PATWEB71.01.083";
  PatientPRI="%PATWEB71.01.086.066.1";
  PatientUNT="%PATWEB71.01.066.0";
  DoctorCOD="%PATWEB71.01.082.003";
  DoctorNAM="%PATWEB71.01.082.002";
  PatientAID="%PATWEB71.01.086.090";
  PatientIND="%PATWEB71.01.086.091";
  PatientCUR="%PATWEB71.01.086.092";
  PatientCLC="%PATWEB71.01.086.093.1";
  PatientCLH="%STANDARD.01.017.CL";
  PatientHFT="%PATWEB71.01.086.094";
  PatientCDM="%PATWEB71.01.086.095";
  PatientVDH="%PATWEB71.01.086.099.015";
  InsertPatientHeader()

  ShowWaitScreen();
</script>

<div id="PatientMenu"></div>

<div id="PageBodySection">
 <form name=ItemForm action="patweb71.pbl" method=get style="margin:0">
  <input type=hidden name=reportno value="1">
  <input type=hidden name=template value=001>
  <input type=hidden name=updttype value=" ">
  <input type=hidden name=nextpage value="1">
  <input type=hidden name=dayofhos value="%PATWEB71.01.130">
  <input type=hidden name=backdate value="%PATWEB71.01.331">
  <input type=hidden name=theacomp value="%PATWEB71.01.715">
  <input type=hidden name=chngdate value="%PATWEB71.01.327">
  <input type=hidden name=urnumber value="%PATWEB71.01.003">
  <input type=hidden name=admissno value="%PATWEB71.01.081">
  <input type=hidden name=transnum value="%PATWEB71.01.323">
  <input type=hidden name=redirect value="%PATWEB71.01.001.patweb71.01.001">
  <input type=hidden name=ptcnplan value="%STANDARD.01.025.114.249.1.1">
  <input type=hidden name=showhead value="%PATWEB71.01.364">
  <input type=hidden name=invtotal value="">
  <input type=hidden name=pbalance value="">
  <input type=hidden name=anastype value="%STANDARD.01.025. 15.189.1.1">
  <input type=hidden name=prevtrid value="%PATWEB71.01.807">
  <input type=hidden name=ptcnppin id=ptcnppin
   value="%STANDARD.01.025.129.089.0.1">
  <input type=hidden name=ptcnuabf id=ptcnuabf
   value="%STANDARD.01.025.128.105.0.1">
  <input type="hidden" name=abfindic id=abfindic value="%PATWEB71.01.126.3">

  <table cellspacing=0 cellpadding=1 border=0 width=100%>
    <tr><td align=left>
            <div id=HeaderExpandIcon class='x-tool-left x-tool-expand' 
                 onclick='ToggleHeader(this)'></div>
            <input type=button value="Inv Pending" class="button"
                   name=invcpend id=invcpend 
                   onclick="InvPendRedir();" /> 
            <input type=button value="Certificates" class="button"
                   name=certbutt id=certbutt 
                   onclick="tempDisable(this);LinkCertificate();" />
            <input type=button value="ICDCoding" class="button"
                   name=icdcodebutt id=icdcodebutt 
                   onclick="tempDisable(this);LinkICDCoding();" />
            <input type=button value="Theatre Items" class="button"
                   name=theaitembutt id=theaitembutt 
                   onclick="tempDisable(this);LinkTheaItems();" /></td>

        <td align=right><div id=InvDateHeading></div></td>
        <td><div id=InvDateOption></div></td>
        <td>
          <table cellspacing=0 cellpadding=0 border=0 width=100%>
            <tr>
              <td align=right width=60%>
                Patient Balance Payable $
              </td>
              <td>
                <div id=PatientPayable></div>
              </td>
            </tr>
          </table>
        </td>
<!--
        <td>Patient Balance Payable PATWEB71.01.399</td>
 -->
   </tr>
    <tr id=InvIncomp>
      <td colspan=3></td>
      <td class=DataLabel align=center>
        <font color=red>Linked Documentation Incomplete</font>
      </td>
    </tr>

  </table>

  <div id=InvoiceHeader></div>

  <table cellspacing=0 cellpadding=1 border=0 width=100%>
    <tr><td align=center class=HeadingCell>
            Invoice from Date : %PATWEB71.01.302 to %PATWEB71.01.327</td>
        <td align=center class=HeadingCell align=right>%PATWEB71.01.334</td></tr>
  </table>

 </form>

 <form name=UpdateForm action="patweb71.pbl" method=post style="margin:0"
       onsubmit="return validateMandatory(this);">
  <input type=hidden name=reportno value=2>
  <input type=hidden name=template value=001>
  <input type=hidden name=nextpage value="6">
  <input type=hidden name=updttype value="">
  <input type=hidden name=chngdate value="%PATWEB71.01.327">
  <input type=hidden name=urnumber value="%PATWEB71.01.003">
  <input type=hidden name=admissno value="%PATWEB71.01.081">
  <input type=hidden name=ptcnicls value="%PATWEB71.01.361">
  <input type=hidden name=actnplan value="">
  <input type=hidden name=codingwr value="%PATWEB71.01.352">
  <input type=hidden name=upadmtyp value="0">
  <input type="hidden" name=redirect value="%PATWEB71.01.001.patweb98.01.001">
  <input type="hidden" name=ecliindc value="%PATWEB71.01.377">
  <input type="hidden" name=raclindc value="0">
  <input type=hidden name=prevtrid value="%PATWEB71.01.807">
  <input type="hidden" name=abfindic value="%PATWEB71.01.126.3">
  <input type=hidden name=amhevent value="%PATWEB71.01.811">
  <input type=hidden name=ptcnuabf id=ptcnuabf
   value="%STANDARD.01.025.128.105.0.1">

  <table border=1 cellspacing=0 cellpadding=2 width=100%>
         %PATWEB71.01.326
  </table>

  <input type=hidden name=prntflag value="%PATWEB71.01.328">
  <input type=hidden name=inviactv id=inviactv value="%PATWEB71.01.759">

  <table border=0 cellpadding=2 cellspacing=0 width=95% align=center>
    <tr><td class="DataLabel"><div id="ActionPlanDiv"></div></td>
        <td class="DataLabel" width="10%" align="right">Printer </td>
        <td align="center" width="10%" >
            <select name="selprint" class=Mandatory>
              %STANDARD.01.001.PATWEB71.02
            </select></td>
        <td class="DataLabel" align="center" width="5%">Copies </td>
        <td align="left" width="10%">
            <select name=nocopies>
              <option value=" 1">1</option>
              <option value=" 2">2</option>
              <option value=" 3">3</option>
              <option value=" 4">4</option>
              <option value=" 5">5</option>
              <option value=" 6">6</option>
              <option value=" 7">7</option>
              <option value=" 8">8</option>
              <option value=" 9">9</option>
              <option value=" 10">10</option>
            </select></td></tr>
    <tr><td class="DataLabel" colspan="5"><div id="CertMsgDiv"></div></td></tr>
    <tr><td align="center" colspan="5">
            <input type="button" value="Raise" class="button" name="printbut"
                   id="printbut"
                   onclick="RaiseInv();" />
            <div id="RaiseClaimBDIV" style="display: inline"></div>
            <input type="button" value="Add Items" class="button"
                   name=addbuttn id=addbuttn
                   onclick="tempDisable(this);AddItem();" />
          <input type="button" value="Billing Comments" 
                   name="comntbut" id="comntbut" class="Bigbutton" 
                   onclick="tempDisable(this);Comments();" />
          <input type="button" value="Insurance" name="insurbut" class="button" 
                   id="insurbut"
                   onclick="tempDisable(this);Insurance();" />
           <div id="DRGVerDIV" style="display: inline"></div>
           <div id="ABFMTXDIV" style="display: inline"></div>
          <input type="button" value="Invoice Comments" name="invcombut"
                   id="invcombut" class="Bigbutton" 
                   onclick="tempDisable(this);InvComments();" />
          <input type="button" value="%STANDARD.01.017.A " name="admtybut"
                   id="admtybut"
                   class="button" onclick="tempDisable(this);AdmissType();" />
          <input style="visibility:hidden;" type="button" 
                 value="Anaesthetic Type" name="anatybut" disabled
                   id="anatybut"
                   class="button" onclick="tempDisable(this);Anaesthetic();" />
          </td></tr>
  </table>
 </form>
</div>

<form name="PatientLinks" method="get">
 <input type="hidden" name="reportno" value="1">
 <input type="hidden" name="template" value="004">
 <input type="hidden" name="urnumber" value="%PATWEB71.01.003">
 <input type="hidden" name="admissno" value="%PATWEB71.01.081">
 <input type="hidden" name="MenuType" value="%PATWEB71.01.088">
 <input type="hidden" name="superlev" value="%PATWEB71.01.353">
</form>

<span id="ActionPlanSpan" style="display:none">
    <td class="DataLabel">Action Plan</td>
    <td><input type="checkbox" name="d_actionplan"
               onclick="setCheckedValue();" /></td>
    <td><select name="actncode" title="Action Code">
         <option selected></option>
          %PATWEB71.01.362
        </select></td>
    <td class="DataLabel">Initiate From Date</td>
    <td><input type="text" name="initdate" size="12" title="Initiate FromDate"
               class="FutureDate" value="%PATWEB71.01.327"
               onblur="checkDate(this,'Initiate FromDate');" />
        <img src="../images/DateTimeStamp.gif" border="0" hspace="4" 
             class=Icon
             align="absmiddle" 
             onclick="SetCurrentDateTime(UpdateForm.initdate,null);" />
        <img src="../images/DateLookup.gif" border="0" hspace="4"
             class=Icon
             align="absmiddle" 
             onclick="DateLookupFrame(UpdateForm.initdate);" /></td>
</span>

<span id=CertMsgSpan style="display:none">
    <font color=red>Please Check all Certificates have been completed.</font>
</span>

<span id=InvDateHd style="display:none">
    <td class=DataLabel>Invoice&nbsp;To&nbsp;Date</td>
</span>

<span id=InvDate style="display:none">
    <input type=text name=invtodat size=12 
         title='Invoice Date' class='Mandatory PastDate' 
         value="%PATWEB71.01.327" onblur="checkDate(this,'Invoice Date');">
        <img notab src=../images/DateTimeStamp.gif border=0 hspace=4 
         class=Icon
         align=absmiddle onclick="SetCurrentDateTime(ItemForm.invtodat,null);">
        <img src=../images/DateLookup.gif border=0 hspace=4
        class=Icon
        align=absmiddle onclick="DateLookupFrame(ItemForm.invtodat);">
    <input type=button value="Recalculate" class=smallbutton 
     name=recabutt id=recabutt
     onclick="tempDisable(this);DispInv()";>
</span>

<span id=InvDateBlank style="display:none">
   <input type=hidden name=chngdate value="%PATWEB71.01.327">
</span>

<span id="ShowInvoiceHeader" style="display:none">
 <table cellspacing="0" cellpadding="1" border="0" width="100%">
  <tr><td class="DataLabel" width="10%">Provisional Casemix Code</td>
      <td class="DataField" width="25%">&nbsp;
                %PATWEB71.01.198.0 - %PATWEB71.01.198.1 - %PATWEB71.01.388.0</td>
      <td class="DataLabel" width="10%">Prosthetic Complete Date</td>
      <td class="DataField" width="25%">&nbsp;</td>
      <td class="DataLabel" width="10%">&nbsp;%PATWEB71.01.720.0</td>
      <td class="DataField">&nbsp;%PATWEB71.01.720.1</td></tr>

  <tr><td class="DataLabel">Matrix Casemix Code</td>
      <td class="DataField">&nbsp;
                %PATWEB71.01.367.0 - %PATWEB71.01.367.1 - %PATWEB71.01.388.1</td>
      <td class="DataLabel">Program Code</td>
      <td class="DataField">%PATWEB71.01.369.0 %PATWEB71.01.369.1</td>
      <td class="DataLabel">&nbsp;%PATWEB71.01.719</td>
      <td class="DataField">&nbsp;%PATWEB71.01.716.0</td></tr>

  <tr><td class="DataLabel">Contract ID</td>
      <td class="DataField">&nbsp;%PATWEB71.01.368</td>
      <td class="DataLabel">Coding Complete Date</td>
      <td class="DataField">&nbsp;%PATWEB71.01.370</td>
      <td class="DataLabel">&nbsp;%PATWEB71.01.760.1</td>
      <td class="DataField">&nbsp;%PATWEB71.01.761.0</td></tr>

  <tr><td class="DataLabel">%PATWEB71.01.371.2</td>
      <td class="DataField">%PATWEB71.01.371.1</td>
      <td class="DataLabel">%PATWEB71.01.397</td>
      <td class="DataField">%PATWEB71.01.398</td>
      <td class="DataLabel">&nbsp;</td>
      <td class="DataField">&nbsp;%PATWEB71.01.761.1</td>
  </tr>
 </table>

 <table cellspacing="0" cellpadding="1" border="0" width="100%">
  <tr><td class="DataLabel" width="10%">PRFA</td>
      <td class="DataField" width="25%">&nbsp;%PATWEB71.01.804</td>
      <td class="DataLabel" width="10%">%PATWEB71.01.805.1</td>
      <td class="DataField" width="25%">%PATWEB71.01.805.2</td>
      <td class="DataLabel" width=10%>&nbsp;%PATWEB71.01.760.2</td>
      <td class="DataField">&nbsp;%PATWEB71.01.761.2</td>
  </tr>
  <tr><td class="DataLabel" width="10%">&nbsp;%PATWEB71.01.806.1</td>
      <td class="DataField">&nbsp;%PATWEB71.01.806.2</td>
      <td class="DataLabel" width="10%">&nbsp;</td>
      <td class="DataField">&nbsp;</td>
      <td class="DataLabel" width=10%>&nbsp;%PATWEB71.01.760.3</td>
      <td class="DataField">&nbsp;%PATWEB71.01.761.3</td>
  </tr>
  <tr><td class="DataLabel" width="10%">&nbsp;</td>
      <td class="DataField">&nbsp;</td>
      <td class="DataLabel" width="10%">&nbsp;</td>
      <td class="DataField">&nbsp;</td>
      <td class="DataLabel" width=10%>&nbsp;%PATWEB71.01.760.4</td>
      <td class="DataField">&nbsp;%PATWEB71.01.761.4</td>
  </tr>
  </table>

</span>

<span id=RaiseClaimBSPAN style="display:none">
    <input type=button value="Raise and Claim" class="button" name=printbec
     id=printbec
     onclick='document.UpdateForm.raclindc.value="1";RaiseInv();'>
</span>

<span id=ABFSPAN style="display:none">
    <input type="button" value="ABF Details" name="abfbutton" class="button"
                  id="abfbutton"
                  onclick="tempDisable(this);ABFDetail();" />
</span>

<span id=NONABFSPAN style="display:none">
          <input type="button" value="Stepdown" name="stepdbut" class="button"
                   id="stepdbut"
                   onclick="tempDisable(this);Stepdown();" />
</span>

<span id=DRGSPAN style="display:none">
    <input type="button" value="DRG Versions" name="drgbutton" class="button"
                  id="drgbutton"
                  onclick="tempDisable(this);DRGVersion();" />
</span>

<script type="text/javascript">

  HideWaitScreen();

// set the invoice total to the hidden field output from patcatbi to save 
// recalculating the invoice all over again

  if (document.UpdateForm.pcbibalp != undefined ) {
   document.ItemForm.invtotal.value=document.UpdateForm.pcbibalp.value;
  }

  if (document.UpdateForm.ppayable != undefined ) {
   document.ItemForm.pbalance.value=
       parseFloat(document.UpdateForm.ppayable.value);
  }

  if (checkNumber(document.ItemForm.pbalance.value)) {
    RoundNumber(document.ItemForm.pbalance,2);
  }
  if (document.ItemForm.pbalance.value==0) {
    PatientPayable.innerHTML=document.ItemForm.pbalance.value;
  } else {
    PatientPayable.innerHTML="<font color=red>" + document.ItemForm.pbalance.value + "</font>";
  }

Anastype="%STANDARD.01.025. 15.189.1.1";
Ecliindc="%PATWEB71.01.377";
AnasCode="%PATWEB71.01.756";
   if(Anastype=="0" &&
      Ecliindc=="1") {
     if(!isWhitespace(AnasCode)) {
       document.UpdateForm.anatybut.className="RedButton";
     }
   }

  var CmntIndic = "%PATWEB71.01.803";
  if ( CmntIndic =="1" ) {
     document.UpdateForm.comntbut.className="BigRedButton";
  }

  var CertIndc = "%PATWEB71.01.354"
  if ( CertIndc == "1") {
    document.getElementById('CertMsgDiv').innerHTML = document.getElementById('CertMsgSpan').innerHTML;
  }

  var ActPlan = "%STANDARD.01.025.114.249.1.1"
  if ( ActPlan == "1") {
    document.getElementById('ActionPlanDiv').innerHTML = document.getElementById('ActionPlanSpan').innerHTML;
  } else {
    document.getElementById('ActionPlanDiv').innerHTML = "";
  }

  var Certificates = "%PATWEB71.01.363";
  if ( Certificates =="1" ) {
     document.ItemForm.certbutt.className="RedButton";
  }

  var ICDCoding = "%PATWEB71.01.395";
  if ( ICDCoding =="1" ) {
     document.ItemForm.icdcodebutt.className="RedButton";
  }

  var TheaItem = "%PATWEB71.01.396";
  if ( TheaItem =="1" ) {
     document.ItemForm.theaitembutt.className="RedButton";
  }
  var InvCom= "%PATWEB71.01.605";
  if ( InvCom=="1" ) {
     document.UpdateForm.invcombut.className="RedButton";
  }

  document.getElementById('InvIncomp').style.display = "none";
  if (PatientLinks.superlev.value != "1") {
    if (UpdateForm.inviactv.value == "1") {
      UpdateForm.printbut.disabled = true;
      document.getElementById('InvIncomp').style.display = "";
      if (document.getElementById('printbec') != undefined) {
        document.getElementById('printbec').disabled = true;
      }
    }
  }

function ABFDetail() {
  if (UpdateForm.amhevent.value==1) {
    LinkURL="patweb71.pbl?reportno=01&template=027&urnumber=" +
             document.UpdateForm.urnumber.value.replace(/ /g,"+") +
            "&admissno=" +
             document.UpdateForm.admissno.value.replace(/ /g,"+")
  } else {
    LinkURL="patweb71.pbl?reportno=01&template=012&urnumber=" +
             document.UpdateForm.urnumber.value.replace(/ /g,"+") +
            "&admissno=" +
             document.UpdateForm.admissno.value.replace(/ /g,"+")
  }
    Left=(document.body.clientWidth-980)/2;
    DFrameLink(LinkURL,70,Left,980,650);
}

function DRGVersion() {
    LinkURL="patweb76.pbl?reportno=01&template=029&urnumber=" +
             document.UpdateForm.urnumber.value.replace(/ /g,"+") +
            "&admissno=" +
             document.UpdateForm.admissno.value.replace(/ /g,"+")
    Left=(document.body.clientWidth-600)/2;
    DFrameLink(LinkURL,70,Left,600,350);
}

</script>

