<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome"    content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"    content="true">
<script type="text/javascript" src="../js/EmrMandatory.js"> </script>
<script type="text/javascript" src="../js/AutoPostCode.js"> </script>
<script type="text/javascript" src="../js/patweb8901013.js"> </script>
<script type="text/javascript" src="../js/AddressSearch.js"></script>

<!--WORKERS COMP-->
<style type=text/css>
#SelectHeading{
position: absolute;
visibility: hidden;
top: 120px;
left: 320px;
height: 20px;
width: 350px;
overflow: none;
}
#SelectLocation{
position: absolute;
visibility: hidden;
top: 140px;
left: 320px;
height: 150px;
width: 350px;
overflow: auto;
}
</style>

<script type="text/javascript">

function setInsurance() {
  document.getElementById('InsuranceDIV').innerHTML=
                document.getElementById('InsuranceSPAN1').innerHTML;
  if (InsuranceKeywordSearch){
    document.getElementById('InsuranceDIV').innerHTML=
                document.getElementById('InsuranceSPAN2').innerHTML;
  }
}

function SetPostVars() {
  suburb = document.UpdateForm.ptclm004;
  state = document.UpdateForm.ptclm028;
  postcode = document.UpdateForm.ptclm005;
}

function GetEmployer() {
  if(!isWhitespace(UpdateForm.ptclm083.value)){
    var serverURL="../cgi-bin/mehweb01.pbl?reportno=13" +
                  "&srefcode=E" +
                  "&valdtype=1" +
                  "&valdcode=" + UpdateForm.ptclm083.value.replace(/ /g,"+")

    var returnValue = RSExecute(serverURL);
    if (returnValue.status==0) {
      ReturnValue=returnValue.return_value.split("|")
      document.UpdateForm.ptclm001.value=trim(ReturnValue[0]);
      document.UpdateForm.ptclm002.value=trim(ReturnValue[1]);
      document.UpdateForm.ptclm003.value=trim(ReturnValue[2]);
      document.UpdateForm.ptclm004.value=trim(ReturnValue[3]);
      document.UpdateForm.ptclm028.value=trim(ReturnValue[4]);
      document.UpdateForm.ptclm005.value=trim(ReturnValue[5]);
      document.UpdateForm.ptclm006.value=trim(ReturnValue[6]);
      document.UpdateForm.ptclm034.value=trim(ReturnValue[7]);
    }
  }
}

//
// Functions called from AddressSearch.js
//
function InitAddressSearch() {
  // line 1 - 'ptclm002'
  // line 2 - 'ptclm003'
  // suburb - 'ptclm004'
  // state - 'ptclm028'
  // postcode - 'ptclm005'

  InitAddressSearchFields('trAddrSrch','ptclm002','ptclm003','ptclm004','ptclm028','ptclm005');
}
function ShowAddressSearch() {
  OpenAddressSearch('1',PopulateAddress,ClearSearchAddress);
}
function PopulateAddress(StreetLine, Suburb, State, Postcode) {
  LookupSuburb(Postcode);  // validate Postcode with our Lookup values
  if (SelectPC.length == 0) return;  // no match found

  LookupPostCode(Suburb);  // validate Suburb
  if (SelectPC.length == 0) return;  // no match found

  ToggleFieldReadOnly('ptclm002', true);
  ToggleFieldReadOnly('ptclm003', false);
  ToggleFieldReadOnly('ptclm004', true);
  ToggleFieldReadOnly('ptclm028', true);
  ToggleFieldReadOnly('ptclm005', true);

  SetFieldValue('ptclm002',StreetLine);
  SetFieldValue('ptclm003','');
  SetFieldValue('ptclm004',Suburb);
  SetFieldValue('ptclm028',State);
  SetFieldValue('ptclm005',Postcode);
}
function ClearSearchAddress() {
  ToggleFieldReadOnly('ptclm002', false);
  ToggleFieldReadOnly('ptclm003', false);
  ToggleFieldReadOnly('ptclm004', false);
  ToggleFieldReadOnly('ptclm028', false);
  ToggleFieldReadOnly('ptclm005', false);

  SetFieldValue('ptclm002','');
  SetFieldValue('ptclm003','');
  SetFieldValue('ptclm004','');
  SetFieldValue('ptclm028','');
  SetFieldValue('ptclm005','');
}
</script>

</head>
%START.OF.PAGE
<body onLoad="PageLoad(event);InitPostCodes();SetPostVars();
              InitAddressSearch();setInsurance();">
<div id=PageHeadingSection>
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB89.01.003";
PatientVIS="%PATWEB89.01.081";
PatientNAM="%PATWEB89.01.002";
PatientSTA="%PATWEB89.01.086.078";
PatientALT="%PATWEB89.01.084";
PatientSEX="%PATWEB89.01.019";
PatientDOB="%PATWEB89.01.020";
PatientAGE="%PATWEB89.01.021";
PatientLOC="%PATWEB89.01.083";
PatientPRI="%PATWEB89.01.086.066.1";
PatientUNT="%PATWEB89.01.066.0";
DoctorCOD="%PATWEB89.01.082.003";
DoctorNAM="%PATWEB89.01.082.002";
PatientAID="%PATWEB89.01.086.090";
PatientIND="%PATWEB89.01.086.091";
PatientCUR="%PATWEB89.01.086.092";
PatientCLC="%PATWEB89.01.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB89.01.086.094";
PatientCDM="%PATWEB89.01.086.095";
PatientVDH="%PATWEB89.01.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
</div>
<div id=PageBodySection>
<form name=UpdateForm action="emrweb02.pbl" method=post style="margin:0">
<input type=hidden name=reportno value="01">
<input type=hidden name=template value="013">
<input type=hidden name=updttype value="REGIS">
<input type=hidden name=formactn>
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name=emvis118 value="%PATWEB89.01.003">
<input type=hidden name=admissno value="%PATWEB89.01.081">
<input type=hidden name=admcltyp value="%PATWEB89.01.915.3">
<input type=hidden name=updateky value="%PATWEB89.01.467">
<input type=hidden name=chckname>
<input type=hidden name=nextpage value=12>
<input type=hidden name=accepted>
<input type=hidden name=cinjure>
<input type=hidden name=injcode>
<input type=hidden name=dummy value="">
<input type=hidden name=dummy1 value="">
<input type=hidden name=showflag value="%PATWEB89.01.939">
<input type=hidden name=funddesc value="%PATWEB89.01.040.1">
<input type=hidden name=dontchec value=1>
<input type=hidden name=pmpxi006 value="%PATWEB89.01.806">
<input type=hidden name=pmpxi009 value="%PATWEB89.01.809">
<input type=hidden name=pmpxi012 value="%PATWEB89.01.812.0">
<input type=hidden name=pmpxi015 value="%PATWEB89.01.815">
<input type=hidden name=pmpxi036 value="">
<input type=hidden name=pmpxi037 value="%PATWEB89.01.837">
<input type=hidden name=pmpxi052 value="">
<input type=hidden name=pmpxi053 value="%PATWEB89.01.853">
<input type=hidden name=pmpxi067 value="%PATWEB89.01.867.0">
<input type=hidden name=pmpxi068 value="%PATWEB89.01.868.0">
<input type=hidden name=regiflag value="%PATWEB89.01.953">
<input type=hidden name=orgntype id=orgntype value="E">
<input type=hidden name=ptcnnewc value="%STANDARD.01.025.118.138.0.1">
<input type=hidden name=redirect value="%PATWEB89.01.001.patweb89.01.014">
<input type=hidden name=claimtyp value="W">
<input type=hidden name=ptcnuadv id=ptcnuadv
 value="%STANDARD.01.025.123.247.0.1">

<table border=1 width=100% cellspacing=1 cellpadding=1> 
<tr><td class=HeadingCell align=center>
    Workers Compensation Claim Details</td>
</tr>

<tr><td>
    <table width=100% border=0>
    <tr><td class=DataLabel>Employer Code</td>
        <td><input type="text" size="6" maxlength="6" name=ptclm083 id=ptclm083 
             title="Employer Code" value="%PATWEB89.01.386.0"
             onchange="GetEmployer();" >
            <img src="../images/SearchIcon.gif" class=Icon
             onclick="ExOrgEmployerSearchFrame(ptclm083,ptclm001,orgntype,
                                               ptclm002,ptclm003,ptclm004,
                                               ptclm028,ptclm005,ptclm006,
                                               ptclm034);">
            <img src="../images/ClearIcon.gif" class=Icon
             onclick="clrFields(ptclm083);">
        </td>
    </tr>

    <tr><td class=DataLabel>Employer<br></td>
        <td><input type="text" size="42" maxlength="30" tabindex=1
             name=ptclm001 id=ptclm001 title="Employer"
             value="%PATWEB89.01.301">
        </td>
        <td class=DataLabel>Date of Accident</td>
        <td><input type="text" size="12" maxlength="25" tabindex=10
             name=ptclm007 id=ptclm007 value="%PATWEB89.01.307"
             title="Accident Date" class="PastDate"
             onblur="checkDate(this,'Accident Date')">
            <img src=../images/DateLookup.gif class=Icon
             onclick="DateLookupFrame(ptclm007);">
        </td>
    </tr>

    <tr id=trAddrSrch style="display:none">
        <td class=DataLabel nowrap>Search Address</td>
        <td><input type=text readonly size=42 tabindex="-1"
             style="cursor:pointer;text-align:center;"
             value="Click here to search for an address"
             title="Click here to search for an address"
             onclick="ShowAddressSearch();">
        </td>
    </tr>

    <tr valign=top>
        <td class=DataLabel>Address</td>
        <td><input type="text" size="42" maxlength="35" tabindex=2
             name=ptclm002 id=ptclm002 value="%PATWEB89.01.302"
             title="Address Line 1" onchange="UpCase(this);">
        </td>
        <td> Accident Location </td>
        <td><input type="text" size="35" maxlength="30" tabindex=11 
             name=ptclm032 id=ptclm032 value="%PATWEB89.01.335"
             title="Accident Location">
        </td>
    </tr>

    <tr valign=middle><td class=DataLabel></td>
        <td><input type="text" size="42" maxlength="35" tabindex=3
             name=ptclm003 id=ptclm003 value="%PATWEB89.01.303"
             title="Address Line 2" onchange="UpCase(this);">
        </td>
        <td class=DataLabel>Insurance</td>
        <td><div id="InsuranceDIV"></div></td>
    </tr>

    <tr><td class=DataLabel>Suburb</td>
        <td><input type="text" size="42" maxlength="35" tabindex=4
             name=ptclm004 id=ptclm004 value="%PATWEB89.01.304" title="Suburb"
             onchange="LookupPostCode(this.value);">
        </td>
        <td class=DataLabel>Insurance Claim No.<br>
        <td><input type="text" size=25 maxlength=20 tabindex=13 
             name=ptclm010 id=ptclm010 value="%PATWEB89.01.310"
             title="Insurance Claim Number">
            <img src="../images/SearchIcon.gif" class=Icon
             onclick="lookUpWC();">
        </td>
    </tr>

    <tr><td class=DataLabel>State</td>
        <td><input type="text" size="42" maxlength="35" tabindex=5
             name=ptclm028 id=ptclm028 value="%PATWEB89.01.328" title="State">
             Post Code
             <input type="text" size="8" maxlength="8" tabindex=6
              name=ptclm005 id=ptclm005 value="%PATWEB89.01.305"
              title="Post Code"
              onchange="LookupSuburb(this.value);">
        </td>
        <td class=DataLabel>Claim Accepted Insurance</td>
        <td><select name=ptclm008 id=ptclm008 tabindex=14
             title="Claim Accepted Insurance">
              <option> </option>
              %PATWEB89.01.308.2
            </select>
        </td>
    </tr>

    <tr><td valign="bottom" class=DataLabel>Employer Phone
        <td><input type="text" size="20" maxlength="20" tabindex=7
             name=ptclm006 id=ptclm006 value="%PATWEB89.01.306"
             title="Employer Phone Number">
        </td>
        <td> Contact Name </td>
        <td><input type="text" size='45' maxlength="40" tabindex=15 
             name=ptclm034 id=ptclm034 value="%PATWEB89.01.332"
             title="Contact Name">
        </td>
    </tr>

    <tr><td> Cause of Injury </td>
        <td><select name=ptclm031 id=ptclm031 tabindex=8
             title="Cause of Injury">
              <option></option>
              %PATWEB89.01.333.2
            </select>
        </td>
        <td> Injury Code </td>
        <td><select name=ptclm033 id=ptclm033 tabindex=16 title="Injury Code">
              <option></option>
              %PATWEB89.01.334.2
            </select>
        </td>
    </tr>
    </table>
</td></tr>

<tr><td colspan=4 align=center>
      <input type=button value="Update" id="pat89sub"
       onclick="tempDisable(this);setFormactn()" class="button" tabindex=30>
      <input type=button value="Cancel" onclick="SetCancel()" class="button"
       tabindex=31>
</td></tr>
</table>

</form>

<div id=SelectHeading></div>
<div id=SelectLocation></div>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=regexstm value=102>
<input type=hidden name=newstand value=1>
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name=admissno value="%PATWEB89.01.081">
<input type=hidden name=MenuType value="%PATWEB89.01.088">
</form>

<span id="InsuranceSPAN1" style="display:none">
  <select name="ptclm009" id="ptclm009" tabindex=10 title="Insurance">
              <option> </option>
              %PATWEB89.01.309.2
  </select>
</span>

<span id="InsuranceSPAN2" style="display:none">
  <input type="text" size="6" name="ptclm009" id="ptclm009" tabindex=10
      value="%PATWEB89.01.309.0" title="Insurance">

  <input type="text" size="35" name="d_ptclm009" id="d_ptclm009"
         maxlength="30" value="%PATWEB89.01.309.1"
      title="Insurance">
    <img src="../images/SearchIcon.gif" class=Icon
        onclick="InsuranceSearchFrame(ptclm009,d_ptclm009);">
        <img src="../images/ClearIcon.gif" class=Icon
                onclick="clrFields(ptclm009,d_ptclm009);">
</span>

<script type="text/javascript">
  PmiPatientFolder="%PATWEB89.01.879.3"
  PTCNCOMF="%STANDARD.01.025.110.243.0.1"
  if(PmiPatientFolder.substr(3,1) != "3" && PTCNCOMF=="2"){
    alert("Patient folder conflict - " +
          "Patient folder details will be updated.");
  }
  if (document.UpdateForm.ptcnnewc.value == '1') {
    document.UpdateForm.redirect.value="%PATWEB89.01.001.patweb07.06.004";
  }
  if(document.UpdateForm.showflag.value=="1") {
     document.UpdateForm.redirect.value+="&showflag=1";
  }
  if("%PATWEB89.01.836" == "Yes") {
   document.UpdateForm.pmpxi036.value=1;
  }
  if("%PATWEB89.01.852" == "Yes") {
    document.UpdateForm.pmpxi052.value=1;
  }
  claimindic=document.UpdateForm.admcltyp.value.substr(29,1);
  if (claimindic=="W" ) {
     document.UpdateForm.ptclm083.className="Mandatory";
  }
</script>
