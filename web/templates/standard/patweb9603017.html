<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/admission.js"></script>
<style type=text/css> 
TransferOption {
position: relative; 
}
</style>

<script type="text/javascript">
function setTranAdm(){
if (admitdate==pat96cmb.trandate.value){
  if(pat96cmb.ptcnchsd.value==1){
       ans=confirm("Do you want to change the Transfer Admission Record?")
       if (ans){
         pat96cmb.ctadmvar.value="1"
         pat96cmb.trantime.value=admittime
      }
   }
 }
}
function SubmitFin() {
if(admitdate==pat96cmb.trandate.value){
   if(admittime>pat96cmb.trantime.value){
    alert("Change time cannot be before admission time ("+admittime+")");
    return;
   }
 }
if(admitstat.substr(0,10)=="Discharged"){
if(disdate==pat96cmb.trandate.value){
   if(distime<=pat96cmb.trantime.value){
    alert("Change time cannot be after discharge time ("+distime+")");
    return;
   }
  }
if(disdate<pat96cmb.trandate.value){
    alert("Change date cannot be after discharge date");
    return;
   }

 }
    if(pat96cmb.offdutyb!=undefined){
      if(pat96cmb.offdutyb.checked==true){
        alert("Error: Claim Type invalid for 'Off Duty' personnel.")
        return;
      }
    }

    if(pat96cmb.finanelc.value.substr(3,1)=="P"&&pat96cmb.dvacardc.value=="1"){
      if(!confirm("\t\tPublic patient with DVA details.\n" +
                  "Select Ok to continue," +
                  " select Cancel to return to page and change Claim " +
                  " Type.")){
        return;
      }
    }
    if(pat96cmb.visatype.value.substr(3,1)=="N"){
      if(!isWhitespace(pat96cmb.finanelc.value)){
      ind=pat96cmb.finanelc.value.substr(3,1)
        if(ind!="1"&&ind!="E"&&ind!="G"){
          alert("Claim Type must be overseas");
          return;
        }
      }
    }

  if (validateMandatory(pat96cmb)) {
     setRedir();
     SubmitHidden(pat96cmb);
  }
}
function CancelFin() {
  ReturnPath=GetCookieData('InvoiceReturn');
  if (!isWhitespace(ReturnPath) && ReturnPath!='unknown') {
    document.cookie="InvoiceReturn=;"   // clear cookie
    location.href=ReturnPath;           // return to raise invoice screen
  }
  else {
    PatientLinkTo('patweb96.pbl',3,13,0);
  }
}
function setRedir() {
  checkComp=document.pat96cmb.finanelc.value.substr(3,1);
  if (checkComp=="D") {
     document.pat96cmb.redirect.value="patweb71.pbl?reportno=01&template=039"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value.replace(/ /g,"+")
  } else  if (checkComp=="A") {
     document.pat96cmb.redirect.value="patweb71.pbl?reportno=01&template=040"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value.replace(/ /g,"+")
  } else  if (checkComp=="O") {
     document.pat96cmb.redirect.value="patweb71.pbl?reportno=01&template=041"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value.replace(/ /g,"+")
  } else  if (checkComp=="M") {
     document.pat96cmb.redirect.value="patweb71.pbl?reportno=01&template=042"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value.replace(/ /g,"+")
  } else  if (checkComp=="F") {
     document.pat96cmb.redirect.value="patweb71.pbl?reportno=01&template=043"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value.replace(/ /g,"+")
  } else  if (checkComp=="H") {
     document.pat96cmb.redirect.value="patweb71.pbl?reportno=01&template=044"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value.replace(/ /g,"+")
  } else  if (checkComp=="S") {
     document.pat96cmb.redirect.value="patweb71.pbl?reportno=01&template=045"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value.replace(/ /g,"+")
  } else  if (checkComp=="V") {
     document.pat96cmb.redirect.value="patweb71.pbl?reportno=01&template=046"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value.replace(/ /g,"+")
  } else  if (checkComp=="W") {
     document.pat96cmb.redirect.value="patweb71.pbl?reportno=01&template=047"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value.replace(/ /g,"+")
  } else  if (checkComp=="E") {
     document.pat96cmb.redirect.value="patweb89.pbl?reportno=12&template=004"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value.replace(/ /g,"+")
  } else  if (checkComp=="G") {
     document.pat96cmb.redirect.value="patweb89.pbl?reportno=12&template=008"
     + "&urnumber=" + document.PatientLinks.urnumber.value.replace(/ /g,"+")
     + "&admissno=" + document.PatientLinks.admissno.value.replace(/ /g,"+")
  }
}
function showFundingSource() {
    i=document.pat96cmb.finanelc.selectedIndex;
    ind=document.pat96cmb.finanelc.options[i].value.substring(3,4)
    if (ind=="A") {
      FundingHeading.innerHTML=offdutyhd.innerHTML;
      FundingId.innerHTML=offdutyid.innerHTML;
    } else {
      if (ind=="P") {
        FundingHeading.innerHTML=fundinghd.innerHTML;
        FundingId.innerHTML=fundingid.innerHTML;
        document.pat96cmb.ptvis131.className="Mandatory";
      } else {    
        FundingHeading.innerHTML=blanklabel.innerHTML;
        FundingId.innerHTML=blanklabel.innerHTML;
      } 
    } 
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);showFundingSource();">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB96.03.003";
PatientVIS="%PATWEB96.03.081";
PatientNAM="%PATWEB96.03.002";
PatientSTA="%PATWEB96.03.086.078";
PatientALT="%PATWEB96.03.084";
PatientSEX="%PATWEB96.03.019";
PatientDOB="%PATWEB96.03.020";
PatientAGE="%PATWEB96.03.021";
PatientLOC="%PATWEB96.03.083";
PatientPRI="%PATWEB96.03.086.066.1";
PatientUNT="%PATWEB96.03.066.0";
DoctorCOD="%PATWEB96.03.082.003";
DoctorNAM="%PATWEB96.03.082.002";
PatientAID="%PATWEB96.03.086.090";
PatientIND="%PATWEB96.03.086.091";
PatientCUR="%PATWEB96.03.086.092";
PatientCLC="%PATWEB96.03.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB96.03.086.094";
PatientCDM="%PATWEB96.03.086.095";
PatientVDH="%PATWEB96.03.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>
<form name=pat96cmb style="margin:0" %PATWEB96.03.201.001
    <input type=hidden name=reportno value="9">
    <input type=hidden name=urnumber value="%PATWEB96.03.003">
    <input type=hidden name=admissno value="%PATWEB96.03.081">
    <input type=hidden name=redirect value="%PATWEB96.03.001.patweb96.03.004">
    <input type=hidden name=nextpage value="7">
    <input type=hidden name=trnleave value="0">
    <input type=hidden name=bedstat1>
    <input type=hidden name=warddesc >
    <input type=hidden name=formactn >
    <input type=hidden name=ctadmvar value="0">
    <input type=hidden name=ptcnchsd value="%PATWEB96.03.226">
    <input type=hidden name=ptcnxcom value="%STANDARD.01.025.116.222.0.1">
    <input type=hidden name=dvacardc value="%PATWEB96.03.240">
    <input type=hidden name=visatype value="%PATWEB96.03.239.3">

<table border=1 width=100% cellspacing=0 cellpadding=1 >
    <tr><td class=HeadingCell align=center colspan=2 width=100%>
        Patient Status Adjustment</td></tr>
</table>

<table border=0 width=100% cellspacing=1>
  <tr><td class=HeadingCell align=center colspan=2>Current Status</td>
      <td align=center class=HeadingCell colspan=2>Change Claim Type</td></tr>

   <tr><td class=DataLabel>Ward / Bed </td>      
       <td><input type=text size=25 readonly value="%PATWEB96.03.105.0">
           <input type=text size=15 readonly value="%PATWEB96.03.106"></td>

       <td class=DataLabel>%STANDARD.01.017.CL</td>
       <td><table cellspacing=0 cellpadding=0>
        <td><select name=finanelc class="Mandatory" title="%STANDARD.01.017.CL"
             onchange="showFundingSource();">
        <option></option>
        %PATWEB96.03.126.2
        </select>
             <td><div id=FundingHeading></div></td>
             <td><div id=FundingId></div></td>
        </td></table>
        </td></tr>

   <tr><td class=DataLabel>Transfer In Date & Time </td>
       <td><input type=text size=11 readonly value="%PATWEB96.03.204" >
       <input type=text size=5 readonly value="%PATWEB96.03.205"></td>

     <td class=DataLabel>Date/Time of Change </td>
     <td><select name=trandate class=Mandatory title="date of change"
         onchange="setTranAdm()">
      %PATWEB96.03.213
     </select>
     <input type=text size=8 name=trantime class=Mandatory
      title="Time of Change" value="%STANDARD.01.016">
     <img src="../images/DateTimeStamp.gif" class=Icon
      onclick="SetCurrentDateTime(null,pat96cmb.trantime);">
     <img src="../images/TimeLookup.gif" class=Icon
      onclick="TimeLookupFrame(pat96cmb.trantime);"></td></tr>

   <tr><td class=DataLabel>Attending Doctor</td>
       <td><input type=text size=35 readonly value="%PATWEB96.03.108.002">
           </td>
       <td class=DataLabel><div id=Contrac2Heading></div></td>
       <td><div id=ContractId></div></td>
           </tr>

   <tr><td class=DataLabel>%STANDARD.01.017.A </td>
        <td><input type=text readonly size=30 
            value="%PATWEB96.03.111.0"> </td>
            <td class=DataLabel><div id=ContractHeading></div></td>
            <td><div id=ContractType></div></td>
            </tr>

   <tr><td class=DataLabel>%STANDARD.01.017.CC</td>
       <td><input type=text readonly size=30 
           value="%PATWEB96.03.113.0"></td>
          <td class=DataLabel><div id=Contrac1Heading></div></td>
          <td><div id=ContractRole></div></td>
          </tr>

   <tr><td class=DataLabel>%STANDARD.01.017.AC</td>
       <td><input type=text readonly size=30 
           value="%PATWEB96.03.124.0"></td>
         <td align=center colspan=2>
         <input type=button name=formactn value=Update class="button"
         id='updatebutton' onClick="tempDisable(this);SubmitFin();">
         <input type=button value=Cancel class="button"
         onclick="CancelFin();"></td></tr>

    <tr><td class=DataLabel>%STANDARD.01.017.CL</td>
        <td><input type=text value="%PATWEB96.03.126.0"></td></tr>

     <tr><td class=DataLabel>Health Fund</td>
         <input type="hidden" value="%PATWEB96.03.114.0">
         <td class=DataLabel colspan=2>
         <input type=text size=35 name="funddesc" maxlength="30"
          value="%PATWEB96.03.114.1"> </td></tr>
         <tr><td>Table</td>
             <td><input type="hidden" value="%PATWEB96.03.115.0">
                 <input type="text" size=20 maxlength=30 name="tabldesc"
                  value="%PATWEB96.03.115.1"></td></tr>

</table>
</form>

</div>

<script type="text/javascript">
  admitdate="%PATWEB96.03.217"
  admittime="%PATWEB96.03.103"
  disdate="%PATWEB96.03.218"
  distime="%PATWEB96.03.302"
  admitstat="%PATWEB96.03.104"
  if(admitstat.substr(0,10)=="Discharged"){
     pat96cmb.redirect.value="%PATWEB96.03.001.patweb96.03.013"
  }
</script>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%PATWEB96.03.003">
<input type=hidden name=admissno value="%PATWEB96.03.081">
<input type=hidden name=MenuType value="%PATWEB96.03.088">
<input type=hidden name=alert001 value="">
</form>

<span id=fundinghd style="display:none">
Funding Source
</span>

<span id=fundingid style="display:none">
  <select name=ptvis131 title="%STANDARD.01.017.cx"
          tabindex=-1>
          <option> </option>
             %PATWEB96.03.698.053.2
         </select>
</span>
<span id=offdutyhd style="display:none">
 Off Duty
</span>

<span id=offdutyid style="display:none">
 <input type="checkbox" name="offdutyb" value="0">
</span>

<span id=blanklabel style="display:none">&nbsp;</span>
