<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">

function MergePatients() {
if(validateMandatory(UpdateForm)) {
 ans=true
 if (UpdateForm.urnumbe1.value==UpdateForm.urnumbe2.value) {
   alert("Both U/R Number are the same.")
   return }

 if (UpdateForm.fna1.value!=UpdateForm.fna2.value) {
 ans=confirm("Warning Both Names are NOT the same.\n\n Ok to Proceed ?")
 if (!ans) { return } }

 if (UpdateForm.age1.value!=UpdateForm.age2.value) {
 ans=confirm("Warning Both Date of Birth are NOT the same. \n\n Ok to Proceed?")
 if (!ans) { return } }

 if (UpdateForm.sex1.value!=UpdateForm.sex2.value) {
   ans=confirm("Warning Both Sexes are NOT the same. \n\n Ok to Proceed ?")
   if (!ans) { return } }


 AlertString="U/R Number " + UpdateForm.urnumbe1.value +
             " will be replaced with " + UpdateForm.urnumbe2.value +
             "\n\n                   Ok to Proceed ?"

 if (confirm(AlertString)) {
   AddForm.savealia.value="0"
  AddForm.savedetl.value="0"
   if (UpdateForm.savealia.checked) {
     AddForm.savealia.value="1" }
  if (UpdateForm.savedetl.checked) {
     AddForm.savedetl.value="1" }
   AddForm.oldurnum.value=UpdateForm.urnumbe1.value
   AddForm.newurnum.value=UpdateForm.urnumbe2.value 
//   SubmitHidden(document.AddForm) }
//
   document.AddForm.redirect.value="mrtweb02.pbl?reportno=5&template=001"
   + "&oldurnum=" + document.UpdateForm.urnumbe1.value.replace(/ /g,"+")
   + "&newurnum=" + document.UpdateForm.urnumbe2.value.replace(/ /g,"+")
//
    AddForm.submit();
    }
}
}
function validateRecordID1() {
 p=document.UpdateForm
 UpCase(p.urnumbe1);
 if(p.urnumbe1.value!="") {
   LenUR=p.urnumbe1.value.length
   if (LenUR < 9) { 
      Count= 8 - LenUR ;
      Blanks="";
      for (i=0; i < Count;i++) { Blanks+=" ";}
      p.urnumbe1.value=Blanks + p.urnumbe1.value }
   validateCode(13,p.urnumbe1,p.fna1,UpdateUR1,p.sex1,p.dob1,p.pce1,p.dum1,p.admissn1,
         p.da1,p.typ1,p.age1,p.medi1,p.adda1,p.addb1,p.sub1,p.addc1,p.post1)}
}
function validateRecordID2() {
 p=document.UpdateForm
 UpCase(p.urnumbe2);
 if(p.urnumbe2.value!="") {
   LenUR=p.urnumbe2.value.length
   if (LenUR < 9) { 
      Count= 8 - LenUR ;
      Blanks="";
      for (i=0; i < Count;i++) { Blanks+=" ";}
      p.urnumbe2.value=Blanks + p.urnumbe2.value }
   validateCode(13,p.urnumbe2,p.fna2,UpdateUR2,p.sex2,p.dob2,p.pce2,p.dum2,p.admissn2,
         p.da2,p.typ2,p.age2,p.medi2,p.adda2,p.addb2,p.sub2,p.addc2,p.post2) }
} 
function UpdateUR1() {
  if (document.UpdateForm.dum1.value != document.UpdateForm.urnumbe1.value) {
     alert("UR Number Merged with " + document.UpdateForm.dum1.value )
     document.UpdateForm.urnumbe1.value = document.UpdateForm.dum1.value }
}
function UpdateUR2() {
  if (document.UpdateForm.dum2.value != document.UpdateForm.urnumbe2.value) {
     alert("UR Number Merged with " + document.UpdateForm.dum2.value )
     document.UpdateForm.urnumbe2.value = document.UpdateForm.dum2.value }
}

</script>
%START.OF.PAGE
</head>
<body onload="PageLoad(event);">
<form name=UpdateForm method=post action=patweb04.pbl>
   <input type=hidden name=reportno value="3">
   <input type=hidden name=template value="002">
   <input type=hidden name=admissn1 value="">
   <input type=hidden name=admissn2 value="">
   <input type=hidden name=da1 value="">
   <input type=hidden name=da2 value="">
   <input type=hidden name=pce1 value="">
   <input type=hidden name=pce2 value="">
   <input type=hidden name=dum1 value="">
   <input type=hidden name=dum2 value="">
   <input type=hidden name=typ1 value="1">
   <input type=hidden name=typ2 value="1">
<input type=hidden name=redirect value="">
<input type=hidden name=nextpage value="1">
<input type=hidden name=updttype value="U">
<input type=hidden name=override value="   ">
<input type=hidden name=addrwarn value=" ">
<input type=hidden name=updkwarn value=" ">
<input type=hidden name=duplwarn value=" ">
<table width=100% align=center border=0 cellspacing=0>
<tr><td align=center class=HeadingCell>
    Patient Merge</td></tr>
</table>
<table width=95% align=center border=0 cellspacing=0>
<tr><td class=HeadingCell width=20%></td>
    <td class=HeadingCell width=40%>U/R (No longer required)</td>
    <td class=HeadingCell width=40%>U/R (to keep)</td></tr>
<tr><td class=DataLabel>U/R or Record ID</td>
    <td class=DataField>
    <input type=text  title="U/R No" name=urnumbe1 class=Mandatory size=20 
     onblur='validateRecordID1()'></td>
    <td class=DataField>
    <input type=text  title="U/R No" name=urnumbe2 class=Mandatory size=20 
     onblur='validateRecordID2()'></td></tr>

<tr><td class=DataLabel>Name</td>
    <td class=DataField>
    <input type=text name=fna1 size=50 readonly></td>
    <td class=DataField>
    <input type=text name=fna2 size=50 readonly></td></tr>

<tr><td class=DataLabel>Date of Birth</td>
    <td class=DataLabel>
    <input type=text name=dob1 size=20 readonly>
    Age <input type=text name=age1 size=10 readonly></td>
    <td class=DataLabel>
    <input type=text name=dob2 size=20 readonly>
    Age <input type=text name=age2 size=10 readonly></td></tr>

<tr><td class=DataLabel>Sex</td>
    <td class=DataField>
    <input type=text name=sex1 size=10 readonly></td>
    <td class=DataField>
    <input type=text name=sex2 size=10 readonly></td></tr>

<tr><td class=DataLabel>Medicare Number</td>
    <td class=DataField>
    <input type=text name=medi1 size=10 readonly></td>
    <td class=DataField>
    <input type=text name=medi2 size=10 readonly></td></tr>

<tr><td class=DataLabel>Address 1</td>
    <td class=DataField>
    <input type=text name=adda1 size=35 readonly></td>
    <td class=DataField>
    <input type=text name=adda2 size=35 readonly></td></tr>

<tr><td class=DataLabel>Address 2</td>
    <td class=DataField>
    <input type=text name=addb1 size=35 readonly></td>
    <td class=DataField>
    <input type=text name=addb2 size=35 readonly></td></tr>

<tr><td class=DataLabel>Address 3</td>
    <td class=DataField>
    <input type=text name=sub1 size=35 readonly></td>
    <td class=DataField>
    <input type=text name=sub2 size=35 readonly></td></tr>

<tr><td class=DataLabel>Address 4</td>
    <td class=DataField>
    <input type=text name=addc1 size=35 readonly></td>
    <td class=DataField>
    <input type=text name=addc2 size=35 readonly></td></tr>

<tr><td class=DataLabel>Postcode</td>
    <td class=DataField>
    <input type=text name=post1 size=8 readonly></td>
    <td class=DataField>
    <input type=text name=post2 size=8 readonly></td></tr>

<tr><td class=DataLabel>Create Alias</td>
    <td><input type=checkbox name=savealia value="1">
    </td></tr>

<tr><td class=DataLabel>Keep Details</td>
     <td><input type=checkbox name=savedetl value="1">
     </td></tr>
<tr><td colspan=3 align=center>
    <input type=button value=Ok class="button" id="Ok"
     onClick='tempDisable(this);MergePatients();'>
    <input type=reset value=Clear class="button">
    </td></tr>
</table>
</form>

<form action=patweb04.pbl name=AddForm type=post>
<input type=hidden name=reportno value=3>
<input type=hidden name=template value=001>
<input type=hidden name=nextpage value="1">
<input type=hidden name=redirect>
<input type=hidden name=oldurnum>
<input type=hidden name=newurnum>
<input type=hidden name=savealia>
<input type=hidden name=savedetl>
<input type=hidden name=updttype value="U">
<input type=hidden name=override value="   ">
<input type=hidden name=addrwarn value=" ">
<input type=hidden name=updkwarn value=" ">
<input type=hidden name=duplwarn value=" ">
</form>

