<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
function selectCurDate() {
  document.pat96olv.retndate.selectedIndex="1";
}
function cancelPage() {
  if(document.pat96olv.lvrredir.value=="1"){
     linkURL="patweb92.pbl?reportno=01&template=135"+
       "&leavward="+p.leavward.value+"&leavrisk="+p.leavrisk.value+
       "&leavstat="+p.leavstat.value+"&leavcare="+p.leavcare.value+
       "&leavereg="+p.leavereg.value;
     location.href=linkURL; 
  } else {
   PatientLinkTo('patweb96.pbl',3,4,0);
  }
}
function defaultExp() {
   p=document.pat96olv
   p.no_minutes.value=p.trnlvtyp.value.substr(23,6);
   if((p.trnlvtyp.value.substr(3,1)=='A')||
     (p.trnlvtyp.value.substr(14,1)=='W')){
     document.pat96olv.d_pmlrd006.checked=true
     AbsDiv();
   }
   if(!isWhitespace(p.no_minutes.value)){
       AddSubtractMinute(document.pat96olv.trandate,
       document.pat96olv.trantime,document.pat96olv.no_minutes,
       'A',document.pat96olv.trnsretn,document.pat96olv.trnsrett)
  }
}
function carerMandatory() {
 if(document.pat96olv.d_pmlrd034.checked == true) {
     document.pat96olv.d_pmlrd034.value="1";
     pat96olv.pmlrd030.className="Mandatory";  //Carer name
     pat96olv.pmlrd031.className="Mandatory MobilePhone";  //Carer Contact number
 } else {
   if(document.pat96olv.pmlrd014.value.substr(3,1)!="C"){
     pat96olv.pmlrd030.className="";  //Carer name
     pat96olv.pmlrd031.className="MobilePhone";  //Carer Contact number
   }
 }
}
</script>
<style type=text/css> 
.TransferOption {
position: relative; 
}
.container {
  background: #ACC5E0;;
  position: relative;
  font-size: 20px;
}
</style>
<script type="text/javascript">
function convertDate(datevalue) {
  cent = datevalue.substring(0,2)
  year = datevalue.substring(2,4)
  mon  = datevalue.substring(4,6)
  day  = datevalue.substring(6,8)

  monthName = GetMonthName(mon);

  document.pat96olv.trandate1.value = day + " " + monthName + " " + cent + year;
}
function DisplayTrnSrc() {
  var i=document.pat96olv.trnlvtyp.selectedIndex;
  var ind = document.pat96olv.trnlvtyp.options[i].value.substring(14,15);
  if(document.pat96olv.ptcnhdps.value!="3"){
    if (ind != "C") {
      TranSrcDesc.innerHTML="";
      TranSrcField.innerHTML=transferblank.innerHTML;
      document.pat96olv.transrce.value=" ";
    } else {
      TranSrcDesc.innerHTML="Leave Transfer Source";
      TranSrcField.innerHTML=transfersrc.innerHTML;
    }
  }
}
function checkLegalStatus(){
}

function SubmitTransfer() {
 p=document.pat96olv
  var check=false;
  for(var i = 0; i < p.pmlrd021.length; i++) {
    if (p.pmlrd021[i].checked==true) {
      check=true;
    }
  }
  if ((check==false) && (p.d_pmlrd006.checked==false)) {
    alert("Bag Screening has not been selected");
    p.UpdateButton.disabled=false;
    return;
  }
  var check=false;
  for(var i = 0; i < p.pmlrd022.length; i++) {
    if (p.pmlrd022[i].checked==true) {
      check=true;
    }
  }
  if ((check==false) && (p.d_pmlrd006.checked==false)) {
    alert("BAL Screening has not been selected");
    p.UpdateButton.disabled=false;
    return;
  }
  var check=false;
  for(var i = 0; i < p.pmlrd023.length; i++) {
    if (p.pmlrd023[i].checked==true) {
      check=true;
    }
  }
  if ((check==false) && (p.d_pmlrd006.checked==false)) {
    alert("UDS Screening has not been selected");
    p.UpdateButton.disabled=false;
    return;
  }

  if(document.pat96olv.lvrredir.value=="1"){
     document.pat96olv.redirect.value="patweb92.pbl?reportno=01&template=135"+
       "&leavward="+p.leavward.value+"&leavrisk="+p.leavrisk.value+
       "&leavstat="+p.leavstat.value+"&leavcare="+p.leavcare.value+
       "&leavereg="+p.leavereg.value;
  }
 if(!ChkDateTime(p.trandate,p.trantime,p.trnsretn,p.trnsrett)){
  alert("Expected Return date and time must be after on leave date and time");
  return;
 }
 if(document.pat96olv.pmlrd030.className=="Mandatory"){
   if(document.pat96olv.pmlrd030.value.length<2){
     alert("Carer Name must be 2 characters or more");
     return;
   }
 }
 if(document.pat96olv.pmlrd030.className=="Mandatory"){
   if(document.pat96olv.pmlrd030.value.length<2){
     alert("Carer Name must be 2 characters or more");
     return;
   }
 }
if (validateMandatory(pat96olv)) {
    SetHousekeeping();
    document.pat96olv.pmlrd010.value=document.pat96olv.trnlvtyp.value;
    document.pat96olv.pmlrd011.value=document.pat96olv.trnsretn.value;
    document.pat96olv.pmlrd012.value=document.pat96olv.trnsrett.value;
    if(!isWhitespace(document.pat96olv.retndate.value)){
       if(trim(document.pat96olv.c_status.value)=="On-Leave"){
         document.pat96olv.formactn.value="Return";
         document.pat96olv.pmlrd006.value="R";
//       document.pat96olv.trandate.value=document.pat96olv.retndate.value;
//         document.pat96olv.trantime.value=document.pat96olv.retntime.value;
       } else {
         document.pat96olv.pmlrd006.value="L";
       }
    }
  SubmitHidden(pat96olv);
  }
}
function DeleteLR() {
  if(document.pat96olv.lvrredir.value=="1"){
     document.pat96olv.redirect.value="patweb92.pbl?reportno=01&template=135"+
       "&leavward="+p.leavward.value+"&leavrisk="+p.leavrisk.value+
       "&leavstat="+p.leavstat.value+"&leavcare="+p.leavcare.value+
       "&leavereg="+p.leavereg.value;
  }
  if (validateMandatory(pat96olv)) {
    document.pat96olv.formactn.value="DeleteLR";
    checkDate(document.pat96olv.trandate,'On leave date',document.pat96olv.o_trandate);
    document.pat96olv.trandate.value=document.pat96olv.o_trandate.value;
    SubmitHidden(pat96olv);
  }
}
function TOLMand() {
  if (document.pat96olv.stateind.value=="3") {
     document.pat96olv.trnlvtyp.className="Mandatory";
  }
}
function ShowHouse() {
  if(document.pat96olv.ptcnchot.value=="1") {
    Housekeeping1.innerHTML=Displayhousekeeping1.innerHTML;
    Housekeeping2.innerHTML=Displayhousekeeping2.innerHTML;
    Housekeeping3.innerHTML=Displayhousekeeping3.innerHTML;
    Housekeeping4.innerHTML=Displayhousekeeping4.innerHTML;
  }
}
function HouseMandatory() {
  if(document.pat96olv.notifyhs.value=="1") {
     document.pat96olv.pmhrd006.className="Mandatory"
     document.pat96olv.pmhrd006.disabled=false;
  } else {
     document.pat96olv.pmhrd006.selectedIndex=0;
     document.pat96olv.pmhrd006.className="Readonly"
     document.pat96olv.pmhrd006.disabled=true;
  }
}
function SetHousekeeping() {
  if(document.pat96olv.ptcnchot.value=="1" &&
    document.pat96olv.notifyhs.value=="1") {
    document.pat96olv.pmhrd004.value=document.pat96olv.trandate.value;
    document.pat96olv.pmhrd005.value=document.pat96olv.trantime.value;
  }
}
function FilterLeaveType() {
 if(document.pat96olv.mh_visit.value == "1") {
   filterCatCodeList(pat96olv.trnlvtyp,"6","G","1");  // MH Visit
 } else {
   filterCatCodeList(pat96olv.trnlvtyp,"6","M","1");  // Non MH Visit
 }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);FilterLeaveType();CarerName();ShowHouse();
 document.pat96olv.trnlvtyp.focus();">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB96.03.003";
PatientVIS="%PATWEB96.03.081";
PatientNAM="%PATWEB96.03.002";
PatientSTA="%PATWEB96.03.086.078";
PatientALT="%PATWEB96.03.084";
PatientSEX="%PATWEB96.03.019";
PatientDOB="%PATWEB96.03.020";
PatientAGE="%PATWEB96.03.021";
PatientLOC="%PATWEB96.03.083";
PatientPRI="%PATWEB96.03.086.066.1";
PatientUNT="%PATWEB96.03.066.0";
DoctorCOD="%PATWEB96.03.082.003";
DoctorNAM="%PATWEB96.03.082.002";
PatientAID="%PATWEB96.03.086.090";
PatientIND="%PATWEB96.03.086.091";
PatientCUR="%PATWEB96.03.086.092";
PatientCLC="%PATWEB96.03.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB96.03.086.094";
PatientCDM="%PATWEB96.03.086.095";
PatientVDH="%PATWEB96.03.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>
  <form name=pat96olv id=pat96olv %PATWEB96.03.201.001
  <input type=hidden name=urnumber id=urnumber value="%PATWEB96.03.003">
  <input type=hidden name=admissno id=admissno value="%PATWEB96.03.081">
  <input type=hidden name=trnleave id=trnleave value="0">
  <input type=hidden name=c_status id=c_status value="%PATWEB96.03.104">
  <input type=hidden name=redirect id=redirect value="%PATWEB96.03.001.patweb96.03.004">
  <input type=hidden name=nextpage id=nextpage value="7">
  <input type=hidden name=formactn id=formactn value="LRUpdate">
  <input type=hidden name=mehvisfl id=mehvisfl value="%PATWEB96.03.219">
  <input type=hidden name=mehlegst id=mehlegst value="%PATWEB96.03.085.005.3">
  <input type=hidden name=stateind id=stateind value="%PATWEB96.03.227">
  <input type=hidden name=trandate1 id=trandate1>
  <input type=hidden name=ptcnhdps id=ptcnhdps value="%STANDARD.01.025.080.250.1.1">
  <input type=hidden name=ptcnchot id=ptcnchot value="%STANDARD.01.025.114.138.0.1">
  <input type=hidden name=xmnhllvin id=mnhllvin value="%PATWEB96.03.235">
  <input type=hidden name=xmnhltylv id=mnhltylv value="%PATWEB96.03.236">
  <input type=hidden name=xmnhlexrd id=mnhlexrd value="%PATWEB96.03.237">
  <input type=hidden name=xmnhlexrt id=mnhlexrt value="%PATWEB96.03.238">
  <input type=hidden name=xmnhlredt id=mnhlredt value="">
  <input type=hidden name=xmnhlretm id=mnhlretm value="">
  <input type=hidden name=xmnhllswd id=mnhllswd value="%PATWEB96.03.212.2">
  <input type=hidden name=xmnhllsbd id=mnhllsbd value="%PATWEB96.03.212.1">
  <input type=hidden name=xmh_visit id=mh_visit value="%PATWEB96.03.263">
  <input type=hidden name=no_minutes id=no_minutes value="0">
  <input type=hidden name=no_min15 id=no_min15 value="15">
  <input type=hidden name=no_min30 id=no_min30 value="30">
  <input type=hidden name=no_min60 id=no_min60 value="60">
  <input type=hidden name=no_min120 id=no_min120 value="120">
  <input type=hidden name=pmlrd001 id=pmlrd001 value="%PATWEB96.03.701">
  <input type=hidden name=pmlrd002 id=pmlrd002 value="%PATWEB96.03.702">
  <input type=hidden name=pmlrd003 id=pmlrd003 value="%PATWEB96.03.703">
  <input type=hidden name=pmlrd006 id=pmlrd006 value="%PATWEB96.03.706">
  <input type=hidden name=pmlrd004 id=pmlrd004 value="%PATWEB96.03.704.0">
  <input type=hidden name=pmlrd005 id=pmlrd005 value="%PATWEB96.03.705">
  <input type=hidden name=pmlrd010 id=pmlrd010>
  <input type=hidden name=pmlrd011 id=pmlrd011>
  <input type=hidden name=pmlrd012 id=pmlrd012>
  <input type=hidden name=pmwoudf4 id=pmwoudf4 value="%PATWEB96.03.284.1">
  <input type=hidden name=caretype value="%PATWEB96.03.113.3">
  <input type=hidden name=lvrredir id=lvrredir value="%PATWEB96.03.286">
  <input type=hidden name=leavward id=leavward value="%PATWEB96.03.287">
  <input type=hidden name=leavrisk id=leavrisk value="%PATWEB96.03.288">
  <input type=hidden name=leavstat id=leavstat value="%PATWEB96.03.289">
  <input type=hidden name=leavcare id=leavcare value="%PATWEB96.03.290">
  <input type=hidden name=leavereg id=leavereg value="%PATWEB96.03.291">
  <input type=hidden name=tranward id=tranward value="%PATWEB96.03.212.2">
  <input type=hidden name=tranbeds id=tranbeds value="%PATWEB96.03.212.1">


<table border=0 width=100% cellspacing=0 cellpadding=1 >
  <tr><td class=HeadingCell align=center width=100% colspan=6>
        Update Leave Register Details - %PATWEB96.03.002 </td></tr>
   <tr><td class=DataLabel>Ward / Bed </td>      
       <td><input type=text size=25 readonly class=readonly value="%PATWEB96.03.105.0">
       <input type=text size=15 readonly class=readonly value="%PATWEB96.03.106"></td>
       <td><div id=AbscondedDIV></div></td>
       <td><div id=AbscondedCheckboxDIV></div></td>
       </tr>

      <input type=hidden name=o_trandate id=o_trandate value="%PATWEB96.03.205">
       <tr><td class=DataLabel>On-Leave Date & Time</td>
       <td><input type=text name=trandate id=trandate 
       class=Readonly  title="On-Leave date" value="%PATWEB96.03.204">
      <input type=text size=8 name=trantime id=trantime class=Readonly
       title="On-Leave Time" value="%PATWEB96.03.205">
      </td></tr>

       <tr><td class=DataLabel>%STANDARD.01.017.TL</td>
       <td><select name=trnlvtyp id=trnlvtyp class=Mandatory
            title="%STANDARD.01.017.TL" 
            onchange="defaultExp();">
           <option> </option>
           %PATWEB96.03.710.9.2
          </select></td></tr>

        <tr><td class=DataLabel>Expected Return Date & Time</td>
        <td><input type=text size=12 name=trnsretn id=trnsretn 
          class="Mandatory Date" title="Expected Return Date" 
          value="%PATWEB96.03.711">
        <img src=../images/DateLookup.gif class=Icon
          onclick="DateLookupFrame(trnsretn);">
        <input type=text size=8 name=trnsrett id=trnsrett class=Mandatory
         title="Expected Return Time" value="%PATWEB96.03.712">
        <img src=../images/TimeLookup.gif class=Icon
         onclick="TimeLookupFrame(trnsrett);">
      <input type=button class="button" value="15 min"
       onclick="AddSubtractMinute(document.pat96olv.trandate,
       document.pat96olv.trantime,document.pat96olv.no_min15,
       'A',document.pat96olv.trnsretn,document.pat96olv.trnsrett);" >
      <input type=button class="button" value="30 min"
       onclick="AddSubtractMinute(document.pat96olv.trandate,
       document.pat96olv.trantime,document.pat96olv.no_min30,
       'A',document.pat96olv.trnsretn,
       document.pat96olv.trnsrett);" >
      <input type=button class="button" value="60 min"
       onclick="AddSubtractMinute(document.pat96olv.trandate,
       document.pat96olv.trantime,document.pat96olv.no_min60,
      'A',document.pat96olv.trnsretn,
       document.pat96olv.trnsrett);" >
      <input type=button class="button" value="120 min"
       onclick="AddSubtractMinute(document.pat96olv.trandate,
       document.pat96olv.trantime,document.pat96olv.no_min120,
      'A',document.pat96olv.trnsretn,
       document.pat96olv.trnsrett);" >
       </tr>
       <tr><td class=DataLabel>%STANDARD.01.017.vd</td>
       <td><select name=pmlrd014 id=pmlrd014 class=Mandatory
            title="%STANDARD.01.017.vd" onchange="CarerName();">
           <option> </option>
           %PATWEB96.03.714.2
          </select>
        <input type=hidden name=pmlrd015 id=pmlrd015 value="%PATWEB96.03.715.1">
           %PATWEB96.03.715.0</td>
       </tr>

   <tr><td class=DataLabel>Destination</td>
     <td colspan=4><input type=text name=pmlrd013 id=pmlrd013 size=100 
      title="Destination" class=Mandatory
          maxlength=100" value="%PATWEB96.03.713">
   </td></tr>

   <tr><td>Carer Consent </td>
      <td><input type="checkbox" name="d_pmlrd034" value="0"
           onclick="carerMandatory();"></td></tr>
   <tr><td class=DataLabel>Carer Details</td>
      <td><input type=button class="button" value="Search" 
       onclick="selectCarer();" > Search patient's contacts for carer details</td>

   <tr><td class=DataLabel>or</td></tr>

   <tr><td class=DataLabel>Carer Name</td>
     <td colspan=4><input type=text name=pmlrd030 id=pmlrd030 
        title="Carer Name" size=100 maxlength=100" value="%PATWEB96.03.730">
   </td></tr>

   <tr><td class=DataLabel>Carer Contact</td>
     <td><input type=text name=pmlrd031 id=pmlrd031 class="MobilePhone" 
        size=20 maxlength=20" value="%PATWEB96.03.731" title="Carer Contact">
   </td></tr>

      <input type=hidden name=pmlrd032 id=pmlrd032 value="%PATWEB96.03.732.0">
      <input type=hidden name=pmlrd033 id=pmlrd033 value="%PATWEB96.03.733">

  <tr><td class=DataLabel>Form</td>
  <td> <select name=statncod onchange=setPrinterMand();>
         <option></option>
         %STANDARD.01.020.  3        
   </select>
  Printer
  <select name=schdprnt>
     %STANDARD.01.001.PATWEB96.03
   </select>
  </td></tr>
  <input type=hidden name=schdcopy id=schdcopy value="1"></td></tr>
  <tr><td>Meds Given</td>
       <td><select name=pmlrd020 title="Meds Given">
          <option value="0">No</option>
          <option value="1">Yes</option>
          <option value="2">N/A</option>
        </select></td></tr>

  <tr><td class=DataLabel>Notes</td>
      <td colspan=4><textarea name=leavecom wrap=hard cols=100 rows=4 tabindex=60>%PATWEB96.03.740</textarea>
   </td></tr>
         <tr><td><div id="Housekeeping1"></div></td>
         <td><div id="Housekeeping2"></div></td>
         <td><div id="Housekeeping3"></div></td>
         <td><div id="Housekeeping4"></div></td></tr>
 <tr><td colspan=6>
     <hr>
  </td></tr>

  <tr><td class=DataLabel>Bag Screening</td>
  <td>
   <label class="container">
    <input type=radio name=pmlrd021 value="1" id=a_pmlrd021 
     class=Mandatory ></label>Yes
   <label class="container">
    <input type=radio name=pmlrd021 value="2" id=b_pmlrd021
     class=Mandatory ></label>Not Applicable
  </td></tr>

  <tr><td class=DataLabel>BAL Screening</td>
  <td>
   <label class="container">
    <input type=radio name=pmlrd022 value="1" id=a_pmlrd022
     class=Mandatory ></label>Yes
   <label class="container">
    <input type=radio name=pmlrd022 value="2" id=b_pmlrd022
     class=Mandatory ></label>Not Applicable
  </td></tr>

  <tr><td class=DataLabel>UDS Screening</td>
  <td>
   <label class="container">
    <input type=radio name=pmlrd023 value="1" id=a_pmlrd023
     class=Mandatory ></label>Yes
   <label class="container">
    <input type=radio name=pmlrd023 value="2" id=b_pmlrd023
     class=Mandatory ></label>Not Applicable
  </td></tr>

  <tr><td class=DataLabel>Return Date & Time </td>
        <td><select name=retndate id=retndate 
             title="Return date" >
        <option value=""></option>
        %PATWEB96.03.202
        </select>
        <input type=text size=8 name=retntime id=retntime 
         title="Return Time" value="">
        <img src="../images/DateTimeStamp.gif" class=Icon
         onclick="SetCurrentDateTime(null,pat96olv.retntime);selectCurDate();">
        <img src="../images/TimeLookup.gif" class=Icon
         onclick="TimeLookupFrame(pat96olv.retntime);"></td></tr>

   <tr>
        <td class=DataLabel> Ward / Bed</td>
        <td><select name=trntowrd id=trntowrd>
        <option></option>
        %PATWEB96.03.212.0
        </select>
        <input type=text name=trntobed id=trntobed maxlength=3 size=3
         value="%PATWEB96.03.212.1">
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="WardBedSearchFrame(pat96olv.trntowrd,
                                     pat96olv.warddesc,
                                     pat96olv.trntobed,
                                     pat96olv.bedstat1);">
        </td></tr>

<tr><td class=DataLabel>User Id </td>
    <td><input type=hidden name=securety value="2">
        <input type=hidden name=triguser value="1">
        <input type=hidden name=genericu value="%PATWEB96.03.256">
        <input type=text size=12 name=secureid class="Mandatory NoAutoFocus"
          tabindex=1 title="User ID" value="%STANDARD.01.043">
    Password
    <input type=password size =12 name=securepw class=Mandatory tabindex=2
         title="Password" onfocus="SetCaretPosition('securepw',-1);"
         onblur="checkPass();">
    </td>

    <tr> <td align=center colspan=4><input type=button class="button" 
         value="Update" id='updatebutton' name=UpdateButton
         onclick="tempDisable(this);SubmitTransfer(this.form,'LRUpdate');">
   <input type=button value="Delete" class="button" id="deletebutton"
    name=deletebut onclick="tempDisable(this);DeleteLR();">
            <input type=button value=Cancel class="button"
             onclick=cancelPage();>
       </td></tr>
</table>
</form>
</div>

<form name=PatientLinks id=PatientLinks method=get>
<input type=hidden name=reportno id=reportno value=1>
<input type=hidden name=template id=template value=004>
<input type=hidden name=urnumber id=urnumber value="%PATWEB96.03.003">
<input type=hidden name=admissno id=admissno value="%PATWEB96.03.081">
<input type=hidden name=MenuType id=MenuType value="%PATWEB96.03.088">
<input type=hidden name=alert001 id=alert001 value="">
</form>

<span id=blanklabel style="display:none">&nbsp;</span>

<div id="AbscondedQ" style="display:none">
ABSCONDED?
</div>
<div id="Absconded" style="display:none">
<font color=Red><b>ABSCONDED</b>
</div>
<div id="AbscondedCheckbox" style="display:none">
<input type=checkbox value=1 name=d_pmlrd006 id=d_pmlrd006 onclick='AbsDiv()'>
</div>

<div id="Displayhousekeeping1" style="display:none">
Notify Housekeeping
</div>

<div id="Displayhousekeeping2" style="display:none">
  <select name=notifyhs id=notifyhs title="Notify Housekeeping"
   onchange="HouseMandatory();">
  <option> </option>
  <option value="0">No</option>
  <option value="1">Yes</option>
  </select>
</div>
<div id="Displayhousekeeping3" style="display:none">
Housekeeping Status
</div>

<div id="Displayhousekeeping4" style="display:none">
  <input type=hidden name=pmhrd001 id=pmhrd001 value="%PATWEB96.03.599.004">
  <input type=hidden name=pmhrd002 id=pmhrd002 value="%PATWEB96.03.212.2">
  <input type=hidden name=pmhrd003 id=pmhrd003 value="%PATWEB96.03.212.1">
  <input type=hidden name=pmhrd004 id=pmhrd004 value="">
  <input type=hidden name=pmhrd005 id=pmhrd005 value="">
  <select name=pmhrd006 id=pmhrd006 title="Housekeeping Status" class=Readonly disabled>
    <option> </option>
    %STANDARD.01.007.BV
  </select>
</div>
<script type=text/javascript>
 if(%PATWEB96.03.283==1){
   alert("Leave register table not configured");
   history.go(-1);
 }
 MedsGiven="%PATWEB96.03.720.2";
  for (var i=0; i < document.pat96olv.pmlrd020.length; i++) {
    if (document.pat96olv.pmlrd020.options[i].value==MedsGiven){
        document.pat96olv.pmlrd020.selectedIndex=i;
    }
  }
  BagScreening="%PATWEB96.03.721.2"
  if(trim(BagScreening)=="1"){
   document.getElementById("a_pmlrd021").checked = true;
  } else if(trim(BagScreening)=="2"){
   document.getElementById("b_pmlrd021").checked = true;
  }

  BALScreening="%PATWEB96.03.722.2"
  if(trim(BALScreening)=="1"){
   document.getElementById("a_pmlrd022").checked = true;
  } else if(trim(BALScreening)=="2"){
   document.getElementById("b_pmlrd022").checked = true;
  }
  UDSScreening="%PATWEB96.03.723.2"
  if(trim(UDSScreening)=="1"){
   document.getElementById("a_pmlrd023").checked = true;
  } else if(trim(UDSScreening)=="2"){
   document.getElementById("b_pmlrd023").checked = true;
  }
   p=document.pat96olv
   care_ind24=p.caretype.value.substr(71,1);
   filterCatCodeList(p.trnlvtyp,"24",care_ind24,"3");


function CarerName(){
 if(document.pat96olv.d_pmlrd006.checked==true){
    return;
 }
   if(document.pat96olv.pmlrd014.value.substr(3,1)=="C"){
     pat96olv.pmlrd030.className="Mandatory";  //Carer name
     pat96olv.pmlrd031.className="Mandatory MobilePhone";  //Carer Contact number
   }
   if((document.pat96olv.pmlrd014.value.substr(3,1)!="C")&&(document.pat96olv.d_pmlrd034.checked==false)){
     pat96olv.pmlrd030.className="";  //Carer name
     pat96olv.pmlrd031.className="MobilePhone";  //Carer Contact number
  }
}
function AbsDiv(){
 if(document.pat96olv.d_pmlrd006.checked==true){
   AbscondedDIV.innerHTML=Absconded.innerHTML;
   document.pat96olv.pmlrd006.value='A';
   document.pat96olv.pmlrd014.className="";
   document.pat96olv.pmlrd013.className="";
   document.pat96olv.trnlvtyp.className="";
   document.pat96olv.trnsretn.className="";
   document.pat96olv.trnsrett.className="";
   document.pat96olv.trnsretn.value="";
   document.pat96olv.trnsrett.value="";
   document.pat96olv.pmlrd030.className="";  //Carer name
   document.pat96olv.pmlrd031.className="";  //Carer Contact number
   document.getElementById("a_pmlrd021").className = "";
   document.getElementById("b_pmlrd021").className = "";
   document.getElementById("a_pmlrd022").className = "";
   document.getElementById("b_pmlrd022").className = "";
   document.getElementById("a_pmlrd023").className = "";
   document.getElementById("b_pmlrd023").className = "";
 } else {
   AbscondedDIV.innerHTML=AbscondedQ.innerHTML;
   document.pat96olv.pmlrd006.value='L';
   document.pat96olv.pmlrd014.className="Mandatory";
   document.pat96olv.trnlvtyp.className="Mandatory";
   document.pat96olv.pmlrd013.className="Mandatory";
   document.pat96olv.trnsretn.className="Mandatory";
   document.pat96olv.trnsrett.className="Mandatory";
   if(document.pat96olv.pmlrd014.value.substr(3,1)=="C"){
    pat96olv.pmlrd030.className="Mandatory";  //Carer name
    pat96olv.pmlrd031.className="Mandatory MobilePhone";  //Carer Contact number
   }
   document.getElementById("a_pmlrd021").className = "Mandatory";
   document.getElementById("b_pmlrd021").className = "Mandatory";
   document.getElementById("a_pmlrd022").className = "Mandatory";
   document.getElementById("b_pmlrd022").className = "Mandatory";
   document.getElementById("a_pmlrd023").className = "Mandatory";
   document.getElementById("b_pmlrd023").className = "Mandatory";
 }
}
function setPrinterMand(){
 if(document.pat96olv.statncod.value!==""){
    document.pat96olv.schdprnt.className="Mandatory";
 }
}
function init(){
  if (trim(document.pat96olv.c_status.value) == "On-Leave"){
    document.pat96olv.retndate.selectedIndex="0";
  }
  if (trim(document.pat96olv.c_status.value) == "Current"){
    document.pat96olv.retndate.disabled="true";
    document.pat96olv.retndate.readonly="true";
  }
 AbscondedDIV.innerHTML=AbscondedQ.innerHTML;
 AbscondedCheckboxDIV.innerHTML=AbscondedCheckbox.innerHTML;
 if(document.pat96olv.genericu.value=="1"){
    document.pat96olv.secureid.value=" "
 }
 if(document.pat96olv.pmlrd006.value=="A"){
   document.pat96olv.d_pmlrd006.checked=true 
   AbsDiv();
  }
}
function selectCarer() {
  linkurl="patweb07.pbl?reportno=06&template=010" +
          "&urnumber=" + pat96olv.urnumber.value.replace(/ /g,"+");
  Left=(document.body.clientWidth-780)/2;
  DFrameLink(linkurl,50,Left,780,450);
}
</script>
