<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
function changeCasemixCode() {
  var f = document.Casemix;
  var rchange=document.getElementById('rchange');
  var verifCheckbox = trim(f.ccverifi.value);
  if(trim(f.ptmis073.value)==trim(f.old_ccode.value) &&
     f.old_casepay.value==f.ptmis075.selectedIndex &&
     ((f.verifica.checked==true && verifCheckbox=="1") ||
      (f.verifica.checked==false && verifCheckbox=="0"))) {
    rchange.classList.remove("Mandatory");
  } else {
    rchange.classList.add("Mandatory");
  }
}
function changeCasepayment() {
  var f = document.Casemix;
  var rchange=document.getElementById('rchange');
  var verifCheckbox = trim(f.ccverifi.value);

  if(trim(f.ptmis073.value)==trim(f.old_ccode.value) &&
     f.old_casepay.value==f.ptmis075.selectedIndex &&
     ((f.verifica.checked==true && verifCheckbox=="1") ||
      (f.verifica.checked==false && verifCheckbox=="0"))) {
    rchange.classList.remove("Mandatory");
  } else {
    rchange.classList.add("Mandatory");
  }
}
function init() {
  if(trim(document.Casemix.ccverifi.value)=="1"){
    document.getElementById('verifica').checked = true;
  }
}
function setReasonChange() {
  var f = document.Casemix;
  var verifCheckbox = trim(f.ccverifi.value);
  if(f.old_casepay.value==f.ptmis075.selectedIndex &&
     trim(f.ptmis073.value)==trim(f.old_ccode.value)) {
    if((f.verifica.checked==true && verifCheckbox=="0") ||
        (f.verifica.checked==false && verifCheckbox=="1")) {
      document.getElementById('rchange').classList.add("Mandatory");
    } else {
      document.getElementById('rchange').classList.remove("Mandatory");
    }
  }
}
function SubmitCasemix() {
  var f = document.Casemix;
  if(f.verifica.checked==true) {
    f.ccverifi.value="1";
  } else {
    f.ccverifi.value="0";
  }

  if(trim(f.old_ccverifi.value)==trim(f.ccverifi.value)) {
    f.ccverifi.value=" "; //blank if no change
  }

  var e = document.getElementById("rchange");
  document.Casemix.reasonch.value=e.options[e.selectedIndex].value.substring(0,3);

  if (validateMandatory(Casemix)) {
    ReturnPath=GetCookieData('InvoiceReturn');
    if (!isWhitespace(ReturnPath) && ReturnPath!='unknown') {
      document.cookie="InvoiceReturn=;"   // clear cookie
      Casemix.redirect.value=ReturnPath; // return to raise invoice screen
    }
    SubmitHidden(Casemix);
  }
}
function CancelCasemix() {
  ReturnPath=GetCookieData('InvoiceReturn');
  if (!isWhitespace(ReturnPath) && ReturnPath!='unknown') {
    document.cookie="InvoiceReturn=;"   // clear cookie
    location.href=ReturnPath;           // return to raise invoice screen
  }
  else {
    PatientLinkTo('patweb96.pbl','3','013','0');
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="init();PageLoad(event);">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB71.04.003";
PatientVIS="%PATWEB71.04.081";
PatientNAM="%PATWEB71.04.002";
PatientSTA="%PATWEB71.04.086.078";
PatientALT="%PATWEB71.04.084";
PatientSEX="%PATWEB71.04.019";
PatientDOB="%PATWEB71.04.020";
PatientAGE="%PATWEB71.04.021";
PatientLOC="%PATWEB71.04.083";
PatientPRI="%PATWEB71.04.086.066.1";
PatientUNT="%PATWEB71.04.066.0";
DoctorCOD="%PATWEB71.04.082.003";
DoctorNAM="%PATWEB71.04.082.002";
PatientAID="%PATWEB71.04.086.090";
PatientIND="%PATWEB71.04.086.091";
PatientCUR="%PATWEB71.04.086.092";
PatientCLC="%PATWEB71.04.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB71.04.086.094";
PatientCDM="%PATWEB71.04.086.095";
PatientVDH="%PATWEB71.04.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
  <form name=Casemix action=patweb71.pbl method=post style="margin:0"> 
  <input type=hidden name=reportno value="4">
  <input type=hidden name=urnumber value="%PATWEB71.04.003">
  <input type=hidden name=admissno value="%PATWEB71.04.081">
  <input type=hidden name=nextpage value="5">
  <input type=hidden name=reasonch value="">
  <input type=hidden name=ccverifi value="%PATWEB71.04.806">
  <input type=hidden name=old_ccverifi value="%PATWEB71.04.806">
  <input type=hidden name=old_casepay value="">
  <input type=hidden name=old_ccode value="%PATWEB71.04.198.2">
  <input type=hidden name=updatety value=2>
  <input type=hidden name=redirect value="%PATWEB71.04.001.patweb96.03.013">
<table border=0 width=100% cellspacing=0 cellpadding=1 >
    <tr><td class=HeadingCell align=center colspan=2 width=100%>
        Patient Status Adjustment</td></tr>
    <tr valign=top><td>
  <table border=0 width=100% cellspacing=1>
  <tr><td class=HeadingCell align=center colspan=2>Current Status</td>
      <td align=center class=HeadingCell colspan=2>Casemix Payment
          </td></tr>

   <tr><td class=DataLabel>Ward / Bed </td>      
       <td><input type=text size=25 readonly value="%PATWEB71.04.105.0">
       <input type=text size=15 readonly value="%PATWEB71.04.106"></td>

      <td class=DataLabel>Casepayment</td>
      <td><select name=ptmis075 title="Casepayment"
           onchange="changeCasepayment();">
       <option> </option>
           %PATWEB71.04.197.2
       </select>
       </td></tr>

   <tr><td class=DataLabel>Transfer In Date & Time </td>
       <td><input type=text size=11 readonly value="%PATWEB71.04.204" >
       <input type=text size=5 readonly value="%PATWEB71.04.205"></td>

      <td class=DataLabel>Casemix Code</td>
          <td class=DataLabel>
       <input type=text name=ptmis073 size=10 maxlength=9 
          value="%PATWEB71.04.198.2"
          onblur='validateCode(35,Casemix.ptmis073,Casemix.cmixdesc1);
                  changeCasemixCode();'
          onchange="changeCasemixCode();">
          <input type=text notab readonly name=cmixdesc1 size=35
              value="%PATWEB71.04.198.1">
              <img notab src="../images/SearchIcon.gif" class=Icon
               onclick="CmixSearchFrame(Casemix.ptmis073,Casemix.cmixdesc1)">
              <img src="../images/erase.gif" align=absmiddle class=Icon
               onclick="clrFields(Casemix.ptmis073,Casemix.cmixdesc1);">
          </td></tr>

     <tr><td class=DataLabel>Attending Doctor</td>
       <td><input type=text size=35 readonly value="%PATWEB71.04.108.002">
           </td></tr>

   <tr><td class=DataLabel>%STANDARD.01.017.A </td>
       <td><input type=text readonly size=30 
             value="%PATWEB71.04.111.0"> </td>
       <td class=DataLabel>HIM/CC Casemix Code Verification</td>
       <td><input type=checkbox name="verifica" id="verifica" 
            title="HIM/CC Casemix Code Verification" value=""
            onchange="setReasonChange();"></td>       
       </tr>

   <tr><td class=DataLabel>Care Type</td>
       <td><input type=text readonly size=30 
           value="%PATWEB71.04.113.0"></td>
       <td class=DataLabel> %STANDARD.01.035.RV</td>
       <td><select name="rchange" id="rchange" title="Reason for Change">
           <option></option>
           %PATWEB71.04.701.9.5
           </select></td>
       </tr>

   <tr><td class=DataLabel>Unit</td>
       <td><input type=text readonly size=30 
           value="%PATWEB71.04.124.0"></td>
       <td class=DataLabel>Casemix Code Verification Added By</td>
       <td class=DataField>%PATWEB71.04.702.1</td></tr>

    <tr><td class=DataLabel> %STANDARD.01.017.CL</td>
        <td><input type=text value="%PATWEB71.04.126.0"></td>
        <td class=DataLabel>Date/Time Casemix Code Verification Added</td>
        <td class=DataField>%PATWEB71.04.702.2</td></tr>

     <input type="hidden" value="%PATWEB71.04.114.0">
     <tr><td class=DataLabel>Health Fund</td>
         <td class=DataLabel>
         <input type=text size=35 name="funddesc" maxlength="30"
         value="%PATWEB71.04.114.1"></td>
         <td class=DataLabel>Casemix Code</td>
        <td class=DataField>%PATWEB71.04.702.3</td></tr>

         <tr><td>Table</td>
             <td input type="hidden" value="%PATWEB71.04.115.0">
               <input type="text" size=20 maxlength=30 name="tabldesc"
                 value="%PATWEB71.04.115.1"></td></tr>

    <tr><td class=DataLabel>Casemix Payment</td>
        <td><input type=text readonly size=3
            value="%PATWEB71.04.197.1"></td>
            <td class=DataLabel>Casemix Code Verification Updated By</td>
            <td class=DataField>%PATWEB71.04.703.1</td></tr>

    <tr><td class=DataLabel>Casemix Code</td>
        <td><input type=text readonly size=30
             value="%PATWEB71.04.198.1"></td>
            <td class=DataLabel>Date/Time Casemix Code Verification Updated</td>
            <td class=DataField>%PATWEB71.04.703.2</td></tr>

    <tr><td></td><td></td>
        <td class=DataLabel>Casemix Code</td>
        <td class=DataField>%PATWEB71.04.703.3</td></tr>

    <tr><td></td><td></td>
        <td class=DataLabel> %STANDARD.01.035.RV</td>
        <td class=DataField>%PATWEB71.04.703.5</td></tr>

    <tr><td></td><td></td>
        <td align=center colspan=2>
        <input type=button name=formactn value=Update class="button"
         id="updutton" onclick="tempDisable(this);SubmitCasemix(this.form);">
        <input type=button value=Cancel class="button" id="canbutton"
         onclick="tempDisable(this);CancelCasemix();"></td></tr>

</table>
</td></tr>
</table>
   </form>
<form name=PatientLinks method=get>
<input type=hidden name=reportno value=3>
<input type=hidden name=template value="013">
<input type=hidden name=urnumber value="%PATWEB71.04.003">
<input type=hidden name=admissno value="%PATWEB71.04.081">
<input type=hidden name=MenuType value="%PATWEB71.04.088">
<input type=hidden name=updatety value=1>
<input type=hidden name=alert001 value="">
</form>

<script type="text/javascript">
document.Casemix.old_casepay.value=document.Casemix.ptmis075.selectedIndex;
</script>
