<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src=../js/TableSort.js></script>
<script type="text/javascript" src="../js/OutpatientSelect.js"></script>
<script type="text/javascript" src="../js/OutpatientTypeClinic.js"></script>
<script type="text/javascript" src="../js/allweb0201.js"></script>
<script type="text/javascript">
//----------------------------------------------------------------------------
// Create New Table Object
// Border, Cellspacing, Cellpadding, Width, Align, Heading Height, Row Height
//----------------------------------------------------------------------------
// Add Columns in Order Required
// Heading,Type,Display Column,Sort Column, Align, Icon, Link Column
// Columns Available
//  0 - HTML Link  
//  1 - Patient Name
//  2 - Sex
//  3 - DOB
//  4 - U/R
//  5 - Referral Date
//  6 - Last EOC
//  7 - Problem
//  8 - Healthcare Professional
//---------------------------------------------------------------------------
function InitTable(TableView) {
  t = new Table(1,0,2,"100%","center",30);
  t.addColumn("Patient","ImageText",1,1,"left","PatientFolder","0",170,19);
  t.addColumn("Sex","String",2,2,"left","","",20);
  t.addColumn("U/R","String",3,3,"left","","",50);
  t.addColumn("DOB","Date",4,4,"left","","",65);
  t.addColumn("Referral Date","Date",5,5,"left","","",65);
  t.addColumn("Last Contact","Date",6,6,"center","","",65);
  t.addColumn("Problem","String",7,7,"left","","",95);
  t.addColumn("Healthcare Professional","String",8,8,"left","","",95);
  AddTableRows();
  TableOutput(0,1);    // Order Column,Asc Dsc
 }
//
function SelectPeriodSubmit() {
  SelectPeriod.submit();
}
//
function UpdateReferral(urn,adn,dpc) {
  PatientLinks.urnumber.value=urn;
  PatientLinks.admissno.value=adn;
  PatientLinks.deptcode.value=dpc;
  PatientLinks.submit();
}
//
function AddNewReferral() {
  AddReferral.doctcode.value=SelectPeriod.doctcode.value;
  Left=(document.body.clientWidth-900)/2;
  DFrameSubmit(AddReferral,0,Left,900,750);
}
function AddUserReferral() {
  if(isWhitespace(document.PatientLinks.wbsedall.value)) {
     alert("User does not have a default department.");
     return;
  }
  document.AddReferral.allrf001.value=document.PatientLinks.wbsedall.value;
  Left=(document.body.clientWidth-900)/2;
  DFrameSubmit(AddReferral,0,Left,900,750);
}
function HospitalFilter() {
  if(document.SelectPeriod.alcndhos.value=="1") {
     HospTitle.innerHTML=DisplayHospitalTitle.innerHTML;
     HospField.innerHTML=DisplayHospitalField.innerHTML;
     SiteTitle.innerHTML=DisplaySiteTitle.innerHTML;
     SiteField.innerHTML=DisplaySiteField.innerHTML;
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);HospitalFilter();
 InitTable(0);setTimeout('SetClinicTypeList(document.SelectPeriod);',100);">
<div id="HeadingSection"> 
<div id="PHeadingSection">

<form name=PatientLinks action=allweb02.pbl style="margin:0" method=get>
<input type=hidden name=reportno value=2>
<input type=hidden name=template value=14>
<input type=hidden name=urnumber>
<input type=hidden name=admissno>
<input type=hidden name=deptcode>
<input type=hidden name=wbsedall value="%STANDARD.01.028">
</form>

<form name=SelectPeriod action=allweb02.pbl style="margin:0"  method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=24>
<input type=hidden name=usersite value="%STANDARD.01.023">
<input type=hidden name=wbseclid value="%STANDARD.01.026">
<input type=hidden name=defctype value="%ALLWEB02.01.028">
<input type=hidden name=deftclid value="%ALLWEB02.01.027">
<input type=hidden name=alcndhos value="%STANDARD.01.025.106.224.0.1">

<table width=100% cellspacing=0 border=0 bgcolor=#cccccc>
<tr>
  <td class=DataLabel>Status</td>
  <td>
    <select name=refstats class=SelectBig onchange="SelectPeriodSubmit();">
      <option value="0">On Waiting List</option>
      <option value="1" selected>Active</option>
      <option value="2">Closed</option>
      <option value="3">Inactive</option>
      <option value="4">Cancelled</option>
      <option value="5">Rejected</option>
    </select>
  </td>
  <td>Department</td>
  <td>
    <select class=PMenuSelectList name=deptcode onchange="SelectPeriodSubmit()"> 
      <option></option>
      %ALLWEB02.01.038
    </select>
  </td>
  <td class=DataLabel>HCP
    <input type=text name=doctcode id=doctcode value="%ALLWEB02.01.020.0" class=DataField
     onchange="ValidateHCP(18,13,doctcode,psevt000,SelectPeriodSubmit);"
     size=10 maxlength=10>
    <input type=text name=psevt000 id=psevt000 title="Attending HCP" readonly size=24 
     value="%ALLWEB02.01.020.1">
    <img src="../images/SearchIcon.gif" class=Icon
     onclick="HCPSearchFrame(doctcode,psevt000,4,SelectPeriodSubmit);">
    <img src="../images/ClearIcon.gif" class=Icon
     onclick="clrFields(doctcode,psevt000,SelectPeriodSubmit);">
  </td>
</tr>
<tr>
  <td class=DataLabel>Clinic Type</td>
  <td>
    <select name=filtctyp class=SelectBig
     onchange="SetClinicIDList(document.SelectPeriod);SelectPeriodSubmit();">
      <option value="  ">Select Clinic Type</option>
    </select>
  </td>
  <td class=DataLabel>Clinic ID</td>
  <td>
    <select name=filtclid onchange="SelectPeriodSubmit()" class=SelectBig>
      <option value="zzzzzz">Select Clinic ID</option>
    </select>
  </td>
  <td class=DataLabel>
    Case Team
    <input type=text name=filtteam id=filtteam size=10 maxlength=10 title="Case Team"
     value="%ALLWEB02.01.025.1"
     onblur="validateCode2(7,filtteam,n_filtteam,SelectPeriodSubmit)">
    <input type=text name=n_filtteam id=n_filtteam size=25 readonly value="%ALLWEB02.01.025.0"
     class=Readonly tabindex=-1 title="Team Description">
    <img src="../images/SearchIcon.gif" class=Icon
     onclick="TeamSearchFrame(filtteam,n_filtteam,SelectPeriodSubmit)">
    <img src="../images/ClearIcon.gif" class=Icon
     onclick="clrFields(filtteam,n_filtteam,SelectPeriodSubmit);">
  </td>
</tr>
<tr>
  <td><div id="HospTitle"></div></td>
  <td><div id="HospField"></div></td>
  <td><div id="SiteTitle"></div></td>
  <td><div id="SiteField"></div></td>
  <td>&nbsp;</td>
</tr>
</table>
</form>

<form name=AddReferral method=get style="margin:0" action=allweb02.pbl>
<table width=100% cellspacing=0 border=1 bgcolor=#cccccc>
<input type=hidden name=reportno value=3>
<input type=hidden name=template value=2>
<input type=hidden name=doctcode value="">

<tr>
  <td width=95% class=HeadingCell align=center> 
    %ALLWEB02.01.023  Referrals - Current Active
  </td>
</tr>
</table>
</form>

<div id=DisplayHospitalTitle style="display: none">
<table align=center width=100% border=0 cellspacing=0>
<tr>
  <td>Preferred Hospital</td>
</tr>
</table>
</div>

<div id=DisplayHospitalField style="display: none">
<table align=center width=100% border=0 cellspacing=0>
<tr>
  <td>
    <select name=filthosp onchange="SelectPeriodSubmit()">
      <option></option>
      %ALLWEB02.01.039
    </select>
  </td>
</tr>
</table>
</div>

<div id=DisplaySiteTitle style="display: none">
<table align=center width=100% border=0 cellspacing=0>
<tr>
  <td>Preferred Site</td>
</tr>
</table>
</div>

<div id=DisplaySiteField style="display: none">
<table align=center width=100% border=0 cellspacing=0>
<tr>
  <td>
    <select name=filtpsit onchange="SelectPeriodSubmit()" >
      <option></option>
      %ALLWEB02.01.040
    </select>
  </td>
</tr>
</table>
</div>

<div id=TableLocation></div>
<script type="text/javascript">
function AddTableRows() {
  %ALLWEB02.01.036.1
}
referralstatus='%ALLWEB02.01.037'
for(var i=0 ; i<document.SelectPeriod.refstats.length; i++) {
    if (document.SelectPeriod.refstats.options[i].value==referralstatus){
        document.SelectPeriod.refstats.selectedIndex=i;
    }
}
</script>
