<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript"> 
  function init() {
    AddForm.redirect.value="watweb01.pbl?reportno=2&template=1&casekeys=" +
                             PatientLinks.casekeys.value.replace(/ /g,"+");
  }
  function AddBook() {
        
   if (validateMandatory(document.AddForm)) {
      ans=true;

// Check if dates are before date on list
      var DOLDay  = document.AddForm.wattr006.value.substring(0,2);
      var DOLMon  = document.AddForm.wattr006.value.substring(3,6);
      var DOLYear = document.AddForm.wattr006.value.substring(7,11);
      DOLMon = GetMonthNumber(DOLMon);
      var DOLDate = DOLYear + DOLMon + DOLDay

      var CADDay  = document.AddForm.bkrec004.value.substring(0,2);
      var CADMon  = document.AddForm.bkrec004.value.substring(3,6);
      var CADYear = document.AddForm.bkrec004.value.substring(7,11);
      CADMon = GetMonthNumber(CADMon);
      var CADDate = CADYear + CADMon + CADDay

      var CODDay  = document.AddForm.bkrec039.value.substring(0,2);
      var CODMon  = document.AddForm.bkrec039.value.substring(3,6);
      var CODYear = document.AddForm.bkrec039.value.substring(7,11);
      CODMon = GetMonthNumber(CODMon);
      var CODDate = CODYear + CODMon + CODDay

      var DBDay  = document.AddForm.bkrec034.value.substring(0,2);
      var DBMon  = document.AddForm.bkrec034.value.substring(3,6);
      var DBYear = document.AddForm.bkrec034.value.substring(7,11);
      DBMon = GetMonthNumber(DBMon);
      var DBDate = DBYear + DBMon + DBDay

      if(DOLDate>CADDate){
        alert("Error: Confirmed admission before date on list.")
         ans="false";
      }
      if(DOLDate>CODDate){
        alert("Error: Confirmed operation date is before date on list.")
         ans="false";
      }
      if(DOLDate>DBDate){
        alert("Error: Date booking made is before date on list.")
         ans="false";
      }
      if(CADDate>CODDate){
        alert("Error: Confirmed Operation date is before Confirmed Admission.")
         ans="false";
      }

      if(DBDate>CADDate){
        alert("Error: Date booking made must be before the confirmed admission date.")
         ans="false";
      }
      if(ans==true){
        AddForm.submit(); 
      }
  }
}
//
function CheckReason(Status) {
  if(Status.value==0) {
    document.AddForm.bkrec009.className=" ";
  } else {
    document.AddForm.bkrec009.className="Mandatory";
  }
}
</script>  
</head>
%START.OF.PAGE
<body onload="PageLoad(event);document.AddForm.bkrec004.focus();">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
    Take Up Bookings
</span>
<form name=AddForm action=watweb01.pbl method=post>
<input type=hidden name=reportno value=7>
<input type=hidden name=template value=19>
<input type=hidden name=setbookf value=1>
<input type=hidden name=updttype value=A>
<input type=hidden name=nextpage value=0>
<input type=hidden name=redirect value="">
<input type=hidden name=casekeys value="%WATWEB01.02.101">
<input type=hidden name=bkrec008 value="S  ">
<input type=hidden name=takeupfl value="1">

<table border=0 width="100%" cellspacing="0" cellpadding="1" align=center>
<tr><td align=center class=HeadingCell>Make a Waiting List Booking
</td></tr>
</table>
<table border=0 width="95%" cellspacing="0" cellpadding="0" align=center>

<tr><td class=DataLabel>Date on List</td>
    <td class=DataField>
    <input type=text name=wattr006 size=12  value='%WATWEB01.02.109'
     onblur="checkDate(this,'Date');" class=Readonly title="Date on List"
     readonly > </td>
    </select></td> </tr>

<tr><td class=DataLabel>Confirmed Admission Date</td>
    <td class=DataLabel>
    <input type=text name=bkrec004 size=12 tabindex=1
     class=Mandatory title="Scheduled Admission Date" 
     onblur="checkDate(this,'Date');">
    <img src=../images/DateLookup.gif class=Icon date=AddForm.bkrec004>
    </td></tr>

<tr><td class=DataLabel>Confirmed Operation Date </td>
    <td class=DataLabel colspan=3>
    <input type=text name=bkrec039 size=12 tabindex=2 
     class=Mandatory title="Proposed Procedure Date"
     onblur="checkDate(this,'Date');">
    <img src=../images/DateLookup.gif class=Icon date=AddForm.bkrec039>
    </td></tr>

<tr><td class=DataLabel>Date Booking Keyed        </td>
    <td class=DataField><input type=text size=12 name=bkrec034 class=Mandatory
        title="Date Booking Keyed" tabindex=3>
      <img notab src=../images/DateLookup.gif class=Icon date=AddForm.bkrec034>
    </td>

<tr><td class=DataLabel>Booking Status</td>
    <td class=DataField>
    <select name=takebsta class=Mandatory title="Booking Status"
            tabindex=4 onchange="CheckReason(this);">
    <option value=" "></option>
    <option value="0">Booked</option>
    <option value="2">Cancelled</option>
    </select></td></tr>

<tr><td class=DataLabel>Cancellation Reason</td>
    <td class=DataField>
    <select name=bkrec009 title="Cancellation Reason" tabindex=5>
    <option></option>
      %WATWEB01.02.311.2
    </select></td></tr>
<tr><td>&nbsp;</td></tr>


<tr><td colspan=4 align=center> 
    <input type=button value=Ok class="button" tabindex=6
     onclick='AddBook();'>
    <input type=button value=Cancel class="button" tabindex=7
     onclick='PatientLinkTo("watweb01.pbl",2,1,0,0,0);'>
    </td></tr>
</table>
</table>
</form>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%WATWEB01.02.003">
<input type=hidden name=admissno value="%WATWEB01.02.081">
<input type=hidden name=MenuType value="%WATWEB01.02.088">
<input type=hidden name=casekeys value="%WATWEB01.02.101">
</form>

