<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
var theButton; 
function showit() {}
function hideit() {}
function gotoBoarder(urnumber,admissno,ptbrbrdn) {
  linkurl="patweb83.pbl?reportno=5&template=001" +
  "&urnumber=" + urnumber + "&admissno=" + admissno + "&borduniq=" + ptbrbrdn
  location.href=linkurl
}
function validateDischargeDate(discdate) {

  var discdatestring = discdate.replace(/\s+/g,' ');

  if (!checkTime(document.SelectWard.ptdsc002,"Discharge Time")) {
    return false;
  }

  SetCurrentDateTimeNoFocus(SelectWard.curddate,SelectWard.currdttm);

//alert(SetDateYYYYMMDD(discdatestring)+" "+SetDateYYYYMMDD(SelectWard.curddate.value));

  if (SetDateYYYYMMDD(discdatestring) >
      SetDateYYYYMMDD(SelectWard.curddate.value)) {
    return false;
  }

  if (SetDateYYYYMMDD(discdatestring) ==
      SetDateYYYYMMDD(SelectWard.curddate.value)) {

    if (!isWhitespace(document.SelectWard.ptdsc002.value) &&
        !isWhitespace(document.SelectWard.currdttm.value)) {

      if (document.SelectWard.ptdsc002.value >
          document.SelectWard.currdttm.value) {
        alert("Discharge Date/Time cannot be greater than Current Date/Time.");
        document.SelectWard.ptdsc002.select();
        document.SelectWard.ptdsc002.focus();
        return false;
      }
    }
  }
  return true;
}
function dischargeAdm(dschbtn,admn,discdate) {
  dschbtn.disabled = true;
  theButton = dschbtn;
  setInterval('theButton.disabled = false',6000);
  p=document.DischargeForm;
  document.DischargeForm.admissno.value=admn.replace(/\+/g,' ');
  document.DischargeForm.ptdsc002.value=document.SelectWard.ptdsc002.value;
  document.DischargeForm.trantime.value=document.SelectWard.ptdsc002.value;
  if(p.ptdsc002.value==""){
    alert("Discharge Time is required.");
    return;
  }

  if (!validateDischargeDate(discdate)) {
    return;
  }

    document.DischargeForm.redirect.value="patweb93.pbl?reportno=1&template=13"+
             "&wardcode="+document.SelectWard.wardcode.value+
             "&ptdsc002="+document.SelectWard.ptdsc002.value;
  SubmitHidden(document.DischargeForm);
}
function UpdateCondition(urnumber,admissno) {
  linkurl="patweb93.pbl?reportno=5&template=001" +
          "&urnumber=" + urnumber + "&admissno=" + admissno
  DFrameLink(linkurl,50,250,500,300)
}
function UpdateDiet(urnumber,admissno) { 
  linkurl="patweb98.pbl?reportno=4&template=003" +
          "&urnumber=" + urnumber + "&admissno=" + admissno
  DFrameLink(linkurl,0,75,300,150)
}
function PatientAlerts(urnumber,admissno) { 
  linkurl="patweb98.pbl?reportno=1&template=003" +
          "&urnumber=" + urnumber + "&admissno=" + admissno
  location.href=linkurl
}
function PatientResults(urnumber,admissno) { 
  linkurl="cliweb03.pbl?reportno=1&template=001" +
          "&urnumber=" + urnumber + "&admissno=" + admissno
  location.href=linkurl
}
function BedAllocation(urnumber,admissno) {
  linkurl="patweb96.pbl?reportno=3&template=005" +
          "&urnumber=" + urnumber + "&admissno=" + admissno
  DFrameLink(linkurl,50,250,300,120)
}
function InitTable(TableView) {
  ward=document.SelectWard.wardcode.value;
  bed=document.SelectWard.wbedtype.value;
  if (TableView==0) {
      linkurl="patweb93.pbl?reportno=1&template=010" +
              "&wardcode=" + ward +
              "&wbedtype=" + bed 
      }
  location.href=linkurl;
}
function ModBeds() {
  document.cookie = "WardListPath=" + escape(location.href) + ";";
  var ward = document.SelectWard.wardcode.value.replace(/ /g,"+");
  location.href="patweb95.pbl?reportno=5&template=001&wardcode=" + ward;
}
function ChangeWard() {
  document.cookie = "WardListPath=" + escape(location.href) + ";";
  var ward = document.SelectWard.wardcode.value.replace(/ /g,"+");
  location.href="websec01.pbl?reportno=5&template=001&wardcode=" + ward +"&wardflag=1";
}
</script>
%START.OF.PAGE
<body onload="PageLoad(event);SetCount();">
<form name=SelectWard action=patweb93.pbl method=get style=margin:0>
<input type=hidden name=reportno value="1">
<input type=hidden name=template value="013">
<input type=hidden name=currdttm>
<input type=hidden name=curddate>
<table width=100% cellspacing=0 border=0>

<tr><td class=HeadingCell>
    <td class=HeadingCell align=center>
        Current Admission for %PATWEB93.01.102</td>
   <td class=HeadingCell width=10%><input type=bigbutton value="Change Ward (D)"
        class="button" onclick="ChangeWard();"></td>
    <td class=HeadingCell width=25%>
          Discharge Time
       <input type="text" name="ptdsc002" size="8" tabindex="2"
          value="%PATWEB93.01.042" title="Discharge Time">
        <img notab src="../images/DateTimeStamp.gif" class=Icon
          onclick="SetCurrentDateTime(null,SelectWard.ptdsc002);" />
        <img notab src="../images/TimeLookup.gif" class=Icon
          onclick="TimeLookupFrame(SelectWard.ptdsc002);" />
          </td>
    </tr>
</table>
<table width=100% cellspacing=0 border=0>
<tr><td class=HeadingCell> Ward
        <select name=wardcode onchange="SelectWard.submit();" >
         %PATWEB93.01.001
        </select></td>

    <td class=HeadingCell> Type of Bed
        <select name=wbedtype onchange="SelectWard.submit();" >
                <option value="0">All Beds</option>
                <option value="1">Open Beds</option>
                <option value="2">Empty Beds Only</option>
    </select></td>

    <td class=HeadingCell> Number of Patients 
        <input type=text readonly name=numofpat size=3></td>

    <td class=HeadingCell>Patients in Un-Allocated Beds
        <input type=text readonly name=numunbed size=3></td>
</tr>
</table>
</form>
<table cellspacing=0 cellpadding=2 border=1 width=100%>

%PATWEB93.01.041.patweb98.01.001.patweb99.01.001.0

</table>
<tr><td colspan=7>
    <table border=0 align=center width=100%>
       <tr align=center height=35>
           <td width=25%></td>     
           <td width=10% class=AvailableCell align=center>
               Available Bed</td>
           <td width=10% class=ClosedCell align=center bgcolor=gray>
               Closed Bed</td>
           <td width=10% class=StandbyCell align=center>
               Standby Patient</td>
           <td width=10% class=PastDischDate align=center>
               Past Date </td>
           <td width=10% class=CurrDischDate align=center>
               Current Date </td>
           <td width=25%></td></tr>
    </table></td></tr>

<script type="text/javascript">
function SetCount() {
  document.SelectWard.numofpat.value="%PATWEB93.01.012" 
  document.SelectWard.numunbed.value="%PATWEB93.01.010" 
}
BedType="%PATWEB93.01.013"
for (var i =0 ; i < document.SelectWard.wbedtype.length; i++) {
  if (document.SelectWard.wbedtype.options[i].value==BedType.substr(0,1)) {
       document.SelectWard.wbedtype.selectedIndex=i } };
</script>
<form name=DischargeForm method=get action=patweb89.pbl>
<input type=hidden name=reportno value="11">
<input type=hidden name=template value="013">
<input type=hidden name=admissno value="">
<input type=hidden name=redirect value="">
<input type=hidden name=nextpage value="2">
<input type=hidden name=ptdsc002 value="">
<input type=hidden name=trantime value="">
</form>
