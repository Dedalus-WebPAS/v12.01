<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"      content="true">
<script type="text/javascript" src="../js/oprweb06.js"></script>
<script type="text/javascript">
function validateData() {
  if (validateMandatory(UpdateForm)) {
    document.UpdateForm.nextpage.value="6"
    document.UpdateForm.redirect.value="oprweb06.pbl?reportno=18&template=001" +
      "&urnumber=" + document.UpdateForm.urnumber.value +
      "&admissno=" + document.UpdateForm.admissno.value +
      "&casekeys=" + document.UpdateForm.casekeys.value +
      "&uniqueky=" + document.UpdateForm.uniqueky.value;
    return true;
  }
  return false;
}

function UpdateRecord() {
  if (validateData()) {
    document.UpdateForm.updatety.value = "U";
    UpdateForm.submit();
  }
}

function DeleteRecord() {
  if (validateData()) {
    var ans = confirm("Are you sure you wish to delete this record?");
    if (ans) {
      document.UpdateForm.updatety.value = "D";
      UpdateForm.submit();
    }
  }
}

function Cancel() {
  if ( (document.UpdateForm.deltflag.value == "1") || 
       confirm("Cancel Update?") ) {
    DFrameExit();
  }
}
function ChkFld() {
  if (isWhitespace(UpdateForm.opcbd007.value)) { return true; }
  if(isNaN(UpdateForm.opcbd007.value)){
     alert("Birth Weight must be numeric");
     document.UpdateForm.opcbd007.value="";
     document.UpdateForm.opcbd007.focus();
     return;
  }
  justifyRight(UpdateForm.opcbd007);
  if (trim(UpdateForm.opcbd007.value) < 0  ||
      trim(UpdateForm.opcbd007.value) > 9999) {
       alert('Birth Weight must be greater than 0 and less than 9999');
       document.UpdateForm.opcbd007.value="";
       document.UpdateForm.opcbd007.focus();
  }
  return;
}

</script>

</head>
%START.OF.PAGE
<body onload="PageLoad(event);">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon"
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
Update Caesarean Baby Details
</span>

<br>

<form  name=UpdateForm action="oprweb06.pbl" method=post
 onsubmit='return validateMandatory(this)'>
<input type=hidden name=reportno value=18>
<input type=hidden name=template value=003>
<input type=hidden name=updatety value="">
<input type=hidden name=admissno value="%OPRWEB06.18.081">
<input type=hidden name=urnumber value="%OPRWEB06.18.003">
<input type=hidden name=casekeys value="%OPRWEB06.18.101">
<input type=hidden name=uniqueky value="%OPRWEB06.18.110">
<input type=hidden name=redirect value="">
<input type=hidden name=nextpage value="">
<input type=hidden name=opcbd001 value="%OPRWEB06.18.201">
<input type=hidden name=deltflag value="%OPRWEB06.18.207">

<table align=center cellspacing=2 cellpadding=2 border=0 width=90%>
<tr><td class=DataLabel width=21%>Count</td>
    <td class=DataField>
      <input type=text name=opcbd002 size=2 maxlength=2 readonly class=Readonly 
       value="%OPRWEB06.18.202">
    </td>
</tr>

<tr><td class=DataLabel>Sex</td>
    <td><div id=divSex></div></td>
</tr>

<tr><td class=DataLabel>Date of Birth</td>
    <td class=DataField><div id=divDOB></div></td>
</tr>

<tr><td class=DataLabel>Time of Birth</td>
    <td class=DataField><div id=divTOB></div></td>
</tr>

<tr><td class=DataLabel>U/R Number</td>
    <td class=DataField><div id=divURN></div></td>
</tr>

<tr><td class=DataLabel>Birth Weight</td>
    <td><div id=divBWH></div></td>
</tr>

<tr><td class=DataLabel>Placenta Delivery Time</td>
    <td class=DataField><div id=divPDT></div></td>
</tr>

</table>

<br>

<table align=center cellspacing=0 cellpadding=2 border=0 width=95%>
<tr>
  <td colspan=2 align=center>
    <input type=button class="button" value="Update" name=btnUpdate tabindex=10
     id=btnUpdate
     onclick="tempDisable(this);UpdateRecord();">
    <input type=button class="button" value="Delete" name=btnDelete tabindex=11
     id=btnDelete
     onclick="tempDisable(this);DeleteRecord();">
    <input type=button class="button" value="Cancel" tabindex=12
     onclick="Cancel();">
  </td>
</tr>
</table>

</form>

<span id=spSexSelect style="display:none">
  <select name=opcbd003 tabindex=2 title="Sex" class=Mandatory>
    <option></option>
    <option value="R">Intersex</option>
    <option value="U">Unknown</option>
    <option value="I">Indeterminate</option>
    <option value="M">Male</option>
    <option value="F">Female</option>
  </select>
</span>

<span id=spSexDisp style="display:none">
  <input type=text size=12 id=inpSex readonly class=Readonly>
</span>

<span id=spDOBFld style="display:none">
  <input type=text size=12 name=opcbd004 class="Mandatory PastDate" tabindex=3
   title="Date of Birth" value="%OPRWEB06.18.204">
  <img src=../images/DateLookup.gif class=Icon date=UpdateForm.opcbd004>
</span>

<span id=spDOBDisp style="display:none">
  <input type=text size=12 id=inpDOB readonly class=Readonly>
</span>

<span id=spTOBFld style="display:none">
  <input type=text size=12 name=opcbd005 title="Time of Birth" tabindex=4
   value="%OPRWEB06.18.205">
  <img src="../images/DateTimeStamp.gif" class=Icon
   date=UpdateForm.opcbd005 time=UpdateForm.opcbd005>
  <img src=../images/TimeLookup.gif class=Icon time=UpdateForm.opcbd005>
</span>

<span id=spTOBDisp style="display:none">
  <input type=text size=12 id=inpTOB readonly class=Readonly>
</span>

<span id=spURNFld style="display:none">
  <input type=text name=opcbd006 size=12 maxlength=8 title="U/R Number"
   value="%OPRWEB06.18.206" tabindex=5 onblur="ValidateUR(this);">
  <img src=../images/SearchIcon.gif alt="Search" class=Icon notab
   onclick="SearchPatient(UpdateForm);">
  <img src="../images/erase.gif" alt="Clear" class="Icon"
   onclick="clrFields(UpdateForm.opcbd006);">
  <input type=hidden name=d1>
  <input type=hidden name=d2>
</span>

<span id=spURNDisp style="display:none">
  <input type=text size=12 id=inpURN readonly class=Readonly>
</span>

<span id=spBWHFld style="display:none">
  <input type=text name=opcbd007 size=8 maxlength=6 title="Birth Weight"
   value="%OPRWEB06.18.210" tabindex=6 onblur="ChkFld(this);"> gm
</span>

<span id=spBWHDisp style="display:none">
  <input type=text size=8 id=inpBWH readonly class=Readonly>
</span>

<span id=spPDTFld style="display:none">
  <input type=text size=12 name=opcbd008 
   title="Placenta Delivery Time" tabindex=7 value="%OPRWEB06.18.211">
  <img src="../images/DateTimeStamp.gif" class=Icon
   date=UpdateForm.opcbd008 time=UpdateForm.opcbd008>
  <img src=../images/TimeLookup.gif class=Icon time=UpdateForm.opcbd008>
</span>

<span id=spPDTDisp style="display:none">
  <input type=text size=12 id=inpPDT readonly class=Readonly>
</span>

<script type="text/javascript">
var PatientSex="%OPRWEB06.18.203";
var divSex = document.getElementById('divSex');
var spSex = document.getElementById('spSexDisp');
var spSexSelect = document.getElementById('spSexSelect');

var divDOB = document.getElementById('divDOB');
var spDOB = document.getElementById('spDOBDisp');
var spDOBFld = document.getElementById('spDOBFld');

var divTOB = document.getElementById('divTOB');
var spTOB = document.getElementById('spTOBDisp');
var spTOBFld = document.getElementById('spTOBFld');

var divURN = document.getElementById('divURN');
var spURN = document.getElementById('spURNDisp');
var spURNFld = document.getElementById('spURNFld');

var divBWH = document.getElementById('divBWH');
var spBWH = document.getElementById('spBWHDisp');
var spBWHFld = document.getElementById('spBWHFld');

var divPDT = document.getElementById('divPDT');
var spPDT = document.getElementById('spPDTDisp');
var spPDTFld = document.getElementById('spPDTFld');

if (document.UpdateForm.deltflag.value == "1") {
  // Deleted record...

  divSex.innerHTML = spSex.innerHTML;
  var inpSex = document.getElementById('inpSex');
  var sSex = ""
  switch (PatientSex) {
    case "R":
      sSex = "Intersex";
      break;
    case "U":
      sSex = "Unknown";
      break;
    case "I":
      sSex = "Indeterminate";
      break;
    case "M":
      sSex = "Male";
      break;
    case "F":
      sSex = "Female";
      break;
  }
  inpSex.value = sSex;

  divDOB.innerHTML = spDOB.innerHTML;
  var inpDOB = document.getElementById('inpDOB');
  inpDOB.value = "%OPRWEB06.18.204";

  divTOB.innerHTML = spTOB.innerHTML;
  var inpDOB = document.getElementById('inpTOB');
  inpDOB.value = "%OPRWEB06.18.205";

  divURN.innerHTML = spURN.innerHTML;
  var inpURN = document.getElementById('inpURN');
  inpURN.value = "%OPRWEB06.18.206";

  divBWH.innerHTML = spBWH.innerHTML;
  var inpBWH = document.getElementById('inpBWH');
  inpBWH.value = "%OPRWEB06.18.210";

  divPDT.innerHTML = spPDT.innerHTML;
  var inpPDE = document.getElementById('inpPDT');
  inpPDE.value = "%OPRWEB06.18.211";

  document.UpdateForm.btnUpdate.disabled = true;
  document.UpdateForm.btnDelete.disabled = true;
}
else {
  divSex.innerHTML = spSexSelect.innerHTML;
  for (var i =0 ; i < document.UpdateForm.opcbd003.length; i++) {
    if (document.UpdateForm.opcbd003.options[i].value == 
          PatientSex.substr(0,1)) {
      document.UpdateForm.opcbd003.selectedIndex = i;
    }
  }

  divDOB.innerHTML = spDOBFld.innerHTML;
  divTOB.innerHTML = spTOBFld.innerHTML;
  divURN.innerHTML = spURNFld.innerHTML;
  divBWH.innerHTML = spBWHFld.innerHTML;
  divPDT.innerHTML = spPDTFld.innerHTML;
}
</script>
