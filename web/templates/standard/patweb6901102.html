<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<script type="text/javascript" src="../js/patweb90.js"></script>
<script type="text/javascript" src="../js/patweb69.js"></script>
<script type="text/javascript">
function init() {
  setDefault();
  SubmitSearch();
}

function CheckBirthDate() {
  if (checkDate(document.search.srchpdob,'Date of Birth')) {
    setBirth(this);
  }
  else {
    document.search.srchpdob.value="          ";
    document.search.srchpdob.focus();
  }
}

function DisableEnterKey(e)
{
  var key = (window.event) ? window.event.keyCode : e.which;
  return (key != 13);
}

function submitOnEnter(e)
{
  var key = (window.event) ? window.event.keyCode : e.which;

  if (key == 13 && 
      checkDate(document.search.srchpdob,'Date of Birth') && 
      ProcessSubmit()) {
    document.search.submit();
  }
  return true;
}

function ProcessSubmit() {
  var p = document.search;

  if (!validateMandatory(p))
    return false;

  p.srchsnam.value.replace(/\'/g,"~")

  setBirth(p.srchpdob);

  p.srchcont.value = "";

  if (CheckFields()) {
    // check our LHD connection before proceeding with search
    if (HasConnection()) {
      return true;
    }
  }

  return false;
}

function Cancel() {
  if (parent.SearchResults.document.body != undefined) {
    parent.SearchResults.document.body.innerHTML = "";
  }
  //parent.SearchOptions.location.href = "patweb90.pbl?reportno=1&template=102";
  var sURL = document.search.redirect.value +
             "&srchsnam=" + document.search.srchsnam.value +
             "&srchgnam=" + document.search.srchgnam.value + "+" +
                            document.search.srchmnam.value +
             "&srchpsex=" + document.search.srchpsex.value +
             "&srchpdob=" + document.search.srchpdob.value;

  if (!isWhitespace(document.search.srchmedi.value)) {
    sURL += "&srchmedi=" + document.search.srchmedi.value + "&srchtype=5";
  }

  parent.SearchOptions.location.href = sURL;
}

function SubmitSearch() {
  if (ProcessSubmit()) {
    document.search.submit();
  }
}

function SubmitNext(ContPoint) {
  if (ProcessSubmit()) {
    document.search.srchnext.value = "1";  // set the next batch search flag
    document.search.srchcont.value = ContPoint;
    document.search.submit();
  }
}

function HideNextBtn() {
  var nextBtn = parent.SearchResults.document.getElementById('spNextBtn');
  if (nextBtn != undefined) {
    nextBtn.style.display = "none";
  }
}

function setMedicare(MedicareNo) {
  if (!isWhitespace(MedicareNo.value)) {
    CheckMedicareScan(MedicareNo);
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);">

<span class=DFrameTitleBar>
<img border=0 align=right src="../images/ExitIcon.gif"
 onclick="SearchFrameExit();">
<script type="text/javascript">document.write(self.document.title);</script>
</span>

<div style="background-color:#cccccc;height:100%;">
<form name=search id=search method=get action=patweb69.pbl 
 onsubmit='return ProcessSubmit();' onkeydown='return DisableEnterKey(event);'
 onkeyup='return submitOnEnter(event);' target=SearchResults>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=011>
<input type=hidden name=norecord value="%PATWEB69.01.032">
<input type=hidden name=redirect value="%PATWEB69.01.017">
<input type=hidden name=ptcnhdps value="%STANDARD.01.025.080.250.1.1">
<input type=hidden name=ptcnuepm value="%STANDARD.01.025.125.155.0.1">
<input type=hidden name=srchtype value="1">
<input type=hidden name=srchpage value="">
<input type=hidden name=srchnext value="">
<input type=hidden name=srchcont value="">

<table width=100% height=100% border=0 cellpadding=2 cellspacing=2
 bgcolor=#F3E2A9>
<tr valign=top><td class=DataLabel>Surname<br>
      <input type=text name=srchsnam id=srchsnam onblur="UpCaseSearch(this)" 
       size=15 tabindex=1 title="Surname" value="%PATWEB69.01.003"
       onchange="HideNextBtn();">
    </td>
    <td class=DataLabel>First Given Name<br>
      <input type=text name=srchgnam id=srchgnam onblur="UpCaseSearch(this)"
       size=15 tabindex=2 title="First Given Name" value="%PATWEB69.01.004"
       onchange="HideNextBtn();">
    </td>
    <td class=DataLabel nowrap>Second Given Name<br>
      <input type=text name=srchmnam id=srchmnam onblur="UpCaseSearch(this)"
       size=15 tabindex=3 title="Second Given Name" value="%PATWEB69.01.005"
       onchange="HideNextBtn();">
    </td>
    <td class=DataLabel>Gender<br>
      <select name=srchpsex id=srchpsex tabindex=4 title="Gender"
       onchange="HideNextBtn();">
        <option value=" "></option>
        <option value="M">Male</option>
        <option value="F">Female</option>
        <option value="U">Unknown</option>
        <option value="I">Indeterminate</option>
      </select>
    </td>
    <td class=DataLabel>Date of Birth<br>
       <input type="text" size="12" name=srchpdob id=srchpdob tabindex=5
        title="Date of Birth" value="%PATWEB69.01.007" 
        onchange="CheckBirthDate();HideNextBtn();">
    </td>
    <td class=DataLabel>Medicare No.<br>
       <input type="text" size="14" maxlength=11 name=srchmedi id=srchmedi
        tabindex=6 title="Medicare No." value="%PATWEB69.01.008"
        onblur="setMedicare(this);" onchange="HideNextBtn();">
    </td>
    <td class=DataLabel nowrap><br>
<!--
      <input type=checkbox name=d_quickreg id=d_quickreg tabindex=-1 value="1"
       onclick='ToggleMandatory(this);'>
      <font color=red>Quick Registration</font>
//-->
    </td>
    <td width=40%>
      <table width=100% border=0 cellpadding=2 cellspacing=2>
      <tr><td valign=middle align=right>
      <input type=submit value="LHD Search" class="button" tabindex=10><br>
      <input type=button value="Cancel" class="button" tabindex=11
       onclick='Cancel();'>
      </td></tr>
      </table>
    </td>
</tr>
</table>

</form>
</div>

<form name=linkForm action=patweb98.pbl method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=1>
<input type=hidden name=urnumber value="">
<input type=hidden name=admissno value="">
</form>

<script type="text/javascript">
function setDefault() {
  AddGender();
  for (var i =0 ; i < document.search.srchpsex.length; i++) {
    if (document.search.srchpsex.options[i].value=="%PATWEB69.01.006") {
      document.search.srchpsex.selectedIndex=i;
    }
  };
}
</script>
