<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome"    content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"    content="true">
<link rel="stylesheet" href="../html/postcode.css" type="text/css">
<script type="text/javascript" src="../js/AutoPostCode.js"></script>
<script type="text/javascript" src="../js/priweb02.js"></script>
<script type="text/javascript" src="../js/AddressSearch.js"></script>

<script type="text/javascript">
function setRedirect() {
  checkInd=AddForm.claimcod.value.substr(3,5)
  checkCVT=AddForm.claimcod.value.substr(8,1)
  if (checkInd.search(/M/g) >= 0) {
     AddForm.redirect.value="priweb02.pbl?reportno=01&template=007"
             + "&progflag=9"
             + "&urnumber=" + AddForm.urnumber.value + "&additmsc=1";
   } else if (checkInd.search(/V/g) >= 0) {
       AddForm.redirect.value="priweb02.pbl?reportno=01&template=008"
               + "&progflag=9"
               + "&urnumber=" + AddForm.urnumber.value + "&additmsc=1";
   } else if (checkInd.search(/W/g) >= 0) {
       AddForm.redirect.value="priweb02.pbl?reportno=01&template=006"
               + "&progflag=9"
               + "&urnumber=" + AddForm.urnumber.value + "&additmsc=1";
   } else if (checkCVT.search(/C/g) >= 0) {
       AddForm.redirect.value="priweb02.pbl?reportno=01&template=017"
               + "&progflag=9"
               + "&urnumber=" + AddForm.urnumber.value + "&additmsc=1";
   } else {
       AddForm.redirect.value="priweb02.pbl?reportno=01&template=013"
               + "&urnumber=" + AddForm.urnumber.value + "&additmsc=1";
   }
}
function FormSubmit(type) {

  if (document.getElementById("ptcnuimc").value == "1") {
    if (document.getElementById("prhre028").value.substr(3,1) == "7" ||
        document.getElementById("prhre028").value.substr(3,1) == "6") {
      if (document.getElementById("prhre032").value != "1") {
  alert("Benefit Assigned Authorised must be Yes if Type of IMC is MO or MB."); 
        return;
      } 
    }

    if (document.getElementById("prhre028").value.substr(3,1) == "2") {
      if (document.getElementById("prhre033").value.substr(3,1) != "W" &&
          document.getElementById("prhre033").value.substr(3,1) != "X") {
        alert("IFC Issue Code must be set to W or X if Type of IMC is SC.");
        return;
      }
    }

    if (document.getElementById("prhre028").value.substr(3,1) == "1") {
      if (document.getElementById("prhre033").value.substr(3,1) != "W" &&
          document.getElementById("prhre033").value.substr(3,1) != "X" &&
          document.getElementById("prhre033").value.substr(3,1) != "V") {
        alert("IFC Issue Code must be set to W,X or V if Type of IMC is AG.");
        return;
      }
    }

    if (document.getElementById('prhre004')!=null &&
        !isWhitespace(document.getElementById('prhre002').value) &&
        !isWhitespace(document.getElementById('prhre004').value)) {

      if (trim(document.getElementById('prhre002').value.substr(0,6)) == 
          trim(document.getElementById('prhre004').value.substr(0,6))) {

        alert("The Referring HCP cannot be the same as the Service HCP. Please change.");
        return;

      }

    }

    if (document.getElementById("prhre028").value.substr(3,1) == "2") {
      if (document.getElementById("prhre037").value != "1") {
        alert("Financial Int Disclosure Ind must be set to Yes if Type of IMC is SC.");
        return;
      }
    }

  }

  //T0867807-Start
  //Benefit Assigned Authorised must be Yes if bulk billing
  if (document.getElementById('ptcnuebb').value=="1" &&
      document.getElementById('prhre028').value.substr(3,1)=="3" &&
      document.getElementById('prhre032').value!="1"){
      alert("Benefit Assigned Authorised must be Yes");
      return;
  }
  //T0867807-End

  document.AddForm.updttype.value=type;
  if (validateMandatory(AddForm)) {
     setRedirect();
     document.AddForm.submit();
  }
}
function prfa1() {
  if (ReturnValue[1]=="C") {
    document.AddForm.prhre015.value="Medicare";
    document.AddForm.prhre016.value="";
    document.AddForm.prhre017.value="";
    document.AddForm.prhre018.value="";
    document.AddForm.prhre019.value="";
    document.AddForm.prhre020.value="";
    document.AddForm.prhre021.value="";
    document.AddForm.prhre022.selectedIndex=0;
    document.AddForm.prhre026.value="";
    document.AddForm.prhre027.value="";
  }
}
function prfa2() {
  document.AddForm.prhre015.value=trim(ReturnValue[0]);  // Name
  document.AddForm.prhre016.value=trim(ReturnValue[1]);  // Address Line 1
  document.AddForm.prhre017.value=trim(ReturnValue[2]);  // Address Line 2
  document.AddForm.prhre018.value=trim(ReturnValue[3]);  // Suburb
  document.AddForm.prhre019.value=trim(ReturnValue[4]);  // Postcode
  document.AddForm.prhre020.value=trim(ReturnValue[5]);  // Private Phone
  document.AddForm.prhre021.value=trim(ReturnValue[6]);  // Business Phone

  for (var i = 0; i < document.AddForm.prhre022.length; i++) {
    if (document.AddForm.prhre022.options[i].value == ReturnValue[7]) {
      document.AddForm.prhre022.selectedIndex = i;       // Relationship
    }
  }

  document.AddForm.prhre026.value=trim(ReturnValue[8]);  // State
  document.AddForm.prhre027.value=trim(ReturnValue[9]);  // Mobile Phone
}
function SetFields() {
  state = AddForm.prhre026;
  suburb = AddForm.prhre018;
  postcode = AddForm.prhre019;
}

function CheckSuburb(Address) {
  if (Address!="") {
     LookupPostCode(Address);
  }
}

function showAccDate() {
  checkInd=document.AddForm.claimcod.value.substr(3,5);
  if ((checkInd.search(/M/g) >= 0) || (checkInd.search(/W/g) >= 0)) {
     AccDateOptionHead.style.display="";
     AccDateOptionCode.style.display="";
     AccDateOptionHead.innerHTML=AccidentDateH.innerHTML;
     AccDateOptionCode.innerHTML=AccidentDateF.innerHTML; 
  }
  else {
     AccDateOptionHead.innerHTML=" ";
     AccDateOptionCode.innerHTML=" ";
     AccDateOptionHead.style.display="none";
     AccDateOptionCode.style.display="none"; }
}

// Default Postal address to patient details
function defaultAddr() {
  document.AddForm.prhre016.value=document.AddForm.postadd1.value;
  document.AddForm.prhre017.value=document.AddForm.postadd2.value;
  document.AddForm.prhre018.value=document.AddForm.postadd3.value;
  document.AddForm.prhre019.value=document.AddForm.postpost.value;
  document.AddForm.prhre026.value=document.AddForm.postadd4.value;
  document.AddForm.defaultButton.disabled=true;
}

// Check if default postal address is allowed
function setDefaultButton() {
  document.AddForm.defaultButton.disabled=false;
  if(document.AddForm.ptcnnewc.value=="1") {
    document.AddForm.postadd1.value=document.AddForm.x_padd1.value;
    document.AddForm.postadd2.value=document.AddForm.x_padd2.value;
    document.AddForm.postadd3.value=document.AddForm.x_psubrb.value;
    document.AddForm.postpost.value=document.AddForm.x_ppost.value;
    document.AddForm.postadd4.value=document.AddForm.x_padd4.value;
  }
  if (isWhitespace(document.AddForm.postadd1.value)) {
     document.AddForm.defaultButton.disabled=true;
  }
  var strchk=document.AddForm.claimcod.value.substr(3,5);
  if ((strchk.search(/M/g) >= 0) ||
      (strchk.search(/W/g) >= 0) ||
      (strchk.search(/V/g) >= 0)) {
     document.AddForm.defaultButton.disabled=true;
  }
}
function setHealthFund() {
  if (document.getElementById("claimcod").value.substr(3,1)=="H") {
    document.getElementById("healthfd").className="Mandatory"; 
  } else {
    document.getElementById("healthfd").className="";
  }
}
/*************************************************************
*  tableId   - table with all divs for Claim Type selection   
*  index  - the number to start the tabindex   
*  setTabIndexsByElement() - Recursive function to set tab indexes for 
*                            hidden DIV
**************************************************************/
var tabIndex;
var txt=""
function setTabIndexs(){
  tabIndex=6;  // starting tabindex counter for DIV(s)
  var tableElement = document.getElementById("tblClaimType");
  setTabIndexsByElement(tableElement);
}

function setTabIndexsByElement(Node){ //Recursive function to set tab index 
  if (Node) {
    if (Node.childNodes) {
      for (var i = 0; i < Node.childNodes.length; i++) {
        el = Node.childNodes[i];
        if (el.nodeType != 3 && (el.nodeName == "INPUT"  || el.nodeName == "SELECT"))
        {
          if (el.type != "hidden" && !el.readOnly) {
            tabIndex++;
            el.tabIndex = tabIndex;
          }
        }
        if (el.nodeType != 3 && el.childNodes) {
          setTabIndexsByElement(el);
        }
      }
    }
  }
}

//
// Functions called from AddressSearch.js
//
function InitAddressSearch() {
  // line1 - 'prhre016'
  // line2 - 'prhre017'
  // suburb - 'prhre018'
  // state - 'prhre026'
  // postcode - 'prhre019'

  InitAddressSearchFields('trAddrSrch','prhre016','prhre017','prhre018','prhre026','prhre019');
}
function ShowAddressSearch() {
  OpenAddressSearch('1',PopulateAddress,ClearSearchAddress);
}
function PopulateAddress(StreetLine, Suburb, State, Postcode) {
  LookupSuburb(Postcode);  // validate Postcode with our Lookup values
  if (SelectPC.length == 0) return;  // no match found

  LookupPostCode(Suburb);  // validate Suburb
  if (SelectPC.length == 0) return;  // no match found

  ToggleFieldReadOnly('prhre016', true);
  ToggleFieldReadOnly('prhre017', false);
  ToggleFieldReadOnly('prhre018', true);
  ToggleFieldReadOnly('prhre026', true);
  ToggleFieldReadOnly('prhre019', true);

  SetFieldValue('prhre016',StreetLine);
  SetFieldValue('prhre017','');
  SetFieldValue('prhre018',Suburb);
  SetFieldValue('prhre026',State);
  SetFieldValue('prhre019',Postcode);
}
function ClearSearchAddress() {
  ToggleFieldReadOnly('prhre016', false);
  ToggleFieldReadOnly('prhre017', false);
  ToggleFieldReadOnly('prhre018', false);
  ToggleFieldReadOnly('prhre026', false);
  ToggleFieldReadOnly('prhre019', false);

  SetFieldValue('prhre016','');
  SetFieldValue('prhre017','');
  SetFieldValue('prhre018','');
  SetFieldValue('prhre026','');
  SetFieldValue('prhre019','');
}
function validateRefDoctor() {
  if (document.AddForm.prhre034.value.substr(3,1)=="S") {
    document.AddForm.doctnam2.className="Mandatory";
  } else {
    document.AddForm.doctnam2.className="";
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);InitPostCodes();SetFields();setDefaultButton();
              validateIMC();
              if (validateCode(16,document.AddForm.healthfd,
                               document.AddForm.funddesc)) { defaultCATta();
                               assignrefEclipseDIV(); }; 
              InitAddressSearch();
              FilterClaimType(document.AddForm.claimcod);">
<div id="PatientHeading"></div>
<script type="text/javascript">
PatientURN="%PRIWEB02.01.003";
PatientVIS="%PRIWEB02.01.081";
PatientNAM="%PRIWEB02.01.002";
PatientSTA="%PRIWEB02.01.086.078";
PatientALT="%PRIWEB02.01.084";
PatientSEX="%PRIWEB02.01.019";
PatientDOB="%PRIWEB02.01.020";
PatientAGE="%PRIWEB02.01.021";
PatientLOC="%PRIWEB02.01.083";
PatientPRI="%PRIWEB02.01.086.066.1";
PatientUNT="%PRIWEB02.01.066.0";
DoctorCOD="%PRIWEB02.01.082.003";
DoctorNAM="%PRIWEB02.01.082.002";
PatientAID="%PRIWEB02.01.086.090";
PatientIND="%PRIWEB02.01.086.091";
PatientCUR="%PRIWEB02.01.086.092";
PatientCLC="%PRIWEB02.01.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PRIWEB02.01.086.094";
PatientCDM="%PRIWEB02.01.086.095";
PatientVDH="%PRIWEB02.01.086.099.015";
InsertPatientHeader()
</script>
<div id="PatientMenu"></div>

<div id="PageBodySection">
<form name="AddForm" method="post" action="priweb02.pbl" style="margin:0">
<input type=hidden name="urnumber" value="%PRIWEB02.01.003">
<input type=hidden name="admissno" value="%PRIWEB02.01.081">
<input type=hidden name="uniqnumb" value="%PRIWEB02.01.207">
<input type=hidden name="medicare" value="%PRIWEB02.01.027">
<input type=hidden name="fundcode" value="%PRIWEB02.01.040.0">
<input type=hidden name="reportno" value="1">
<input type=hidden name="template" value="004">
<input type=hidden name="updttype" value=" ">
<input type=hidden name="dummy" id=dummy value="">
<input type=hidden name="nextpage" value="1">
<input type=hidden name="redirect">
<input type=hidden name="prcndocm" value="%PRIWEB02.01.227">
<input type=hidden name="postadd1" value="%PRIWEB02.01.944">
<input type=hidden name="postadd2" value="%PRIWEB02.01.945">
<input type=hidden name="postadd3" value="%PRIWEB02.01.946">
<input type=hidden name="postadd4" value="%PRIWEB02.01.947">
<input type=hidden name="postpost" value="%PRIWEB02.01.948">
<input type=hidden name="ptcnuimc" id="ptcnuimc"
       value="%STANDARD.01.025.124.111.0.1">
<input type=hidden name="ptcnuesf" id="ptcnuesf"
       value="%STANDARD.01.025.124.222.0.1">
<input type=hidden name=ptcnnewc value="%STANDARD.01.025.118.138.0.1">
<input type=hidden name=x_padd1 value="%PRIWEB02.01.244.007">
<input type=hidden name=x_padd2 value="%PRIWEB02.01.244.008">
<input type=hidden name=x_psubrb value="%PRIWEB02.01.244.009">
<input type=hidden name=x_padd4 value="%PRIWEB02.01.244.010">
<input type=hidden name=x_ppost value="%PRIWEB02.01.244.011">
<input type=hidden name="ptcnuebb" id="ptcnuebb"
       value="%STANDARD.01.025.127.122.0.1">
<input type=hidden name=ptcnuadv id=ptcnuadv
       value="%STANDARD.01.025.123.247.0.1">
<input type=hidden name=ptcnhdps id=ptcnhdps
       value="%STANDARD.01.025.080.250.1.1">
<input type=hidden name="ptcndvaw" id="ptcndvaw"
       value="%STANDARD.01.025.129.249.0.1">


<table cellspacing="0" cellpadding="1" border="0" width="100%">
    <tr><td class="HeadingCell" align="center" colspan="4">
            Input Billing Details</td></tr>

    <tr><td class="DataLabel">Medical Practice</td>
        <td><select name="prhre001" id="prhre001" class="Mandatory"
                    title="Medical Practice" tabindex="1" value=""
                    onchange="clrFields(prhre002,doctname);">
              <option> </option>
                %PRIWEB02.01.101.2
            </select></td>
       <td colspan="2">&nbsp;</td></tr>

   <tr><td class="DataLabel">Service HCP</td>
       <td><input type="text" name="prhre002" id="prhre002" class="Mandatory"
                  title="Service HCP" tabindex="2" size="12" maxlength="10"
                  onblur="UpCase(this);
                          validateSDoc(prhre001,prhre002,doctname);">
           <input type="text" class="Readonly" readonly size="25" tabindex=-1
                  name="doctname" id="doctname" title="Service HCP">
             <img src="../images/SearchIcon.gif" align="absmiddle"
                  class=Icon
                  onclick="MPDoctorSearch(prhre001,prhre002,doctname);">
             <img src="../images/erase.gif" align="absmiddle" hspace="0"
                  class=Icon
                  onclick="clrFields(prhre002,doctname);"></td>
       <td colspan="2">&nbsp;</td></tr>

   <tr><td class="DataLabel">Patient Indicator</td>
       <td><select name="prhre003" id="prhre003" class="Mandatory" value=""
                   title="Patient Indicator" tabindex="3">
              <option> </option>
                %PRIWEB02.01.103.2
           </select></td>
       <td colspan="2">&nbsp;</td></tr>

    <tr><td class=DataLabel>%STANDARD.01.017.CL</td>
        <td><select name="claimcod" id="claimcod" class="Mandatory" value=""
                    title="%STANDARD.01.017.CL" tabindex="4"
                    onchange="showAccDate();
                              GetPRFA(claimcod,urnumber,prhre001,prfa2);
                              setDefaultButton();
                              setHealthFund();defCATtaBBilling();
                              setTabIndexs();">
              <option> </option>
                %PRIWEB02.01.204.9.1.10.2.X
            </select></td>
       <td colspan="2">&nbsp;</td></tr>

  <td class=DataLabel>
    <div id=hftitleDIV>
    Health Fund
    </div>
  </td>
  <td>
    <div id=hffieldDIV>
    <input type=text size=6 maxlength=6 name=healthfd id=healthfd 
     title="Health Fund" value="%PRIWEB02.01.040.0"
     tabindex=5 
     onblur="if (validateCode(16,document.AddForm.healthfd,funddesc)) {
               defaultCATta();assignrefEclipseDIV(); 
             }">
    <input type=text size=25 maxlength=30 name=funddesc id=funddesc
     class=readonly readonly tabindex=-1>
    <img src=../images/SearchIcon.gif border=0 hspace=0 align=absmiddle
     class=Icon onclick="HealthFundSearchFrame(healthfd,funddesc,dummy,dummy);">
    <img src="../images/erase.gif" align=absmiddle 
     class=Icon onclick="clrDoc(healthfd,funddesc);">
    </div>
  </td>

   <tr><td class=DataLabel><div id="AccDateOptionHead"></div></td>
       <td><div id="AccDateOptionCode"></div></td>
       <td colspan="2">&nbsp;</td></tr>

    <tr><td align="center" colspan="4"><hr></td></tr>

    <tr><td width=12%>
    <div id="imcdeftitleDIV">
    %STANDARD.01.017.ta
    </div>
    </td>
        <td>
        <div id="imcdeffieldDIV">
            <select name="prhre028" id="prhre028" class="Mandatory" 
             title="%STANDARD.01.017.ta" tabindex="6" 
             onchange="assignrefEclipseDIV();setTabIndexs();">
              <option> </option>
              %STANDARD.01.007.ta
            </select>
        </div>
        </td>
    <td colspan="2"><b>Person Responsible for Account</b></td></tr>

    <tr>
        <td rowspan=11 colspan=2 valign=top width=54%>
        <table id="tblClaimType" cellspacing="0" cellpadding="0" border="0" 
         width="100%"> 
        <tr><td>
          <div id=refEclipseDIV1></div>
        </td></tr>
        <tr><td>
          <div id=refEclipseDIV2></div> 
        </td></tr>
        <tr><td>
          <div id=refEclipseDIV3></div>
        </td></tr>
        <tr><td>
          <div id=refEclipseDIV4></div>
        </td></tr>
        <tr><td>
          <div id=refEclipseDIV5></div>
        </td></tr>
        </table>
        </td>
        <td class="DataLabel">Name</td>
        <td><input type="text" size="47" name="prhre015" id="prhre015"
             title="Person Responsible for Account"
             tabindex="20" maxlength="45"></td>
    </tr>

    <tr id=trAddrSrch style="display:none">
        <td class=DataLabel nowrap>Search Address</td>
        <td><input type=text readonly size=42 tabindex="-1"
             style="cursor:pointer;text-align:center;"
             value="Click here to search for an address"
             title="Click here to search for an address"
             onclick="ShowAddressSearch();">
        </td>
    </tr>

    <tr>
        <td class="DataLabel">Address Line 1</td>
        <td><input type="text" size="42" maxlength="35" tabindex="21"
             name="prhre016" id="prhre016" title="Address Line 1"
             onchange="UpCase(this);"></td>
    </tr>

    <tr>
        <td class=DataLabel>Address Line 2</td>
        <td><input type="text" size="42" maxlength="35" tabindex="22"
             name="prhre017" id="prhre017" title="Address Line 2"
             onchange="UpCase(this);"></td>
    </tr>

    <tr>
        <td class="DataLabel">Suburb</td>
        <td><input type="text" size="42" maxlength="35" tabindex="23"
             name="prhre018" id="prhre018" title="Suburb"
             onblur="CheckSuburb(this.value);"></td>
    </tr>

    <tr>
        <td class="DataLabel">State</td>
        <td><input type="text" size="42" maxlength="35" tabindex="24"
             name="prhre026" id="prhre026" title="State"></td>
    </tr>

    <tr>
        <td class="DataLabel">Postcode</td>
        <td><input type="text" size="10" maxlength="8" tabindex="25"
             name="prhre019" id="prhre019" title="Postcode"
             onchange="LookupSuburb(this.value);">
            <input tabindex="41" type="button" value="Default Postal Address"
             name="defaultButton" id="defaultButton"
             onclick="defaultAddr();"></td>
    </tr>

    <tr>
        <td class=DataLabel>Business Phone</td>
        <td><input type="text" size="20" maxlength="20" tabindex="26"
             name="prhre021" id="prhre021" title="Business Phone"></td>
    </tr>

    <tr>
        <td class="DataLabel">Private Phone</td>
        <td><input type="text" size="20" maxlength="20" tabindex="27"
             name="prhre020" id="prhre020" title="Private Phone"></td>
    </tr>

    <tr>
        <td class="DataLabel">Mobile Phone</td>
        <td><input type="text" size="20" maxlength="20" tabindex="28"
             name="prhre027" id="prhre027" title="Mobile Phone"
             class="MobilePhone"></td>
    </tr>

    <tr>
        <td class="DataLabel">Relationship</td>
        <td><select name="prhre022" id="prhre022" tabindex="29"
             title="Relationship">
              <option value="          "></option>
                %STANDARD.01.030
           </select></td>
    </tr>


<tr align="center">
       <td colspan="4" align="center"><br>
       <input tabindex="50" type="button" value="Ok" class="button" id="okbtn"
              onclick="tempDisable(this);FormSubmit('A');">
       <input tabindex="51" type="button" value="Cancel" class="button"
              onclick="PatientLinkTo('priweb02.pbl',1,1,0);"></td></tr>
</table> 
</form>

 <span id="AccidentDateH" style="display:none">Accident Date</span>

 <span id="AccidentDateF" style="display:none">
       <input type="text" size="12" name="accidate" id="accidate" tabindex="-1"
              class="Mandatory PastDate" title="Accident Date"
              onblur="checkDate(accidate,accidate.title);">
         <img src="../images/DateLookup.gif" border="0" hspace="4"
              class=Icon align="absmiddle" onclick="DateLookupFrame(accidate);">
 </span>

 <span id="refEclipseSPAN1" style="display:none">
   <table cellspacing="0" cellpadding="0" border="0" width="100%">
   <tr><td class="DataLabel" width=22%>Referring Doctor</td>
       <td><input type=hidden name=prhre004 id=prhre004>
           <input type="text" readonly size="30" maxlength="30"
                  name="doctnam2" id=doctnam2  
                  title="Referring Doctor" tabindex="-1">
           <img src="../images/SearchIcon.gif" class=Icon
             onclick="GPHCPSearchFrame(prhre004,doctnam2,genpprov,
                      prhre039,genpprac,prhre040)">
           <img src="../images/erase.gif" class=Icon
             onclick="clrFields(prhre004,doctnam2,prhre039,genpprac,
                      prhre040,genpprov);"></td></tr>
    <tr><td class=DataLabel>Practice</td>
        <td><input type=hidden name=prhre039 id=prhre039
             value="">
            <input type=hidden name=prhre040 id=prhre040
             value="">
            <input type=hidden name=genpprov id=genpprov
             value="">
            <input type=text readonly name=genpprac id=genpprac
             size=30 maxlength=30 value="" title="Practice">
            <img src="../images/SearchIcon.gif" class=Icon
             onclick="GPHCGSearchFrame(prhre004,doctnam2,genpprov,
                      prhre039,genpprac,prhre040)">
            <img src="../images/erase.gif" class=Icon
             onclick="clrFields(prhre004,doctnam2,prhre039,genpprac,
                      prhre040,genpprov);"></td></tr>

    <tr><td class="DataLabel">Referring Date</td>
        <td><input type="text" size="12" class="PastDate" tabindex="-1"
             name="prhre005" id="prhre005" title="Referring Date">
              <img src="../images/DateLookup.gif" border="0" hspace="4"
                   class=Icon
                   align="absmiddle" onclick="DateLookupFrame(prhre005);"></td>
    </tr>

    <tr><td class="DataLabel">Referring Details</td>
        <td><input type="text" size="52" maxlength="50" tabindex="-1"
             name="prhre006" id="prhre006"
             title="Referring Details" value=""></td>
    </tr>

    <tr><td class="DataLabel">Referral Period</td>
        <td><select name="prhre025" id="prhre025" tabindex="-1"
             title="Referral Period" value=""
             onchange="displayReferralPeriodMonths();setTabIndexs();">
              <option> </option>
                %PRIWEB02.01.125.2
            </select></td>
    </tr>

    <tr><td class="DataLabel"><div id="referralperiodtitleDIV"></div></td>
        <td><div id="referralperiodfieldDIV"></div></td>
    </tr>

    <tr><td class="DataLabel">Message Code</td>
        <td><select name="prhre007" id="prhre007" value="" tabindex="-1"
             title="Message Code">
              <option> </option>
                %PRIWEB02.01.107.2
            </select></td>
    </tr>

    <tr><td class="DataLabel">Bulk Billing Code</td>
        <td><select name="prhre008" id="prhre008" tabindex=-1 value=""
             title="Bulk Billing Code"
            onchange="validateBulk(medicare,fundcode,claimcod,prhre008,prfa1);">
              <option> </option>
                %PRIWEB02.01.108.2
            </select></td>
    </tr>

    <tr><td class="DataLabel">Operation Code(s)</td>
        <td><input type="text" size="22" maxlength="20" tabindex="-1"
             name="prhre010" id="prhre010" value=""
             title="Operation Code"></td>
    </tr>
    </table>
 </span>

 <span id="refEclipseSPAN2" style="display:none">
   <table cellspacing="0" cellpadding="0" border="0" width="100%">
     <tr>
      <td width=22%>Accident Indicator</td>
      <td>
        <select name=prhre030 id=prhre030 tabindex=-1 class=Mandatory 
         title="Accident Indicator">
        <option value=" ">   </option>
        <option value="0">No</option>
        <option value="1">Yes</option>
        </select>
      </td>
     </tr>
     <tr>
      <td>Account Paid</td>
      <td>
        <b>
          No
          <input type=hidden name=prhre031 id=prhre031 value="0">
        </b>
      </td>
     </tr>
     <tr>
      <td>Benefit Assigned Authorised</td>
      <td>
        <select name=prhre032 id=prhre032 tabindex=-1 class=Mandatory
         title="Benefit Assigned Authorised">
        <option value=" ">   </option>
        <option value="0">No</option>
        <option value="1">Yes</option>
        </select>
      </td>
     </tr>

     <tr>
        <td width=12%>%STANDARD.01.017.ic</td>
        <td>
            <select name="prhre033" id="prhre033" class="Mandatory"
             title="%STANDARD.01.017.ic" tabindex="-1">
              <option> </option>
              %STANDARD.01.021.ic
            </select>
        </td>
     </tr>

     <tr>
        <td width=12%>%STANDARD.01.017.st</td>
        <td>
            <select name="prhre034" id="prhre034" class="Mandatory"
             title="%STANDARD.01.017.st" tabindex="-1"
             onchange="validateRefDoctor();">
              <option> </option>
              %STANDARD.01.021.st
            </select>
        </td>
     </tr>

   </table>
 </span>

 <span id="refEclipseSPAN3" style="display:none">
   <table cellspacing="0" cellpadding="0" border="0" width="100%">
     <tr>
      <td width=22%>Financial Int Disclosure Ind</td>
      <td>
        <select name=prhre037 id=prhre037 tabindex=-1 
         title="Financial Interest Disclosure Ind">
        <option value=" ">   </option>
        <option value="0">No</option>
        <option value="1">Yes</option>
        </select>
      </td>
     </tr>
   </table>
 </span>

 <span id="refEclipseSPAN4" style="display:none">
   <table cellspacing="0" cellpadding="0" border="0" width="100%">
     <tr>
      <td width=22%>Benefit Assigned Authorised</td>
      <td>
        <select name=prhre032 id=prhre032 tabindex=-1 class=Mandatory
         title="Benefit Assigned Authorised">
        <option value=" ">   </option>
        <option value="0">No</option>
        <option value="1">Yes</option>
        </select>
      </td>
     </tr>
     <tr>
        <td width=12%>%STANDARD.01.017.st</td>
        <td>
            <select name="prhre034" id="prhre034" class="Mandatory"
             title="%STANDARD.01.017.st" tabindex="-1">
              <option> </option>
              %STANDARD.01.021.st
            </select>
        </td>
     </tr>
   </table>
 </span>


 <span id="refEclipseSPAN5" style="display:none">
   <table cellspacing="0" cellpadding="0" border="0" width="100%">
     <tr>
      <td width=22%>%STANDARD.01.017.ro</td>
      <td>
        <select name=prhre038 id=prhre038 tabindex=-1
         title="%STANDARD.01.017.ro">
        <option></option>
         %STANDARD.01.021.ro
        </select>
      </td>
     </tr>
   </table>
 </span>

 <span id=hffieldSPAN style="display:none">
   <input type=hidden name="healthfd" id="healthfd" value="">
   <input type=hidden name="funddesc" id="funddesc" value="">
 </span>

 <form name="PatientLinks" method="get">
  <input type=hidden name="reportno" value="1">
  <input type=hidden name="template" value="004">
  <input type=hidden name="urnumber" value="%PRIWEB02.01.003">
  <input type=hidden name="admissno" value="%PRIWEB02.01.081">
  <input type=hidden name="uniqnumb" value="%PRIWEB02.01.207">
  <input type=hidden name="MenuType" value="%PRIWEB02.01.088">
 </form>
</div>

<script type="text/javascript">
function defaultCATta() {
  if (!isWhitespace(document.getElementById('healthfd').value)) {
    var serverURL = '../cgi-bin/emrweb08.pbl?reportno=50' +
                    '&valdcode=' +
                 document.getElementById('healthfd').value.replace(/ /g,'+');

    var returnValue = RSExecute(serverURL);

    if (returnValue.status==0) {
      if (!isWhitespace(returnValue.return_value)) {
        for (var i =0;
             i < document.getElementById('prhre028').length;
             i++) {
          if (trim(returnValue.return_value)==
              trim(document.getElementById('prhre028')[i].
              value.substr(0,3))) {
             document.getElementById('prhre028').selectedIndex=i;
             break;
          }
        }
      }
    }
  }
}

//T0859743-start
function defCATtaBBilling(){
  if (document.getElementById('ptcnuebb').value !="1") {
      return; //Not bulk billing
  }

  //For a selected Claim type that is Public (cat CL ind1=P) then
  //default the first Bulk Billing from cat ta with ind1=3
   theField = document.getElementById('prhre028');

   if (document.getElementById("claimcod").value.substr(3,1)=="P") {
      for (var j=0; j < theField.length; j++){
          theValue = theField.options[j].value;
          if (!isWhitespace(theValue)){
             if (theValue.substr(3,1)=="3"){
                 theField.selectedIndex=j;
                 break;
             }
          }
      }
      assignrefEclipseDIV();
      return;
   }
  //T0867807-Start
  //For a selected Claim Type that is Non-public/Private (cat CL ind1!=P) then
  //reset the Eclipse type
   refEclipseDIV1.innerHTML="";
   refEclipseDIV2.innerHTML="";
   refEclipseDIV3.innerHTML="";
   refEclipseDIV4.innerHTML="";
   refEclipseDIV5.innerHTML="";
   theField.value="";
   return;
  //T0867807-End
}
//T0859743-end

function assignrefEclipseDIV() {
  refEclipseDIV1.innerHTML="";
  refEclipseDIV2.innerHTML=""; 
  refEclipseDIV3.innerHTML="";
  refEclipseDIV4.innerHTML="";
  refEclipseDIV5.innerHTML="";
 
  if (isWhitespace(document.getElementById('prhre028').value)) {return;}

  if (document.getElementById('prhre028').value.substr(4,1)=="R") {
    refEclipseDIV1.innerHTML=refEclipseSPAN1.innerHTML;
    if (document.AddForm.prcndocm.value == 1) {
//    document.AddForm.prhre004.className="Mandatory"; //T0872823
      document.AddForm.doctnam2.className="Mandatory"; //T0872823
      document.AddForm.prhre005.className="Mandatory";
      document.AddForm.prhre025.className="Mandatory"; //T0867807
    }
  } 

  if (document.getElementById('prhre028').value.substr(3,1)=="1" ||
      document.getElementById('prhre028').value.substr(3,1)=="2" ||
      document.getElementById('prhre028').value.substr(3,1)=="6" ||
      document.getElementById('prhre028').value.substr(3,1)=="7") {
    refEclipseDIV2.innerHTML=refEclipseSPAN2.innerHTML;
    refEclipseDIV3.innerHTML=refEclipseSPAN3.innerHTML;

    if (document.getElementById('prhre028').value.substr(3,1)=="2") {
      document.getElementById('prhre037').className="Mandatory";
      document.getElementById('prhre037').selectedIndex=2;
    }

   if (document.AddForm.doctnam2 != undefined) {
    document.AddForm.doctnam2.className="";
    validateRefDoctor();
   }

  }

  //T0859743-start
  //Show Benefit Assigned Authorised if bulk billing
  if (document.getElementById('ptcnuebb').value=="1" &&
      document.getElementById('prhre028').value.substr(3,1)=="3") {
     refEclipseDIV4.innerHTML=refEclipseSPAN4.innerHTML;
  }

  //Show Benefit Assigned Authorised if DVAW
  if (document.getElementById('ptcndvaw').value=="1" &&
      document.getElementById('prhre028').value.substr(3,1)=="8") {
     refEclipseDIV4.innerHTML=refEclipseSPAN4.innerHTML;
  }

  //Show Referral Override when either the Using Eclipse IMC,
  //Using Eclipse Patient Store and Forward or Using Eclipse Bulk Billing
  //Using Eclipse DVAW
  //parameters are enabled
  if ((document.getElementById('ptcnuimc').value=="1") ||
      (document.getElementById('ptcnuesf').value=="1") ||
      (document.getElementById('ptcndvaw').value=="1") ||
      (document.getElementById('ptcnuebb').value=="1")) {
     refEclipseDIV5.innerHTML=refEclipseSPAN5.innerHTML;
  }
  //T0859743-end

}
function validateIMC() {
  if (document.getElementById("ptcnuimc").value!="1" &&
      document.getElementById("ptcnuesf").value!="1" &&
      document.getElementById("ptcndvaw").value!="1" &&
      document.getElementById("ptcnuebb").value!="1") {
    hftitleDIV.innerHTML="";
    hffieldDIV.innerHTML=hffieldSPAN.innerHTML;
    imcdeftitleDIV.innerHTML="";
    imcdeffieldDIV.innerHTML="";
    refEclipseDIV1.innerHTML=refEclipseSPAN1.innerHTML;
    if (document.AddForm.prcndocm.value == 1) {
//    document.AddForm.prhre004.className="Mandatory"; //T0872823
      document.AddForm.doctnam2.className="Mandatory"; //T0872823
      document.AddForm.prhre005.className="Mandatory";
      document.AddForm.prhre025.className="Mandatory"; //T0867807
    }
  }
}
function displayReferralPeriodMonths() {
  if (document.getElementById('prhre025').value.substr(3,1)=="N") {
    document.getElementById('referralperiodtitleDIV').innerHTML=
    referralperiodtitleSPAN.innerHTML;  
    document.getElementById('referralperiodfieldDIV').innerHTML=
    referralperiodfieldSPAN.innerHTML;
  } else {
    document.getElementById('referralperiodtitleDIV').innerHTML="";
    document.getElementById('referralperiodfieldDIV').innerHTML="";
  }
}
</script>

<span id="referralperiodtitleSPAN" style="display:none">
Referral Period (Months)
</span>

<span id="referralperiodfieldSPAN" style="display:none">
<input type="text" size="10" maxlength="2" name="prhre036" id="prhre036"
 title="Referral Period (Months)" tabindex="-1" 
 class="Number Mandatory JustifyRight"
 min="1" max="98" >
</span>

