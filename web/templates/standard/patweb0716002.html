<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome"    content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"    content="true">
<link rel="stylesheet" href="../html/postcode.css" type="text/css">
<script type="text/javascript" src="../js/AutoPostCode.js"></script>
<script type="text/javascript" src="../js/AddressSearch.js"></script>

<script type="text/javascript">
function valPostCode(){
  if (isWhitespace(AddForm.pmpyr010.value)) {
    return;
  }

  UpCase(AddForm.pmpyr010);

  if (trim(AddForm.pmpyr012.value)!="8888") {
    suburb   = AddForm.pmpyr010;
    state    = AddForm.pmpyr011;
    postcode = AddForm.pmpyr012;
    LookupPostCode(AddForm.pmpyr010.value);
  }
}
function SetPostVars() {
  suburb   = AddForm.pmpyr010;
  state    = AddForm.pmpyr011;
  postcode = AddForm.pmpyr012;
}

function AddPayer() {
  if (validateMandatory(AddForm)) {
    if (!isWhitespace(AddForm.pmpyr019.value)) {
      if (!CheckDateRange(AddForm.pmpyr018,AddForm.pmpyr019)) {
        return;
      }
    }
    if (document.AddForm.d_pmpyr002.checked==true) {
      document.AddForm.pmpyr002.value="1";
    } else {
      document.AddForm.pmpyr002.value="0";
    }
    SubmitForm();
  }
}

//
// Functions called from AddressSearch.js
//
function InitAddressSearch() {
  // line 1 - 'pmpyr008'
  // line 2 - 'pmpyr009'
  // suburb - 'pmpyr010'
  // state - 'pmpyr011'
  // postcode - 'pmpyr012'

  InitAddressSearchFields('trAddrSrch','pmpyr008','pmpyr009','pmpyr010','pmpyr011','pmpyr012');
}
function ShowAddressSearch() {
  OpenAddressSearch('1',PopulateAddress,EnableAddressFields);
}
function PopulateAddress(StreetLine, Suburb, State, Postcode) {
  LookupSuburb(Postcode);  // validate Postcode with our Lookup values
  if (SelectPC.length == 0) return;  // no match found

  LookupPostCode(Suburb);  // validate Suburb
  if (SelectPC.length == 0) return;  // no match found

  ToggleFieldReadOnly('pmpyr008', true);
  ToggleFieldReadOnly('pmpyr009', false);
  ToggleFieldReadOnly('pmpyr010', true);
  ToggleFieldReadOnly('pmpyr011', true);
  ToggleFieldReadOnly('pmpyr012', true);

  SetFieldValue('pmpyr008',StreetLine);
  SetFieldValue('pmpyr009','');
  SetFieldValue('pmpyr010',Suburb);
  SetFieldValue('pmpyr011',State);
  SetFieldValue('pmpyr012',Postcode);
}
function EnableAddressFields() {
  ToggleFieldReadOnly('pmpyr008', false);
  ToggleFieldReadOnly('pmpyr009', false);
  ToggleFieldReadOnly('pmpyr010', false);
  ToggleFieldReadOnly('pmpyr011', false);
  ToggleFieldReadOnly('pmpyr012', false);

  SetFieldValue('pmpyr008','');
  SetFieldValue('pmpyr009','');
  SetFieldValue('pmpyr010','');
  SetFieldValue('pmpyr011','');
  SetFieldValue('pmpyr012','');
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);InitPostCodes();InitAddressSearch();">

<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
Add Payer
</span>

<form name=AddForm method=post action=patweb07.pbl style="margin:0">
<input type=hidden name=reportno value="16">
<input type=hidden name=template value="002">
<input type=hidden name=updttype value="A">
<input type=hidden name=urnumber value="%PATWEB07.16.003">
<input type=hidden name=pmpyr002 value="">
<input type=hidden name=ptcnuadv id=ptcnuadv
value="%STANDARD.01.025.123.247.0.1">

<table align=center width=100% border=0>
<tr><td>

<table align=center cellspacing=0 cellpadding=1 width=95% border=0>
<tr><td class=DataLabel width=18%>Default Payer</td>
    <td><input type=checkbox name=d_pmpyr002 id=d_pmpyr002 title="Default Payer"
         value="2" tabindex=1></td>
    <td class=DataLabel>%STANDARD.01.017.CL</td>
    <td><select name=pmpyr003 id=pmpyr003 title="%STANDARD.01.017.CL" tabindex=2
         class=Mandatory>
          <option></option>
          %PATWEB07.16.103.2
        </select>
    </td>
</tr>

<tr><td class=DataLabel width=18%>Title</td>
    <td><select title="Title" name=pmpyr004 id=pmpyr004 tabindex=3>
        <option></option>
        %STANDARD.01.029
        </select></td>
    <td class=DataLabel>Relationship</td>
    <td><select name=pmpyr013 id=pmpyr013 tabindex=20 title="Relationship">
          <option value=""></option>
          %STANDARD.01.030
        </select>
    </td>
</tr>

<tr><td class=DataLabel>Surname</td>
    <td><input type=text name=pmpyr005 id=pmpyr005 title="Surname" tabindex=4
         size=35 maxlength=35 tabindex=3 
         onchange="UpCase(this);">
    </td>
    <td class=DataLabel>Private Phone</td>
    <td><input type=text name=pmpyr014 id=pmpyr014 title="Private Phone"
         size=12 maxlength=12 tabindex=21>
    </td>
</tr>

<tr><td class=DataLabel>Given Name</td>
    <td><input type=text name=pmpyr006 id=pmpyr006 title="Given Name" tabindex=5
         size=35 maxlength=35 tabindex=5 
         onchange="UpCase(this);">
    </td>
    <td class=DataLabel>Work Phone</td>
    <td><input type=text name=pmpyr015 id=pmpyr015 title="Work Phone" size=22
         maxlength=20 tabindex=22>
    </td>
</tr>


<tr><td class=DataLabel nowrap>Second Given Name</td>
    <td><input type=text name=pmpyr007 id=pmpyr007 title="Second Given Name"
         size=35 maxlength=35 tabindex=6
         onchange="UpCase(this);">
    </td>
    <td class=DataLabel>Mobile Phone</td>
    <td><input type=text name=pmpyr016 id=pmpyr016 title="Mobile Phone" size=22
         maxlength=20 tabindex=23>
    </td>
</tr>

<tr id=trAddrSrch style="display:none">
    <td class=DataLabel nowrap>Search Address</td>
    <td><input type=text readonly size=42 tabindex="-1"
         style="cursor:pointer;text-align:center;"
         value="Click here to search for an address"
         title="Click here to search for an address"
         onclick="ShowAddressSearch();">
    </td>
</tr>

<tr><td class=DataLabel>Address</td>
    <td><input type=text size=42 maxlength=35 tabindex=7
        name=pmpyr008 id=pmpyr008 title="Address Line 1" 
        onchange="UpCase(this);">
    </td>
</tr>

<tr><td class=DataLabel>&nbsp;</td>
    <td><input type=text size=42 maxlength=35 tabindex=8
        name=pmpyr009 id=pmpyr009 title="Address Line 2" 
        onchange="UpCase(this);">
    </td>
</tr>

<tr><td class=DataLabel>Suburb</td>
    <td><input type=text size=42 maxlength=35 title="Suburb"
       name=pmpyr010 id=pmpyr010 tabindex=9
       onchange="valPostCode();"></td>
    <td class=DataLabel>Effective Date</td>
    <td><input type=text size=12 name=pmpyr018 id=pmpyr018 tabindex=24
         class=Mandatory title="Effective Date">
        <img notab src="../images/DateLookup.gif" class="Icon"
             alt="Show Calendar" date="AddForm.pmpyr018">
        <img align=absmiddle src="../images/erase.gif"
             onclick="clrFields(pmpyr018);">
    </td>
<tr>

<tr><td class=DataLabel>State</td>
    <td><input type=text size=42 maxlength=35 title="State"
       name=pmpyr011 id=pmpyr011 tabindex=10
       onchange="UpCase(this);"></td>
    <td class=DataLabel nowrap>Effective To Date</td>
    <td><input type=text size=12 name=pmpyr019 id=pmpyr019 tabindex=25
         title="Effective To  Date">
        <img notab src="../images/DateLookup.gif" class="Icon"
             alt="Show Calendar" date="AddForm.pmpyr019">
        <img align=absmiddle src="../images/erase.gif"
             onclick="clrFields(pmpyr019);">
    </td>
</tr>

<tr><td class=DataLabel>Post Code</td>
    <td><input type=text size=4 maxlength=4 tabindex=11
        name=pmpyr012 id=pmpyr012 title="Post Code" 
        onchange="SetPostVars();LookupSuburb(this.value);">
    </td>
</tr>
<tr><td class=DataLabel>Email</td>
    <td colspan=3>
      <input type=text size=80 maxlength=80 tabindex=12
       name=pmpyr017 id=pmpyr017 title="Email">
    </td>
</tr>
</table>

<table align=center cellspacing=2 cellpadding=1 width=95% border=0>
<tr><td colspan=2 align=center>
      <input type=button class="button" value="Add" tabindex=30
       onclick="AddPayer();">    
      <input type=button class="button" value="Close" tabindex=31
       onclick="DFrameCloseRefresh()">
    </td>
</tr>
</table>

</td></tr>
</table>
</form>

