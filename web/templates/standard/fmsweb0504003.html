<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
  function UpdateTerminal(){
    var uf = document.UpdateForm;
    if(uf.d_fmept003.checked){uf.fmept003.value="1";}
    if (validateMandatory(uf)) uf.submit();
  }

  function DeleteTerminal(){
    var uf = document.UpdateForm;
    uf.updttype.value="D";
    uf.submit();
  }

  function TestTerminal(){
    var uf  = document.UpdateForm;
    var url = "../php/fmsweb0504.php?addr=" + uf.fmept004.value
    +"&port=" + uf.fmept005.value + "&httprand=" + Math.random();

    uf.response.style.display = "block";
    xmlHttp = createHttpObject();
    xmlHttp.open("GET",url,false); 
    xmlHttp.send(null)
    if(xmlHttp.responseText.substring(0,3)!="000"){
      uf.d_fmept003.checked = false;
      uf.response.innerHTML = "FAIL\n" + xmlHttp.responseText.slice(4);
    }
    else{
      uf.response.innerHTML = "SUCCESS";
    }
  }
</script>
</head>

%START.OF.PAGE
<body onLoad="PageLoad(event);">

<span class=DFrameTitleBar>
  <img align="right" alt="Exit" class="MenuIcon" 
   src="../images/ExitIcon.gif" onclick="DFrameExitRefresh();">
   Update EFTPOS Terminal
</span>

<form name=UpdateForm method=post action=fmsweb05.pbl style="margin:0">
<input type=hidden name=reportno value="4">
<input type=hidden name=template value="003">
<input type=hidden name=updttype value="U">
<input type=hidden name=nextpage value="0">
<input type=hidden name=fmept001 value="%FMSWEB05.04.004">

  <table align=center width=90% border=0>
    <tr>
      <td class=DataLabel>Terminal ID</td>
      <td>
        <input type=text name="fmept002" title="Terminal ID" 
         value="%FMSWEB05.04.006" class=readonly readonly>
      </td>
    </tr>
    <tr>
      <td class=DataLabel>Description</td>
      <td>
        <input type=text name="fmept006" title="Description" 
         value="%FMSWEB05.04.010" class=Mandatory size=30 maxlength=30>
      </td>
    </tr>
    <tr>
      <td class=DataLabel>Address IP/URL</td>
      <td>
        <input type=text name="fmept004" title="Address IP/URL"      
         value="%FMSWEB05.04.008" class=Mandatory size=40 maxlength=40>
      </td>
    </tr>
    <tr>
      <td class=DataLabel>Port Number</td>
      <td>
        <input type=text name="fmept005" title="Port Number" 
         value="%FMSWEB05.04.009" class=Mandatory size=5 maxlength=5>
      </td>
    </tr>
    <tr>
      <td class=DataLabel>Active</td>
      <td>
        <input type=checkbox name="d_fmept003" title="Active" %FMSWEB05.04.007>
        <input type=hidden name="fmept003" value="">
      </td>
    </tr>
    <tr>
      <td colspan=2>
        <textarea name="response" rows=3 
        style="width:100%;overflow:hidden;display:none;"
        readonly disabled></textarea>
      </td>
    </tr>
    <tr>
      <td colspan=2 align=center><br>
        <input type=button value="Test" class="button" id="fms05test"
         onclick="tempDisable(this);TestTerminal();">
        <input type=button value="Update" class="button" id="fms05upd"
         onclick="tempDisable(this);UpdateTerminal();">
        <input type=button value="Delete" class="button" 
         onclick="tempDisable(this);DeleteTerminal();">
        <input type=button value="Cancel" class="button" 
         onclick="DFrameCloseRefresh();">
      </td>
    </tr>
  </table>
</form>
