<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
function valStartDate() {
  if (document.UpdateForm.d_disma005.value=="2") {
    document.UpdateForm.disma003.className="Mandatory PastDate"
    document.UpdateForm.disma007.className="Mandatory";
    document.UpdateForm.disma004.className="PastDate"
    document.UpdateForm.disma008.className="";
  } else {
    if (document.UpdateForm.d_disma005.value=="3") {
      document.UpdateForm.disma003.className="Mandatory PastDate"
      document.UpdateForm.disma007.className="Mandatory"
      document.UpdateForm.disma004.className="Mandatory PastDate"
      document.UpdateForm.disma008.className="Mandatory"
    } else {
      document.UpdateForm.disma003.className="PastDate"
      document.UpdateForm.disma007.className=""
      document.UpdateForm.disma004.className="PastDate"
      document.UpdateForm.disma008.className=""
    }
  }
}
function PostTransfer() {
  document.UpdateForm.disma005.value=document.UpdateForm.d_disma005.value;
  if(!isWhitespace(UpdateForm.disma004.value)) {
    if(!CheckDateRange(UpdateForm.disma003,UpdateForm.disma004)) {
      return;
    }
  }
  if(!isWhitespace(UpdateForm.disma003.value) &&
     !isWhitespace(UpdateForm.disma007.value)) {
     SetCurrentDateTimeNoFocus(null,UpdateForm.currtime);// UNIX time
     if (SetDateYYYYMMDD(UpdateForm.disma003.value)==
        (UpdateForm.currdate.value)) {
       var newttime=trim(UpdateForm.disma007.value.replace(/:/g,"")) - 0
       var currentt=trim(UpdateForm.currtime.value.replace(/:/g,"")) - 0
       if(newttime>currentt){
         alert("Disaster start time is in the future");
         UpdateForm.disma007.focus();
         return;
       }
     }
  }
  if(!isWhitespace(UpdateForm.disma004.value) &&
     !isWhitespace(UpdateForm.disma008.value)) {
     SetCurrentDateTimeNoFocus(null,UpdateForm.currtime);// UNIX time
     if (SetDateYYYYMMDD(UpdateForm.disma004.value)==
        (UpdateForm.currdate.value)) {
       var newttime=trim(UpdateForm.disma008.value.replace(/:/g,"")) - 0
       var currentt=trim(UpdateForm.currtime.value.replace(/:/g,"")) - 0
       if(newttime>currentt){
         alert("Disaster end time is in the future");
         UpdateForm.disma008.focus();
         return;
       }
     }
  }
   if (document.UpdateForm.ptcnudpd.value=="1") {
    if(!isWhitespace(UpdateForm.disma010.value) &&
       !isWhitespace(UpdateForm.disma011.value)) {
       SetCurrentDateTimeNoFocus(null,UpdateForm.currtime);// UNIX time
       if (SetDateYYYYMMDD(UpdateForm.disma010.value)==
          (UpdateForm.currdate.value)) {
         var newttime=trim(UpdateForm.disma011.value.replace(/:/g,"")) - 0
         var currentt=trim(UpdateForm.currtime.value.replace(/:/g,"")) - 0
         if(newttime>currentt){
           alert("Patient disaster end time is in the future");
           UpdateForm.disma011.focus();
           return;
         }
       }
    }
  }
  setFormactn('U');
}
</script>
</head>
%START.OF.PAGE
<body onLoad=PageLoad(event);valStartDate();>
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExitRefresh();">
<script type="text/javascript">document.write(self.document.title);</script>
</span>

   <form name=UpdateForm method=post action=disweb01.pbl>
   <input type=hidden name=reportno value="1">
   <input type=hidden name=template value="003">
   <input type=hidden name=updttype value="">
   <input type=hidden name=disma005 value="%DISWEB01.01.009">
   <input type=hidden name=ptcnudpd value="%DISWEB01.01.014">
   <input type=hidden name=currdate value="%STANDARD.01.013">
   <input type=hidden name=currtime value="%STANDARD.01.016">
<table align=center cellspacing=0 cellpadding=2 border=0 width=90%>
<tr><td>

<table cellspacing=0 align=center cellpadding=0 border=0 width=100%>

<tr><td class=DataLabel>Disaster Code</td>
    <td><input type=text name=disma001 class=ReadOnly title="Disaster Code" 
         value="%DISWEB01.01.005" size=9 maxlength=9 readonly></td>
</tr>

<tr><td class=DataLabel>Disaster Description</td>
    <td><input type=text name=disma002 class=Mandatory 
         title="Disaster Description" 
         value="%DISWEB01.01.006" size=50 maxlength=60></td>
</tr>

<tr><td class=DataLabel>Disaster Start Date</td>
    <td><input type=text size=12 name=disma003 title="Disaster Start Date"
         onblur="checkDate(this,'Effective Date');" class="PastDate"
         value="%DISWEB01.01.007">
    <img src=../images/DateLookup.gif class=Icon date=UpdateForm.disma003>

    Time
    <input type="text" name="disma007" size="8" title="Disaster Start Time"
     value="%DISWEB01.01.012">
        <img notab src="../images/DateTimeStamp.gif" class=Icon
       onclick="SetCurrentDateTime(UpdateForm.disma003,UpdateForm.disma007);" />
        <img notab src="../images/TimeLookup.gif" class=Icon
         onclick="TimeLookupFrame(UpdateForm.disma007);" />

    </td>
    </tr>

<tr><td class=DataLabel>Disaster End Date</td>
    <td><input type=text size=12 name=disma004 class="PastDate"
         title="Disaster End Date" value="%DISWEB01.01.008"
         onblur="checkDate(this,'Effective Date');">
    <img src=../images/DateLookup.gif class=Icon date=UpdateForm.disma004>

    Time
    <input type="text" name="disma008" size="8" title="Disaster End Time"
     value="%DISWEB01.01.013">
        <img notab src="../images/DateTimeStamp.gif" class=Icon
       onclick="SetCurrentDateTime(UpdateForm.disma004,UpdateForm.disma008);" />
        <img notab src="../images/TimeLookup.gif" class=Icon
         onclick="TimeLookupFrame(UpdateForm.disma008);" />

    </td>
    </tr>

<tr><td class=DataLabel>Disaster Status</td>
    <td>
        <select name=d_disma005 title="Disaster Status"
         onchange="valStartDate();" class=Mandatory>
        <option></option>
        <option value="1">Pending</option>
        <option value="2">Active</option>
        <option value="3">Inactive</option>
        </select>
    </td>
    </tr>

<tr>
  <td>
    <div id="OutcomeTitleDIV"></div>
  </td>
  <td>
    <div id="OutcomeFieldDIV"></div>
  </td>
</tr>

<tr>
  <td>
    <div id="PatDisDatTimTitleDIV"></div>
  </td>
  <td>
    <div id="PatDisDatTimFieldDIV"></div>
  </td>
</tr>

<tr><td class=DataLabel>Alternate ID Code for this Disaster</td>
    <td>
        <select name=disma006 title="Alternate ID Code for this Disaster"
         class=Mandatory>
        <option></option>
          %DISWEB01.01.011.2
        </select>
    </td>
    </tr>

</table>
</td></tr>
<tr><td colspan=2 align=center><br>
    <input type=button value="Update" class="button" onclick=PostTransfer();>
<!--<input type=button value="Delete" class="button" onclick=setFormactn('D');>-->
    <input type=button value="Close"  class="button" onclick=DFrameCloseRefresh();>
</td></tr>
</table>
</form>

<span id="OutcomeTitleSPAN" style="display:none">
  Patient Disaster Outcome
</span>

<span id="OutcomeFieldSPAN" style="display:none">
 <select name=disma009 title="Patient Disaster Outcome">
        <option></option>
          %STANDARD.01.007.do
 </select>
</span>

<span id="PatDisDatTimTitleSPAN" style="display:none">
  Patient Disaster End Date
</span>

<span id="PatDisDatTimFieldSPAN" style="display:none"> 
    <input type=text size=12 name=disma010 class="PastDate"
         title="Patient Disaster End Date"
         onblur="checkDate(this,'Effective Date');">
    <img src=../images/DateLookup.gif class=Icon date=UpdateForm.disma010>

    Time
  <input type="text" name="disma011" size="8" title="Patient Disaster End Time">
        <img notab src="../images/DateTimeStamp.gif" class=Icon
       onclick="SetCurrentDateTime(UpdateForm.disma010,UpdateForm.disma011);" />
        <img notab src="../images/TimeLookup.gif" class=Icon
         onclick="TimeLookupFrame(UpdateForm.disma011);" />
</span>

<script type="text/javascript">

 for (var i=0; i < document.UpdateForm.d_disma005.length; i++) {
  if (document.UpdateForm.d_disma005.options[i].value==
      document.UpdateForm.disma005.value){
      document.UpdateForm.d_disma005.selectedIndex=i;
  }
 }

 if (document.UpdateForm.ptcnudpd.value=="1") {
   OutcomeTitleDIV.innerHTML=OutcomeTitleSPAN.innerHTML; 
   OutcomeFieldDIV.innerHTML=OutcomeFieldSPAN.innerHTML;
   PatDisDatTimTitleDIV.innerHTML=PatDisDatTimTitleSPAN.innerHTML;
   PatDisDatTimFieldDIV.innerHTML=PatDisDatTimFieldSPAN.innerHTML;
 }

</script>
