<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/patweb8746.js"> </script>
<script type="text/javascript">
function Add() {
  var p = document.AddForm;
  if (validateMandatory(p)) {
    p.pmsed001.value = p.drgrctyp.value;

    if (p.ibcnmhos.value == "1") {
      //
      // Multi Hospital
      //
      var hosp = p.drghscod.options[p.drghscod.selectedIndex].value;

      if (p.drgrctyp.value == "1") {
        if (p.drghscod.selectedIndex != 0) {
          p.pmsed001.value = "4";  // set record type to 'Hospital + HF Code'
        }
        p.pmsed002.value = hosp + p.drghfcod.value;
      }
      if (p.drgrctyp.value == "2") {
        hosp = "   ";   // no Hospital Code since CL already incorporates Hosp
        p.pmsed002.value = hosp + p.drgclcod.value;
      }
      if (p.drgrctyp.value == "3") {
        hosp = "   ";   // no Hospital Code for State Default
        if (p.drgstcod.selectedIndex > 0) {
          p.pmsed002.value = hosp + p.drgstcod.value;
        }
        else {
          p.pmsed002.value = hosp + " ";
        }
      }
    }
    else {
      //
      // Single Hospital
      //
      var hosp = "   ";
      var state = " ";

      if (p.drgrctyp.value == "1") {
	p.pmsed002.value = hosp + p.drghfcod.value;
      }
      if (p.drgrctyp.value == "2") {
	p.pmsed002.value = hosp + p.drgclcod.value;
      }
      if (p.drgrctyp.value == "3") {
	p.pmsed002.value = hosp + state;    // 'State' Record Type
      }
    }
  
    if (CheckDateRange(p.pmsed005,p.pmsed006)) {
      var recType = p.pmsed001.value;
      var recVal = p.pmsed002.value;
      var recDRG = p.pmsed003.value;
      var frDate = SetDateYYYYMMDD(p.pmsed005.value);
      var toDate = SetDateYYYYMMDD(p.pmsed006.value);

      if (ValidateEffectiveDates(recType,recVal,recDRG,frDate,toDate))
      {
        p.submit();
      }
    }
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon"
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
%PATWEB87.46.015.1
</span>
<div id=PageBodySection>
<form name=AddForm method=post action=patweb87.pbl>
<input type=hidden name=reportno value="46">
<input type=hidden name=template value="002">
<input type=hidden name=updttype value="A">
<input type=hidden name=ibcnmhos value="%STANDARD.01.025.000.043.1.1">
<input type=hidden name=drgrctyp value="%PATWEB87.46.011">
<input type=hidden name=pmsed001 value="">
<input type=hidden name=pmsed002 value="">
<input type=hidden name=pmsed007 value="%STANDARD.01.008">
<input type=hidden name=pmsed008 value="%STANDARD.01.015">

<table width=90% border=0 cellspacing=0 cellpadding=2 align=center>
<tr id=trHealthFund>
  <td class=DataLabel>Health Fund</td>
  <td>
    <input type="text" name=drghfcod size="6"  maxlength="6"
     value="%PATWEB87.46.016" readonly class=Readonly>
  </td>
</tr>
<tr id=trClaimCode>
  <td class=DataLabel>Claim Code</td>
  <td>
    <input type="text" name=drgclcod size="6"  maxlength="6"
     value="%PATWEB87.46.017" readonly class=Readonly>
  </td>
</tr>
<tr id=trHospital>
  <td class=DataLabel>Hospital</td>
  <td>
    <select name=drghscod title="Hospital">
      <option value="   "> </option>
      %PATWEB87.46.023
    </select>
  </td>
</tr>
<tr id=trState>
  <td class=DataLabel>State</td>
  <td>
    <select name=drgstcod title="State">
      <option value=" "> </option>
      <option value="0">Not Aust</option>
      <option value="1">NZ</option>
      <option value="2">NSW</option>
      <option value="3">VIC</option>
      <option value="4">QLD</option>
      <option value="5">SA</option>
      <option value="6">WA</option>
      <option value="7">TAS</option>
      <option value="8">NT</option>
      <option value="9">ACT</option>
    </select>
  </td>
</tr>
<tr>
  <td class=DataLabel>DRG</td>
  <td>
    <select name=pmsed003 class=Mandatory title="DRG Version" tabindex=1>
      <option value="   "> </option>
      <option value="041">4.1</option>
      <option value="042">4.2</option>
      <option value="050">5.0</option>
      <option value="051">5.1</option>
      <option value="052">5.2</option>
      <option value="060">6.0</option>
      <option value="062">6.2</option>
      <option value="070">7.0</option>
      <option value="080">8.0</option>
      <option value="090">9.0</option>
      <option value="100">10.0</option>
      <option value="110">11.0</option>
      <option value="120">12.0</option>
    </select>
  </td>
</tr>
<tr>
  <td class=DataLabel width=30%>Effective From Date</td>
  <td><input type="text" name=pmsed005 id=pmsed005 class=Mandatory
       title="Effective From Date" size="12" maxlength="11"
       onblur="checkDate(this);">
      <img src="../images/DateLookup.gif" class=Icon
       onclick="DateLookupFrame(pmsed005);">
</tr>
<tr>
  <td class=DataLabel>Effective To Date</td>
  <td><input type="text" name=pmsed006 id=pmsed006
       title="Effective To Date" size="12" maxlength="11" 
       onblur="checkDate(this);">
      <img src="../images/DateLookup.gif" class=Icon
       onclick="DateLookupFrame(pmsed006);">
</tr>
<tr><td class=DataLabel>3M Pay Code</td>
    <td><input type="text" name=pmsed004
         title="3M Pay Code" size="2" maxlength="3">
</tr>
<tr><td>&nbsp;</td></tr>
<tr>
  <td colspan=5 align=center>
    <input type=button value="Add" class="button" onclick="Add();">
    <input type=button Value="Close" class="button" onclick="DFrameExit();">
  </td>
</tr>
</table>
</form>
</div>

<script type="text/javascript">
if (document.AddForm.ibcnmhos.value == "0") {
  document.getElementById('trHospital').style.display = "none";
  document.getElementById('trState').style.display = "none";
}

var recType = document.AddForm.drgrctyp.value;
if (recType == "1") {
  document.getElementById('trClaimCode').style.display = "none";
  document.getElementById('trState').style.display = "none";
}
if (recType == "2") {
  document.getElementById('trHealthFund').style.display = "none";
  document.getElementById('trHospital').style.display = "none";
  document.getElementById('trState').style.display = "none";
}
if (recType == "3") {
  document.getElementById('trHealthFund').style.display = "none";
  document.getElementById('trClaimCode').style.display = "none";
  document.getElementById('trHospital').style.display = "none";
}
</script>
