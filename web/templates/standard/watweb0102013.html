<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"    content="true">
 
<script type="text/javascript"> 
function DelWindow() {
CASEKEYS=PatientLinks.casekeys.value.replace(/ /g,"+")
LinkUrl="watweb01.pbl?reportno=2&template=011&casekeys="+CASEKEYS
Left=(document.body.clientWidth-500)/2
DFrameLink(LinkUrl,100,Left,500,150)
}
//
function DefProDate() {
if ( document.UpdateForm.wattr013.value == "0") {
    document.UpdateForm.bokrx023.value=document.UpdateForm.bkrec004.value
}
}
//
function AddBook() {
if (validateMandatory(document.UpdateForm)) {
  ChkBookDate();
  }
}
//
function ChkBookDate(ReturnCode) {

  ans=true
  i=document.UpdateForm.wattr014.selectedIndex;
  code=document.UpdateForm.wattr014.options[i].value.substring(5,6)
 
  if ( code=="1" || code=="2" ) {

    var serverURL   = "../cgi-bin/watweb01.pbl?reportno=11" +
                      "&xmldate1=" + UpdateForm.wattr006.value +
                      "&xmldate2=" + UpdateForm.bkrec004.value +
                      "&xmlcode1=" + code

    var returnValue = RSExecute(serverURL);
    ReturnValue=returnValue.return_value.split("|");
    if (returnValue.status==0) {
    //
    if (ReturnValue[0]==1) {
      ans=confirm("Warning : You are booking a category 1 patient to a date greater than 30 days from the date on list!");
    }
    if (!ans) {
      return
    }
    //
    if (ReturnValue[0]==2) {
      ans=confirm("Warning : You are booking a category 2 patient to a date greater than 90 days from the date on list!");
    if (!ans) {
      return
    }
    }
    UpdateForm.submit();
    //
    }
    else {
      ReturnCode.focus(); }
  }
    UpdateForm.submit();
}
  function nrflabel() {
    document.getElementById('RFCStatus').innerHTML=
      (RFCColDescription) + " Status";
    document.getElementById('NRFCReason').innerHTML=
      (NRFCColDescription) + " Reason";
    document.getElementById('RFCDate').innerHTML=
      (RFCColDescription) + " Date";
}
//
</script>  
</head>
%START.OF.PAGE
<body onload="PageLoad(event);nrflabel();">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
Update Waiting List Booking Details
</span>
<div id=PageBodySection style="overflow: auto;">
<form name=UpdateForm action=watweb01.pbl style="margin:0" method=post>
<table border=0 width="95%" cellspacing="0" cellpadding="1" align=center>
<input type=hidden name=reportno value=7>
<input type=hidden name=template value=4>
<input type=hidden name=setbookf value=1>
<input type=hidden name=updttype value=U>
<input type=hidden name=casekeys value="%WATWEB01.02.101">
<input type=hidden name=bkrec008 value="M">

<tr><td class=DataLabel>Consultant</td>
    <td class=DataField colspan=3>
    <input class=Readonly type=text name=bkrec002 size=8 maxlength=8 
    readonly value="%WATWEB01.02.115.003" tabindex=1>
    <input type=text name=n_bkrec002 size=40 
    readonly class=Readonly value="%WATWEB01.02.115.002">
    </td></tr>
<tr><td class=DataLabel>Unit</td>
    <td class=DataField>
    <select name=bkrec021 class=Readonly title="Unit" tabindex=2 
    readonly disabled>
    <option></option>
    %WATWEB01.02.114.2
    </select></td> 

    <td class=DataLabel>%STANDARD.01.017.TP    </td>
    <td Class=DataField>
    <select name=wattr014 tabindex=8 class=Readonly readonly disabled>
    <option></option>
    %WATWEB01.02.117.2
    </select></td></tr>

<tr><td class=DataLabel>Date on List</td>
    <td class=DataField>
    <input type=text name=wattr006 id=wattr006 size=12 tabindex=3 value='%WATWEB01.02.109'
       onblur="checkDate(this,'Date')" class=Readonly title="Date on List"
       readonly >
    </td>

    <td class=DataLabel>Ins Class </td>
    <td class=DataField><select name=wattx026 tabindex=9 class=Readonly
     readonly disabled>
    <option></option>
    %WATWEB01.02.526.9.1.10.2.X
    </select><td> </tr>

<tr><td class=DataLabel>Admitting Point   </td>
    <td class=DataField>
    <select name=bokrx003 tabindex=4>
    <option></option>
    %WATWEB01.02.506.2
    </select></td>

    <td class=DataLabel><div id=RFCStatus></td>
    <td class=DataField><select name=xxxxxxxx tabindex=10 class=Readonly
     disabled>
    <option></option> 
    %WATWEB01.02.504.2
    </select><td></tr>

<tr><td class=DataLabel>Post Op Ward</td>
    <td class=DataField><select name=wattx005 tabindex=5 >
    <option></option>
    %WATWEB01.02.505.2
    </select></td>

    <td class=DataLabel><div id=NRFCReason></td>
    <td class=DataField>
    <input type=text name=xxxxxxxx  size=25 tabindex=11  
    class=Readonly readonly value="%WATWEB01.02.316.0">
    </td></tr>

<tr><td class=DataLabel>Planned Length of Stay </td>
    <td class=DataLabel>
    <input type=text name=wattr013 size=4 maxlength=5 readonly class=Readonly
     value="%WATWEB01.02.116">(days)</td>

    <td class=DataLabel><div id=RFCDate></td>
    <td class=DataField><input type=text name=     size=   tabindex=6
     class=Readonly readonly value="%WATWEB01.02.316.1"></td></tr>


<tr> <td class=DataLabel> Overdue Date </td>
    <td class=DataField>
    <input type=text name=xxxxxxxx size=11 tabindex=7 class=Readonly readonly
     value="%WATWEB01.02.176">
    </td></tr>

<tr><td colspan=4><hr width=100%></td></tr>


<tr><td class=DataLabel>Diagnosis11</td>
   <td class=DataField colspan=3>
   <input type=text  class=Readonly readonly
name=bkrec036 size=70 maxlength=50 value="%WATWEB01.02.106"
    tabindex=13>
   </td></tr>


<tr><td class=DataLabel>Procedure Code             </td>
    <td class=DataLabel colspan=3>
    <input type=text size=12 name=bkrec035 title="Procedure Code"
     class=Readonly readonly tabindex=14 value="%WATWEB01.02.103">
</td></tr>

<tr><td class=DataLabel>Procedure</td>
    <td class=DataLabel colspan=3>
    <input type=text name=bkrec036 size=70 maxlength=50 tabindex=15
     class=Readonly readonly  value="%WATWEB01.02.732">
    </td></tr>

<tr><td class=DataLabel>Estimated Procedure Time  </td>
    <td class=DataField colspan=3>
    <input type=text name=bkrec007 size=10 tabindex=16 maxlength=9
       title="Estimated Operating time" value=%WATWEB01.02.105></td></tr>
<!--
<tr><td class=DataLabel>Special Requirements 1 </td>
    <td class=DataField colspan=3>
    <select name=wattr010 tabindex=17 disabled>
    <option></option>
    WATWEB01.02.510.2
    </select>
    </td></tr>

<tr><td class=DataLabel>Special Requirements 2 </td>
    <td class=DataField colspan=3>
    <select name=wattr011 disabled tabindex=18>
    <option></option>
    WATWEB01.02.511.2
    </select>
    </td></tr>

-->
<tr><td colspan=4><hr width=100%></td></tr>


<!-- Third Quadrant     -->

<tr><td class=DataLabel>Proposed Admission</td>
    <td class=DataLabel>
    <input type=text name=bkrec004 id=bkrec004 size=12
     class=Mandatory title="Proposed Admission Date" tabindex=19
     value="%WATWEB01.02.706" >
    <a href='javascript:DateLookupFrame(UpdateForm.bkrec004)'>
    <img src=../images/DateLookup.gif class=Icon hspace=4 align=absmiddle></a>
    Time
    <input type=text name=bkrec005 id=bkrec005 size=8 tabindex=20
    title="Proposed Admission Time" class=Mandatory value="%WATWEB01.02.707">
    <img src=../images/DateTimeStamp.gif class=Icon hspace=4 align=absmiddle  
    onclick="SetCurrentDateTime(bkrec004,bkrec005);">
    <img src=../images/TimeLookup.gif class=Icon hspace=4 align=absmiddle  
    onclick="TimeLookupFrame(bkrec005);"> 
    </td>

    <td class=DataLabel>Reason for Change</td>
    <td class=DataLabel>
    <select name=wathi001 title="Reason for Change" disabled tabindex=28>
    <option></option>
    %WATWEB01.02.314.2
    </select>
    </td></tr>

<tr><td class=DataLabel>Proposed Procedure Date </td>
    <td class=DataLabel>
    <input type=text name=bokrx023 id=bokrx023 size=12 value="%WATWEB01.02.423"
     class=Mandatory title="Proposed Procedure Date" tabindex=21>
    <a href='javascript:DateLookupFrame(UpdateForm.bokrx023)'>
    <img src=../images/DateLookup.gif class=Icon hspace=4 align=absmiddle></a>
    Time
    <select name=bokrx024 class=Mandatory 
      title="Proposed Procedure time" tabindex=22>
    <option></option>
    %WATWEB01.02.424.2
    </select></td>
    
    </td></tr>

<tr><td class=DataLabel>Contact Type </td>
    <td class=DataField>
    <select name=bokrx033 title="Contact Type" tabindex=3>
    <option></option>
     %WATWEB01.02.318.2
    <option></option>
    
    </select></td> 

<td class=DataLabel> Confirmation Date </td>
    <td class=DataLabel>
    <input type=text name=bokrx006 id=bokrx006 size=12
     title="Confirmation Date" value="%WATWEB01.02.406" tabindex=23>
    <a href='javascript:DateLookupFrame(UpdateForm.bokrx006)'>
    <img src=../images/DateLookup.gif class=Icon hspace=4 align=absmiddle></a>
    </td> </tr>


<tr><td class=DataLabel> Contact Date </td>
    <td class=DataLabel>
    <input type=text name=bokrx004 size=12 value="%STANDARD.01.015"
     title="Contact Date" tabindex=24>
    <a href='javascript:DateLookupFrame(UpdateForm.bokrx004)'>
    <img src=../images/DateLookup.gif class=Icon hspace=4 align=absmiddle></a>
    </td>

<td class=DataLabel> Parent Staying </td>
    <td><input type=checkbox name=bokrx005 title="Parent Staying" 
     tabindex=30 value="1">
    </td>  </tr>


<tr><td class=DataLabel> Letter Required </td>                                 
    <td><input type=checkbox name=lettreqd value = "1" 
         title="Letter Required" tabindex=25>
    </td>
    </tr>

<tr><td class=DataLabel>Combined Procedure </td>
    <td class=DataLabel colspan=3>
    <input type=text size=12 name=wattr001 title="Procedure Code"
     class=Readonly readonly tabindex=26>
    </td></tr>

<tr><td class=DataLabel>Date Booking Keyed        </td>
    <td class=DataField><input type=text size=12 maxlength=12 readonly
        tabindex=27 class=Readonly value="%STANDARD.01.015"></td>

    <td class=DateLabel>Operator ID       </td>
    <td class=DataField><input type=text size=12 maxlength=12 readonly
        tabindex=28 class=Readonly value='%WATWEB01.02.310' ></td></tr>

<tr><td colspan=4 align=center> 
    <input type=button value=Ok class="button" tabindex=31
     onclick='AddBook();'>
    <input type=button value=Cancel class="button" tabindex=32
     onclick='DFrameExit()'>
    <input type=button value=Delete class="button" tabindex=33
    onclick=DelWindow() >
<!-- onclick=PatientLinkTo("watweb01.pbl",2,11,1,40,40) --> 
    </td></tr>
</table>
</form>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%WATWEB01.02.003">
<input type=hidden name=admissno value="%WATWEB01.02.081">
<input type=hidden name=MenuType value="%WATWEB01.02.088">
<input type=hidden name=casekeys value="%WATWEB01.02.101">
</form>

<script type="text/javascript">
 ParentStay="%WATWEB01.02.405";
 if ( ParentStay == "Yes") {
   document.UpdateForm.bokrx005.checked=1;
 }

</script>
