<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="standard">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
function clearBrackets(){
  p = document.UpdateForm;
  p.recipnam.value = p.recipnam.value.replace(/\(/g,"");
  p.recipnam.value = p.recipnam.value.replace(/\)/g,"");
  p.genpprac.value = trim(p.genpprac.value);

  if (!isWhitespace(p.genpprac.value)) {
    // Destination Name not needed; Practice has been selected
    p.recipnam.className = "";

    if (document.UpdateForm.ptcndscl.value=="2") {
      p.genpprac.className = "Mandatory";
    }

  }
  else {
    // Destination Name needed; no Practice selected
    p.recipnam.className = "Mandatory";

    if (document.UpdateForm.ptcndscl.value=="2") {
      p.genpprac.className = "";
      p.practice.value = "";
    }
  }

  if (document.UpdateForm.ptcndscl.value=="2") {
   if ((isWhitespace(document.UpdateForm.practice.value)) &&
       (isWhitespace(document.UpdateForm.recipien.value))) {
      p.recipnam.className = "Mandatory";
      p.practice.className = "Mandatory";
      ElectSentDesc.innerHTML=""
      ElectSentField.innerHTML=electsentblank.innerHTML;
      document.UpdateForm.elecsent.value="";
      return;
   }

   if ((!isWhitespace(document.UpdateForm.practice.value)) ||
       (!isWhitespace(document.UpdateForm.recipien.value))) {
      ElectSentDesc.innerHTML="Able to be sent electronically"
      ElectSentField.innerHTML=electsent.innerHTML;

    } else {
      ElectSentDesc.innerHTML=""
      ElectSentField.innerHTML=electsentblank.innerHTML;
      document.UpdateForm.elecsent.value="";
    }
  }

}
function SendSummary(){
  if(validateMandatory(UpdateForm)) {
    UpdateForm.submit()
 }
}
function checkPass() {
  if (isWhitespace(document.UpdateForm.securety.value)) { return;; }
  var serverURL   = "../cgi-bin/patweb80.pbl?reportno=11" +
                    "&secureid=" + UpdateForm.secureid.value.replace(/ /g,"+") +
                    "&securepw=" + UpdateForm.securepw.value.replace(/ /g,"+")
  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0) {
  }
  else {
    document.UpdateForm.secureid.value="";
    document.UpdateForm.securepw.value="";
    document.UpdateForm.secureid.focus();
  }
}
</script>
%START.OF.PAGE
<body onload="PageLoad(event);">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
<script type="text/javascript">document.write("Patient : %CLIWEB08.01.002 (%CLIWEB08.01.019 Age"+
"%CLIWEB08.01.021 U/R %CLIWEB08.01.003)</i>");</script>
</span>
<form name=UpdateForm method=post action="cliweb08.pbl">
  <input type=hidden name=reportno value="1">
  <input type=hidden name=template value="20">
  <input type=hidden name=detailky value="%CLIWEB08.01.125">
  <input type=hidden name=updateky value="%CLIWEB08.01.124">
  <input type=hidden name=updttype value="S">
  <input type=hidden name=sendfaxb value="1">
  <input type=hidden name=sendallw value="%CLIWEB08.01.034.3">
  <input type=hidden name=pracfax  value="%CLIWEB08.01.086.085.016">
  <input type=hidden name=localdoctt value="%CLIWEB08.01.086.084.003">
  <input type=hidden name=localdoctg value="%CLIWEB08.01.086.084.004">
  <input type=hidden name=localdocts value="%CLIWEB08.01.086.084.005">
  <input type=hidden name=ptcndscl value="%STANDARD.01.025.114.239.0.1">
  <input type=hidden name=ptcnhdps id=ptcnhdps 
         value="%STANDARD.01.025.080.250.1.1">
<table align=center width=95% border=0 cellspacing=1 cellpadding=2>

<!--
<tr><td colspan=2 class=HeadingCell align=center>
  Patient : CLIWEB08.01.002
    (CLIWEB08.01.019 Age CLIWEB08.01.021
     U/R CLIWEB08.01.003)</td>
-->
<tr><td width=30% class=DataLabel>Created/Linked by</td>
    <td class=DataField>%CLIWEB08.01.106.0 </td></tr>
<tr><td width=30% class=DataLabel>Last Updated by</td>
    <td class=DataField>%CLIWEB08.01.123.0 on
                        %CLIWEB08.01.121 at %CLIWEB08.01.122  
    </td></tr>
<tr><td width=30% class=DataLabel>Reason for Change</td>
    <td class=DataField>%CLIWEB08.01.115.0 </td></tr>
<tr><td class=DataLabel>Date</td>
    <td class=DataField>%CLIWEB08.01.104 at %CLIWEB08.01.105
    </td></tr>
<tr><td class=DataLabel>Document Type</td>
    <td class=DataField> %CLIWEB08.01.107.0 </td></tr>
<tr><td class=DataLabel>From</td>
    <td class=DataField>%CLIWEB08.01.113 </td></tr>
<tr><td class=DataLabel>To</td>
    <td class=DataField>%CLIWEB08.01.114 </td></tr>
<tr><td class=DataLabel>Alert Link</td>
    <td class=DataField>%CLIWEB08.01.140 </td></tr>
<tr><td class=DataLabel>Comments</td>
    <td class=DataField>%CLIWEB08.01.111 <br>
                        %CLIWEB08.01.112 </td></tr>
<tr><td colspan=2 align=center> &nbsp;
</td></tr>
<tr><td class=DataLabel>Destination Name </td>
    <td><input type=hidden name=recipien id=recipien value="%CLIWEB08.01.086.084.001">
        <input type=text name=recipnam id=recipnam value="%CLIWEB08.01.086.084.081"
         class=Mandatory>
        <img src="../images/SearchIcon.gif"  class=Icon
         onclick="GPHCPSearchFrameFax(recipien,recipnam,genpprov,practice,
genpprac,praccntr,faxnumbr,3,clearBrackets);">
        <img src="../images/erase.gif" class=Icon onclick="clrFields(
recipien,recipnam,clearBrackets);">
    Practice<input type=hidden name=practice id=practice value="%CLIWEB08.01.086.085.001">
        <input type=text name=genpprac id=genpprac value="%CLIWEB08.01.086.085.005">
        <input type=hidden name=pracname id=pracname value="%CLIWEB08.01.086.085.005">
        <input type=hidden name=genpprov id=genpprov value="">
        <input type=hidden name=praccntr id=praccntr value="%CLIWEB08.01.086.061">
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="GPHCGSearchFrameFax(recipien,recipnam,genpprov,practice,
genpprac,praccntr,faxnumbr,clearBrackets);">
        <img src="../images/erase.gif" class=Icon onclick="clrFields(
genpprac,praccntr,genpprov,clearBrackets);"></td>
</tr>
<tr><td class=DataLabel>Fax Number</td>
    <td><input type=text name=faxnumbr id=faxnumbr value="%CLIWEB08.01.201">
</td></tr>

<tr><td class=DataLabel><div id=ElectSentDesc></div></td>
    <td><div id=ElectSentField></div></td>
</tr>

<tr><td class=DataLabel>User Id </td>
    <td><input type=hidden  name=securety value="2">
        <input type=text size=12 name=secureid class=Mandatory
         title="User ID">
    Password
    <input type=password size =12 name=securepw class=Mandatory
         title="Password" onblur=checkPass();>
    </td></tr>
<tr><td colspan=2 align=center>
    <input type=button value="Send" class="button" onclick="SendSummary()">
    <input type=button value="Close" class="button" onclick="DFrameExit()">
</td></tr>
</table>
</form>
<script type="text/javascript">
function init() {
 p = document.UpdateForm;

 recipientname = trim(p.localdoctt.value) + " " + trim(p.localdoctg.value) +
   " " + trim(p.localdocts.value);

 p.recipnam.value=recipientname;

 // if Practice has been selected, then we set fields accordingly...
 if (!isWhitespace(p.genpprac.value)) {
   p.recipnam.className = "";  // Destination Name
   if (isWhitespace(p.recipnam.value)) {
     // set GP Practice Fax Number
     p.faxnumbr.value = p.pracfax.value;
   }
 }

 if(p.sendallw.value.substr(4,1)=="1"){
   document.getElementById('sendbutton').disabled="true";
 }

  DSLayout = "%STANDARD.01.025.114.239.0.1";

  if (DSLayout == "2") {
    if(!isWhitespace(document.UpdateForm.genpprac.value)) {
    // Destination Name not needed; Practice has been selected
       p.recipnam.className = "";
       p.genpprac.className="Mandatory";
    }  else {
    // Destination Name not needed; Practice has been selected
      p.recipnam.className = "Mandatory";
      p.genpprac.className = "";
    }

   if ((isWhitespace(document.UpdateForm.genpprac.value)) &&
       (isWhitespace(document.UpdateForm.recipien.value))) {
      p.recipnam.className = "Mandatory";
      p.genpprac.className = "Mandatory";
      ElectSentDesc.innerHTML=""
      ElectSentField.innerHTML=electsentblank.innerHTML;
      document.UpdateForm.elecsent.value="";
   }

   if ((!isWhitespace(document.UpdateForm.genpprac.value)) ||
       (!isWhitespace(document.UpdateForm.recipien.value))) {

      ElectSentDesc.innerHTML="Able to be sent electronically"
      ElectSentField.innerHTML=electsent.innerHTML;

    } else {
      document.UpdateForm.genpprac.className="";
      ElectSentDesc.innerHTML=""
      ElectSentField.innerHTML=electsentblank.innerHTML;
      document.UpdateForm.elecsent.value="";
    }
  }

}
</script>

<span id=electsent style="display:none">
   <input type=checkbox name=elecsent value="1">
</span>

<span id=electsentblank style="display:none">
   <input type=hidden name=elecsent>
</span>

