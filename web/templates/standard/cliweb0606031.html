<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome"    content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"    content="true">
<script type="text/javascript">
function checkID() {
  a=document.AddForm.secureid.value;
  b=document.AddForm.securepw.value;

  if (isWhitespace(a) || isWhitespace(b)) {
    alert("Please enter User ID and Password!");
    if (isWhitespace(a)) {
      document.AddForm.secureid.focus();
      return;
    }
    if (isWhitespace(b)) {
      document.AddForm.securepw.focus();
      return;
    }
  }
}
function GetTemplate() {
  linkurl = "../cgi-bin/cliweb06.pbl?reportno=06&template=031" +
            "&admissno=" + PatientLinks.admissno.value.replace(/ /g,"+") +
            "&urnumber=" + PatientLinks.urnumber.value.replace(/ /g,"+") +
            "&vsctm001=" + AddForm.vsctm001.value;
  location.href=linkurl;
}
function setURL() {
  linkurl = "../cgi-bin/cliweb06.pbl?reportno=06&template=030" +
            "&admissno=" + PatientLinks.admissno.value.replace(/ /g,"+") +
            "&urnumber=" + PatientLinks.urnumber.value.replace(/ /g,"+")
  location.href=linkurl;
}
function DisAddButton() {
  AddForm.AddButton.disabled=true;
  setInterval('AddForm.AddButton.disabled=false',6000);
}
function DisFinalButton() {
  AddForm.FinalButton.disabled=true;
  setInterval('AddForm.FinalButton.disabled=false',6000);
}
function assignNoteType() {
  
  var visnotesString =""; 
 
//alert(document.AddForm.vsctm001.value.substr(3,1));
  if (document.AddForm.vsctm001.value.substr(3,1)=="D") {
    document.AddForm.notetype.value="011";
  }
  if (document.AddForm.vsctm001.value.substr(4,1)=="A") {
    document.AddForm.notetype.value="012";
  }

//alert(document.AddForm.securepw);

  if (document.AddForm.subfinal.value == "1" &&
      document.AddForm.visnotes.value.search("%diag") != -1 &&
      document.AddForm.vmdtpres.value != "1") {
    alert("No Diagnosis Exists");
    return;
  }

  if (document.AddForm.subfinal.value == "1" && 
      document.AddForm.visnotes.value.search("%diag") != -1 &&
      document.AddForm.securepw == undefined) {
    PasswordDIV.innerHTML=PasswordSPAN.innerHTML;
    document.getElementById('secureid').className="Mandatory NoAutoFocus";
    document.getElementById('secureid').readOnly=false;
    

    document.AddForm.AddButton.disabled=true;

    if (!isWhitespace(document.AddForm.emdctxt1.value) ||
        !isWhitespace(document.AddForm.emdctxt2.value) ||
        !isWhitespace(document.AddForm.emdctxt3.value) ||
        !isWhitespace(document.AddForm.emdctxt4.value) ||
        !isWhitespace(document.AddForm.emdctxt5.value) ||
        !isWhitespace(document.AddForm.emdctxt6.value) ||
        !isWhitespace(document.AddForm.emdctxt7.value) ||
        !isWhitespace(document.AddForm.emdctxt8.value) ||
        !isWhitespace(document.AddForm.emdctxt9.value)) {
     
      if (!isWhitespace(document.AddForm.emdctxt1.value)) {
        visnotesString = document.AddForm.emdctxt1.value;
      }
      if (!isWhitespace(document.AddForm.emdctxt2.value)) {
        visnotesString += "\r\n" + document.AddForm.emdctxt2.value;
      }
      if (!isWhitespace(document.AddForm.emdctxt3.value)) {
        visnotesString += "\r\n" + document.AddForm.emdctxt3.value;
      }
      if (!isWhitespace(document.AddForm.emdctxt4.value)) {
        visnotesString += "\r\n" + document.AddForm.emdctxt4.value;
      }
      if (!isWhitespace(document.AddForm.emdctxt5.value)) {
        visnotesString += "\r\n" + document.AddForm.emdctxt5.value;
      }
      if (!isWhitespace(document.AddForm.emdctxt6.value)) {
        visnotesString += "\r\n" + document.AddForm.emdctxt6.value;
      }
      if (!isWhitespace(document.AddForm.emdctxt7.value)) {
        visnotesString += "\r\n" + document.AddForm.emdctxt7.value;
      }
      if (!isWhitespace(document.AddForm.emdctxt8.value)) {
        visnotesString += "\r\n" + document.AddForm.emdctxt8.value;
      }
      if (!isWhitespace(document.AddForm.emdctxt9.value)) {
        visnotesString += "\r\n" + document.AddForm.emdctxt9.value + "\r\n";
      }
 
      document.AddForm.visnotes.value=
      document.AddForm.visnotes.value.replace(/%diag/g, visnotesString);
    }

    return;   
  }

  if (validateMandatory(AddForm)) {
    SubmitForm();
  }
}
</script>
</head>
%START.OF.PAGE
<body onload=PageLoad(event);enableAddButton();>
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon"
 src="../images/ExitIcon.gif" onclick="DFrameExitRefresh();">
Emergency Disposition Plan
</span>

<form name=AddForm action="cliweb06.pbl" method=post style="margin:0">
 <input type=hidden name=reportno value="06">
 <input type=hidden name=template value="031">
 <input type=hidden name=updatety value="A">
 <input type=hidden name=notetype value="001">
 <input type=hidden name=nextpage value=0>
 <input type=hidden name=admissno value="%CLIWEB06.06.081">
 <input type=hidden name=urnumber value="%CLIWEB06.06.003">
 <input type=hidden name=subfinal value="0">
 <input type=hidden name=vmdtpres value="%CLIWEB06.06.113">
 <input type=hidden name=emdctxt1 value="%CLIWEB06.06.114">
 <input type=hidden name=emdctxt2 value="%CLIWEB06.06.115">
 <input type=hidden name=emdctxt3 value="%CLIWEB06.06.116">
 <input type=hidden name=emdctxt4 value="%CLIWEB06.06.117">
 <input type=hidden name=emdctxt5 value="%CLIWEB06.06.118">
 <input type=hidden name=emdctxt6 value="%CLIWEB06.06.119">
 <input type=hidden name=emdctxt7 value="%CLIWEB06.06.120">
 <input type=hidden name=emdctxt8 value="%CLIWEB06.06.121">
 <input type=hidden name=emdctxt9 value="%CLIWEB06.06.122">

<table width=95% align=center border=0 cellspacing=0 cellpadding=1>
<tr><td class=DataLabel>Template</td>
    <td class=DataLabel>
    <select name=vsctm001 class=SelectBig onchange='GetTemplate();'>
    <option></option>
          %CLIWEB06.06.201.9.1. 2.1.A
          %CLIWEB06.06.201.9.1. 1.1.D
    </select></td></tr>
<tr><td class=DataLabel>User Id </td>
    <td>
        <table align=left border=0 cellspacing=0 cellpadding=0>
        <tr>
          <td>
            <input type=text size=12 name=secureid id=secureid
             class="NoAutoFocus Readonly" title="User ID" readonly>
          </td>
          <td>
            <div id=PasswordDIV></div>
          </td>
        </tr>
        </table>
    </td>
</tr>
<tr><td class=DataLabel>Date</td>
    <td class=DataLabel>
    <input type=text name=pastdt id=pastdt readonly title="Date"
     class='PastDate Readonly' Size=12 onblur="checkDate(this,'Date')"> 
    Time
    <input type=text name=pasttm id=pasttm size=8 title="Time"
     class="Readonly" readonly>
   </td></tr>
<tr><td class=DataLabel valign=top>Notes</td>
    <td><textarea name=visnotes rows=10 cols=100 wrap=hard
         >%CLIWEB06.06.202</textarea>
    </td></tr>
<tr><td colspan=2 align=center>
    <input type=button class="button" value="Update" name=AddButton
     onclick="DisAddButton();depopulateUserFields();assignNoteType();" disabled>
    <input type=button class="button" value="Final" name=FinalButton
     onclick="DisFinalButton();populateUserFields();assignNoteType();" disabled>
<!--<input type=button class="button" value="List" onClick='setURL();'
     name=ListButton>-->
    <input type=button class="button" value="Cancel" 
     onclick="DFrameExitRefresh();">
    </td></tr>
</table>
</form>
<form name=PatientLinks method=get style="margin:0">
<input type=hidden name=reportno value=6>
<input type=hidden name=template value=011>
<input type=hidden name=regexstm value=102>
<input type=hidden name=newstand value=1>
<input type=hidden name=admissno value="%CLIWEB06.06.081">
<input type=hidden name=urnumber value="%CLIWEB06.06.003">
<input type=hidden name=MenuType value="11">
</form>
<script type="text/javascript">
function populateUserFields() {
  if (isWhitespace(document.getElementById('secureid').value)) {
    document.AddForm.secureid.value="%STANDARD.01.043";
    document.AddForm.secureid.value=
    trim(document.AddForm.secureid.value.toString());
  }
  document.AddForm.pastdt.value="%STANDARD.01.015";
  document.AddForm.pasttm.value="%STANDARD.01.016";
  document.AddForm.subfinal.value="1";
}
function depopulateUserFields() {
  document.AddForm.secureid.value="";
  document.AddForm.pastdt.value="";
  document.AddForm.pasttm.value="";
  document.AddForm.subfinal.value="0";
  PasswordDIV.innerHTML="";
}
function enableAddButton() {
  if (!isWhitespace(document.AddForm.vsctm001.value)) {
    document.AddForm.AddButton.disabled=false;
    document.AddForm.FinalButton.disabled=false;
  } else { 
    document.AddForm.visnotes.disabled=true;
  }
}
</script>
<span id=PasswordSPAN style="display:none">
    &nbsp;Password
    <input type=hidden name=securety id=securety value="2"> 
    <input type=password size =12 name=securepw id=securepw class=Mandatory
      title="Password" onfocus="SetCaretPosition('securepw',-1);"
      onblur="checkPass();">
</span>
