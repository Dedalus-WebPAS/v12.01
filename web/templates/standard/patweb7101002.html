<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome"    content="standard">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"    content="true">
<link rel="stylesheet" href="../html/postcode.css" type="text/css">
<script type="text/javascript" src="../js/AutoPostCode.js"> </script>
<script type="text/javascript" src="../js/AddressSearch.js"></script>
<!--WORKERS COMP-->

<script type="text/javascript">

function setInsurance() {
  document.getElementById('InsuranceDIV').innerHTML=
                document.getElementById('InsuranceSPAN1').innerHTML;
  if (InsuranceKeywordSearch){
    document.getElementById('InsuranceDIV').innerHTML=
                document.getElementById('InsuranceSPAN2').innerHTML;
  }
}

function GetEmployer() {
  if(!isWhitespace(UpdateForm.ptclm083.value)){
    var serverURL="../cgi-bin/mehweb01.pbl?reportno=13" +
                  "&srefcode=E" +
                  "&valdtype=1" +
                  "&valdcode=" + UpdateForm.ptclm083.value.replace(/ /g,"+")

    var returnValue = RSExecute(serverURL);
    if (returnValue.status==0) {
      ReturnValue=returnValue.return_value.split("|")
      document.UpdateForm.ptclm001.value=trim(ReturnValue[0]);
      document.UpdateForm.ptclm002.value=trim(ReturnValue[1]);
      document.UpdateForm.ptclm003.value=trim(ReturnValue[2]);
      document.UpdateForm.ptclm004.value=trim(ReturnValue[3]);
      document.UpdateForm.ptclm005.value=trim(ReturnValue[4]);
      document.UpdateForm.ptclm006.value=trim(ReturnValue[5]);
      document.UpdateForm.ptclm007.value=trim(ReturnValue[6]);
      document.UpdateForm.ptclm036.value=trim(ReturnValue[7]);
    }
  }
}

function SubmitClaim() { 
  UpdateForm.updatety.value="1";
  SubmitHidden(UpdateForm);
}

function SubmitPRFA() {
  UpdateForm.updatety.value="2";
  SubmitHidden(UpdateForm);
}

function SubmitDeft() {
  UpdateForm.updatety.value="3";
  SubmitHidden(UpdateForm);
}

function valWC() {
  validateWC(44,UpdateForm.urnumber,UpdateForm.admissno,UpdateForm.ptclm001,
               UpdateForm.ptclm002,UpdateForm.ptclm003,UpdateForm.ptclm004,
               UpdateForm.ptclm005,UpdateForm.ptclm006,UpdateForm.ptclm007,
               UpdateForm.ptclm008,UpdateForm.accepted,UpdateForm.ptclm009,
               document.getElementById('ptclm010'),
               UpdateForm.ptclm011,UpdateForm.ptclm012,
               UpdateForm.ptclm013,UpdateForm.ptclm033,UpdateForm.ptclm034,
               UpdateForm.ptclm035,UpdateForm.ptclm036,
               UpdateForm.dummy);

  for (var i =0 ; i < document.UpdateForm.ptclm009.length; i++) {
    if (document.UpdateForm.accepted.value==
        trim(document.UpdateForm.ptclm009.options[i].value.substr(0,1))){
          document.UpdateForm.ptclm009.selectedIndex=i;
    }
  }
}

function lookUpWC() {
 WCRefNoSearchFrame(UpdateForm.urnumber,UpdateForm.ptclm001,UpdateForm.ptclm002,
                    UpdateForm.ptclm003,UpdateForm.ptclm004,UpdateForm.ptclm005,
                    UpdateForm.ptclm006,UpdateForm.ptclm007,UpdateForm.ptclm008,
                    UpdateForm.accepted,document.getElementById('ptclm010'),
                    UpdateForm.ptclm011,UpdateForm.ptclm012,
                    UpdateForm.ptclm013,UpdateForm.ptclm033,
                    UpdateForm.cinjure,UpdateForm.injcode,
                    UpdateForm.ptclm036,UpdateForm.ptclm034,
                    UpdateForm.ptclm035,UpdateForm.ptclm009);
}
function WCRefNoSearchFrame(urnumber,RetEName,RetAdd1,RetAdd2,RetAdd3,
                            RetAdd4,RetPost,
                            RetTele,RetCDat,RetAccPt,RetInsCod,RetClmNo,
                            RetComn1,RetComn2,RetAloc,RetCInj,RetInjCod,
                            RetCName,RetCInjSel,RetInjCodSel,RetAccPtSel) {
  DFrameStart();
  window.urnumber=urnumber;
  window.RetEName=RetEName;     window.RetAdd1=RetAdd1;
  window.RetAdd2=RetAdd2;       window.RetAdd3=RetAdd3;
  window.RetAdd4=RetAdd4;       window.RetPost=RetPost;
  window.RetTele=RetTele;       window.RetCDat=RetCDat;
  window.RetAccPt=RetAccPt;     window.RetInsCod=RetInsCod;
  window.RetClmNo=RetClmNo;     window.RetComn1=RetComn1;
  window.RetComn2=RetComn2;     window.RetAloc=RetAloc;
  window.RetCInj=RetCInj;       window.RetInjCod=RetInjCod;
  window.RetCName=RetCName;     window.RetCInjSel=RetCInjSel; 
  window.RetInjCodSel=RetInjCodSel;
  window.RetAccPtSel=RetAccPtSel;

  document.getElementById('PopUpFrame').src="../lookups/WCRefNoSearchFrame.html";
  SearchFrameShow();
}

function SetPostVars() {
  suburb   = UpdateForm.ptclm004;
  state    = UpdateForm.ptclm005;
  postcode = UpdateForm.ptclm006;
}

function SetPostVarsPRFA() {
  suburb   = UpdateForm.ptpra004;
  state    = UpdateForm.ptpra005;
  postcode = UpdateForm.ptpra006;
}

//
// Functions called from AddressSearch.js
//
function InitAddressSearch() {
  /* Worker's Compensation Claim Details */

  // line 1 - 'ptclm002'
  // line 2 - 'ptclm003'
  // suburb - 'ptclm004'
  // state - 'ptclm005'
  // postcode - 'ptclm006'

  InitAddressSearchFields('trAddrSrch1','ptclm002','ptclm003','ptclm004','ptclm005','ptclm006');


  /* Person Responsible For Account */

  // line 1 - 'ptpra002'
  // line 2 - 'ptpra003'
  // suburb - 'ptpra004'
  // state - 'ptpra005'
  // postcode - 'ptpra006'

  InitAddressSearchFields('trAddrSrch2','ptpra002','ptpra003','ptpra004','ptpra005','ptpra006');
}
function ShowAddressSearch1() {
  OpenAddressSearch('1',PopulateAddress1,ClearSearchAddress1);
}
function ShowAddressSearch2() {
  OpenAddressSearch('1',PopulateAddress2,ClearSearchAddress2);
}
function PopulateAddress1(StreetLine, Suburb, State, Postcode) {
  LookupSuburb(Postcode);  // validate Postcode with our Lookup values
  if (SelectPC.length == 0) return;  // no match found

  LookupPostCode(Suburb);  // validate Suburb
  if (SelectPC.length == 0) return;  // no match found

  ToggleFieldReadOnly('ptclm002', true);
  ToggleFieldReadOnly('ptclm003', false);
  ToggleFieldReadOnly('ptclm004', true);
  ToggleFieldReadOnly('ptclm005', true);
  ToggleFieldReadOnly('ptclm006', true);

  SetFieldValue('ptclm002',StreetLine);
  SetFieldValue('ptclm003','');
  SetFieldValue('ptclm004',Suburb);
  SetFieldValue('ptclm005',State);
  SetFieldValue('ptclm006',Postcode);
}
function ClearSearchAddress1() {
  ToggleFieldReadOnly('ptclm002', false);
  ToggleFieldReadOnly('ptclm003', false);
  ToggleFieldReadOnly('ptclm004', false);
  ToggleFieldReadOnly('ptclm005', false);
  ToggleFieldReadOnly('ptclm006', false);

  SetFieldValue('ptclm002','');
  SetFieldValue('ptclm003','');
  SetFieldValue('ptclm004','');
  SetFieldValue('ptclm005','');
  SetFieldValue('ptclm006','');
}
function PopulateAddress2(StreetLine, Suburb, State, Postcode) {
  LookupSuburb(Postcode);  // validate Postcode with our Lookup values
  if (SelectPC.length == 0) return;  // no match found

  LookupPostCode(Suburb);  // validate Suburb
  if (SelectPC.length == 0) return;  // no match found

  ToggleFieldReadOnly('ptpra002', true);
  ToggleFieldReadOnly('ptpra003', false);
  ToggleFieldReadOnly('ptpra004', true);
  ToggleFieldReadOnly('ptpra005', true);
  ToggleFieldReadOnly('ptpra006', true);

  SetFieldValue('ptpra002',StreetLine);
  SetFieldValue('ptpra003','');
  SetFieldValue('ptpra004',Suburb);
  SetFieldValue('ptpra005',State);
  SetFieldValue('ptpra006',Postcode);
}
function ClearSearchAddress2() {
  ToggleFieldReadOnly('ptpra002', false);
  ToggleFieldReadOnly('ptpra003', false);
  ToggleFieldReadOnly('ptpra004', false);
  ToggleFieldReadOnly('ptpra005', false);
  ToggleFieldReadOnly('ptpra006', false);

  SetFieldValue('ptpra002','');
  SetFieldValue('ptpra003','');
  SetFieldValue('ptpra004','');
  SetFieldValue('ptpra005','');
  SetFieldValue('ptpra006','');
}
</script>
%START.OF.PAGE
<body onLoad="PageLoad(event);InitPostCodes();InitAddressSearch();
              document.UpdateForm.ptclm083.focus();
              setInsurance();">

<div id=PageHeadingSection>
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB71.01.003";
PatientVIS="%PATWEB71.01.081";
PatientNAM="%PATWEB71.01.002";
PatientSTA="%PATWEB71.01.086.078";
PatientALT="%PATWEB71.01.084";
PatientSEX="%PATWEB71.01.019";
PatientDOB="%PATWEB71.01.020";
PatientAGE="%PATWEB71.01.021";
PatientLOC="%PATWEB71.01.083";
PatientPRI="%PATWEB71.01.086.066.1";
PatientUNT="%PATWEB71.01.066.0";
DoctorCOD="%PATWEB71.01.082.003";
DoctorNAM="%PATWEB71.01.082.002";
PatientAID="%PATWEB71.01.086.090";
PatientIND="%PATWEB71.01.086.091";
PatientCUR="%PATWEB71.01.086.092";
PatientCLC="%PATWEB71.01.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB71.01.086.094";
PatientCDM="%PATWEB71.01.086.095";
PatientVDH="%PATWEB71.01.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
</div>
<div id=PageBodySection>
<form name=UpdateForm action="patweb98.pbl" method=get>
<input type=hidden name=reportno value="05">
<input type=hidden name=template value="005">
<input type=hidden name=urnumber value="%PATWEB71.01.003">
<input type=hidden name=admissno value="%PATWEB71.01.081">
<input type=hidden name=admcltyp value="%PATWEB71.01.126.3">
<input type=hidden name=updatety value=" ">
<input type=hidden name=claimtyp value="W">
<input type=hidden name=redirect value="%PATWEB71.01.001.patweb98.01.001">
<input type=hidden name=nextpage value=0>
<input type=hidden name=accepted>
<input type=hidden name=ptclm012 value="">
<input type=hidden name=ptclm013 value="">
<input type=hidden name=cinjure>
<input type=hidden name=injcode>
<input type=hidden name=orgntype id=orgntype value="E">
<input type=hidden name=dummy value="">
<input type=hidden name=ptcnuadv id=ptcnuadv
 value="%STANDARD.01.025.123.247.0.1">

<table border=1 width=100% cellspacing=1 cellpadding=1>
<tr><td class=HeadingCell align=center>
      Workers Compensation Claim Details
    </td>
</tr>

<tr><td>
    <table width=100% border=0>
    <tr><td class=DataLabel>Employer Code</td>
        <td><input type="text" size="6" name=ptclm083 id=ptclm083
             onchange="GetEmployer();" maxlength="6" tabindex=1
             value="%PATWEB71.01.486.0" title="Employer Code">
            <img src="../images/SearchIcon.gif" class=Icon
             onclick="ExOrgEmployerSearchFrame(ptclm083,ptclm001,orgntype,
                                               ptclm002,ptclm003,ptclm004,
                                               ptclm005,ptclm006,ptclm007,
                                               ptclm036);">
            <img src="../images/ClearIcon.gif" class=Icon
             onclick="clrFields(ptclm083);">
        </td>
    </tr>

    <tr><td class=DataLabel>Employer</td>
        <td><input type="text" size="35" name=ptclm001 id=ptclm001
             tabindex=2 maxlength="30" value="%PATWEB71.01.401"
             title="Employer Name">
        </td>
        <td class=DataLabel>Date of Accident</td>
        <td><input type="text" size="12" tabindex=10
             name=ptclm008 id=ptclm008 value="%PATWEB71.01.407"
             title="Accident Date" class=PastDate
             onblur="checkDate(this,'Accident Date')">
            <img src=../images/DateLookup.gif border=0 hspace=4
             align=absmiddle onclick="DateLookupFrame(ptclm008);">
        </td>
    </tr>

    <tr id=trAddrSrch1 style="display:none">
        <td class=DataLabel nowrap>Search Address</td>
        <td><input type=text readonly size=42 tabindex="-1"
             style="cursor:pointer;text-align:center;"
             value="Click here to search for an address"
             title="Click here to search for an address"
             onclick="ShowAddressSearch1();">
        </td>
    </tr>

    <tr><td class=DataLabel>Address</td>
        <td><input type="text" size="42" maxlength="30" tabindex=3
             name=ptclm002 id=ptclm002 title="Address Line 1"
             value="%PATWEB71.01.402" onchange="UpCase(this);">
        </td>    
        <td> Accident Location </td>
        <td><input type="text" size="35" maxlength="30" tabindex=11
             name=ptclm033 id=ptclm033 title="Accident Location"
             value="%PATWEB71.01.435">
        </td>
    </tr>

    <tr><td class=DataLabel></td>
        <td><input type="text" size="42" maxlength="30" tabindex=4
             name=ptclm003 id=ptclm003 value="%PATWEB71.01.403"
             title="Address Line 2" onchange="UpCase(this);">
        </td>
        <td class=DataLabel>Insurance<br></td>
        <td><div id="InsuranceDIV"></div></td>
    </tr>

    <tr><td class=DataLabel>Suburb</td>
        <td><input type="text" size="42" maxlength="30" tabindex=5 
             name=ptclm004 id=ptclm004 value="%PATWEB71.01.404"
             title="Suburb"
             onchange="SetPostVars();LookupPostCode(this.value);">
        </td>
        <td class=DataLabel>Insurance Claim No.</td>
	<td><input type="text" name=ptclm011 id=ptclm011 size=25 
             maxlength=20 tabindex=13 value="%PATWEB71.01.410" 
             readonly class=readonly title="Insurance Claim Number">
        </td>
    </tr>

    <tr><td class=DataLabel>State</td>
	<td><input type="text" size="42" maxlength="30" tabindex=6
             title="State" name=ptclm005 id=ptclm005
             value="%PATWEB71.01.428">
            Post Code 
            <input type="text" size="8" maxlength="8" tabindex=7
             title="Post Code" name=ptclm006 id=ptclm006
             value="%PATWEB71.01.405"
             onchange="SetPostVars();LookupSuburb(this.value);">
        </td>
	<td class=DataLabel>Claim Accepted Insurance</td>
        <td><select name=ptclm009 id=ptclm009 tabindex=14
             title="Claim Accepted Insurance">
              <option></option>
              %PATWEB71.01.408.2
            </select>
        </td>
    </tr>

    <tr><td valign="bottom" class=DataLabel>Employer Phone</td>
        <td><input type="text" size="20" maxlength="20" tabindex=8
             title="Employer Phone" name=ptclm007 id=ptclm007 
             value="%PATWEB71.01.406">
        </td>
        <td> Contact Name </td>
        <td><input type="text" size="45" maxlength="40" tabindex=15
             title="Contact Name" name=ptclm036 id=ptclm036 
             value="%PATWEB71.01.432">
        </td>
    </tr>

    <tr><td> Cause of Injury </td>
        <td><select name=ptclm034 id=ptclm034 tabindex=9
             title="Cause of Injury">
              <option></option> 
              %PATWEB71.01.433.2
            </select>
        </td>
        <td> Injury Code </td>
        <td><select name=ptclm035 id=ptclm035 tabindex=16
             title="Injury Code">
              <option></option>
              %PATWEB71.01.434.2 
            </select>
        </td>
        <td><input type=button value="Update" class="button" tabindex=17
             title="Update Workers Compensation Claim Details"
             onclick="SubmitClaim()";>
        </td>
    </tr>


<tr><td colspan=6 class=HeadingCell align=center >
        Person Responsible for Account</td></tr>

    <tr><td class=DataLabel>Name</td>
        <td><input type="text" size="80" maxlength="80" tabindex=20
             name=ptpra001 id=ptpra001 value="%PATWEB71.01.166"
             title="Person Responsible for Account Name">
        </td>
        
    </tr>

    <tr id=trAddrSrch2 style="display:none">
        <td class=DataLabel nowrap>Search Address</td>
        <td><input type=text readonly size=42 tabindex="-1"
             style="cursor:pointer;text-align:center;"
             value="Click here to search for an address"
             title="Click here to search for an address"
             onclick="ShowAddressSearch2();">
        </td>
    </tr>

    <tr><td class=DataLabel>Address</td>
        <td><input type="text" size="42" maxlength="35" tabindex=21
             name=ptpra002 id=ptpra002 value="%PATWEB71.01.167"
             title="Address Line 1" onchange="UpCase(this);">
        </td>
        <td class=DataLabel>Relation </td>
        <td><select name=ptpra009 id=ptpra009 tabindex=26 title="Relation">
              <option value=""></option>
              %STANDARD.01.030
            </select>
        </td>
    </tr>

    <tr><td>&nbsp;</td>
        <td><input type="text" size="42" maxlength="35" tabindex=22
             name=ptpra003 id=ptpra003 title="Address Line 2"
             value="%PATWEB71.01.168" onchange="UpCase(this);">
        </td>
        <td class=DataLabel>Home Phone</td>
        <td><input type="text" size="14" maxlength="20" tabindex=27
             name=ptpra007 id=ptpra007 title="Home Phone"
             value="%PATWEB71.01.171">
        </td>
    </tr>

    <tr><td class=DataLabel>Suburb</td>
        <td><input type="text" size="42" maxlength="35" tabindex=23
             name=ptpra004 id=ptpra004 title="Suburb"
             value="%PATWEB71.01.169" 
             onchange="SetPostVarsPRFA();LookupPostCode(this.value);">
        </td>
        <td class=DataLabel>Work Phone</td>
        <td><input type="text" size="14" maxlength="20" tabindex=28
             name=ptpra008 id=ptpra008 title="Work Phone"
             value="%PATWEB71.01.172">
        </td>
    </tr>

    <tr><td class=DataLabel>State</td>
        <td><input type="text" size="42" maxlength="35" tabindex=24
             name=ptpra005 id=ptpra005 title="State"
             value="%PATWEB71.01.182">
             Post Code
            <input type="text" size="8" maxlength="8" tabindex=25
             name=ptpra006 id=ptpra006 title="Post Code"
             value="%PATWEB71.01.170"
             onchange="SetPostVarsPRFA();LookupSuburb(this.value);">
        </td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td><input type=button value="Update" class="button" tabindex=30
             title="Update Person Responsible for Account Details"
             onclick="SubmitPRFA()";>
            <input type=button value="Default" class="button" tabindex=31
             title="Default" onclick="SubmitDeft()";>
        </td>
    </tr>
    </table>
</td></tr>

<tr><td colspan=4 align=center>
    <input type=button value="Close" tabindex=32 onclick="SetClose()" 
     class="button">
</td></tr>
</table>

</form>

<div id=SelectHeading></div>
<div id=SelectLocation></div>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=regexstm value=102>
<input type=hidden name=newstand value=1>
<input type=hidden name=urnumber value="%PATWEB71.01.003">
<input type=hidden name=admissno value="%PATWEB71.01.081">
<input type=hidden name=MenuType value="%PATWEB71.01.088">
</form>

<span id="InsuranceSPAN1" style="display:none">
  <select name="ptclm010" id="ptclm010" tabindex=12 title="Insurance">
              <option> </option>
              %PATWEB71.01.409.2
  </select>
</span>

<span id="InsuranceSPAN2" style="display:none">
  <input type="text" size="6" name="ptclm010" id="ptclm010" tabindex=12
      value="%PATWEB71.01.409.0" title="Insurance">

  <input type="text" size="35" name="d_ptclm010" id="d_ptclm010"
         maxlength="30" value="%PATWEB71.01.409.1"
      title="Insurance">
    <img src="../images/SearchIcon.gif" class=Icon
        onclick="InsuranceSearchFrame(ptclm010,d_ptclm010);">
        <img src="../images/ClearIcon.gif" class=Icon
                onclick="clrFields(ptclm010,d_ptclm010);">
</span>

<script type="text/javascript">
function SetClose() {
  var urnumber ="%PATWEB71.01.003";                                              
  var admissno ="%PATWEB71.01.081";
  var link = "patweb98.pbl?reportno=01&template=001&urnumber="+urnumber+"&admissno="+admissno;                                              
  location.href= link;
}

for (var i=0;i<document.UpdateForm.ptclm009.length;i++){
if (document.UpdateForm.ptclm009.options[i].value=="%PATWEB71.01.408.0"){
    document.UpdateForm.ptclm009.selectedIndex=i}};

for (var i =0 ; i < document.UpdateForm.ptpra009.length; i++) {
if (document.UpdateForm.ptpra009.options[i].value=="%PATWEB71.01.173") {
    document.UpdateForm.ptpra009.selectedIndex=i } };

claimindic=document.UpdateForm.admcltyp.value.substr(29,1);
if (claimindic=="W" ) {
  document.UpdateForm.ptclm083.className="Mandatory";
}

</script>
