<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="kids">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/admission.js"></script>
<script type="text/javascript" src="../js/ndis.js"></script>
<script type="text/javascript">
function DisContract() {
  ind=document.UpdateForm.admtype.value.substring(14,15)
  if (ind=="S"||ind=="H") {
     document.UpdateForm.ptasf001.value="";
     document.UpdateForm.ptasf002.value="";
  } else if (ind=="C"){
     document.UpdateForm.ptasf001.className="Mandatory";
     document.UpdateForm.ptasf002.className="Mandatory";
  }
  
  if (ind=="S"){
     document.UpdateForm.ptasf003.className="Mandatory";
  }
}

function SubmitUpd() {
    MandatoryOk=true;

    if (!validateMandatory(document.UpdateForm)) {
       return;
    }

    // Set 'Planned Length of Stay' to ZERO if no value is specified
    if (isWhitespace(UpdateForm.ptmis030.value)) 
      UpdateForm.ptmis030.value=0;

    if (MandatoryOk) {
       if(!validateMRFD(document.UpdateForm.admisdte,document.UpdateForm.mrfddate)) {
             return;
      }
       setRedirect();
       document.UpdateForm.submit();
   }
}
function validateExternalVisitID(externalID) {
  if (isWhitespace(externalID.value)) {
    return;
  }
  var serverURL   = "../cgi-bin/emrweb08.pbl?reportno=49" +
                   "&valdalvn=" +
                   externalID.value.replace(/ /g,"+") +
                   "&valdcode=" +
                   document.UpdateForm.admissno.value.replace(/ /g,"+");
  var returnValue = RSExecute(serverURL);
  if (returnValue.status!=0) {
    externalID.value="";
    externalID.focus();
  }
}
function validateMRFD(adat,mrfd) {
  if (isWhitespace(adat.value) || isWhitespace(mrfd.value)) {
    return true;
  }
  if (SetDateYYYYMMDD(adat.value) > SetDateYYYYMMDD(mrfd.value)) {
    alert(mrfd.title + " can't be prior to the Admission Date.");
    FocusDelay(mrfd);
    return false;
  }
  return true;
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);DisplayTrnSrc();ShowNdisPartVal();
              document.UpdateForm.ptmis009.focus();
              DisContract();">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB89.01.003";
PatientVIS="%PATWEB89.01.081";
PatientNAM="%PATWEB89.01.002";
PatientSTA="%PATWEB89.01.086.078";
PatientALT="%PATWEB89.01.084";
PatientSEX="%PATWEB89.01.019";
PatientDOB="%PATWEB89.01.020";
PatientAGE="%PATWEB89.01.021";
PatientLOC="%PATWEB89.01.083";
PatientPRI="%PATWEB89.01.086.066.1";
PatientUNT="%PATWEB89.01.066.0";
DoctorCOD="%PATWEB89.01.082.003";
DoctorNAM="%PATWEB89.01.082.002";
PatientAID="%PATWEB89.01.086.090";
PatientIND="%PATWEB89.01.086.091";
PatientCUR="%PATWEB89.01.086.092";
PatientCLC="%PATWEB89.01.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB89.01.086.094";
PatientCDM="%PATWEB89.01.086.095";
PatientVDH="%PATWEB89.01.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<form name=linkForm action=patweb89.pbl method=post style=margin:0>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=1>
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name=admissno value="%PATWEB89.01.101">
</form>
<form name=UpdateForm method=post action=patweb89.pbl style=margin:0>
<input type=hidden name=reportno value="2">
<input type=hidden name=template value="030">
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name=admissno value="%PATWEB89.01.081"> 
<input type=hidden name="updatety" value="6">
<input type=hidden name="allocate" value="1">
<input type=hidden name="redirect" value="%PATWEB89.01.001.patweb98.01.002">
<input type=hidden name="chckname" value="0">
<input type=hidden name="emradmit" value="0">
<input type=hidden name="emradmis" value="0">
<input type=hidden name="newbmand" value="0">
<input type=hidden name="agebmand" value="0">
<input type=hidden name=ptmis027 value="%PATWEB89.01.126.3">
<input type=hidden name="ptmis073" value=" ">
<input type=hidden name="ptmis075" value="N">
<input type=hidden name="ptmis074" value="N">
<input type=hidden name=admisdte value="%PATWEB89.01.102">
<input type=hidden name=wardcode value="%PATWEB89.01.105.1">
<input type=hidden name="mvmedrec">
<input type=hidden name=admtype value="%PATWEB89.01.111.3">
<input type=hidden name="ibaalvin" id="ibaalvin" value="1">
<input type="hidden" name="d_ptmis012" value="%PATWEB89.01.113.3">
<input type=hidden name=ptcnhdps id=ptcnhdps
       value="%STANDARD.01.025.080.250.1.1">
<input type=hidden name=d_ptvis121 id=d_ptvis121
       value="%PATWEB89.01.298.043">

<input type=hidden name=ptcndigp id=ptcndigp
       value="%STANDARD.01.025.124.122.0.1">

<table border=1 colspan=1 width=100% cellspacing=1 cellpadding=1 >
<tr><td class=HeadingCell align=center>
    Update Admission Details</tr>
<tr>
<tr><td>
    <table border=0 width=100% class=TableBody cellpadding=0 cellspacing=0>
       <tr><td class=DataLabel>Admission Date</td>
           <td><input type=text readonly class=ReadOnly value="%PATWEB89.01.102">
           at
           <input type=text readonly class=readonly value="%PATWEB89.01.103">
          </td></tr>
      <tr><td class=DataLabel>Admission Source</td>
          <td><select name=ptmis009 tabindex=1 class=Mandatory
                     title='Admission Source' onchange="DisplayTrnSrc()">
                 <option> </option>
                 %PATWEB89.01.110.2
                 </select></td>
          <td class=DataLabel>%STANDARD.01.017.P </td>
          <td><select name=ptmis011 tabindex=4 class=Mandatory 
               title="%STANDARD.01.017.P ">
              <option> </option>
                 %PATWEB89.01.112.2
              </select></td></tr>
      <tr> 
          <td><div id=TranSrcHeading></div></td>
          <td><div id=TranSrc></div></td>

        <td class=DataLabel>Criteria for Admission</td>
    <td><select name=ptvis041 tabindex=5 class=Mandatory 
         title='Criteria for Admission'>
       <option></option>
       %PATWEB89.01.244.2
       </select>
    </td></tr>
       <tr><td align=left>Prior Days Hospitalisation</td>
       <td><input name=ptmis031 title='Prior Days Hospitalisation' tabindex=3
              class=Integer size=5 maxlength=4 value=%PATWEB89.01.130 
              onblur="checkInteger(this,this.value);">
       </td>
        <td class=DataLabel>Intended Stay</td>
        <td><select name=ptvis043 tabindex=6 class=Mandatory title='Intended Stay'>
        <option> </option>
        %PATWEB89.01.246.2
        </select></td></tr>
       <tr align=left>
         <td align=center colspan="4">
         <hr>
         </td>
       </tr>
      <tr><td class=DataLabel>Attending Doctor</td>
          <td><input type=text readonly class=ReadOnly size=40 value="%PATWEB89.01.108.002">
    </td>
          <td class=DataLabel>Unit</td>
          <td><input type=text class=readonly  size=30 readonly title='Unit'
                 value="%PATWEB89.01.124.0">
          </td></tr>
      <tr><td class=DataLabel>Diagnosis </td>
          <td><input type=text name="ptmis020" size=50 maxlength=80 tabindex=8  
              class=Mandatory value="%PATWEB89.01.121" title='Diagnosis'>
      </td>
          <td class=DataLabel>Procedure </td>
          <td><input type=text name="ptvis064" size=30 maxlength=30 tabindex=9  
        value="%PATWEB89.01.267">
      </td>
      <tr><td class=DataLabel>Clinical Pathway</td>
        <td>
        <select name=ptvis023 tabindex=10>
        <option></option>%PATWEB89.01.226.2
        </select>
        </td>
        <td class=DataLabel> Expected Length of Stay</td>
        <td>
        <input type=text name=ptmis030 size=5 maxlength=5 tabindex=11
         title='Expected length of stay' value="%PATWEB89.01.129">
        </td>
        </tr>
       <tr><td>Admitting Point</td>
       <td>
         <select name=ptvis046 tabindex=12 class=Mandatory title='Admitting Point'>
           <option> </option>
            %PATWEB89.01.290.2
         </select>
       </td>
          <td class=DataLabel>Ward / Bed </td>
          <td><input type=text readonly size=30 class=readonly 
               value="%PATWEB89.01.105.0">
              <input type=text class=ReadOnly readonly maxlength=5 size=5
               name=beddcode title="Bed" value="%PATWEB89.01.106">
      </td>
       <tr align=left>
         <td align=center colspan="4">
         <hr>
         </td>
      <tr>
          <td class=DataLabel>Care Managed</td>
          <td>&nbsp;</td>
              <td class=DataLabel>Referring GP</td>
         <td><input type="text" size=10 maxlength=10 name="ptvis028" tabindex=13
               value="%PATWEB89.01.231.1"
               onblur="ValidateHCP(18,0,ptvis028,doctnam1);">
              <input type="text" size=25 name="doctnam1"
               value="%PATWEB89.01.231.0">
              <img src="../images/SearchIcon.gif" class=Icon
         onclick="HCPSearchFrame(UpdateForm.ptvis028,UpdateForm.doctnam1,0);">
          </td></tr>
      <tr>
          <td class=DataLabel>RMO Responsible</td>
          <td>&nbsp;</td>
        <td class=DataLabel>Inform GP</td>
        <td>
          <select name=ptvis022 tabindex=14>
           <option value="0">No</option>
           <option value="1">Yes</option>
          </select>
        </td>

    <tr><td class=DataLabel></td>
        <td></td>
        <td class=DataLabel>Program</td>
        <td><input type=text size=8 maxlength=8 name=ptvis099
             title="Program" tabindex=14 value="%PATWEB89.01.298.021.1"
             onchange="findPrgmdesc();">
            <select name=prgmcode Readonly class=readonly
             onchange="savePrgmcode();">
              <option> </option>
              %PATWEB89.01.298.021.2
            </select>
        </td>
    </tr>

    <tr id=ndispart style="display:none"><td>&nbsp;</td>
        <td>&nbsp;</td>
        <td class=DataLabel>%STANDARD.01.035.N </td>
        <td><select name=ptvis121 id=ptvis121 title="%STANDARD.01.017.N "
             tabindex=15>
            <option> </option>
             %PATWEB89.01.298.066.9.2
            </select></td></tr>
    
    <tr><td>&nbsp;</td>
           <td>&nbsp;</td>
           <td class=DataLabel>Clinically Ready for Discharge Date</td>
           <td><input type=text size=15 maxlength=12 name=mrfddate
                id=mrfddate title="Clinically Ready for Discharge Date"
                onblur="checkDate(this,'Date');disDelay(this);" class="Date"
                value="%PATWEB89.01.999.122" >
                <img notab src="../images/DateTimeStamp.gif" class=Icon
                 alt="Current"
                 onclick="SetCurrentDateTime(mrfddate,null);">
                <img notab src="../images/DateLookup.gif" class=Icon
                alt="Calendar" date="UpdateForm.mrfddate"></td>
    </tr>
    <tr id=rsndisde style="display: none;"><td class=DataLabel>&nbsp;</td>
    <td>&nbsp;</td>
    <td class=DataLabel>Reason for Discharge Delay</td>
    <td><select name=vsxdc014 id=vsxdc014 title="Reason for Discharge Delay">
        <option></option>
        %STANDARD.01.007.z1
        </select></td></tr>
    <tr align=left>
      <td align=center colspan="4"><hr></td>
    </tr>

    <tr><td class=DataLabel>%STANDARD.01.017.CL</td>
        <td><input type=text readonly class=ReadOnly size=30 
             value="%PATWEB89.01.126.0">
        </td>
        <td class=DataLabel>Claim form Signed</td>
        <td>
          <select name=ptvis021 tabindex=15 class=Mandatory 
           title="Claim form signed">
            <option value=0> No </option>
            <option value=1> Yes </option>
          </select>
        </td>
    </tr>

    <tr><td class=DataLabel>%STANDARD.01.017.A </td>
        <td><input type=text readonly class=ReadOnly size=30
             value="%PATWEB89.01.111.0">
        </td>
        <td class=DataLabel>Contract Spoke Id</td>
        <td><input type="text" size=7 maxlength=5 name=ptasf003
             value="%PATWEB89.01.199.003.1" id=ptasf003
             tabindex=16 onblur="validateCode(9,ptasf003,d_ptasf003);">
            <input type=text size=27 name=d_ptasf003 notab id=d_ptasf003
             value="%PATWEB89.01.199.003.2" class=Readonly readonly>
            <img src="../images/SearchIcon.gif" class=Icon
             onclick="TransferSourceFrame(ptasf003,d_ptasf003)">
        </td>
    </tr>

    <tr><td class=DataLabel>Contract Type</td>
        <td><input type=text size=1 name=ptasf001 notab
             class=Readonly readonly value="%PATWEB89.01.199.001"></td>
        <td class=DataLabel>Contract Role</td>
        <td><input type=text size=1 name=ptasf002 notab
             class=Readonly readonly value="%PATWEB89.01.199.002">
        </td>
    </tr>

    <tr><td class=DataLabel>Health Fund</td>
        <td><input type=text size=6 maxlength=6 name=ptmis013
             title="Health Fund" class="readonly" readonly 
             value="%PATWEB89.01.114.0">
            <input type=text size=30 maxlength=30 name=funddesc class=readonly
             Readonly notab value="%PATWEB89.01.114.1">
        </td>
        <td class=DataLabel>External Visit ID</td>
        <td><input type=text size=30 maxlength=20 name=ibalv001 id=ibalv001
             title="External Visit ID" tabindex=28 value="%PATWEB89.01.999. 57"
             onblur="validateExternalVisitID(this);">
        </td>
    </tr>

    <tr><td class=DataLabel>Level of Insurance</td>
    <td width=22%><input name="ptmis014" size=8 maxlength=8 
                  title="Level of Insurance" class="readonly" readonly
                  tabindex=21 value="%PATWEB89.01.115.0">
        <input type="text" size=15 maxlength=17 name="tabldesc"
         class=readonly Readonly notab value="%PATWEB89.01.115.1" >
    </td>

          <td class=DataLabel>Care Type</td>
          <td>
            <table width=100%  border=0 class=TableBody cellpadding=0
             cellspacing=0>
            <tr><td>
          <input type=text readonly size=30 class=ReadOnly value="%PATWEB89.01.113.0">
              </td>
              </tr>
              </table>
          </td>
          </tr>
     <tr><td class=DataLabel> Member Number &nbsp;
      <td><input type=text size=20 maxlength=19 value="%PATWEB89.01.116" 
       name=ptmis015 tabindex=17>
      </td>


      <tr align=center>
       <td colspan=4 align=center><br>
       <input type=button value="Update" class="button" tabindex=35
        id="pat89sub"
        onclick="tempDisable(this);checkFiveDayWard(UpdateForm.wardcode.value,
                 UpdateForm.beddcode.value, UpdateForm.admisdte.value,
                 UpdateForm.ptmis030.value, SubmitUpd);">
       <input type=button value="Cancel" class="button" tabindex=36
        onclick="history.go(-1);">
    </table>
</td></tr>
</table>
</form>
<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name=admissno value="%PATWEB89.01.081">
<input type=hidden name=MenuType value="%PATWEB89.01.088">
</form>

<span id=WaitingList style="display:none">
<table width=100% height=100% border=0 cellspacing=0 cellpadding=0>
<tr><td class=DataLabel width=37%>Date of Referral</td>
    <td><input type=text size=12 name=ptmis058 tabindex=18 id=ptmis058
         onblur="checkDate(this,'ReferralDate')">
         <img notab src=../images/DateLookup.gif class=Icon
          onclick="DateLookupFrame(ptmis058);"></td></tr>
<tr><td class=DataLabel>Date of 1st Spec Consult</td>
    <td><input type=text size=12 name=ptmis059 tabindex=19 id=ptmis059
         onblur="checkDate(this,'SpecConDate')">
         <img notab src=../images/DateLookup.gif class=Icon
          onclick="DateLookupFrame(ptmis059);"></td></tr>
</table>
</span>

<span id=BabyAge style="display:none">
<table width=100% height=100% border=0 cellspacing=0 cellpadding=0>
<tr><td class=DataLabel width=37%>Admission Weight</td>
    <td><input type=text name=ptmis051 size=5 maxlength=4 tabindex=20>grams</td></tr>
</table>
</span>

<span id=NewBorn style="display:none">
<table width=100% height=100% border=0 cellspacing=0 cellpadding=0>
<tr><td class=DataLabel width=37%>Gestation Period</td>
    <td><input type=text name=ptmis041 maxlength=3 size=4 tabindex=21> weeks
    </td></tr>
</table>
</span>

<script type="text/javascript">
  
for (var i=0;i<document.UpdateForm.ptvis021.length;i++){
if (document.UpdateForm.ptvis021.options[i].value=="%PATWEB89.01.224.0"){
    document.UpdateForm.ptvis021.selectedIndex=i}};
//for (var i=0;i<document.UpdateForm.ptmis017.length;i++){
//if (document.UpdateForm.ptmis017.options[i].value=="%PATWEB89.01.118.0"){
//    document.UpdateForm.ptmis017.selectedIndex=i}};
  
</script>

<script type="text/javascript">

for (var i=0;i<document.UpdateForm.ptvis022.length;i++){
if (document.UpdateForm.ptvis022.options[i].value=="%PATWEB89.01.225.0"){
    document.UpdateForm.ptvis022.selectedIndex=i}};

admstat="%PATWEB89.01.950";
if (trim(admstat) != "0") {
   document.UpdateForm.ptmis031.className="Readonly";
}

if (!isWhitespace(document.getElementById('ibalv001').value)) {
  document.getElementById('ibalv001').className='readonly';
  document.getElementById('ibalv001').readOnly=true;
}

function disDelay(cliDis) {
  if (!isWhitespace(cliDis.value)) {
    document.getElementById("rsndisde").style.display = "";
    document.getElementById("vsxdc014").className = "Mandatory";
    document.getElementById("vsxdc014").disabled = false;
  } else {
    document.getElementById("rsndisde").style.display = "none";
    document.getElementById("vsxdc014").className = "";
    document.getElementById("vsxdc014").disabled = true;
    document.getElementById("vsxdc014").value = "";
  }
}

disDelay(document.getElementById('mrfddate'));
for (var j=0; j < document.getElementById('vsxdc014').length; j++) {
  if (document.getElementById('vsxdc014').options[j].value.substr(0,3)
      =="%PATWEB89.01.999.133") {
      document.getElementById('vsxdc014').selectedIndex=j;
  }
}

</script>

<span id=transferhd style="display:none" class=DataLabel>
Transfer Source
</span>
<span id=transfersrc style="display:none">
<input type="text" size=7 maxlength=5 name=trnsfsrc class=Mandatory
      title="Transfer Source" tabindex=2 id=trnsfsrc
      value="%PATWEB89.01.193.0"
      onchange="validateCode(9,trnsfsrc,trandesc);">
     <input type=text size=27 name=trandesc notab id=trandesc
      class=Readonly readonly value="%PATWEB89.01.193.1">
     <img src="../images/SearchIcon.gif" class=Icon
      onclick="TransferSourceFrame(trnsfsrc,trandesc)">
</span>
<span id=transferblank style="display:none">
   <input type=hidden name=trnsfsrc>
</span>
