<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="kids">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser"    content="true">
 
<script type="text/javascript"> 
  function init() {
  UpdateForm.dummy.value=UpdateForm.bokrx023.value;
  if(document.UpdateForm.wmstat.value>3){
    UpdateForm.bokrx003.disabled=true;
    UpdateForm.bokrx003.className="Readonly";
    UpdateForm.bokrx002.disabled=true;
    UpdateForm.bokrx002.className="Readonly";
    UpdateForm.bkrec007.readOnly=true;
    UpdateForm.bkrec007.className="Readonly";
    UpdateForm.bkrec004.readOnly=true;
    UpdateForm.bkrec004.className="Readonly";
    UpdateForm.bkrec004.disabled=true;
    UpdateForm.bkrec005.readOnly=true;
    UpdateForm.bkrec005.className="Readonly";
    UpdateForm.bkrec005.disabled=true;
    UpdateForm.bokrx023.readOnly=true;
    UpdateForm.bokrx023.className="Readonly";
    UpdateForm.bokrx023.disabled=true;
    UpdateForm.bokrx024.disabled=true;
    UpdateForm.bokrx024.className="Readonly";
    UpdateForm.bokrx033.disabled=true;
    UpdateForm.bokrx033.className="Readonly";
    UpdateForm.bokrx004.readOnly=true;
    UpdateForm.bokrx004.className="Readonly";
    UpdateForm.bokrx004.disabled=true;
    UpdateForm.lettreqd.disabled=true;
    UpdateForm.lettreqd.className="Readonly";
    UpdateForm.bokrx006.readOnly=true;
    UpdateForm.bokrx006.className="Readonly";
    UpdateForm.bokrx006.disabled=true;
    UpdateForm.bokrx035.readOnly=true;
    UpdateForm.bokrx035.className="Readonly";
    UpdateForm.bokrx035.disabled=true;
    UpdateForm.selprint.disabled=true;
    UpdateForm.selprint.className="Readonly";
    UpdateForm.bokrx005.disabled=true;
   }
  }
  function DisableIcon(field) {
  if (field.disabled == true) {
    alert(field.title+" is for display only")
    }
  }

  function DelWindow() {
    CASEKEYS=PatientLinks.casekeys.value.replace(/ /g,"+");
    LinkUrl="watweb01.pbl?reportno=2&template=011&casekeys="+CASEKEYS;
    Left=(document.body.clientWidth-700)/2;
    DFrameLink(LinkUrl,100,Left,700,300);
  }
  function DefProDate() {
    document.UpdateForm.bokrx023.value=document.UpdateForm.bkrec004.value;
  }

  function AddBook() {
  if(document.UpdateForm.wmstat.value>3){
     PatientLinkTo("watweb01.pbl",2,1,0,0,0);
     return;
  }
  
    if (validateMandatory(document.UpdateForm)) {
     UpdateForm.redirect.value="watweb01.pbl?reportno=2&template=1&casekeys=" +
                             PatientLinks.casekeys.value.replace(/ /g,"+");
     ChkBookDate();
    }
  }
  function ChkBookDate(ReturnCode) {
    ans=true
    i=document.UpdateForm.wattr014.selectedIndex;
    code=document.UpdateForm.wattr014.options[i].value.substring(5,6);
    if ( code=="1" || code=="2" ) {
    var serverURL   = "../cgi-bin/watweb01.pbl?reportno=11" +
                      "&xmldate1=" + UpdateForm.wattr006.value +
                      "&xmldate2=" + UpdateForm.bkrec004.value +
                      "&xmlcode1=" + code;

    var returnValue = RSExecute(serverURL);
    ReturnValue=returnValue.return_value.split("|");
    if (returnValue.status==0) {
     if (ReturnValue[0]==1) {
      ans=confirm("Warning : You are booking a category 1 patient to a date greater than 30 days from the date on list!");
     }
     if (!ans) {
      return;
     }
     if (ReturnValue[0]==2) {
      ans=confirm("Warning : You are booking a category 2 patient to a date greater than 90 days from the date on list!");
     if (!ans) {
      return;
     }
    }
    UpdateForm.submit();
    }
    else {
      ReturnCode.focus(); }
    }
    UpdateForm.submit();
  }
function CheckPrinter() {
  if(document.UpdateForm.lettreqd.value==1) {
    document.UpdateForm.bokrx004.value=document.UpdateForm.defcdate.value
    document.UpdateForm.selprint.className="Mandatory";
  } else {
    document.UpdateForm.bokrx004.value=document.UpdateForm.contdate.value
    document.UpdateForm.selprint.className="";
  }
}
function ReasChng() {
   if(UpdateForm.dummy.value!=UpdateForm.bokrx023.value) {
     InsertReasName.innerHTML="Reason for Change";
     InsertReasCode.innerHTML=reaschng.innerHTML;
  }
  else {
     InsertReasName.innerHTML="";
     InsertReasCode.innerHTML="";
  }
}
  function nrflabel() {
    document.getElementById('RFCStatus').innerHTML=
      (RFCColDescription) + " Status";
    document.getElementById('NRFCReason').innerHTML=
      (NRFCColDescription) + " Reason";
    document.getElementById('RFCDate').innerHTML=
      (RFCColDescription) + " Date";
}
</script>  
</head>
%START.OF.PAGE
<body onload=PageLoad(event);nrflabel();>
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%WATWEB01.02.003";
PatientVIS="%WATWEB01.02.081";
PatientNAM="%WATWEB01.02.002";
PatientSTA="%WATWEB01.02.086.078";
PatientALT="%WATWEB01.02.084";
PatientSEX="%WATWEB01.02.019";
PatientDOB="%WATWEB01.02.020";
PatientAGE="%WATWEB01.02.021";
PatientLOC="%WATWEB01.02.083";
DoctorCOD="%WATWEB01.02.082.003";
DoctorNAM="%WATWEB01.02.082.002";
PatientAID="%WATWEB01.02.086.090";
PatientIND="%WATWEB01.02.086.091";
PatientCUR="%WATWEB01.02.086.092";
PatientCLC="%WATWEB01.02.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%WATWEB01.02.086.094";
PatientCDM="%WATWEB01.02.086.095";
PatientVDH="%WATWEB01.02.086.099.015";
PatientUNT="%WATWEB01.02.066.0";
PatientPRI="%WATWEB01.02.086.066.1";
InsertPatientHeader();
</script>

<div id=PatientMenu></div>
<div id=PageBodySection style="overflow: auto;">
<form name=UpdateForm action=watweb01.pbl style="margin:0" method=post>
<table border=0 width="100%" cellspacing="0" cellpadding="1" align=center>
<input type=hidden name=reportno value=7>
<input type=hidden name=template value=4>
<input type=hidden name=setbookf value=1>
<input type=hidden name=updttype value=U>
<input type=hidden name=redirect value="">
<input type=hidden name=nextpage value="1">
<input type=hidden name=casekeys value="%WATWEB01.02.101">
<input type=hidden name=bkrec008 value="M">
<input type=hidden name=wmstat   value="%WATWEB01.02.175">
<input type=hidden name=defcdate value="%STANDARD.01.015">
<input type=hidden name=contdate value="%WATWEB01.02.404">
<input type=hidden name=dummy>
<input type=hidden name=dummy1>

<tr><td align=center class=HeadingCell>Update Waiting List Booking
</td></tr>
</table>
<table border=0 width="95%" cellspacing="0" cellpadding="0" align=center>
<tr><td class=DataLabel>Consultant</td>
    <td class=DataField colspan=3>
    <input class=Readonly type=text name=bkrec002 size=8 maxlength=8 
    readonly value="%WATWEB01.02.115.003" >
    <input type=text name=n_bkrec002 size=40 
    readonly class=Readonly value="%WATWEB01.02.115.002">
    </td></tr>
<tr><td class=DataLabel>Unit</td>
    <td class=DataField>
    <select name=bkrec021 class=Readonly title="Unit" 
    readonly disabled>
    <option></option>
    %WATWEB01.02.114.2
    </select></td> 

<td class=DataLabel>%STANDARD.01.017.TP    </td>
    <td Class=DataField>
    <select name=wattr014  class=Readonly readonly disabled>
    <option></option>
    %WATWEB01.02.117.2
    </select></td></tr>

<tr><td class=DataLabel>Date on List</td>
    <td class=DataField>
    <input type=text name=wattr006 id=wattr006 size=12  value='%WATWEB01.02.109'
     onblur="checkDate(this,'Date');" class=Readonly title="Date on List"
     readonly >
    </td>

<td class=DataLabel>Ins Class </td>
    <td class=DataField><select name=wattx026  class=Readonly
     readonly disabled>
    <option></option>
    %WATWEB01.02.526.9.1.10.2.X
    </select></td> </tr>

<tr><td class=DataLabel>Admitting Point   </td>
    <td class=DataField>
    <select name=bokrx003 tabindex=1 class=Mandatory title="Admitting Point">
    <option></option>
    %WATWEB01.02.506.2
    </select></td>

<td class=DataLabel><div id=RFCStatus></td>
    <td class=DataField>
    <select name=wattx004 class=selectBig class=Readonly disabled>
    <option></option>
    %WATWEB01.02.312.2
    </select></td></tr>

<tr><td class=DataLabel>Post Op Ward</td>
    <td class=DataField><select name=bokrx002 tabindex=2 class=Mandatory 
        title="Post Op Ward">
    <option></option>
    %WATWEB01.02.402.2
    </select></td>

<td class=DataLabel><div id=NRFCReason></td>
    <td class=DataField>
    <input type=text size=25   
    class=Readonly readonly value="%WATWEB01.02.316.0">
    </td></tr>

<tr><td class=DataLabel>Planned Length of Stay </td>
    <td class=DataField>
    <input type=text name=wattr013 size=4 maxlength=4 readonly class=Readonly
     value="%WATWEB01.02.116">(days)</td>

<td class=DataLabel><div id=RFCDate></td>
    <td class=DataField><input type=text name=     size=   tabindex=3
     class=Readonly readonly value="%WATWEB01.02.316.1"></td></tr>


<tr><td class=DataLabel> Overdue Date </td>
    <td class=DataField>
    <input type=text size=11  class=Readonly readonly
     value="%WATWEB01.02.176">
    </td></tr>


<tr><td class=DataLabel>Reason/Diagnosis</td>
   <td class=DataField colspan=3>
   <input type=text  class=Readonly readonly
    name=bkrec037 size=70 maxlength=50 value="%WATWEB01.02.107" >
   </td></tr>

<tr><td class=DataLabel>ESIS Code             </td>
    <td class=DataField colspan=3>
    <input type=text size=12 name=bkrec035 title="CMBS Code"
     class=Readonly readonly value="%WATWEB01.02.103">
    </td></tr>

<tr><td class=DataLabel>Procedure</td>
    <td class=DataField colspan=3>
    <input type=text name=bkrec036 size=70 maxlength=50 
     class=Readonly readonly  value="%WATWEB01.02.732">
    </td></tr>

<tr><td class=DataLabel>Estimated Procedure Time  </td>
    <td class=DataField colspan=3>
    <input type=text name=bkrec007 size=8 tabindex=4 maxlength=9 class=Integer
     min=0 title="Estimated Operating time" value=%WATWEB01.02.105></td></tr>

<!--<tr><td colspan=4><hr width=100%></td></tr>-->
<!-- Third Quadrant     -->
<tr><td class=DataLabel>Proposed Admission</td>
    <td class=DataLabel>
    <input type=text name=bkrec004 id=bkrec004 size=12
     class=Readonly readonly  title="Proposed Admission Date" tabindex=5
     value="%WATWEB01.02.706">
    Time
    <input type=text name=bkrec005 id=bkrec005 size=8 tabindex=6
    title="Proposed Admission Time" class=Mandatory value="%WATWEB01.02.707">
    <img src=../images/DateTimeStamp.gif class=Icon date=UpdateForm.bkrec004
     time=UpdateForm.bkrec005>  
    <img src=../images/TimeLookup.gif class=Icon time=UpdateForm.bkrec005
       onfocus="DisableIcon(bkrec005);" tabindex=-1>
    </td>
</tr>
<tr><td class=DataLabel>Proposed Procedure Date </td>
    <td class=DataLabel>
 <input type=text name=bokrx023 id=bokrx023 size=12 value="%WATWEB01.02.423"
title="Proposed Procedure Date" tabindex=7 
onblur=ReasChng();"checkDate(this,'Date');">
    <img src=../images/DateLookup.gif class=Icon date=UpdateForm.bokrx023
         onfocus="DisableIcon(bokrx023);" tabindex=-1>
    Time
    <select name=bokrx024  
      title="Proposed Procedure time" tabindex=8 >
    <option></option>
    %WATWEB01.02.424.2
    </select></td>
    <td class=DataLabel><span id=InsertReasName></span></td>
    <td class=DataField colspan=3><span id=InsertReasCode></span></td></tr>

<tr><td class=DataLabel>Contact Type </td>
    <td class=DataField>
    <select name=bokrx033 title="Contact Type" tabindex=9 class=Mandatory
            title="Contact Type">
    <option></option>
     %WATWEB01.02.318.2
    </select></td> 

<td class=DataLabel> Confirmation Date </td>
    <td class=DataLabel>
    <input type=text name=bokrx006 id=bokrx006 size=12 
     value="%WATWEB01.02.406" tabindex=10 class=PastDate
     title="Confirmation Date"
     onblur="checkDate(this,'Date');" 
     onfocus="DisableIcon(bokrx006);" tabindex=-1>
    Time
    <input type=text name=bokrx035 id=bokrx035 size=8 tabindex=10
    title="Confirmed Operation Time" value="%WATWEB01.02.435">
    <img src=../images/DateTimeStamp.gif class=Icon date=UpdateForm.bokrx006
     time=UpdateForm.bokrx035 onfocus="DisableIcon(bokrx035);" tabindex=-1>
    </td> 
    </tr>

<tr><td class=DataLabel> Contact Date </td>
    <td class=DataField>
    <input type=text name=bokrx004 id=bokrx004 size=12 value="%WATWEB01.02.404"
     title="Contact Date" class=Mandatory tabindex=11 
       onblur="checkDate(this,'Date');">
    <img src=../images/DateLookup.gif class=Icon date=UpdateForm.bokrx004
         onfocus="DisableIcon(bokrx004);" tabindex=-1>
    </td>

<td class=DataLabel> Parent Staying </td>
    <td><input type=checkbox name=bokrx005 title="Parent Staying" 
     tabindex=12 value="1">
    </td></tr>

<tr><td class=DataLabel>Letter Required </td>                                 
    <td><select name=lettreqd id=lettreqd class=Mandatory tabindex=13
         title="Letter Required" onchange="CheckPrinter();">
        <option></option>
        <option value=0>No </option>
        <option value=1>Yes</option>
        </select></td>
    <td class=DataLabel>Printer</td>
    <td><select name=selprint>
        <option></option>
        %STANDARD.01.001.WATWEB03.00
        </select></td>
        </td></tr>

<tr><td class=DataLabel>Combined Procedure </td>
    <td class=DataField colspan=3>
    <input type=text size=12 name=wattx018 title="CMBS Code"
     class=Readonly readonly value="%WATWEB01.02.518.1" >
    </td></tr>

<tr><td class=DataLabel>Date Booking Keyed        </td>
    <td class=DataField><input type=text size=12 maxlength=12 readonly
     class=Readonly value="%WATWEB01.02.737"></td>
    <td class=DateLabel>Operator ID       </td>
    <td class=DataField><input type=text size=12 maxlength=12 readonly
     class=Readonly value='%WATWEB01.02.310' ></td></tr>

<tr><td colspan=4 align=center> 
    <input type=button value="Delete Booking" class="button" tabindex=14
    onclick="DelWindow()">
    </td></tr>

<tr><td colspan=4 align=center>&nbsp; </td></tr>
<tr><td colspan=4 align=center> 
    <input type=button value=Ok class="button" tabindex=15
     onclick='AddBook();'>
    <input type=button value=Cancel class="button" tabindex=16
     onclick='PatientLinkTo("watweb01.pbl",2,1,0,0,0);'>
    </td></tr>
</table>
</form>
</div>
<span id=reaschng style="display: none">
<select name=wathi001 title="Reason for Change" class="Mandatory">
<option></option>
%WATWEB01.02.314.2
</select>
</span>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%WATWEB01.02.003">
<input type=hidden name=admissno value="%WATWEB01.02.081">
<input type=hidden name=MenuType value="%WATWEB01.02.088">
<input type=hidden name=casekeys value="%WATWEB01.02.101">
</form>

<script type="text/javascript">
 ParentStay="%WATWEB01.02.405";
 if ( ParentStay == "Yes") {
   document.UpdateForm.bokrx005.checked=1;
 }

</script>
