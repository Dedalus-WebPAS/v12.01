<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="kids">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/admission.js"></script>
<script type="text/javascript" src="../js/ndis.js"></script>
<script type="text/javascript">
function SubmitUpd() {
    MandatoryOk=true;
    if (!validateMandatory(document.UpdateForm)) {
       return;
    }

  p=document.UpdateForm;
  validateSuspension(p.urnumber,p.ptmis001,p.datefrom,p.dateto);
  if(p.datefrom.value!='0'){
       ans=confirm("Warning : Patient has a Suspension record for period \n" +
             "\t" + p.datefrom.value  + " - " + p.dateto.value);
       if (ans!=true) {
          return; }
  }

    if (!isWhitespace(UpdateForm.ptmis013.value)) {
        if (!validateHFT(20,UpdateForm.ptmis013,UpdateForm.ptmis014,
                       UpdateForm.funddesc,UpdateForm.tabldesc)) {
           ans=confirm("Select another active health fund table? ");
           if (ans==true) {
              return;
           } 
        } 
    }

    if (MandatoryOk) {
       setRedirect();
       SubmitHidden(UpdateForm);
   }
}
function valDoctorUnit() {
  validateCode(31,UpdateForm.ptmis007,UpdateForm.doctnam2);
  selectOptions("30",UpdateForm.ptmis007,UpdateForm.ptmis024);
  UpdateForm.ptmis024.selectedIndex=1
}
function validateExternalVisitID(externalID) {
  if (isWhitespace(externalID.value)) {
    return;
  }
  var serverURL  = "../cgi-bin/emrweb08.pbl?reportno=49" +
                   "&valdalvn=" +
                   externalID.value.replace(/ /g,"+") +
                   "&valdcode=" +
                   document.UpdateForm.admissno.value.replace(/ /g,"+");
  var returnValue = RSExecute(serverURL);
  if (returnValue.status!=0) {
    externalID.value="";
    externalID.focus();
  }
}
function selectUnit(){
  for (var i =0 ; i < document.UpdateForm.ptmis024.length; i++) {
    if (document.UpdateForm.ptmis024.options[i].value.substr(0,3)==
                 document.UpdateForm.deftunit.value.substr(0,3)) {
       document.UpdateForm.ptmis024.selectedIndex=i } };
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);DisplayTrnSrc();
              document.UpdateForm.ptmis001.focus();
              DisplayContractSTV();valDoctorUnit();selectUnit();
              ValidateHCP(18,0,document.UpdateForm.ptvis028,
                               document.UpdateForm.doctnam1);
              ShowNdisPart();">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB89.01.003";
PatientVIS="%PATWEB89.01.081";
PatientNAM="%PATWEB89.01.002";
PatientSTA="%PATWEB89.01.086.078";
PatientALT="%PATWEB89.01.084";
PatientSEX="%PATWEB89.01.019";
PatientDOB="%PATWEB89.01.020";
PatientAGE="%PATWEB89.01.021";
PatientLOC="%PATWEB89.01.083";
PatientPRI="%PATWEB89.01.086.066.1";
PatientUNT="%PATWEB89.01.066.0";
DoctorCOD="%PATWEB89.01.082.003";
DoctorNAM="%PATWEB89.01.082.002";
PatientAID="%PATWEB89.01.086.090";
PatientIND="%PATWEB89.01.086.091";
PatientCUR="%PATWEB89.01.086.092";
PatientCLC="%PATWEB89.01.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB89.01.086.094";
PatientCDM="%PATWEB89.01.086.095";
PatientVDH="%PATWEB89.01.086.099.015";
InsertPatientHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>
<form name=UpdateForm id=UpdateForm method=post action=patweb89.pbl
 style="margin:0">
<input type=hidden name=reportno id=reportno value="2">
<input type=hidden name=template id=template value="032">
<input type=hidden name=urnumber id=urnumber value="%PATWEB89.01.003">
<input type=hidden name=admissno id=admissno value="%PATWEB89.01.081"> 
<input type=hidden name="updatety" id="updatety" value="6">
<input type=hidden name="allocate" id="allocate" value="1">
<input type=hidden name="redirect" id="redirect"
 value="%PATWEB89.01.001.patweb98.01.002">
<input type=hidden name="chckname" id="chckname" value="0">
<input type=hidden name="emradmit" id="emradmit" value="0">
<input type=hidden name="emradmis" id="emradmis" value="0">
<input type=hidden name="newbmand" id="newbmand" value="0">
<input type=hidden name="agebmand" id="agebmand" value="0">
<input type=hidden name="ptmis073" id="ptmis073" value=" ">
<input type=hidden name="ptmis075" id="ptmis075" value="N">
<input type=hidden name="ptmis074" id="ptmis074" value="N">
<input type=hidden name="mvmedrec" id="mvmedrec">
<input type=hidden name="cfinan" id="cfinan" value="0">
<input type=hidden name="admitbox" id="admitbox" value="0">
<input type=hidden name="exstward" id="exstward" value="%PATWEB89.01.158">
<input type=hidden name=datefrom id=datefrom>
<input type=hidden name=dateto id=dateto>
<input type=hidden name="ibaalvin" id="ibaalvin" value="1">
<input type=hidden name="deftunit" id="deftunit" value="%PATWEB89.01.124.1">
<input type=hidden name=ptcnhdps id=ptcnhdps
       value="%STANDARD.01.025.080.250.1.1">

<input type=hidden name=ptcndigp id=ptcndigp
       value="%STANDARD.01.025.124.122.0.1">

<table border=1 colspan=1 width=100% cellspacing=1 cellpadding=1 >
<tr><td class=HeadingCell align=center>
    Update Pre-Admission Details</tr>
<tr>
<tr><td>
    <table border=0 width=100% class=TableBody cellpadding=0 cellspacing=0>
      <tr><td class=DataLabel>Admission Date</td>
          <td><input type="text" size="12" tabindex=1
           name=ptmis001 id=ptmis001 value="%PATWEB89.01.102"
           class=Mandatory title="Admission Date"
           onblur="checkDate(this,'Admission Date')">
          <img src="../images/DateLookup.gif" class=Icon 
           onclick="DateLookupFrame(UpdateForm.ptmis001);">
           Time
          <input type=text name=ptmis002 id=ptmis002 tabindex=2 size=8
          value="%PATWEB89.01.103" class=Mandatory title="Admission Time">
          <img src="../images/DateTimeStamp.gif" class=Icon
           onclick="SetCurrentDateTime(UpdateForm.ptmis001,
                                       UpdateForm.ptmis002);">
          <img src="../images/TimeLookup.gif" class=Icon
           onclick="TimeLookupFrame(UpdateForm.ptmis002);"> </td>
             <td>%STANDARD.01.017.PK</td>
             <td><select name=ptvis110 id=ptvis110 tabindex=5>
             <option></option>
              %PATWEB89.01.298.033.2
             </select></td></tr>
      <tr><td class=DataLabel>Admission Source</td>
          <td><select name=ptmis009 id=ptmis009 tabindex=3 class=Mandatory
                     title='Admission Source' onchange="DisplayTrnSrc()">
                 <option> </option>
                 %PATWEB89.01.110.2
                 </select></td>
          <td class=DataLabel>%STANDARD.01.017.P </td>
          <td><select name=ptmis011 id=ptmis011 tabindex=6 class=Mandatory 
               title="%STANDARD.01.017.P ">
              <option> </option>
                 %PATWEB89.01.112.2
              </select></td></tr>
      <tr> 
          <td><div id=TranSrcHeading></div></td>
          <td><div id=TranSrc></div></td>

        <td class=DataLabel>Criteria for Admission</td>
    <td><select name=ptvis041 id=ptvis041 tabindex=7 class=Mandatory 
         title='Criteria for Admission'>
       <option></option>
       %PATWEB89.01.244.2
       </select>
    </td></tr>
       <tr><td align=left>Prior Days Hospitalisation</td>
       <td><input name=ptmis031 id=ptmis031
              title='Prior Days Hospitalisation' tabindex=4
              class=Integer size=5 maxlength=4 value=%PATWEB89.01.130 
              onblur="checkInteger(this,this.value);">
         </td>
        <td class=DataLabel>Intended Stay</td>
        <td><select name=ptvis043 id=ptvis043 tabindex=8 class=Mandatory
             title='Intended Stay'>
            <option> </option>
             %PATWEB89.01.246.2
            </select></td></tr>
       <tr align=left>
         <td align=center colspan="4">
         <hr>
         </td>
       </tr>

      <tr><td class=DataLabel>Attending Doctor</td>
      <td><input type="text" size=8 maxlength=6 name="ptmis007" id="ptmis007"
           tabindex=9
           value="%PATWEB89.01.108.003"
           class=Mandatory title='Attending Doctor'
           onblur="UpCase(this);valDoctorUnit();">
           <input type=text readonly size=25 name=doctnam2 id=doctnam2
            class=Mandatory
            value="%PATWEB89.01.108.002">
           <img src="../images/SearchIcon.gif" class=Icon
            onclick="DoctorSearchFrame(UpdateForm.ptmis007,
                                       UpdateForm.doctnam2)"></td>

          <td class=DataLabel>Unit</td>
          <td><select name=ptmis024 id=ptmis024 tabindex=13 class=Mandatory
               title='Unit'>
              <option> </option>
               %PATWEB89.01.124.2
              </select>
          </td></tr>
      <tr><td class=DataLabel>Diagnosis </td>
          <td><input type=text name="ptmis020" id="ptmis020" size=50
               maxlength=80 tabindex=10 
               class=Mandatory value="%PATWEB89.01.121" title='Diagnosis'>
      </td>
      <td class=DataLabel>Procedure </td>
      <td><input type=text name="ptvis064" id="ptvis064" size=30
           maxlength=30 tabindex=14 
           value="%PATWEB89.01.267">
      </td>
      <tr><td class=DataLabel>Clinical Pathway</td>
        <td>
        <select name=ptvis023 id=ptvis023 tabindex=11>
        <option></option>
         %PATWEB89.01.226.2
        </select>
        </td>
        <td class=DataLabel> Expected Length of Stay</td>
        <td>
        <input type=text name=ptmis030 id=ptmis030 size=5 maxlength=5
         tabindex=15
         title='Expected length of stay' value="%PATWEB89.01.129"
         class=Integer>
        </td>
        </tr>
       <tr><td>Admitting Point</td>
       <td>
         <select name=ptvis046 id=ptvis046 tabindex=12 class=Mandatory
          title='Admitting Point' onchange="defaultWard()">
          <option> </option>
           %PATWEB89.01.290.2
         </select>
       </td>

         <td class=DataLabel>Ward / Bed </td>
         <td><input type=hidden name=bedstat1 id=bedstat1>
         <input type=hidden name=ptmis004 id=ptmis004>
         <input type=hidden name=ptmis005 id=ptmis005>
         <input type=hidden name=warddesc id=warddesc>
         <select name=ptmis068 id=ptmis068 tabindex=16 class=Mandatory
          title='Ward'>
         <option> </option>
            %PATWEB89.01.449.2
         </select>
         <input type=text name=ptmis076 id=ptmis076 maxlength=3 size=3
          value="%PATWEB89.01.194">
         <img src="../images/SearchIcon.gif" class=Icon
          onclick="WardBedSearchFrame(UpdateForm.ptmis068,
                                      UpdateForm.warddesc,
                                      UpdateForm.ptmis076,
                                      UpdateForm.bedstat1);">
       </td></tr>

       <tr align=left>
         <td align=center colspan="4">
         <hr>
         </td>
      <tr>
          <td class=DataLabel>Care Managed</td>
          <td>&nbsp;</td>
          <td class=DataLabel>Referring GP</td>
          <td>
          <input type="text" size=10 maxlength=10 name="ptvis028"
           id="ptvis028" tabindex=17 value="%PATWEB89.01.231.1"
           onblur="ValidateHCP(18,
                               0,
                               UpdateForm.ptvis028,
                               UpdateForm.doctnam1);">
          <input type="text" size=25 name="doctnam1" id="doctnam1"
           value="%PATWEB89.01.231.0">
          <img src="../images/SearchIcon.gif" class=Icon
           onclick="HCPSearchFrame(UpdateForm.ptvis028,UpdateForm.doctnam1,0);">
          </td></tr>
      <tr>
          <td class=DataLabel>RMO Responsible</td>
          <td>&nbsp;</td>
        <td class=DataLabel>Inform GP</td>
        <td>
          <select name=ptvis022 id=ptvis022 tabindex=18 title="Inform GP">
           <option value="0">No</option>
           <option value="1">Yes</option>
          </select>
        </td>
    </tr>

    <tr><td class=DataLabel></td>
        <td></td>
        <td class=DataLabel>Program</td>
        <td><input type=text size=8 maxlength=8 name=ptvis099 id=ptvis099
             title="Program" tabindex=19 value="%PATWEB89.01.298.021.1"
             onchange="findPrgmdesc();">
            <select name=prgmcode id=prgmcode Readonly class=readonly
             onchange="savePrgmcode();">
              <option> </option>
              %PATWEB89.01.298.021.2
            </select>
        </td>
    </tr>

    <tr id=ndispart style="display:none"><td>&nbsp;</td>
        <td>&nbsp;</td>
        <td class=DataLabel>%STANDARD.01.035.N </td>
        <td><select name=ptvis121 id=ptvis121 title="%STANDARD.01.017.N "
             tabindex=21>
            <option> </option>
             %PATWEB89.01.298.066.9.2
            </select></td></tr>

    <tr align=left>
      <td align=center colspan="4"><hr></td>
    </tr>

    <tr><td class=DataLabel>%STANDARD.01.017.CL</td>
        <td align=left>
          <select name=ptmis027 id=ptmis027 tabindex=20 class=Mandatory 
           title="%STANDARD.01.017.CL">
            <option> </option>
            %PATWEB89.01.126.9.1.10.2.X
          </select>
        </td>

        <td class=DataLabel>Claim form Signed</td>
        <td>
          <select name=ptvis021 id=ptvis021 tabindex=26 class=Mandatory 
           title="Claim form signed">
            <option value=0> No </option>
            <option value=1> Yes </option>
          </select>
        </td>
    </tr>

    <tr><td class=DataLabel>%STANDARD.01.017.A </td>
        <td><select name=ptmis010 id=ptmis010 tabindex=21
             title="%STANDARD.01.017.A "
             class=Mandatory onchange="DisplayContractSTV();">
              <option> </option>
              %PATWEB89.01.111.2
            </select>
        </td>
        <td class="DataLabel"><div id="Contrac2Heading"></div></td>
        <td><div id="ContractId"></div></td>
    </tr>

    <tr><td class="DataLabel"><div id="ContractHeading"></div></td>
        <td><div id="ContractType"></div></td>
        <td class="DataLabel"><div id="Contrac1Heading"></div></td>
        <td><div id="ContractRole"></div></td>
    </tr>

    <tr><td class=DataLabel>Health Fund</td>
        <td><input type=text size=6 maxlength=6 name=ptmis013 id=ptmis013
             tabindex=23
             title="Health Fund" class="Mandatory"
             onchange="validateCode(16,UpdateForm.ptmis013,UpdateForm.funddesc);
                       checkTableadm();"
             value="%PATWEB89.01.114.0">
            <input type=text size=30 maxlength=30 name=funddesc id=funddesc
             class=readonly
             Readonly notab value="%PATWEB89.01.114.1">
        </td>
        <td class=DataLabel>External Visit ID</td>
        <td><input type=text size=30 maxlength=20 name=ibalv001 id=ibalv001
             title="External Visit ID" tabindex=28 value="%PATWEB89.01.999. 57"
             onblur="validateExternalVisitID(this);">
        </td>
    </tr>

    <tr><td class=DataLabel>Level of Insurance</td>
    <td width=22%>
        <input name="ptmis014" id="ptmis014" size=8 maxlength=8 
               title="Level of Insurance" class="Mandatory"
               tabindex=24 value="%PATWEB89.01.115.0"
         onblur="validateHFT(20,
                             UpdateForm.ptmis013,
                             UpdateForm.ptmis014,
                             UpdateForm.funddesc,
                             UpdateForm.tabldesc);">
        <input type="text" size=15 maxlength=17 name="tabldesc" id="tabldesc"
         class=readonly Readonly notab value="%PATWEB89.01.115.1" >
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="HealthFundSearchFrame(UpdateForm.ptmis013,
                                        UpdateForm.funddesc,
                                        UpdateForm.ptmis014,
                                        UpdateForm.tabldesc);">
        <img src="../images/erase.gif" class=Icon
         onclick="clrDoc(UpdateForm.ptmis013,UpdateForm.ptmis014);
                  clrDoc(UpdateForm.funddesc,UpdateForm.tabldesc);
                  checkTableadm();"></td>

          <td class=DataLabel>Care Type</td>
          <td>
              <table width=100%  border=0 class=TableBody cellpadding=0
               cellspacing=0>
              <tr><td>
            <select name=ptmis012 id=ptmis012 tabindex=29 class=Mandatory
             title='Care Type'>
              <option></option>
              %PATWEB89.01.113.2
            </select>
              </td>
              </tr>
             </table>
          </td>
          </tr>

     <tr><td class=DataLabel> Member Number &nbsp;
      <td><input type=text size=20 maxlength=19 value="%PATWEB89.01.116" 
       name=ptmis015 id=ptmis015 tabindex=25>
      </td>

      <tr align=center>
       <td colspan=4 align=center><br>
       <input type=button value="Update" class="button" tabindex=35
        id="pat89sub" onclick="tempDisable(this);SubmitUpd()">
       <input type=button value="Cancel" class="button" tabindex=36
        onclick="history.go(-1);">
    </table>
</td></tr>
</table>
</form>
</div>

<form name=linkForm id=linkForm action=patweb89.pbl method=post>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=1>
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name=admissno value="%PATWEB89.01.101">
</form>

<form name=PatientLinks id=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%PATWEB89.01.003">
<input type=hidden name=admissno value="%PATWEB89.01.081">
<input type=hidden name=MenuType value="%PATWEB89.01.088">
</form>

<span id=WaitingList style="display:none">
<table width=100% height=100% border=0 cellspacing=0 cellpadding=0>
<tr><td class=DataLabel width=37%>Date of Referral</td>
    <td><input type=text size=12 name=ptmis058 id=ptmis058 tabindex=18
         onblur="checkDate(this,'ReferralDate')">
        <img notab src="../images/DateLookup.gif" class=Icon
        onclick="DateLookupFrame(UpdateForm.ptmis058);"></td></tr>
<tr><td class=DataLabel>Date of 1st Spec Consult</td>
    <td><input type=text size=12 name=ptmis059 id=ptmis059 tabindex=19
         onblur="checkDate(this,'SpecConDate')">
        <img notab src="../images/DateLookup.gif" class=Icon
         onclick="DateLookupFrame(UpdateForm.ptmis059);"></td></tr>
</table>
</span>

<span id=BabyAge style="display:none">
<table width=100% height=100% border=0 cellspacing=0 cellpadding=0>
<tr><td class=DataLabel width=37%>Admission Weight</td>
    <td><input type=text name=ptmis051 id=ptmis051 size=5 maxlength=4
         tabindex=20>grams</td></tr>
</table>
</span>

<span id=NewBorn style="display:none">
<table width=100% height=100% border=0 cellspacing=0 cellpadding=0>
<tr><td class=DataLabel width=37%>Gestation Period</td>
    <td><input type=text name=ptmis041 id=ptmis041 maxlength=3 size=4
         tabindex=21> weeks
    </td></tr>
</table>
</span>
</div>

<script type="text/javascript">
  
for (var i=0;i<document.UpdateForm.ptvis021.length;i++){
if (document.UpdateForm.ptvis021.options[i].value=="%PATWEB89.01.224.0"){
    document.UpdateForm.ptvis021.selectedIndex=i}};

if (!isWhitespace(document.getElementById('ibalv001').value)) {
  document.getElementById('ibalv001').className='readonly';
  document.getElementById('ibalv001').readOnly=true;
} 
</script>

<script type="text/javascript">

  var p = document.UpdateForm;

  var informGP = "%PATWEB89.01.225.0";      //ptvis022
  valInformGP2(document.UpdateForm.ptvis022,informGP,document.UpdateForm.ptcndigp.value);

  expward="%PATWEB89.01.158"
  for (var i =0 ; i < document.UpdateForm.ptmis068.length; i++) {
    if (document.UpdateForm.ptmis068.options[i].value==expward) {
       document.UpdateForm.ptmis068.selectedIndex=i } };
  
</script>

<span id=transferhd style="display:none">
<td class=DataLabel>Transfer Source</td>
</span>
<span id=transfersrc style="display:none">
<td><input type="text" size=7 maxlength=5 name=trnsfsrc id=trnsfsrc
      class=Mandatory
      title="Transfer Source" tabindex=2
      value="%PATWEB89.01.193.0"
      onchange="validateCode(9,UpdateForm.trnsfsrc,UpdateForm.trandesc);">
     <input type=text size=27 name=trandesc id=trandesc notab
      class=Readonly readonly value="%PATWEB89.01.193.1">
     <img src="../images/SearchIcon.gif" class=Icon
      onclick="TransferSourceFrame(UpdateForm.trnsfsrc,
                                   UpdateForm.trandesc)"></td>
</span>
<span id=transferblank style="display:none">
   <input type=hidden name=trnsfsrc id=trnsfsrc>
</span>

<span id="contracthd" style="display:none">
Contract Type
</span>

<span id="contracrhd" style="display:none">
Contract Role
</span>

<span id="contracihd" style="display:none">
 Contract Id
</span>

<span id="contracttype" style="display:none">
  <input type="text" name="ptasf001" id="ptasf001" size="2" maxlength="1"
   class="Mandatory"
   value="%PATWEB89.01.199.001" tabindex=22
   title="Contract Type" onblur="ContType(this);" />
  <img src="../images/SearchIcon.gif" class=Icon
   onclick="ContTypeAlert();" />
</span>

<span id="contractid" style="display:none">
<td><input type="text" size="7" maxlength="5" name="ptasf003" id="ptasf003"
     title="Contract Id" tabindex=27
     onblur="validateCode(9,UpdateForm.ptasf003,UpdateForm.d_ptasf003);">
    <input type="text" size="27" name="d_ptasf003" id="d_ptasf003" notab
     class="Readonly" readonly />
    <img src="../images/SearchIcon.gif" class=Icon
     onclick="TransferSourceFrame(UpdateForm.ptasf003,UpdateForm.d_ptasf003)">
    </td>
</span>

<span id="contractrole" style="display:none">
  <input type="text" name="ptasf002" id="ptasf002" size="2" maxlength="1"
   class="Mandatory"
   value="%PATWEB89.01.199.002" tabindex=28
   title="Contract Role" onblur="ContRole(this);" />
  <img src="../images/SearchIcon.gif" class=Icon
   onclick="ContRoleAlert();" />
</span>

<span id="blanklabel" style="display:none">&nbsp;</span>
