<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="kids">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/watweb01.js"></script>
<script type="text/javascript">
function ReturnToList(){
  if (document.UpdateForm.status.value!="6"){
    alert("Patient is not removed");
    return;
  }

  ans=confirm("Patient will be returned to the waiting list");
  if (ans) {
    document.UpdateForm.cancelrm.value="1"
    document.UpdateForm.submit();
  }
}

function chkDate(){
  if (!(ChkDateTime(UpdateForm.wattr006,null,UpdateForm.wattr009,null))) {
    alert("Removed date should not be before " + (DoLDescription));
    UpdateForm.wattr009.select();
    return false;
  }
  return true;
}

function frmSubmitt() {
  EnableRemovalReason();
  if(validateMandatory(UpdateForm)) {
    if(chkDate()) return true;
  }
  return false;
}

function EnableRemovalReason() {
  if(document.UpdateForm.status.value!="6") {
     UpdateForm.updfld05.disabled=false;
     UpdateForm.reasfc05.disabled=false;
     UpdateForm.reasfc05.value=UpdateForm.wattr010.value;
  } else {
    UpdateForm.updfld05.disabled=true;
    UpdateForm.reasfc05.value="";
    UpdateForm.reasfc05.disabled=true;
  }
}
function RemovalDate() {
  if(!checkDate(UpdateForm.wattr009,'Date')) {
    return;
  }
  AuditChangeReason();
}
function AuditChangeReason() {
  if(document.UpdateForm.status.value=="6" &&
    (UpdateForm.d_wattr009.value != UpdateForm.wattr009.value ||
     UpdateForm.d_wattr010.value != UpdateForm.wattr010.value.substr(0,3))) {
      document.getElementById('ReasonHeading').innerHTML=
      document.getElementById('ShowReasonHeading').innerHTML
      document.getElementById('ReasonField').innerHTML=
      document.getElementById('ShowReasonField').innerHTML
  } else {
    document.getElementById('ReasonHeading').innerHTML="";
    document.getElementById('ReasonField').innerHTML="";
  }
}
function UpdComments() {
  CASEKEYS=UpdateForm.casekeys.value.replace(/ /g,"+");
  LinkUrl="watweb01.pbl?reportno=20&template=001&casekeys="+CASEKEYS;
  Left=(document.body.clientWidth-860)/2;
  DFrameLink(LinkUrl,15,Left,850,400);
}
function label() {
  document.getElementById('Datelabel').innerHTML=DoLDescription;
  document.getElementById('wattr006').title=document.getElementById('Datelabel').innerHTML;
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);DisplayTrnSrc();label();">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
Remove Waiting List Entry 
</span>

<div id=PageBodySection style="overflow: auto;">

<form name=UpdateForm action="watweb01.pbl" method=post 
 onsubmit='return frmSubmitt();'>
<input type=hidden name=reportno value=2>
<input type=hidden name=template value=1>
<input type=hidden name=casekeys value="%WATWEB01.02.101">
<input type=hidden name=updttype value="D">
<input type=hidden name=cancelrm value=" ">
<input type=hidden name=status value="%WATWEB01.02.175">
<input type=hidden name=updfld05 value="05" disabled>
<input type=hidden name=reasfc05 value="" disabled>
<input type=hidden name=d_wattr009 value="%WATWEB01.02.112">
<input type=hidden name=d_wattr010 value="%WATWEB01.02.113.1">

<table border=0 width=90% cellspacing=0 align=center>
<tr valign=top><td class=DataLabel><div id=Datelabel></div></td>
    <td class=DataField colspan=3>
    <input type=text name=wattr006 size=12 readonly class=Readonly
     value="%WATWEB01.02.109">
    </td></tr>
<tr><td class=DataLabel>Procedure Code</td>
    <td class=DataLabel colspan=3>
    <input type=text size=12 name=wattr001 readonly class=Readonly
     value="%WATWEB01.02.103" title="Procedure Code">
    </td></tr>
<tr valign=top><td class=DataLabel>Procedure</td>
    <td class=DataField colspan=3>
    <input type=text name=wattr003 size=60 maxlength=60 readonly
     class=Readonly value="%WATWEB01.02.106" title=Procedure>
    </td></tr>

<tr><td class=DataLabel>Unit</td>
    <td class=DataField colspan=3>
    <input type=hidden name=wattr011 value="%WATWEB01.02.114.1">
    <input type=text size=60 maxlength=60  class=  name=wattr011 readonly  
     class=Readonly value="%WATWEB01.02.114.0">
    </td></tr>

<tr valign=top><td class=DataLabel>Consultant</td>
    <td class=DataField colspan=3>
    <input type=hidden name=wattr012 size=60 maxlength=60 
     value="%WATWEB01.02.115.003">
    <input type=text  size=60 maxlength=60 class=Readonly
       title="Consultant" value="%WATWEB01.02.115.002" readonly></td></tr>

<tr valign=top><td class=DataLabel>Reason/Diagnosis</td>
    <td class=DataField colspan=3>
    <input type=text name=wattr004 size=60 maxlength=60 readonly class=Readonly
     value="%WATWEB01.02.107" title="Reason/Diagnosis">
</td></tr>

<tr valign=top><td class=DataLabel>Date Removed</td>
    <td class=DataField>
    <input type=text name=wattr009 size=12   tabindex=1
     value="%WATWEB01.02.112"  onblur="RemovalDate();"
     class="Mandatory PastDate" title="Removal Date">
    <img src=../images/DateTimeStamp.gif class=Icon date=UpdateForm.wattr009
     time=null>
    <img src=../images/DateLookup.gif class=Icon date=UpdateForm.wattr009>
    </td>
    <td class=DataLabel><div id=ReasonHeading></div></td>
    <td class=DataField><div id=ReasonField></div></td>
    </tr>

<tr valign=top><td class=DataLabel>Removal Reason</td>
    <td class=DataField colspan=3>
    <select name=wattr010 class=Mandatory title="Removal Reason" tabindex=2
            onchange="DisplayTrnSrc();AuditChangeReason();">
    <option></option>
    %WATWEB01.02.113.2
    </select>
</td></tr>
<tr><td>
    <div id=TranSrcHeading></div>
    <td colspan=3><div id=TranSrc></div></td>
</td></tr>

<tr><td colspan=4>&nbsp;</td></tr>

<tr><td colspan=4 align=center>
    <input type=submit class="button" value="Ok" tabindex=5>
    <input type=button name="comments" class="button" value="Comments"
     id="commbutt" onclick="UpdComments();">
    <input type=button value="Cancel" class="button" 
       onclick='DFrameClose()' tabindex=6>
    <input type=button class="button" value="Return to WL" tabindex=7
       onclick='ReturnToList();'>
</td></tr>
</table>
</form>

<span id=transferhd style="display:none">
Transfer Source
</span>

<span id=transfersrc style="display:none">
  <input type="text" size=7 maxlength=5 name=trnsfsrc id=trnsfsrc 
   class=Mandatory title="Transfer Source" tabindex=3
   onchange="validateCode(9,trnsfsrc,trandesc);" value="%WATWEB01.02.183">
  <input type=text size=27 name=trandesc id=trandesc notab
   class=Readonly readonly value="%WATWEB01.02.184">
  <img src="../images/SearchIcon.gif" class=Icon
   onclick="TransferSourceFrame(trnsfsrc,trandesc)">
</span>

<span id=transferblank style="display:none">
  <input type=hidden name=trnsfsrc id=trnsfsrc>
</span>

<span id=ShowReasonHeading style="display:none">
Reason
</span>

<span id=ShowReasonField style="display:none">
  <input type=hidden name=updfld07 id=updfld07 value="07">
  <select name=reasfc07 id=reasfc07 class="Mandatory" title="Reason">
    <option></option>
    %STANDARD.01.007.FX
  </select>
</span>

<script type="text/javascript">
 CommentInd="%WATWEB01.02.617.001";
 if ( CommentInd == "1" ) {
    document.getElementById("commbutt").className="RedButton";
 }
</script>
