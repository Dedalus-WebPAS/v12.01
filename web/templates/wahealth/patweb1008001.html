<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="wahealth">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/TableSort.js"> </script>
<script type="text/javascript">
function currentAdmWarning() {
//alert(document.PatientLinks.currstat.value.substring(0,13));
  if (document.PatientLinks.emcnnwbr.value != "1") {
    if (document.PatientLinks.currstat.value.substring(0,13)=="Pre-Admission") {
      alert("Patient Not Admitted");
    }
  }
}
function AddRequest() {
  if(isWhitespace(PatientLinks.admissno.value)) {
    alert("Please select a visit before adding request details");
    return;
  }
  if(trim(PatientLinks.d_ptvitype.value)=="1" &&
     PatientLinks.d_emvistat.value!="1") {
    alert("Invalid Emergency visit status for adding bed requests");
    return;
  }
  if(trim(PatientLinks.d_ptvitype.value)=="3" &&
    (PatientLinks.d_inpastat.value=="3" || PatientLinks.d_inpastat.value=="5")){
    alert("Invalid Inpatient visit status for adding bed requests");
    return;
  }
  linkurl="patweb10.pbl?reportno=08&template=002" +
          "&urnumber=" + PatientLinks.urnumber.value.replace(/ /g,"+") +
          "&admissno=" + PatientLinks.admissno.value.replace(/ /g,"+");
  Left=(document.body.clientWidth-770)/2;
  DFrameLink(linkurl,50,Left,770,500);
}
function UpdateRequest(vis,dat,tim,ur) {
  linkurl="patweb10.pbl?reportno=08&template=003" +
          "&urnumber=" + ur.replace(/ /g,"+") +
          "&admissno=" + vis.replace(/ /g,"+") +
          "&pmbrq001=" + vis.replace(/ /g,"+") +
          "&pmbrq002=" + dat.replace(/ /g,"+") +
          "&pmbrq003=" + tim.replace(/ /g,"+");
  Left=(document.body.clientWidth-950)/2;
  DFrameLink(linkurl,50,Left,950,500);
}
function ViewNotes(vis,dat,tim,ur) {
  linkurl="patweb10.pbl?reportno=08&template=004" +
          "&urnumber=" + ur.replace(/ /g,"+") +
          "&admissno=" + vis.replace(/ /g,"+") +
          "&pmbrq001=" + vis.replace(/ /g,"+") +
          "&pmbrq002=" + dat.replace(/ /g,"+") +
          "&pmbrq003=" + tim.replace(/ /g,"+");
  Left=(document.body.clientWidth-750)/2;
  DFrameLink(linkurl,50,Left,750,200);
}
function CancelRequest(vis,dat,tim,ur) {
  linkurl="patweb10.pbl?reportno=08&template=005" +
          "&urnumber=" + ur.replace(/ /g,"+") +
          "&admissno=" + vis.replace(/ /g,"+") +
          "&pmbrq001=" + vis.replace(/ /g,"+") +
          "&pmbrq002=" + dat.replace(/ /g,"+") +
          "&pmbrq003=" + tim.replace(/ /g,"+");
  Left=(document.body.clientWidth-400)/2;
  DFrameLink(linkurl,50,Left,400,150);
}
//----------------------------------------------------------------------------
// Create New Table Object
// Border, Cellspacing, Cellpadding, Width, Align, Heading Height, Row Height
//----------------------------------------------------------------------------
// Add Columns in Order Required
// Heading,Type,Display Column,Sort Column, Align, Icon, Link Column
// Columns Available
//---------------------------------------------------------------------------
function InitTable(TableView) {
 switch (TableView) {
 case 0: {
   document.title="Ward/Bed Requests for Visit - " + 
                   document.PatientLinks.admissno.value
  t = new Table(1,0,2,"100%","center",45,45);
  t.addColumn("Request Date/Time","DateTime",1,1,"left","MaintenanceIcon.gif","0",80)
  t.addColumn("Type of Bed Required","String",6,6,"left","","",70)
  t.addColumn("Notes","ImageText","","","center","CommentIcon","16",35,15)
  t.addColumn("Admitting Dr/Unit/Team","String",19,19,"left","","",65)
  t.addColumn("Diagnosis","String",9,9,"left","","",65)
  t.addColumn("Allocated Date/Time","DateTime",13,13,"left","","",80)
  t.addColumn("Expected Ward/Bed","String",11,11,"left","","",65)
  t.addColumn("Status","String",7,7,"left","","",35)
  t.addColumn("Cancel","ImageText","","","center","MaintenanceIcon","17",25,12)
  AddTableRows();
  TableOutput(0,2);    // Order Column,Asc Dsc
  break; }
 }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);InitTable(0);currentAdmWarning();">
<div id=HeadingSection>
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB10.08.003";
PatientVIS="%PATWEB10.08.081";
PatientNAM="%PATWEB10.08.002";
PatientSTA="%PATWEB10.08.086.078";
PatientALT="%PATWEB10.08.084";
PatientSEX="%PATWEB10.08.019";
PatientDOB="%PATWEB10.08.020";
PatientAGE="%PATWEB10.08.021";
PatientLOC="%PATWEB10.08.083";
PatientPRI="%PATWEB10.08.086.066.1";
PatientUNT="%PATWEB10.08.066.0";
DoctorCOD="%PATWEB10.08.082.003";
DoctorNAM="%PATWEB10.08.082.002";
PatientAID="%PATWEB10.08.086.090";
PatientIND="%PATWEB10.08.086.091";
PatientCUR="%PATWEB10.08.086.092";
PatientCLC="%PATWEB10.08.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB10.08.086.094";
PatientCDM="%PATWEB10.08.086.095";
PatientVDH="%PATWEB10.08.086.099.015";
InsertPatientHeader();
</script>
<div id=PatientMenu></div>
<table width=100% cellspacing=0 cellpadding=0 bgcolor=#cccccc>
<tr>
<td align=right><input type=button class="button" value="Add Request"
 onclick="AddRequest();"> 
</td></tr>
</table>
</div>
<div id=TableLocation></div>
<script type="text/javascript">
function AddTableRows() {
%PATWEB10.08.138
}
</script>

<form name=PatientLinks method=get style="margin:0">
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=001>
<input type=hidden name=urnumber value="%PATWEB10.08.003">
<input type=hidden name=admissno value="%PATWEB10.08.081">
<input type=hidden name=MenuType value="%PATWEB10.08.088">
<input type=hidden name=currstat value="%PATWEB10.08.204">
<input type=hidden name=d_ptvitype value="%PATWEB10.08.315">
<input type=hidden name=d_emvistat value="%PATWEB10.08.316">
<input type=hidden name=d_inpastat value="%PATWEB10.08.317">
<input type=hidden name=emcnnwbr value="%PATWEB10.08.322">
</form>
