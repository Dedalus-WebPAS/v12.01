<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="wahealth">
<!-- $Id: patweb8904002.html 4223 2018-11-20 08:10:33Z  $ -->
<!-- $URL: http://lxfm700sub/svn/webpas/trunk/web/custom/patweb8904002.html $ -->
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/admission.js"></script>
<script type="text/javascript" src="../js/ReportStandard.js"></script>
<script type="text/javascript" src="../js/patweb89.js"></script>
<script type="text/javascript" src="../js/CustomMyhrConsent.js"></script>
<script type="text/javascript">
function SubmitAdm() {
  p=document.UpdateForm
  if  (!validateMandatory(UpdateForm)) {
      return;
  }

  dateDiff =  parseInt(SetDateYYYYMMDD(document.UpdateForm.ptmis001.value)) -
              parseInt(DemConDate);

  if (checkDemographicsUpdated(dateDiff,NoDayDemVl,ConfDemogs)){
    return;
  }

// validate responsible clinician
 if(!isWhitespace(p.ptmis007.value)){
 if(!ValidateHCPDateHospital(18,1,p.ptmis007,p.doctnam2,p.ptmis001,p.wbsehosp)){
    return;
  }
 }
// validate registrar
 if(!isWhitespace(p.ptvis062.value)){
 if(!ValidateHCPDateHospital(18,2,p.ptvis062,p.d_ptvis062,p.ptmis001,p.wbsehosp)){
    return;
  }
 }
// validate resident
 if(!isWhitespace(p.ptvis061.value)){
 if(!ValidateHCPDateHospital(18,2,p.ptvis061,p.d_ptvis061,p.ptmis001,p.wbsehosp)){
    return;
  }
 }
    if(isWhitespace(document.UpdateForm.ptmis020.value) &&
       isWhitespace(document.UpdateForm.ptvis075.value)){
       alert("Diagnosis is a required field.")
       return;
    }

    if(p.offdutyb!=undefined){
      if(p.offdutyb.checked==true){
        alert("Error: Claim Type invalid for 'Off Duty' personnel.")
        return;
      }
    }
    if(p.ptmis027.value.substr(3,1)=="P"&&p.dvacardc.value=="1"){
      if(!confirm("\t\tPublic patient with DVA details.\n" +
                  "Select Ok to continue," +
                  " select Cancel to return to page and change Claim " +
                  " Type.")){
        return;
      }
    }
    if(p.ptmis027.value.substr(14,2)=="21"&&p.pmifundh.value!==""){
     if(!confirm("Warning: Public patient with Private Health Fund details.\n" +
                  "Select Ok to continue admission," +
                  " select Cancel to return to current admission page" +
                  " to update Claim Type.")){
        return;
      }
    }
// Validate Cat.A/Cat.CC combination
    var serverURL = "../cgi-bin/comweb80.pbl?reportno=69" +
                    "&valdcode="+p.ptmis012.value.replace(/ /g,"+") +
                    "&valdcod2="+p.ptmis010.value.replace(/ /g,"+") +
                    "&valdcod3="+p.urnumber.value.replace(/ /g,"+") +
                    "&valddate="+p.ptmis001.value.replace(/ /g,"+")
    var returnValue = RSExecute(serverURL);
    if (returnValue.status!=0){
       return false;
    }
// Validate Cat.BT/Cat.CG combination (rehab ward)
    var serverURL = "../cgi-bin/comweb80.pbl?reportno=70" +
                    "&valdcode="+p.ptmis012.value.replace(/ /g,"+") +
                    "&valdcod2="+p.ptmis004.value.replace(/ /g,"+") +
                    "&valdcod3="+p.ptmis005.value.replace(/ /g,"+")
    var returnValue = RSExecute(serverURL);
    if (returnValue.status!=0){
       return false;
    }
// Validate Cat.KD/Age combination
    var serverURL = "../cgi-bin/comweb80.pbl?reportno=71" +
                    "&valdcode="+p.ptvis104.value.replace(/ /g,"+") +
                    "&valdcod2="+p.urnumber.value.replace(/ /g,"+") +
                    "&valddate="+p.ptmis001.value.replace(/ /g,"+")
    var returnValue = RSExecute(serverURL);
    if (returnValue.status!=0){
       return false;
    }
// Validate Category CL and Ambulatory Ward
    var serverURL = "../cgi-bin/comweb80.pbl?reportno=72" +
                    "&valdcode="+p.ptmis004.value.replace(/ /g,"+") +
                    "&valdcod2="+p.admissno.value.replace(/ /g,"+") +
                    "&valdcod3="+p.ptmis027.value.replace(/ /g,"+")
    var returnValue = RSExecute(serverURL);
    if (returnValue.status!=0){
       return false;
    }
// Validate transfer hospital / current hospital
    var serverURL = "../cgi-bin/comweb80.pbl?reportno=73" +
                    "&valdcode="+p.ptmis004.value.replace(/ /g,"+") +
                    "&valdcod2="+p.trnsfsrc.value.replace(/ /g,"+")
    var returnValue = RSExecute(serverURL);
    if (returnValue.status!=0){
       return false;
    }

 if((p.restatus.value.substr(5,1)=="S") || (p.restatus.value.substr(5,1)=="O")){
      if(!isWhitespace(p.ptmis027.value)){
       if (p.ptmis027.value.substr(32,1)!="1") {
        ind=p.ptmis027.value.substr(3,1)
        if(ind!="1"&&ind!="E"&&ind!="G"){
          alert("Claim Type must be overseas");
          return;
        }
       }
      }
    }


   if(document.UpdateForm.mvmedre1.checked == true) {
       document.UpdateForm.mvmedrec.value="1";
    } else {
       document.UpdateForm.mvmedrec.value="0";
   }
    ans="True";
    CheckAdmitDate();
    if (ans==false){
       return;
    }

    if(p.ptmis027.value.substr(3,1)=="P"&&p.dvacardc.value=="1"){
      if(!confirm("\t\tPublic patient with DVA details.\n" +
                  "Select Ok to continue," +
                  " select Cancel to return to page and change Claim " +
                  " Type.")){
        return;
      }
    }

  if(p.dispt001!=undefined){
    if (!isWhitespace(document.UpdateForm.dispt001.value)) {
       var serverURL = "../cgi-bin/comweb80.pbl?reportno=44" +
                    "&valdcode=" + UpdateForm.dispt001.value.replace(/ /g,"+") +
                    UpdateForm.ptmis001.value.replace(/ /g,"+");
       var returnValue = RSExecute(serverURL);
       if (returnValue.status!=0) {
         return;}
    }
  }

  setRedirectAdm();
  if(p.prevhosp.checked==true){
    document.UpdateForm.redirect.value="patweb07.pbl?reportno=15&template=001"
    if(document.UpdateForm.pmext049.value == "1") {
      document.UpdateForm.redirect.value+= "&mvithmva=1"+
      "&chckcomp="+document.UpdateForm.ptmis027.value.substr(3,1);
    }
    document.UpdateForm.redirect.value +=
    "&urnumber=" + document.UpdateForm.urnumber.value
    + "&mvmedrec=" + document.UpdateForm.mvmedrec.value + "&admissno=";
  }
  if(checkMultipleAdmission(UpdateForm)){
      return;
  }

  SubmitHidden(UpdateForm);
}
function valDoctorUnit() {
  validateCode(31,UpdateForm.ptmis007,UpdateForm.doctnam2);
  selectOptions4("45",UpdateForm.ptmis007,UpdateForm.dummy,UpdateForm.ptmis024);
  selectUnit();
  valDoctorUnitTeam();
}
function valDoctorUnitTeam() {
  selectOptions4("46",UpdateForm.ptmis007,UpdateForm.ptmis024,UpdateForm.ptvis124);
  selectTeam();
}
function selectUnit(){
  for (var i =0 ; i < document.UpdateForm.ptmis024.length; i++) {
    if (document.UpdateForm.ptmis024.options[i].value.substr(0,3)== 
                 document.UpdateForm.deftunit.value.substr(0,3)) {
       document.UpdateForm.ptmis024.selectedIndex=i } };
    if (isWhitespace(document.UpdateForm.deftunit)) {
      if (UpdateForm.ptmis024.length==2) {
        UpdateForm.ptmis024.selectedIndex=1; } }
}
function selectTeam(){
  for (var i =0 ; i < document.UpdateForm.ptvis124.length; i++) {
    if (document.UpdateForm.ptvis124.options[i].value.substr(0,5)== 
                 document.UpdateForm.deftteam.value.substr(0,5)) {
       document.UpdateForm.ptvis124.selectedIndex=i } };
    if (isWhitespace(document.UpdateForm.deftteam)) {
      if (UpdateForm.ptvis124.length==2) {
        UpdateForm.ptvis124.selectedIndex=1; } }
      if (UpdateForm.ptvis124.length>1) {
        UpdateForm.ptvis124.className = "Mandatory"; }
      else { UpdateForm.ptvis124.className = ""; }
}
function defaultDisasterCode() {
  if (!isWhitespace(document.UpdateForm.disacode.value)) {
    disastercodeDIV.innerHTML=disastercodeSPAN2.innerHTML;
  } else {
    disastercodeDIV.innerHTML=disastercodeSPAN1.innerHTML;
  }

  displayDisasterID();

}
function LoadWardBeds() {
  var p=document.UpdateForm;
  WardBedSelection(p.ptmis004,p.ptmis005,'A',p.d_ptmis005)
}
function CheckBabyWeight(theForm) {
  if(daysold <= theForm.ptcnbage.value) {
    BabyAge.style.display="";
    document.UpdateForm.ptmis051.className="Number";
    document.UpdateForm.ptmis051.min="1";
    document.UpdateForm.agebmand.value=1;
  }
}
function RemoveQuote(Field) {
    Field.value=Field.value.replace(/\"/g,"");
}
function CheckGPActive() {
  if(isWhitespace(document.UpdateForm.ptvis028.value)) {
    return;
  }
  ValidateHCP(18,0,document.UpdateForm.ptvis028,document.UpdateForm.genpname);
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);displayPrev();
              document.UpdateForm.ptmis001.focus();
              DisplayTransfer();showFundingSource();valDoctorUnit();
              DisContractWAhealth();defaultDisasterCode();
              LoadWardBeds();ShowAdmissionWeight(UpdateForm);
              CheckGPActive();">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%PATWEB89.04.003";
PatientVIS="%PATWEB89.04.081";
PatientNAM="%PATWEB89.04.002";
PatientSTA="%PATWEB89.04.086.078";
PatientALT="%PATWEB89.04.084";
PatientSEX="%PATWEB89.04.019";
PatientDOB="%PATWEB89.04.020";
PatientAGE="%PATWEB89.04.021";
PatientLOC="%PATWEB89.04.083";
PatientPRI="%PATWEB89.04.086.066.1";
PatientUNT="%PATWEB89.04.066.0";
DoctorCOD="%PATWEB89.04.082.003";
DoctorNAM="%PATWEB89.04.082.002";
PatientAID="%PATWEB89.04.086.090";
PatientIND="%PATWEB89.04.086.091";
PatientCUR="%PATWEB89.04.086.092";
PatientCLC="%PATWEB89.04.086.093.1";
PatientCLH="%STANDARD.01.017.CL";
PatientHFT="%PATWEB89.04.086.094";
PatientCDM="%PATWEB89.04.086.095";
PatientVDH="%PATWEB89.04.086.099.015";
ConfDemogs="%STANDARD.01.045.PTCNCDOA";
NoDayDemVl=trim("%STANDARD.01.045.PTCNNDCD");
DemConDate=SetDateYYYYMMDD("%PATWEB89.04.085.059");
InsertPatientHeader()
</script>
<div id=PatientMenu></div>

<div id=PageBodySection>
<form name=UpdateForm method=post  action=patweb89.pbl style="margin:0">
<input type=hidden name=reportno value="2">
<input type=hidden name=template value="1"> 
<input type="hidden" name="updatety" value="2">
<input type="hidden" name="allocate" value="1">
<input type="hidden" name="redirect" value="%PATWEB89.04.001.patweb98.01.001">
<input type=hidden name=urnumber value="%PATWEB89.04.003">
<input type=hidden name=admissno value="%PATWEB89.04.101">
<input type=hidden name=wbsehosp value="%STANDARD.01.032">
<input type="hidden" name="chckname" value="0">
<input type="hidden" name="emradmit" value="0">
<input type="hidden" name="emradmis" value="0">
<input type="hidden" name="newbmand" value="0">
<input type="hidden" name="agebmand" value="0">
<input type="hidden" name="admisflg" value="1">
<input type="hidden" name="ptmas046" value="">
<input type="hidden" name="mvmedrec">
<input type="hidden" name="exstward" value="%PATWEB89.04.195.1">
<input type="hidden" name="cfinan" value="%PATWEB89.04.932">
<input type="hidden" name=deftunit value="%PATWEB89.04.124.1">
<input type="hidden" name=deftteam value="%PATWEB89.04.298.046.1">
<input type=hidden name=ptcnwauc value="%STANDARD.01.025.103.245.0.1">
<input type="hidden" name=ptcnxcom value="%STANDARD.01.025.116.222.0.1">
<input type="hidden" name="mhadmflg">
<input type="hidden" name="leavhosp">
<input type="hidden" name="leavadmn">
<input type="hidden" name="leavtype">
<input type="hidden" name="contmult" value="1">
<input type="hidden" name="disacode" value="%PATWEB89.04.996">
<input type="hidden" name="disadesc" value="%PATWEB89.04.999.025">
<input type="hidden" name="dispprev" value="%PATWEB89.04.199.015">
<input type="hidden" name="dvacardc"   value="%PATWEB89.04.999.002">
<input type="hidden" name="restatus" value="%PATWEB89.04.024.3">
<input type="hidden" name="visatype"   value="%PATWEB89.04.999.003.007.3">
<input type="hidden" name="ptmis013" value="%PATWEB89.04.040.0">
<input type="hidden" name="ptmis014" value="%PATWEB89.04.041.0">
<input type="hidden" name="ptmis015" value="%PATWEB89.04.042">
<input type="hidden" name="pmsvx142" value="%PATWEB89.04.899.010">
<input type="hidden" name="ismrtmas" value="%PATWEB89.04.999.021">
<input type="hidden" name="pbdate"   value="%PATWEB89.04.020">
<input type="hidden" name="ptcnbage" value="%STANDARD.01.025.021.046.1.3">
<input type="hidden" name="pmifundh" value="%PATWEB89.04.040.0">
<input type="hidden" name="misatype" value="%PATWEB89.04.111.1">
<input type=hidden name=ptcnhdps id=ptcnhdps 
       value="%STANDARD.01.025.080.250.1.1">

<table border=0 colspan=1 width=100% cellspacing=1 cellpadding=1 >
<tr><td class=HeadingCell align=center>
    Patient Admission Details</td></tr>
</table>

<table border=0 width=100% cellpadding=0 cellspacing=0>
<tr><td class=DataLabel>Admission Date</td>
    <td class=DataLabel>
        <input type="text" size="12" tabindex=1
         name=ptmis001 id=ptmis001 value="%STANDARD.01.015"
         class=Mandatory title="Admission Date"
         onblur="checkDate(this,'Admission Date')">
        <img src=../images/DateLookup.gif class=Icon
         onclick="DateLookupFrame(ptmis001);"> 
        Time
        <input type=text name=ptmis002 id=ptmis002 tabindex=5 size=8
         value="%STANDARD.01.016" class=Mandatory title="Admission Time">
        <img src=../images/DateTimeStamp.gif class=Icon
         onclick="SetCurrentDateTime(null,ptmis002);">
        <img src=../images/TimeLookup.gif class=Icon
         onclick="TimeLookupFrame(ptmis002);"></td>
       <td>Admitting Point</td>
       <td><select name="ptvis046" tabindex=205 class="Mandatory"
            title='Admitting Point' onchange="defaultWard()">
           <option> </option>
            %PATWEB89.04.290.2
           </select></td></tr>

<tr><td class=DataLabel>%STANDARD.01.017.P </td>
    <td><select name=ptmis011 tabindex=10
         title="%STANDARD.01.017.P " class="Mandatory">
         <option> </option>
          %PATWEB89.04.112.2
        </select>
        <span id=BabyAge style="display:none">
         Admission Weight
         <input type=text name=ptmis051 size=5 maxlength=4
          value="%PATWEB89.04.186" notab
          title="Admission Weight" >grams
        </span>
       </td>
    <td class=DataLabel>Ward / Bed </td>
    <td><input type=hidden name=bedstat1 id=bedstat1>
        <input type=hidden name=warddesc id=warddesc>
        <input type=hidden name=d_ptmis005 id=d_ptmis005 
         value="%PATWEB89.04.194">
        <select name=ptmis004 id=ptmis004 tabindex=210 title="Ward" 
         class="Mandatory"
         onchange="LoadWardBeds();">
         <option> </option>
          %PATWEB89.04.195.2
        </select>
        <select name=ptmis005 id=ptmis005 title="Bed" notab>
        </select>
        <img src=../images/SearchIcon.gif class=Icon
         onclick="WardBedSearchFrame(ptmis004,warddesc,ptmis005,bedstat1,
                           LoadWardBeds);"></td></tr>

<tr><td class=DataLabel>%STANDARD.01.017.S </td>
    <td><select name=ptmis009 tabindex=15 onchange="DisplayTransfer();"
         class="Mandatory" title="%STANDARD.01.017.S ">
         <option> </option>
         %PATWEB89.04.110.2
        </select></td>
    <td class=DataLabel>%STANDARD.01.017.BP</td>
    <td><select name=ptvis093 tabindex=215 class=Mandatory
         title="%STANDARD.01.017.BP">
         <option> </option>
          %PATWEB89.04.298.012.2
        </select></td></tr>

<tr id="transferxx" style="display:none">
    <td class=DataLabel>Transfer Source</td>
    <td><input type="text" size=7 maxlength=5 name=trnsfsrc id=trnsfsrc
         title="Transfer Source" tabindex=5
         value="%PATWEB89.04.193.0"
         onchange="validateCode(9,trnsfsrc,trandesc);">
        <input type=text size=27 name=trandesc id=trandesc notab
         class=Readonly readonly value="%PATWEB89.04.193.1">
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="TransferSourceFrame(trnsfsrc,trandesc)"></td></tr>

<tr><td class=DataLabel>Referring Clinician</td>
    <td><input type="text" size=10 maxlength=10 name=ptvis028 tabindex=20
         value="%PATWEB89.04.231.1" id=ptvis028
         onchange="ReadDoc(18,0,ptvis028,genpname,ptvis029,genpprac,ptvis030,
                          genpprov);">
        <input type=text size=25 notab readonly name=genpname id=genpname
         value="%PATWEB89.04.231.0">
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="GPHCPSearchFrame(ptvis028,genpname,genpprov,ptvis029,
                          genpprac,ptvis030,0)">
        <img src="../images/erase.gif" class=Icon 
         onclick="clrFields(ptvis028,genpname);"></td>
    <td class=DataLabel>Post Op Ward</td>
    <td><input type=hidden name=popwdesc>
        <input type=hidden name=popbstat>
        <input type=hidden name=dummy>
        <select name=ptvis048 tabindex=220>
          <option></option>
          %PATWEB89.04.251.2
        </select></td></tr>

<tr><td class=DataLabel>Practice</td>
    <td><input type=text name=genpprac id=genpprac size=15 readonly
         value="%PATWEB89.04.232.0" notab>
        <input type=hidden name=ptvis029 id=ptvis029 value="%PATWEB89.04.232.1">
        <input type=hidden name=ptvis030 id=ptvis030 value="%PATWEB89.04.233.1">
        <input type=hidden name=genpprov id=genpprov value="">
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="GPHCGSearchFrame(ptvis028,genpname,genpprov,ptvis029,
                           genpprac,ptvis030)">
        <img src="../images/erase.gif" class=Icon
         onclick="clrFields(ptvis029,genpprac,ptvis030,genpprov);"></td>
    <td class=DataLabel>%STANDARD.01.035.cw</td>
         <td><select name=ptvis125 title="%STANDARD.01.017.cw"
              tabindex=225 class=Mandatory>
              <option> </option>
               %PATWEB89.04.298.047.9.2
             </select></td></tr>

<tr><td class=DataLabel>%STANDARD.01.017.SI</td>
    <td><select name=ptvis103 tabindex=30
         title="%STANDARD.01.017.SI">
         <option></option>
          %PATWEB89.04.298.025.2
         </select></td>
    <td align=left>Hospital Last 7 Days</td>
    <td><table>
        <td align=left>
        <input type="checkbox" name="prevhosp" value="1" tabindex=235></td>
        <td id="prevhospxx" style="display:none" class=DataLabel>
           Original Adm Date 
           %PATWEB89.04.199.016
           No of days Hospitalisation
           %PATWEB89.04.199.015
        </td>
        </table></td></tr>

<tr><td class=DataLabel>Responsible Clinician</td>
    <td><input type="text" size=8 maxlength=6 name=ptmis007 tabindex=40
         value="%PATWEB89.04.108.003" class=Mandatory id=ptmis007
         title="Responsible Clinician"
         onchange="UpCase(this);valDoctorUnit();">
         <input type=text readonly size=25 name=doctnam2 id=doctnam2
          value="%PATWEB89.04.108.002">
         <img src="../images/SearchIcon.gif" class=Icon
          onclick="DoctorSearchFrame(ptmis007,doctnam2,valDoctorUnit)"></td>
    <td class=DataLabel>%STANDARD.01.035.KP</td>
    <td><select name=ptvis095 tabindex=237 class=Mandatory
         title="%STANDARD.01.035.KP">
         <option></option>
          %PATWEB89.04.298.017.9.5
         </select></td></tr>

<tr><td class=DataLabel>%STANDARD.01.017.AC</td>
    <td><select name=ptmis024 tabindex=45 class="Mandatory"
         title="%STANDARD.01.017.AC" onchange="valDoctorUnitTeam();">
         <option></option>
          %PATWEB89.04.124.2
        </select></td>
    <td class=DataLabel>%STANDARD.01.017.KD</td>
    <td><select name=ptvis104 tabindex=240 class="Mandatory "
         title="%STANDARD.01.017.KD">
         <option></option>
          %PATWEB89.04.298.026.2
         </select></td></tr>

<tr><td class=DataLabel>Team</td>
    <td><select name=ptvis124 tabindex=50 
         title="Team">
         <option> </option>
          %PATWEB89.04.298.046.2
        </select></td>
    <td class=DataLabel>Diagnosis(text)</td>
    <td><input type=text name="ptmis020" size=50 maxlength=80 tabindex=245
         value="%PATWEB89.04.121"></td></tr>

<tr><td class=DataLabel>Registrar</td>
    <td><input type=hidden name=ptvis062 id=ptvis062 value="%PATWEB89.04.265.1">
        <input type=text size=20 maxlength=30 name=d_ptvis062 id=d_ptvis062
         value="%PATWEB89.04.265.0" readonly notab>
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="HCPSearchFrame(ptvis062,d_ptvis062,8);">
        <img src="../images/erase.gif" class=Icon
         onclick="clrFields(ptvis062,d_ptvis062);"></td>
    <td class=DataLabel>Diagnosis(ICD)</td>
    <td><input type=text name=ptvis075 title="ICD Code" size=10 tabindex=250
         title="ICD Code" value='%PATWEB89.04.291' id=ptvis075
         onblur="validateCode(6,UpdateForm.ptvis075,UpdateForm.drgdesc1);">
        <input type=text size=30 name=drgdesc1 title="ICD Description"
         value="" readonly id=drgdesc1>
        <img src=../images/SearchIcon.gif class=Icon alt="Disease Search"
         onclick="Icd10DisSearchFrame(UpdateForm.ptvis075,UpdateForm.drgdesc1,
                       UpdateForm.drgdesc2);"></td></tr>

<tr><td class=DataLabel>Resident</td>
    <td><input type=hidden name=ptvis061 id=ptvis061 value="%PATWEB89.04.264.1">
        <input type=text size=20 maxlength=30 name=d_ptvis061 id=d_ptvis061
         value="%PATWEB89.04.264.0" readonly notab>
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="HCPSearchFrame(ptvis061,d_ptvis061,8);">
        <img src="../images/erase.gif" class=Icon
         onclick="clrFields(ptvis061,d_ptvis061);"></td>
    <td class=DataLabel>Principal Procedure </td>
    <td class=DataField>
        <input type="text" size="50" maxlength="50" notab
         readonly class=readonly value="%PATWEB89.04.999.029"
         onblur="RemoveQuote(this);"/></td></tr>

<tr><td class=DataLabel>%STANDARD.01.017.CC</td>
    <td><select name=ptmis012 tabindex=70 class="Mandatory" 
         title="%STANDARD.01.017.CC" onchange="checkUnq();">
         <option></option>
          %PATWEB89.04.113.2
        </select></td>
    <td class="DataLabel">Additional Procedures</td>
    <td class="DataField">
        <input type="text" size="50" maxlength="50" notab
         readonly class=readonly value="%PATWEB89.04.999.030"
         onblur="RemoveQuote(this);"/></td></tr>

<tr align=left>
    <td class=DataLabel>%STANDARD.01.017.A </td>
    <td><select name=ptmis010 tabindex=75 class="Mandatory"
         title="%STANDARD.01.017.A "
         onchange="DisContractWAhealth();">
         <option> </option>
         %PATWEB89.04.111.2
        </select></td>
    <td class="DataLabel"></td>
    <td class="DataField">
      <input type="text" size="50" maxlength="50" notab
        readOnly class=readonly value="%PATWEB89.04.999.031"
        onblur="RemoveQuote(this);"/></td></tr>

<tr id="contractxx" style="display:none">
    <td>Contract ID</td>
    <td><input type="text" size=7 maxlength=5 name=ptasf003 id=ptasf003
         value="%PATWEB89.04.199.003.1" title="Contract ID"
         tabindex=75 onblur="validateCode(9,ptasf003,d_ptasf003);">
        <input type=text size=27 name=d_ptasf003 id=d_ptasf003 notab
         value="%PATWEB89.04.199.003.2"
         class=Readonly readonly>
         <img src="../images/SearchIcon.gif" class=Icon
          onclick="TransferSourceFrame(ptasf003,d_ptasf003)"></td>
    <td></td>
    <td></td></tr>

<tr align=left>
    <td class=DataLabel>%STANDARD.01.017.CL</td>
    <td><table cellspacing=0 cellpadding=0>
        <tr><td align=left>
               <select name=ptmis027 tabindex=80 class="Mandatory"
                title="%STANDARD.01.017.CL" onchange="showFundingSource();">
                <option> </option>
                 %PATWEB89.04.126.2
               </select></td>
            <td><div id=FundingHeading></div></td>
            <td><div id=FundingId></div></td></tr>
        </table></td>
    <td class=DataLabel>%STANDARD.01.017.VI</td>
    <td><select name=ptvis043 tabindex=255 class="Mandatory"
         title="%STANDARD.01.017.VI">
         <option> </option>
          %PATWEB89.04.246.2
        </select></td></tr>

<tr align=left>
  <td class=DataLabel>Has this patient been in a Motor Vehicle Accident?</td>
  <td>
    <select class="Mandatory" name=pmext049 tabindex=1
     title="Has the patient been in a Motor Vehicle Accident?">
      %PATWEB89.04.999.125.099.050
    </select>
  </td>
</tr>

<tr><td align=left>Move Medical Record</td>
    <td align=left>
        <input type="checkbox" name="mvmedre1" value="1" tabindex=380></td>
    <td class=DataLabel> Planned Length of Stay</td>
    <td><input type=text size=5 maxlength=5 name=ptmis030
        tabindex=265 title='Expected Length of Stay' min=0
        class=Integer onblur="checkInteger(this,this.value);"
        value="%PATWEB89.04.129" ></td></tr>

<tr><td class=DataLabel></td>
    <td></td>
    <td class=DataLabel>Inform GP</td>
    <td><select name=ptvis022 tabindex=270 title="Inform GP" class="Mandatory">
         <option value=" "></option>
         <option value="0">No</option>
         <option value="1">Yes</option>
         <option value="2">Unknown</option>
        </select></td></tr>

<tr><td class=DataLabel></td>
    <td></td>
    <td class=DataLabel>Consent upload visit to My Health Record?</td>
    <td><select name=ptmis037 tabindex=271 title="Upload to MyHR?">
         <option></option>
          %PATWEB89.04.133.2
        </select>&nbsp;(<a href="javascript:patientMyhrConsentForm();">form</a>)
    </td></tr>

<tr><td class=DataLabel></td>
    <td></td>
    <td class=DataLabel>Mailing List</td>
    <td><select name=ptmis072 tabindex=275>
         <option value="2"></option>
         <option value="0">No</option>
         <option value="1">Yes</option>
        </select></td></tr>

<tr><td class=DataLabel></td>
    <td></td>
    <td>Disaster Code</td>
    <td><div id=disastercodeDIV></div></td></tr>

<tr><td></td>
    <td></td>
    <td class=DataLabel><div id=disasteridnumbertitleDIV></div></td>
    <td><div id=disasteridnumberDIV></div></td></tr>

<tr><td><table border=0 width=100% class=TableBody cellpadding=0
         cellspacing=0>
        <tr><td class=DataLabel> Admission Comments </td></tr>
        <tr><td colspan=6 align=left>
                <input type=button value="Add" class="button" tabindex=400
                  name="AddComm" id="AddComm"
                  onclick="tempDisable(this);AddComment();"></td></tr>
        <tr><td>&nbsp;</td></tr>
        <tr><td>&nbsp;</td></tr>
        </table></td>
        <td colspan=6 align=left>
            <textarea wrap=hard name=adcommna class=Readonly readonly
             rows=4 cols=70>%PATWEB89.04.199.021.005</textarea></td></tr>

<tr align=left>
    <td colspan=4 align=center><br>
        <input type=button value="Admit" class="button" tabindex=410
         id="pat89sub"
         onclick="tempDisable(this);checkBedStatus(UpdateForm.ptmis004.value,
              UpdateForm.ptmis005.value,UpdateForm.ptmis001.value,
              UpdateForm.ptmis030.value,UpdateForm.ptmis002.value,SubmitAdm);">
        <input type=button value="Cancel" class="button" tabindex=420
         onclick="PatientLinkTo('patweb98.pbl',1,1,0);"></td></tr>
</table>
</form>

<form name=linkForm action=patweb89.pbl method=POST>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=1>
<input type=hidden name=urnumber value="%PATWEB89.04.003">
<input type=hidden name=admissno value="%PATWEB89.04.101">
</form>

<div id=SelectHeading></div>
<div id=SelectLocation></div>
</div>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%PATWEB89.04.003">
<input type=hidden name=admissno value="%PATWEB89.04.081">
<input type=hidden name=MenuType value="%PATWEB89.04.088">
<input type=hidden name=ptmis027 value="%PATWEB89.04.126.0">
<input type=hidden name=admisflg value="1">
</form>

<span id=WaitingList style="display:none">
<table width=100% height=100% border=0 cellspacing=0 cellpadding=0>
<tr><td class=DataLabel width=37%>Date of Referral</td>
    <td><input type=text size=12 name=ptmis058 id=ptmis058 tabindex=-1
         onblur="checkDate(this,'ReferralDate')">
        <img notab src=../images/DateLookup.gif class=Icon
          align=absmiddle onclick="DateLookupFrame(ptmis058);"></td></tr>
<tr><td class=DataLabel>Date of 1st Spec Consult</td>
    <td><input type=text size=12 name=ptmis059 id=ptmis059 tabindex=-1
         onblur="checkDate(this,'SpecConDate')">
        <img notab src=../images/DateLookup.gif class=Icon
         onclick="DateLookupFrame(ptmis059);"></td></tr>
</table>
</span>

<span id=NewBorn style="display:none">
<table width=100% height=100% border=0 cellspacing=0 cellpadding=0>
<tr><td class=DataLabel width=37%>Gestation Period</td>
    <td><input type=text name=ptmis041 maxlength=3 size=4 tabindex=-1> weeks
    </td></tr>
</table>
</span>

<script type="text/javascript">
f=document.UpdateForm;

if (document.UpdateForm.ismrtmas.value!="1"){
  document.UpdateForm.mvmedre1.disabled=true;
}

currhosp=trim("%PATWEB89.04.999.017")
curradmn="%PATWEB89.04.999.018"
if ("%PATWEB89.04.905" == "1") {
alert("Patient Currently admitted at "+currhosp+" under Admission - "+curradmn);
}

for (var i =0 ; i < document.UpdateForm.ptvis022.length; i++) {
  if (document.UpdateForm.ptvis022.options[i].value=="%PATWEB89.04.225.0") {
    document.UpdateForm.ptvis022.selectedIndex=i } };

if (!isWhitespace(document.UpdateForm.ptvis075.value)){
  validateCode(6,UpdateForm.ptvis075,UpdateForm.drgdesc1)
}
for (var i =0 ; i < document.UpdateForm.ptmis072.length; i++) {
  if (document.UpdateForm.ptmis072.options[i].value=="%PATWEB89.04.162") {
    document.UpdateForm.ptmis072.selectedIndex=i } };

checkUnq();
if (!isWhitespace(f.misatype.value)){
  for (var i =0 ; i < f.ptmis010.length; i++) {
    atype = f.ptmis010.options[i].value.substring(0,3);
    if (atype==f.misatype.value) {
      f.ptmis010.selectedIndex=i
    }
  }
}

var codeList = document.UpdateForm.ptmis027.options;
for (var i = 0; i < codeList.length; i++) {
  if (isWhitespace(codeList[i].value)) continue;
  var codeSingle = codeList[i].value.substr(3, 5);
  if (codeSingle.match(/M/g) != null) {
    document.UpdateForm.ptmis027.options[i].remove(i);
    i--;
  }
}

</script>

<span id=transferhd style="display:none">
<td class=DataLabel>Transfer Source</td>
</tr>
</span>

<span id=transfersrc style="display:none">
 <td><input type="text" size=7 maxlength=5 name=trnsfsrc id=trnsfsrc
      class=Mandatory title="Transfer Source" tabindex=-1
      value="%PATWEB89.04.193.0"
      onchange="validateCode(9,trnsfsrc,trandesc);">
     <input type=text size=27 name=trandesc id=trandesc notab
      class=Readonly readonly value="%PATWEB89.04.193.1">
     <img src="../images/SearchIcon.gif" class=Icon
      onclick="TransferSourceFrame(trnsfsrc,trandesc)"></td>
</tr>
</span>

<span id=transferblank style="display:none">
   <input type=hidden name=trnsfsrc id=trnsfsrc>
</span>

<span id=blanklabel style="display:none">&nbsp;</span>

<span id=disasteridnumbertitleSPAN style="display:none">
Disaster Identification #
</span>

<span id=disasteridnumberSPAN style="display:none">
<input type="text" name=dispt002 size=20 maxlength=19
   tabindex=-1 title="Disaster Identification Number">
</span>

<span id=fundinghd style="display:none">
Funding Source
</span>

<span id=fundingid style="display:none">
  <select name=ptvis131 title="%STANDARD.01.017.cx"
          tabindex=-1>
          <option> </option>
             %PATWEB89.04.298.053.5
         </select>
</span>
<span id=offdutyhd style="display:none">
 Off Duty
</span>

<span id=offdutyid style="display:none">
 <input type="checkbox" name="offdutyb" value="0">
</span>

<span id=disastercodeSPAN1 style="display:none">
<select name=dispt001 tabindex=280 title="Disaster Code"
          onchange="displayDisasterID();">
         <option></option>
          %PATWEB89.04.995
        </select>
</span>

<span id=disastercodeSPAN2 style="display:none">
<input type="text" name=n_dispt001 size=30 class=Readonly readonly
  title="Disaster Code" value="%PATWEB89.04.999.025">
<input type=hidden name=dispt001 value="%PATWEB89.04.996">
</span>

