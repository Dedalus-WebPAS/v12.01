<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="wahealth">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
function setReportable() {
 document.getElementById('reportable').checked=false;
 if(!isWhitespace(document.getElementById('wprhat').value)){
    if(trim(document.getElementById('wprhat').value)!='0'){
      document.getElementById('reportable').checked=true;
   }
 }
}

function UpdateDetails() {
  if (validateMandatory(UpdateForm)) {

   if (trim(document.UpdateForm.orgpproc.value)==trim(document.UpdateForm.newprocc.value)) {
   document.UpdateForm.submit();
   return;
  }

     if(valProcSubmit()){
    var serverURL = "../cgi-bin/watweb01.pbl?reportno=12&valdtype=1" +
                   "&urnumber="+document.PatientLinks.urnumber.value.replace(/ /g,"+") +
                   "&proccode="+document.UpdateForm.newprocc.value.replace(/ /g,"+");
    var returnValue = RSExecute(serverURL);
    if (returnValue.return_value == -1) {
     if (!confirm("Waiting list entry already exists.\nOK will create a duplicate.")) {
       return false; 
      } 
    }
    document.UpdateForm.submit();
   }
  }
}
function valProc() {
   validateCode(27,UpdateForm.newprocc,UpdateForm.wattr003,AddForm.wpgrp,UpdateForm.dummy,UpdateForm.dummy,UpdateForm.wprhat)
   setReportable();
}
function valProcSubmit() {
   validateCode(27,UpdateForm.newprocc,UpdateForm.wattr003,AddForm.wpgrp)
   return true;
}
function chkMandField() {
   if (trim(document.UpdateForm.orgpproc.value)==trim(document.UpdateForm.newprocc.value)) {
      UpdateForm.reasonfc.className=""; 
   } else {
      UpdateForm.reasonfc.className="Mandatory";
   }
}
</script>
</head>
%START.OF.PAGE
<body onload=PageLoad(event);setReportable();>
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
Change Waiting List Procedure Code
</span>
<table border=0 width=90% cellspacing=0 align=center>
<form name=UpdateForm action="watweb01.pbl" method=post 
 onsubmit='return validateMandatory(this);'>
<input type=hidden name=reportno value=2>
<input type=hidden name=template value=20>
<input type=hidden name=casekeys value="%WATWEB01.02.101">
<input type=hidden name=updttype value="P">
<input type=hidden name=nextpage value="8">
<input type=hidden name=dummy >
<input type=hidden name=orgpproc value="%WATWEB01.02.103">

<tr><td class=DataLabel>Principal Procedure</td>
    <td class=DataLabel>
    <input type=text size=12 name=newprocc value="%WATWEB01.02.103"
     title="Procedure Code" class=Mandatory onblur="valProc();chkMandField();">
    <input type=text name=wattr003 size=40 maxlength=50
     value="%WATWEB01.02.106">
    <img src=../images/SearchIcon.gif class=Icon
     onclick="WaitProKeywordSearch(UpdateForm.newprocc,
                                 UpdateForm.wattr003,
                                 UpdateForm.dummy,
                                 UpdateForm.dummy,
                                 UpdateForm.wprhat)">
    <input type="hidden" id="wprhat" name="wprhat" value="%WATWEB01.02.346">
    <input type="checkbox" id="reportable" name="reportable" disabled>

    </td></tr>

<tr><td class=DataLabel>Procedure Description Comments </td>
    <td class=DataField>
    <input type=text name=wattr058 size=60 maxlength=80 
    value="%WATWEB01.02.199.003" onblur="RemoveQuote(this);">
    </td>
</tr>

<tr><td class=DataLabel>Reason for Change</td>
    <td class=DataLabel>
    <select name=reasonfc title="Reason for Change" >
    <option></option>
    %WATWEB01.02.327.2
    </select>
    </td></tr>

<tr><td colspan=2 align=center>
    <input type=button class="button" value="Ok" onclick="UpdateDetails();">
    <input type=button value="Cancel" class="button" onClick='DFrameExit()'>
    </td></tr>
</form>
</table>

<form name=AddForm method=get>
<input type=hidden name=wattr001 value="%WATWEB01.02.103.0">
<input type=hidden name=wattr011 value="%WATWEB01.02.114.1">
<input type=hidden name=dummy1 value="">
<input type=hidden name=wpgrp value="">
</form>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%WATWEB01.02.003">
<input type=hidden name=admissno value="%WATWEB01.02.081">
<input type=hidden name=MenuType value="%WATWEB01.02.088">
<input type=hidden name=casekeys value="%WATWEB01.02.101">
<input type=hidden name=wattrkey value="%WATWEB01.02.101">
<input type=hidden name=nextpage value="8">
<input type=hidden name=sesskeys value="">
</form>
