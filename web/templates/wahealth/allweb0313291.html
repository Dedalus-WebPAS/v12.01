<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="wahealth">
<meta name="HelpFileName"    content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src=../js/allweb03.js>  </script>
<script type="text/javascript">
function PackComments(){
AddForm.alenc107.value=AddForm.comments.value.substring(0,80);
AddForm.alenc108.value=AddForm.comments.value.substring(80,160);
}
function GetBookings() {
  if(!isWhitespace(AddForm.bulkenck.value)) {
    p=parent
    if(p.UpdateStatus==undefined) {
      p=parent.parent
    }
    Appointments.innerHTML+="<input type=hidden name=bulkekey" +
                            " value='" + AddForm.bulkenck.value + "'>"
    if(!isWhitespace(p.UpdateStatus.xocadoct.value)) {
      document.AddForm.alenc004.value=p.UpdateStatus.xocadoct.value;
    }
    GetEncDefaults(AddForm.bulkenck.value.substr(0,8),AddForm.bulkenck.value.substr(8,8))
    document.AddForm.alenc017.value=document.AddForm.alenc005.value;
    document.AddForm.alenc018.value=document.AddForm.alenc006.value;
    document.AddForm.AddButton.disabled=false;
    return;
  }
  Flag=0
  Appointments.innerHTML="";
  for (var e = 0; e < parent.UpdateForm.elements.length; e++) {
    var el=parent.UpdateForm.elements[e] ;
    if(el.name.match(/referral/) && el.checked==true) {
    Appointments.innerHTML+="<input type=hidden name=bulkekey" +
                            " value='" + el.value + "'>"
    }
  }
  document.AddForm.alenc011.value=parent.UpdateForm.othedurn.value;
  document.AddForm.d_alenc011.value=parent.UpdateForm.othedurn.value;
  Edate=parent.SelectPeriod.sesskeys.options[parent.SelectPeriod.sesskeys.selectedIndex].text;
  document.AddForm.alenc005.value=Edate.substr(4,11)
  if(!isWhitespace(parent.SelectPeriod.xocadoct.value)) {
     document.AddForm.alenc004.value=parent.SelectPeriod.xocadoct.value;
  }
  document.AddForm.AddButton.disabled=false;
}
function clickAddButton() {
  if(!validateContactTime()) { return; }
  if(!checkFutureContactTime()) { return; }
  getCheckInTimeCookie();
  getTimeSeenCookie();
  getDepartureTimeCookie();
  SubmitHidden(AddForm);
}
function DisplayWarning(){
  if(AddForm.alenc126.value.substr(3,1)=="W"){
     alert("Warning: This code is only to be used \n"
           +"when the patient or carer is not present.");
  }
}
</script>
</head>

%START.OF.PAGE
<body onload="PageLoad(event);GetBookings();">
<span class=DFrameTitleBar>
<img border=0 align=right src=../images/ExitIcon.gif onclick=DFrameExitRefresh()>
Add Contact for %ALLWEB03.13.017 %ALLWEB03.13.216 %ALLWEB03.13.217
</span>

<form name=AddForm action="allweb03.pbl" method=post>
<input type=hidden name=reportno value=13>
<input type=hidden name=deptcode value="%ALLWEB03.13.012">
<input type=hidden name=updatety value="A">
<input type=hidden name=flag value="%ALLWEB03.13.023">
<input type=hidden name=alenc107 value="">
<input type=hidden name=alenc108 value="">
<input type=hidden name=bulkenck value="%ALLWEB03.13.030">
<input type=hidden name=billablef value='%ALLWEB03.13.031'>
<input type=hidden name=dummyret value="">
<input type=hidden name=dummysit value="">
<input type=hidden name=dummydat value="">
<input type=hidden name=dummy1>
<input type=hidden name=mbs value="M">
<input type=hidden name=alenc011 value="">
<input type=hidden name=d_alenc011 value="">
<input type=hidden name=urnockie value="">
<input type=hidden name=admnckie value="">
<input type=hidden name=rwnockie value="">
<input type=hidden name=clnockie value="">
<input type=hidden name=caseckie value="">
<input type=hidden name=d_otbbcitm value="%ALLWEB03.13.038">
<input type=hidden name=currdate value="">
<input type=hidden name=currtime value="">
<input type=hidden name=deptlcod id=deptlcod value="%ALLWEB03.13.201.3">

<table align=center cellspacing=0 cellpadding=1 border=0 width=95%>
<tr><td>
<div id=Appointments></div>
</td></tr>

<tr><td class=DataLabel width=15%>Department</td>
<td><input type=text readonly size=40 name=dept class="ReadOnly" 
     value="%ALLWEB03.13.017">
        </td></tr>

<tr><td class=DataLabel>Examining Clinician</td>
    <td class=DataLabel>
    <input type=text name=alenc004 size=10 maxlength=10 class=Mandatory
     onblur="ValidateHCP(18,13,AddForm.alenc004,AddForm.SProvider);"
     title="Examining Clinician">
    <input type=text name=SProvider size=25 class=Readonly readonly
      title="Examining Clinician">
    <img src=../images/SearchIcon.gif class=Icon
     onclick="HCPSearchFrame(AddForm.alenc004,AddForm.SProvider,4);" >
    <img src="../images/ClearIcon.gif" class=Icon
     onclick="clrFields(AddForm.alenc004,AddForm.SProvider);">
    </td></tr>

<tr><td class=DataLabel>Arrival Date</td>
    <td class=DataLabel>
    <input type=text readonly name=alenc017 value=""
     title="Contact Date" class="ReadOnly" Size=12
     onblur="checkDate(this,'Date');">
     Time
    <input type=text size=8 title="Time" value="" class="Mandatory"
     Name=alenc018>

    <img notab src=../images/DateTimeStamp.gif class="Icon"
         onclick="SetCurrentDateTime(null,AddForm.alenc018);">
    <img src="../images/TimeLookup.gif" class=Icon
     onclick="TimeLookupFrame(AddForm.alenc018);">
   </td></tr>

<tr><td class=DataLabel>Seen Date</td>
    <td class=DataLabel>
    <input type=text readonly name=alenc005 value="" 
     title="Contact Date" class="ReadOnly" Size=12
     onblur="checkDate(this,'Date');">
     Time
    <input type=text size=8 title="Time" value="" class="Mandatory"
     Name=alenc006>

    <img notab src=../images/DateTimeStamp.gif class="Icon"
         onclick="SetCurrentDateTime(null,AddForm.alenc006);">
    <img src="../images/TimeLookup.gif" class=Icon 
     onclick="TimeLookupFrame(AddForm.alenc006);">
   </td></tr>

<tr><td class=DataLabel>Presenting Complaint</td>
    <td colspan=3>
    <input type=text name=alenc044 size=52 maxlength=50
     title="Presenting Complaint">
    <td></tr>

<tr><td class=DataLabel>Diagnosis 1</td>
    <td><select name=alenc029 class="Mandatory selectBig"
         title="Diagnosis 1">
        <option></option>
         %ALLWEB03.13.129.2
        </select></td></tr>

<tr><td class=DataLabel>Diagnosis 2</td>
    <td><select name=alenc030 class=selectBig
         title="Diagnosis 2">
        <option></option>
         %ALLWEB03.13.130.2
        </select></td></tr>

<tr><td class=DataLabel>Diagnosis 3</td>
    <td><select name=alenc031 class=selectBig
         title="Diagnosis 1">
        <option></option>
         %ALLWEB03.13.131.2
        </select></td></tr>

<tr><td class=DataLabel>Location</td>
    <td><select name=alenc007 class=selectBig
         title="Location">
        <option></option>
         %ALLWEB03.13.107.2
        </select></td>
    <td class=DataLabel>%STANDARD.01.017.CL</td>
    <td><select class="Mandatory SelectBig"
         name=alenc115  title="%STANDARD.01.017.CL">
     <option></option>
     %ALLWEB03.13.176.2
     </select></td>
    </tr>

<tr><td class=DataLabel>%STANDARD.01.017.za</td>
    <td><select class="SelectBig"
         name=alenc047  title="%STANDARD.01.017.za">
     <option></option>
     %ALLWEB03.13.147.01.2
     </select></td>
    <td class=DataLabel>Care Type</td>
    <td><select class="SelectBig"
         name=alenc123  title="Care Type">
     <option></option>
     %ALLWEB03.13.187.2
     </select></td>
    </tr>

<tr><td class=DataLabel width=15%>Outcome Date</td>
    <td width=40%><input type=text name=alenc019 title="Outcome Date"
     class='PastDate' Size=9 onblur="checkDate(this,'Date')"  >
    <img src=../images/DateLookup.gif class="Icon"
         onclick="DateLookupFrame(AddForm.alenc019);">
    Time
    <input type=text size=8 title="Outcome Time"
     name=alenc020>
    <a href='javascript:SetCurrentDateTime(null,AddForm.alenc020)'>
    <img src=../images/DateTimeStamp.gif class="Icon"></a>
    <a href='javascript:TimeLookupFrame(AddForm.alenc020)'>
    <img src=../images/TimeLookup.gif class="Icon"></a>
    </td>
    <td class=DataLabel width=15%>Outcome</td>
    <td><select class="SelectBig"
         name=alenc125  title="Outcome">
     <option></option>
     %ALLWEB03.13.189.2
     </select></td>
    </tr>

<tr><td class=DataLabel width=15%>Service Provided</td>
    <td><select class="SelectBig" name=alenc010
         title="Service Provided">
    <option></option>
     %ALLWEB03.13.110.2
    </select></td>
    <td class=DataLabel>Service Delivery Mode</td>
    <td><select class="SelectBig" name=alenc126 onchange="DisplayWarning();"
         title="Service Delivery Mode">
    <option></option>
     %ALLWEB03.13.190.2
    </select></td>
    <tr>

<tr><td class=DataLabel>Referred to Facility</td>
    <td><input type="text" size=7 maxlength=5 name=alenc122
      title="Transfer Source"
      onchange="validateCode(9,AddForm.alenc122,AddForm.n_alenc122);">
     <input type=text size=20 name=n_alenc122 notab
      class=Readonly readonly>
     <img src="../images/SearchIcon.gif"
      onclick="TransferSourceFrame(AddForm.alenc122,AddForm.n_alenc122);">
     <img src="../images/ClearIcon.gif" class=Icon
      onclick="clrFields(AddForm.alenc122,AddForm.n_alenc122);"></td>
    <td class=DataLabel>Transport Source of Referral</td>
    <td><select class="SelectBig" name=alenc124
         title="Transport Source of Referral">
    <option></option>
     %ALLWEB03.13.188.2
    </select></td>
    </tr>

<tr valign=top><td class=DataLabel width=15%>Comments</td>
    <td class=DataField colspan=3>
    <textarea rows=3 cols=60 onblur="PackComments();" name=comments
     onkeydown="LimitText(this,3,160);"></textarea>
    </td></tr>

<tr><td colspan=4 align=center><br>
    <input type=button value="Add" class="button"  id="all03a"
     disabled name=AddButton onclick="tempDisable(this);clickAddButton();">
    <input type=button Value="Cancel" class="button" 
     onclick="DFrameCloseRefresh();">
    </td></tr>
</table>
</form>
