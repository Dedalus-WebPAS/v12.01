<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="wahealth">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/cliweb0101.js"></script>
<script type="text/javascript">
function CheckDOBActDateRange(FromInput,ToInput)
{
  if (SetDateYYYYMMDD(FromInput.value) > SetDateYYYYMMDD(ToInput.value))
  {
    alert(" Date Activated is Prior to Patient Date of Birth.");
    return false ;
  }

  return true;
}
function submitAlert() {
 var alert_type    = document.AddForm.alert002.value.substr(7,1);
 if(alert_type != "B" && alert_type != "M" && alert_type != "R" && alert_type != "C"){
   alert("Error: Alert must be either Medical, Micro, Risk or Chronic. ");
   return;
 }
 if(document.AddForm.admalert.value=="1"){
   document.AddForm.nextpage.value="6"
 }
 if (typeof document.AddForm.alert008 != "undefined") {
   if (!isWhitespace(AddForm.alert003.value)) {
     if (!CheckDOBActDateRange(AddForm.patdobth,AddForm.alert003)) {
       return;
     }
   }
   if (!isWhitespace(AddForm.alert010.value)) {
     if (!CheckDateRange(AddForm.alert003,AddForm.alert010)) {
       return;
     }
   }
   if(!isWhitespace(AddForm.alert011.value)) {
     if(!CheckDateRange(AddForm.alert003,AddForm.alert011)) {
       return;
     }
   }
   if(!isWhitespace(AddForm.alert008.value)) {
     if(!CheckDateRange(AddForm.alert003,AddForm.alert008)) {
       return;
     }
   }
 }

  // Limit comment text depending on alert type
  if (typeof document.AddForm.alcommnt != "undefined") {
    if (document.AddForm.alert002.value.substr(7,1)=="R" ||
        document.AddForm.alert002.value.substr(7,1)=="C") {

      if (AddForm.alcommnt.value.replace(/\r?\n/g,"").length > 500) {
        alert("Maximum Characters 500");
        return;
      }
    } else {
      if (AddForm.alcommnt.value.replace(/\r?\n/g,"").length > 250) {
        alert("Maximum Characters 250");
        return;
      }
    }
  }

  if (!checkAlertValid(AddForm)) {
    return;
  }

  if (validateMandatory(AddForm)) {
    document.AddForm.submit();
  }
}
function ShowExtraFields() {
  var ind    = document.AddForm.alert002.value.substr(7,1); 
  var Extra  = document.getElementById('ShowExtra');
 
  switch (ind)
  {
  case "B": 
    Extra.innerHTML = document.getElementById('addmicro').innerHTML;
    break;

  case "M": 
    Extra.innerHTML = document.getElementById('addmedical').innerHTML;
    break;

  case "R": 
    Extra.innerHTML = document.getElementById('addrisk').innerHTML;
    break;

  case "C": 
    Extra.innerHTML = document.getElementById('addchronic').innerHTML;
    break;

  default : 
    Extra.innerHTML = document.getElementById('dfltdate').innerHTML;
    break;
 }
}

</script>
%START.OF.PAGE
</HEAD>
<body onload="PageLoad(event);ShowExtraFields();">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
Add %CLIWEB01.01.101.8 Alert
</span>

<form name=AddForm method=post action=cliweb01.pbl>
<input type=hidden name=reportno value="1">
<input type=hidden name=template value="002">
<input type=hidden name=updttype value="A">
<input type=hidden name=urnumber value="%CLIWEB01.01.003">
<input type=hidden name=admissno value="%CLIWEB01.01.081">
<input type=hidden name=alert001 value="%CLIWEB01.01.107">
<input type=hidden name=nextpage value="5">
<input type=hidden name=admalert value="%CLIWEB01.01.119">
<input type=hidden name=patdobth value="%CLIWEB01.01.020" title="Date of Birth">

<table align=center cellspacing=0 cellpadding=1 width=95% border=0>
<tr><td class=DataLabel width=20%>Alert </td>
    <td><select name=alert002 id=alert002 title="Alert Code" class=Mandatory
         onchange="ShowExtraFields();">
        <option selected></option>
        %CLIWEB01.01.138  
        </select>
    </td></tr>
</table>

<div id=ShowExtra></div>

<table align=center cellspacing=0 cellpadding=1 width=95% border=0>
<tr><td colspan=4 align=center><br>
    <input type=button name=formactn id=formactn value=Add class="button"
            onclick="submitAlert();">
    <input type=button value=Close class="button" onclick="DFrameClose()">
</td></tr>
</table>
</form>

<span id=addmedical style="display:none">
<table align=center cellspacing=0 cellpadding=1 width=95% border=0>
<tr><td class=DataLabel width=20%>Date Activated</td>
    <td><input type=text name=alert003 id=alert003 size=12 maxlength=12
        class="Mandatory PastDate"
        title="Date Activated" onblur="checkDate(this,'Date Activated');">
    <img src=../images/DateTimeStamp.gif class=Icon
     onclick="SetCurrentDateTime(AddForm.alert003,null);">
    <img src=../images/DateLookup.gif class=Icon
     onclick="DateLookupFrame(AddForm.alert003);">
    </td>
    <td class=DataLabel>Date Inactive</td>
    <td><input type=text name=alert011 id=alert011 size=12 maxlength=12 
        class="PastDate"
        title="Date Inactive" onblur="checkDate(this,'Date Inactive');">
    <img src=../images/DateTimeStamp.gif class=Icon
     onclick="SetCurrentDateTime(AddForm.alert011,null);">
    <img src=../images/DateLookup.gif class=Icon
     onclick="DateLookupFrame(AddForm.alert011);">
    </td>
</tr>

    <input type=hidden name=alert008 id=alert008 value=" ">
    <input type=hidden name=alert010 id=alert010 value=" ">

<tr><td class=DataLabel>Authorising Clinician </td>
    <td colspan=4><input type=text name=alert012 id=alert012 size=10 maxlength=8
        title="Authorising Clinician" class=Mandatory
        onblur="ValidateHCP(18,12,alert012,d_alert012);">
    <input type=text size=35 name=d_alert012 id=d_alert012
     class=Readonly readonly>
    <img src=../images/SearchIcon.gif class=Icon
     onclick="HCPSearchFrame(alert012,d_alert012,7);">
    <img src="../images/ClearIcon.gif" class=Icon
     onclick="clrFields(alert012,d_alert012);">
    </td></tr>

    <input type=hidden name=alert006 id=alert006 value="0">

<tr><td class=DataLabel width=20%>Comment</td>
<tr><td colspan=6 align=center>
  <textarea wrap=hard name=alcommnt id=alcommnt rows=4 cols=70 title="Comment"
   onkeydown="ValidateKeyInput(this,99,250);"
   onblur="TextareaBlurHandler(this);ValidateTextLimits(this,99,250);">%CLIWEB01.01.111</textarea></td></tr>
</table>
</span>

<span id=addmicro style="display:none">
<table align=center cellspacing=0 cellpadding=1 width=95% border=0>
<tr><td class=DataLabel width=20%>Date Activated</td>
    <td><input type=text name=alert003 id=alert003 size=12 maxlength=12
        class="Mandatory PastDate"
        title="Date Activated" onblur="checkDate(this,'Date Activated');">
    <img src=../images/DateTimeStamp.gif class=Icon
     onclick="SetCurrentDateTime(AddForm.alert003,null);">
    <img src=../images/DateLookup.gif class=Icon
     onclick="DateLookupFrame(AddForm.alert003);">
    </td>
    <td class=DataLabel>Date Inactive</td>
    <td><input type=text name=alert010 id=alert010 size=12 maxlength=12 
        class="PastDate"
        title="Date Inactive" onblur="checkDate(this,'Date Inactive');">
    <img src=../images/DateTimeStamp.gif class=Icon
     onclick="SetCurrentDateTime(AddForm.alert010,null);">
    <img src=../images/DateLookup.gif class=Icon
     onclick="DateLookupFrame(AddForm.alert010);">
    </td>
</tr>

    <input type=hidden name=alert008 id=alert008 value=" ">

<tr><td class=DataLabel>End Date (Date Cleared)</td>
    <td><input type=text name=alert011 id=alert011 size=12 maxlength=12
         title="End Date" class="PastDate" onblur="checkDate(this,'End Date');">
    <img src=../images/DateTimeStamp.gif class=Icon
     onclick="SetCurrentDateTime(AddForm.alert011,null);">
    <img src=../images/DateLookup.gif class=Icon
     onclick="DateLookupFrame(AddForm.alert011);">
    </td>
</tr>

    <input type=hidden name=alert012 id=alert012 value=" ">
    <input type=hidden name=alert006 id=alert006 value="0">

</table>
</span>

<span id=addrisk style="display:none">
<table align=center cellspacing=0 cellpadding=1 width=95% border=0>
<tr><td class=DataLabel width=20%>Date Activated</td>
    <td><input type=text name=alert003 id=alert003 size=12 maxlength=12
        class="Mandatory PastDate"
        title="Date Activated" onchange="checkDate(this,'Date Activated');">
    <img src=../images/DateTimeStamp.gif class=Icon
     onclick="SetCurrentDateTime(AddForm.alert003,null);">
    <img src=../images/DateLookup.gif class=Icon
     onclick="DateLookupFrame(AddForm.alert003);">
    </td>
</tr>
    <input type=hidden name=alert010 id=alert010 value=" ">

<tr><td class=DataLabel>Next Review Date</td>
    <td><input type=text name=alert008 id=alert008 size=12 maxlength=12
        class="Mandatory"
        title="Next Review Date"
        onchange="checkDate(this,'Next Review Date');">
    <img src=../images/DateTimeStamp.gif class=Icon
     onclick="SetCurrentDateTime(AddForm.alert008,null);">
    <img src=../images/DateLookup.gif class=Icon
     onclick="DateLookupFrame(AddForm.alert008);">
    </td>
    <td class=DataLabel>End Date (Date Cleared)</td>
    <td><input type=text name=alert011 id=alert011 size=12 maxlength=12
         title="End Date" class="PastDate" onblur="checkDate(this,'End Date');">
    <img src=../images/DateTimeStamp.gif class=Icon
     onclick="SetCurrentDateTime(AddForm.alert011,null);">
    <img src=../images/DateLookup.gif class=Icon
     onclick="DateLookupFrame(AddForm.alert011);">
    </td>
</tr>

<tr><td class=DataLabel>Authorising Clinician </td>
    <td colspan=4><input type=text name=alert012 id=alert012 size=10 maxlength=8
        title="Authorising Clinician" class=Mandatory
        onblur="ValidateHCP(18,12,alert012,d_alert012);">
       <input type=text size=35 name=d_alert012 id=d_alert012
        class=Readonly readonly>
    <img src=../images/SearchIcon.gif class=Icon
     onclick="HCPSearchFrame(alert012,d_alert012,7);">
    <img src="../images/ClearIcon.gif" class=Icon
     onclick="clrFields(alert012,d_alert012);">
    </td></tr>

<tr><td class=DataLabel>Severity Level</td>
    <td><select name=alert006 id=alert006>
        <option value="0">0</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
       </select>
</td></tr>

<tr><td class=DataLabel width=20%>Comment</td>
<tr><td colspan=6 align=center>
<textarea wrap=hard name=alcommnt id=alcommnt rows=4 cols=70 title="Comment"
 onkeydown="ValidateKeyInput(this,99,500);"
 onblur="TextareaBlurHandler(this);ValidateTextLimits(this,99,500);">%CLIWEB01.01.111</textarea></td></tr>
</table>
</span>

<span id=addchronic style="display:none">
<table align=center cellspacing=0 cellpadding=1 width=95% border=0>
<tr><td class=DataLabel width=20%>Date Activated</td>
    <td><input type=text name=alert003 id=alert003 size=12 maxlength=12
        class="Mandatory PastDate"
        title="Date Activated" onchange="checkDate(this,'Date Activated');">
    <img src=../images/DateTimeStamp.gif class=Icon
     onclick="SetCurrentDateTime(AddForm.alert003,null);">
    <img src=../images/DateLookup.gif class=Icon
     onclick="DateLookupFrame(AddForm.alert003);">
    </td>
</tr>
    <input type=hidden name=alert006 id=alert006 value="0">
    <input type=hidden name=alert010 id=alert010 value=" ">

<tr><td class=DataLabel>Next Review Date</td>
    <td><input type=text name=alert008 id=alert008 size=12 maxlength=12
        class="Mandatory"
        title="Next Review Date"
        onchange="checkDate(this,'Next Review Date');">
    <img src=../images/DateTimeStamp.gif class=Icon
     onclick="SetCurrentDateTime(AddForm.alert008,null);">
    <img src=../images/DateLookup.gif class=Icon
     onclick="DateLookupFrame(AddForm.alert008);">
    </td>
    <td class=DataLabel>Date Inactive</td>
    <td><input type=text name=alert011 id=alert011 size=12 maxlength=12
         title="Date Inactive" class="PastDate"
         onblur="checkDate(this,'Date Inactive');">
    <img src=../images/DateTimeStamp.gif class=Icon
     onclick="SetCurrentDateTime(AddForm.alert011,null);">
    <img src=../images/DateLookup.gif class=Icon
     onclick="DateLookupFrame(AddForm.alert011);">
    </td>
</tr>

<tr><td class=DataLabel>Authorising Clinician </td>
    <td colspan=4><input type=text name=alert012 id=alert012 size=10 maxlength=8
        title="Authorising Clinician" class=Mandatory
        onblur="ValidateHCP(18,12,alert012,d_alert012);">
       <input type=text size=35 name=d_alert012 id=d_alert012
        class=Readonly readonly>
    <img src=../images/SearchIcon.gif class=Icon
     onclick="HCPSearchFrame(alert012,d_alert012,7);">
    <img src="../images/ClearIcon.gif" class=Icon
     onclick="clrFields(alert012,d_alert012);">
    </td></tr>

<tr><td class=DataLabel>Care Pathway Activated </td>
    <td><select name=alert014 id=alert014 class=Mandatory
         title="Care Pathway Activated">
        <option></option>
        <option value="0">No</option>
        <option value="1">Yes</option>
       </select>
</td></tr>

<tr><td class=DataLabel width=20%>Comment</td>
<tr><td colspan=6 align=center>
<textarea wrap=hard name=alcommnt id=alcommnt rows=4 cols=70 title="Comment"
 onkeydown="ValidateKeyInput(this,99,500);"
 onblur="TextareaBlurHandler(this);ValidateTextLimits(this,99,500);">%CLIWEB01.01.111</textarea></td></tr>
</table>
</span>

<span id="dfltdate" style="display:none">
    <input type=hidden name=alert003 id=alert003 value="%STANDARD.01.015">
</span>
