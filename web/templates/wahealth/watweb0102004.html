<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="wahealth">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/watweb01.js"></script> 
<script type="text/javascript">
function init(){
  if(document.UpdateForm.status.value!="6"){
    document.UpdateForm.retlist.disabled=true;
  }
  if(document.UpdateForm.status.value!="6"){
    document.UpdateForm.wattx045.value=document.UpdateForm.defttime.value;
    document.UpdateForm.wattr009.value=document.UpdateForm.deftdate.value;
  }
}
function ReturnToList(){
  if(document.UpdateForm.status.value!="6"){
    alert("Patient is not removed");
    return;
  }

  ans=confirm("Patient will be returned to the waiting list");
  if (ans) {
    document.UpdateForm.cancelrm.value="1"
    document.UpdateForm.submit();
  }
}
  function CheckAdm() {
  i=document.UpdateForm.wattr010.selectedIndex;
  ind=document.UpdateForm.wattr010.options[i].value.substr(14,1)
  if (ind=="W") {
     alert("Patient must be discharged instead of removed.")
     return false;
    }
    return true;
  }
  function chkDate() {
    if(!(ChkDateTime(UpdateForm.wattr006,null,UpdateForm.wattr009,null))) {
     alert("Removed date should not be before Date on List");
     UpdateForm.wattr009.select();
     return false;
    }
    return true;
  }
 
  function SubmitRemove() {
    if(chkDate()){    
      if(CheckAdm()){
      document.UpdateForm.wathi002.value=document.UpdateForm.wattr009.value;
      EnableRemovalReason();
      SubmitHidden(UpdateForm);
     }
   }
  } 
function EnableRemovalReason() {
  if(document.UpdateForm.status.value!="6") {
     UpdateForm.updfld05.disabled=false;
     UpdateForm.reasfc05.disabled=false;
     UpdateForm.reasfc05.value=UpdateForm.wattr010.value;
  } else { 
    UpdateForm.updfld05.disabled=true;
    UpdateForm.reasfc05.value="";
    UpdateForm.reasfc05.disabled=true;
  } 
}
function RemovalDate() {
  if(!checkDate(UpdateForm.wattr009,'Date')) {
    return;
  }
  AuditChangeReason();
}
function AuditChangeReason() {
  if(document.UpdateForm.status.value=="6" &&
    (UpdateForm.d_wattr009.value != UpdateForm.wattr009.value ||
     UpdateForm.d_wattr010.value != UpdateForm.wattr010.value.substr(0,3))) {
      document.getElementById('ReasonHeading').innerHTML= 
      document.getElementById('ShowReasonHeading').innerHTML
      document.getElementById('ReasonField').innerHTML= 
      document.getElementById('ShowReasonField').innerHTML
  } else {
    document.getElementById('ReasonHeading').innerHTML="";
    document.getElementById('ReasonField').innerHTML="";
  }
}
function UpdComments() {
  CASEKEYS=UpdateForm.casekeys.value.replace(/ /g,"+");
  LinkUrl="watweb01.pbl?reportno=20&template=001&casekeys="+CASEKEYS;
  Left=(document.body.clientWidth-880)/2;
  DFrameLink(LinkUrl,15,Left,880,400);
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);DisplayTrnSrc();DisplayInsDec();
              DisplaySchAdm();">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
Remove Waiting List Entry    
</span>

<form name=UpdateForm action="watweb01.pbl" method=post>
<input type=hidden name=reportno value=2>
<input type=hidden name=template value=1>
<input type=hidden name=casekeys value="%WATWEB01.02.101">
<input type=hidden name=updttype value="D">
<input type=hidden name=cancelrm value=" ">
<input type=hidden name=deftdate value="%STANDARD.01.015">
<input type=hidden name=defttime value="%STANDARD.01.016">
<input type=hidden name=wathi002 value="">
<input type=hidden name=status value="%WATWEB01.02.175">
<input type=hidden name=updfld05 value="05" disabled>
<input type=hidden name=reasfc05 value="" disabled>
<input type=hidden name=d_wattr009 value="%WATWEB01.02.112">
<input type=hidden name=d_wattr010 value="%WATWEB01.02.113.1">

<table border=0 width=90% cellspacing=0 align=center>
<tr valign=top><td class=DataLabel width=200>Date on List</td>
    <td class=DataField colspan=3>
    <input type=text name=wattr006 size=12 readonly class=Readonly
     value="%WATWEB01.02.109" title="Date on List">
    </td></tr>

<tr valign=top><td class=DataLabel>Diagnosis</td>
    <td class=DataField colspan=3>
    <input type=text name=wattr004 size=50 maxlength=50 readonly 
     class=Readonly value="%WATWEB01.02.107" title="Reason/Diagnosis">
    </td></tr>
<tr valign=top><td class=DataLabel>Principal Procedure</td>
    <td class=DataField colspan=3>
    <input type=text name=wattr003 size=50 maxlength=50 readonly
     class=Readonly value="%WATWEB01.02.106" title=Procedure>
     </td></tr>
<tr valign=top><td class=DataLabel>Additional Procedures</td>
    <td class=DataField colspan=3>
    <input type=text name=dummy size=50 maxlength=50 readonly
     class=Readonly value="%WATWEB01.02.150.1" title=Procedure>
     </td></tr>
<tr valign=top><td class=DataLabel></td>
    <td class=DataField colspan=3>
    <input type=text name=dummy size=50 maxlength=50 readonly
     class=Readonly value="%WATWEB01.02.151.1" title=Procedure>
     </td></tr>
<tr valign=top><td class=DataLabel>Planned Length of Stay </td>
    <td class=DataField colspan=3>
    <input type=text name=wattr013 size=4 maxlength=4 readonly class=Readonly
     title="Planned Lenght of Stay" value="%WATWEB01.02.116">(days)
    </td></tr>
<tr valign=top><td class=DataLabel>Date Removed</td>
    <td>
    <input type=text name=wattr009 size=12 
     value="%WATWEB01.02.112"  onblur="RemovalDate();"
     class="Mandatory PastDate" title="Removal Date" tabindex=1>
    <img src=../images/DateLookup.gif class=Icon date=UpdateForm.wattr009>
          Time
       <input class=Mandatory type=text name=wattx045 size=8 tabindex=2
          value="%WATWEB01.02.545" title="Removal Time">
    <img src=../images/DateTimeStamp.gif class=Icon date=UpdateForm.wattr009
     time=UpdateForm.wattx045>
    <img src=../images/TimeLookup.gif border=0 hspace=4 align=absmiddle
    onclick="TimeLookupFrame(UpdateForm.wattx045);">
    </td>
    <td class=DataLabel><div id=ReasonHeading></div></td>
    <td class=DataField><div id=ReasonField></div></td>
    </tr>
<tr valign=top><td class=DataLabel>Removal Reason</td>
    <td class=DataField colspan=3>
    <select name=wattr010 class=Mandatory title="Removal Reason"
     onchange="DisplayTrnSrc();CheckAdm();DisplayInsDec();DisplaySchAdm();AuditChangeReason();" 
     tabindex=2>
    <option></option>
    %WATWEB01.02.113.2
    </select>
    </td></tr>

    <tr><td>
          <div id=TranSrcHeading></div>
          <td colspan=3><div id=TranSrc></div></td>
    </tr>
     <tr><td>
           <div id=InsurDecHeading></div>
           <td colspan=3><div id=InsurDec></div></td>
     </tr>
    <tr><td>
          <div id=SchAdmDtHeading></div>
          <td colspan=3><div id=SchAdmDt></div></td>
    </tr>

<tr><td colspan=4>&nbsp;</td></tr>

<tr><td colspan=4 align=center>
    <input type=button class="button" value="Ok" tabindex=5 
     onclick='SubmitRemove();'>
    <input type=button value="Cancel" class="button" onclick='DFrameClose();'
     tabindex=6>
    <input type=button class="button" value="Return to WL" name=retlist tabindex=7
     onclick='ReturnToList();'>
    </td></tr>
</table>
</form>

<span id=transferhd style="display:none">
Transfer Source
</span>

<span id=transfersrc style="display:none">
  <input type="text" size=7 maxlength=5 name=trnsfsrc id=trnsfsrc 
   class=Mandatory title="Transfer Source" tabindex=3
   onchange="validateCode(9,trnsfsrc,trandesc);" value="%WATWEB01.02.183">
  <input type=text size=27 name=trandesc id=trandesc notab
   class=Readonly readonly value="%WATWEB01.02.184">
  <img src="../images/SearchIcon.gif" class=Icon
   onclick="TransferSourceFrame(trnsfsrc,trandesc)">
</span>

<span id=transferblank style="display:none">
  <input type=hidden name=trnsfsrc id=trnsfsrc>
</span>

<span id=InsDechd style="display:none">
Insurance Declaration
</span>

<span id=InsuranceDec style="display:none">
  <select name=wattx026 id=wattx026 tabindex=4 
   class="selectBig Mandatory" title="">
    <option></option>
    value=%WATWEB01.02.526.9.1.10.2.X
  </select>
</span>

<span id=InsuranceBlank style="display:none">
  <input type=hidden name=InsDec id=InsDec>
</span>

<span id=SchAdmhd style="display:none">
Scheduled Admission Date
</span>

<span id=SchAdmDate style="display:none">
  <input type=text name=wattr008 id=wattr008 size=12
   value="%WATWEB01.02.111"  onblur="checkDate(this,'Date');"
   class=Mandatory title="Removal Date" tabindex=1>
  <img src=../images/DateTimeStamp.gif class=Icon date=UpdateForm.wattr008
   time=null>
  <img src=../images/DateLookup.gif class=Icon date=UpdateForm.wattr008>
</span>

<span id=SchAdmDtBlank style="display:none">
   <input type=hidden name=SchAdm>
</span>

<span id=ShowReasonHeading style="display:none">
Reason
</span>

<span id=ShowReasonField style="display:none">
  <input type=hidden name=updfld07 value="07">
  <select name=reasfc07 id=reasfc07 class="Mandatory" title="Reason">
    <option></option>
    %STANDARD.01.007.FX
  </select>
</span>

