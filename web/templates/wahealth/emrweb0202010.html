<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="wahealth">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript" src="../js/EmrMandatory.js"></script>
<script type="text/javascript" src="../js/emrweb0202010.js"></script>
<script type="text/javascript">
function CancelAction() {
  if (top.TogglePanel==null) {
    top.location.reload();
  } else {
    top.TogglePanel();
  }
}
function chkFormSend() {
}
function SubmitForm() {
  setRedirect();
  setFormactn();
}
function IsDirty(eForm) {
  for (var i=0; i < eForm.length; i++) {
    var eElem = eForm.elements[i];
    if ("text" == eElem.type || "textarea" == eElem.tagName)
    {
      if (eElem.value != eElem.defaultValue)  {return true;}
    }
    else if ("checkbox" == eElem.type || "radio" == eElem.type)
    {
      if (eElem.checked != eElem.defaultChecked) return true;
    }
  }
  return false;
}
function Validateprecom001() {
  var formatedtext=formateText(UpdateForm.prcom001,'50')
  if ((formatedtext.split(/[\r\n]/).length > 6)) {
    alert("Presenting Complaint Comments - Max 6 lines." +
          "\nPlease remove extra line(s) to continue.");
    FocusDelay(document.UpdateForm.prcom001);
    return;
  }
  else if (formatedtext.replace(/\r?\n/gm,"").length > 300) {
    alert("Presenting Complaint Comments - Max 300 characters." +
          "\nPlease remove the extra character(s) to continue.");
    FocusDelay(document.UpdateForm.prcom001);
    return;
  }
}
function onblurSpclChar(el) {
  el.value=el.value.replace(/@/g,'');
  el.value=el.value.replace(/\*/g,'');
  el.value=el.value.replace(/\//g,'');
  el.value=el.value.replace(/:/g,'');
  el.value=el.value.replace(/\\/g,'');
  el.value=el.value.replace(/\$/g,'');
  el.value=el.value.replace(/\%/g,'');
  el.value=el.value.replace(/&/g,'');
  el.value=el.value.replace(/#/g,'');
}
function LookupCleanup()
{
  var txtSearch = document.getElementById('txtPresComp');
  if (txtSearch == undefined) return;

  txtSearch.value = ""; 
}
function CheckTextLimit(TextArea) {
  if (!LimitText(TextArea,6,300)) {
    TextArea.onblur = null;  // clear to prevent infinite loop with alerts
    window.setTimeout(function () {
      TextArea.onblur = function() {
        TextareaBlurHandler(TextArea);
        Validateprecom001();
      }
    },100);
  }
}
function ValidatePasteData(TextArea) {
  var evt = window.event;
  var clipboard = evt.clipboardData;
  var clipData = clipboard.getData('text/plain');
  var title = TextArea.title;

  var maxRows=6;
  if ((clipData.split(/\r?\n/).length > maxRows)) {
    alert("Maximum " + maxRows + " lines reached for " + title + "." +
          "\nPlease remove the extra line(s) to continue.");
    FocusDelay(TextArea);
    return;
  }

  var maxChars=300;
  if (clipData.replace(/\r?\n/gm,"").length > maxChars) {
    alert("Maximum " + maxChars + " characters reached for " + title + "." +
          "\nPlease remove the extra character(s) to continue.");
    FocusDelay(TextArea);
    return;
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);"> 
<span class=DFrameTitleBar>
Add Expected Emergency Patient
</span>

<form name=UpdateForm action="emrweb02.pbl" method=post style="margin:0">
<input type=hidden name=reportno value="02">
<input type=hidden name=template value="010">
<input type=hidden name=formactn>
<input type=hidden name=updttype>
<input type=hidden name=updateky value="">
<input type=hidden name=nextpage value="0">
<input type=hidden name=redirect>
<input type=hidden name=deceased>
<input type=hidden name=selsex>
<input type=hidden name=gname>
<input type=hidden name=sname>
<input type=hidden name=patgname>
<input type=hidden name=patsname>
<input type=hidden name=dummy>
<input type=hidden name=dummyadm> 
<input type=hidden name=dummsrch> 
<input type=hidden name=emexpsit value="%STANDARD.01.041">
<input type=hidden name=ptcnhdps  value="%STANDARD.01.025.080.250.1.1">

  
<table align=center width=95% align=center border=0 cellspacing=0 cellpadding=2>
<tr><td class=DataLabel>U/R</td> 
   <td><input type=text size=10 maxlength=8 name=emexp018 tabindex=2
       onblur="UpCase(this);justifyRight(this);PatientReturnWA();">
       <img class=Icon src=../images/SearchIcon.gif onclick="PatientSearchWA();">
</td>
    <td class=DataLabel>Surname </td>
    <td><input type=text size=25 max=25 name=emexp002 tabindex=3
         onblur="UpCase(this);TextareaBlurHandler(this);onblurSpclChar(this);"></td>
    <td class=DataLabel>Given Name </td>
    <td><input type=text size=25 max=25 name=emexp003 tabindex=4
         onblur="UpCase(this);TextareaBlurHandler(this);onblurSpclChar(this);"></td>
    <td class=DataLabel>Amb Case No</td>
    <td><input type=text size=20 maxlength=15 name=emexp026 tabindex=5
         value="" title="Amb Case No">
    </td>
    </tr>

<tr><td></td>
    <td></td>
    <td class=DataLabel>%STANDARD.01.017.G </td>
    <td><div id="sexfieldDIV">
          <select name=emexp004 tabindex=6 class=SelectSml>
            <option> </option>
              %EMRWEB02.02.086.099.061.9.1.19.3.H
          </select>
        </div>
    </td>
    <td class=DataLabel>Date of Birth </td>
    <td><input type=text size=12 max=11 name=emexp005 
         title="Date of Birth" class="Past Date" tabindex=7>
        <img class=Icon src=../images/DateTimeStamp.gif date=document.UpdateForm.emexp005>
        <img class=Icon src=../images/DateLookup.gif date=document.UpdateForm.emexp005>
        </td>
    <td class=DataLabel>Accepting Source</td>
    <td><select name=emexp020 class=SelectMed tabindex=8>
        <option></option>
        %EMRWEB02.02.463.2
        </select></td>
    </tr>
</table>
<table align=center width=95% align=center border=0 cellspacing=0 cellpadding=2>
<tr><td colspan=6><hr></td>
</tr>

<tr><td class=DataLabel>Date Notified</td>
    <td><input type="text" name=emexp015 size="12"  tabindex=9
         class="Mandatory FutureDate" title="Expected Date" 
         value="%STANDARD.01.015"
         onblur="checkDate(UpdateForm.emexp015,'Expected Date')">
         <img class=Icon src=../images/DateLookup.gif 
         onclick="DateLookupFrame(UpdateForm.emexp015);">
         Time 
         <input type="text" name=emexp016 size="8"  tabindex=10
         class=Mandatory title="Expected Time" value="%STANDARD.01.016" 
         onblur="checkTime(UpdateForm.emexp016,'Expected Time')">
         <img class=Icon src=../images/TimeLookup.gif 
         onclick="TimeLookupFrame(UpdateForm.emexp016);">
         <img class=Icon src="../images/stopwat1.gif"
         onclick="SetCurrentDateTime(UpdateForm.emexp015,UpdateForm.emexp016);">
    </td>
    <td class=DataLabel>ETA</td>
    <td>
    <input type="text" name=emexp022 size="12"  tabindex=11
    class="Date" title="ETA Date" value=""
    onblur="checkDate(UpdateForm.emexp022,'ETA Date')" >
    <img src=../images/DateLookup.gif class=Icon date=UpdateForm.emexp022>
    Time <input type="text" name=emexp023 size="8"  tabindex=12
    title="ETA Time" value=""
    onblur="checkTime(UpdateForm.emexp023,'Triage Time')">
    <img src=../images/TimeLookup.gif class=Icon time=UpdateForm.emexp023>
    <img src="../images/DateTimeStamp.gif" class=Icon
    date=UpdateForm.emexp022 time=UpdateForm.emexp023>
    </td>
    <td class=DataLabel>Expected Location</td>
    <td>
    <select class=SelectMed name=emexp025 tabindex=13 title="Expected Location">
    <option></option>
     %EMRWEB02.02.468
    </select>
    </td>
</tr>

<tr valign=top><td class=DataLabel>Presenting Complaint </td>
    <td>
    <input type=hidden name=emrviscat value="el">
    <input type="text" size=10 tabindex=14 id=txtPresComp name=txtPresComp
      onfocus="SetCaretPosition('txtPresComp',-1);"
      onKeyUp='LookupPresComp(event,this,UpdateForm.emexp007,
               UpdateForm.emrviscat);'>
    <select name=emexp007 class=SelectBig tabindex=15>
    </select>
    <img src=../images/SelectLink.gif 
      class=Icon title="Presenting Complaint Lookup"
      onclick="LookupPage(txtPresComp,UpdateForm.emexp007,'Lookup_EDPC0000_000');">
    </td>
    <td colspan=4>
    <textarea name=prcom001 id=prcom001 wrap=hard valign=top tabindex=16
     cols=50 rows=6 title="Presenting Complaint Comments"
     style="overflow-y:hidden"
     onkeydown="ValidateKeyInput(this);"
     onblur="TextareaBlurHandler(this);ValidateTextLimits(this);">
    </textarea>
    </td>
</tr>

<tr><td colspan=6 align=center><br>
    <input type=button value="Add" class="button" tabindex=20 id="emr02a"
     onclick='tempDisable(this);setRedirect();setFormactn();' >
    <input type=button value="Cancel" class="button" tabindex=21
     onclick="CancelAction();">
    </td></tr>
</table>
</form>

<span id=sexfieldSPAN1 style="display:none;">
<input type=text size=15 max=20 name=d_emexp004 tabindex=6" class='readOnly'
 readOnly>
<input type=hidden name=emexp004>
</span>

<span id=sexfieldSPAN2 style="display:none;">
  <select name=emexp004 tabindex=6 class=SelectSml>
    <option value=" "></option>
        %EMRWEB02.02.086.099.061.9.1.19.3.H
  </select>
</span>
