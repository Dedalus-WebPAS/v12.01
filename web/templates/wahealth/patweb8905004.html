<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="wahealth">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<link rel="stylesheet" href="../html/postcode.css" type="text/css">
<script type="text/javascript" src=../js/IBA_Category_C_.js>  </script>
<script type="text/javascript" src=../js/IBA_Category_LA.js>  </script>
<script type="text/javascript" src=../js/AutoPostCode.js>  </script>
<script type="text/javascript" src=../js/patweb89.js>  </script>
<script type="text/javascript">
function checkOverseas() {
  if (trim(document.AddForm.ptmas012.value)=="8888")
  {
    document.AddForm.oseasflg.checked=true;
  }
  else
  {
    document.AddForm.oseasflg.checked=false;
  }
  setAddrLine4(AddForm);
}
function clickRegisterButton() {
  if(!CheckValPostCode()){
     return;
  }
  var str = document.AddForm.ptmas006.value;
  document.AddForm.ptmas006.value = str.replace(/^\s+|\s+$/g,'');
  str = document.AddForm.pmpmi084.value;
  document.AddForm.pmpmi084.value = str.replace(/^\s+|\s+$/g,'');
  checkSecondName(document.AddForm.ptcnusgn,document.AddForm.ptmas006,
                  document.AddForm.pmpmi084,document.AddForm.pmpmi085);

  if(checkMedicare(document.AddForm.ptmas023)) {
    enableMedicare();
    DisButton();
    SubmitHidden05(document.AddForm);
  }
}
function DisButton() {
  AddForm.RegisterButton.disabled=true;
  setInterval('AddForm.RegisterButton.disabled=false',6000);
}
function clrMandatory(Sname,Gname,Sex,Dob) {
  if (document.AddForm.quickreg.checked==true) {
    for (i=0; i<document.AddForm.elements.length; i++) {
      el=document.AddForm.elements[i];
      if (el.className.match(/Mandatory/)) {
        el.className="";
      }
    }
    if (isWhitespace(document.AddForm.ptmas017.value)){
      checkDefDOB(document.AddForm.ptmas017,document.AddForm.d_cwebDDOB);
      document.AddForm.ptmas017.focus();
      document.AddForm.ptmas017.blur();
      document.AddForm.ptmas017.className="Mandatory";
    }

    if (!isWhitespace(Sex)) {
      //document.AddForm.ptmas015.value=Sex.substr(0,1);
    }

    if (isWhitespace(Sname)) {
      if (isWhitespace(document.AddForm.ptmas005.value)) {
      document.AddForm.ptmas005.value="Unknown";
      }
    }  
    if (isWhitespace(Gname)) {
      if (isWhitespace(document.AddForm.pmpmi084.value)) {
      document.AddForm.pmpmi084.value="Unknown";
      }  
    }

    if (isWhitespace(Dob)) {
      if (isWhitespace(document.AddForm.ptmas017.value)) {
      document.AddForm.ptmas017.value="";
      }
    }  
    else {
      document.AddForm.ptmas017.value=Dob;
    }
  } else {
    location.reload();
  }
}

function ShowSpan(showoption) {
  if (showoption.value=="1") {
    divLangHed.innerHTML=LanguageHed.innerHTML;
    divLangSel.innerHTML=LanguageSel.innerHTML;
    SetCategoryLA(document.AddForm.pmpmi002,"");
  } else {
    divLangHed.innerHTML=LanguageNoHead.innerHTML;
    divLangSel.innerHTML=LanguageNul.innerHTML;
  }
}
   
function init() {
  SetPostCode05();
  InitPostCodes();
  SetCategoryC_(document.AddForm.ptmas019,"");
  turnOnSecondGivenName(document.AddForm.ptcnusgn.value,
                        document.AddForm.ptmas006,
                        document.AddForm.pmpmi084,
                        document.AddForm.pmpmi085);
}
function checkMedicareWa() {
  if(isWhitespace(AddForm.ptmas023.value)) {
    AddForm.ptmsx045.value="";
    AddForm.ptmsx045.disabled=true;
    AddForm.ptmsx045.className="ReadOnly";
    return;
  }
  if(checkMedicare(AddForm.ptmas023,AddForm.pmpmi016)) {
    AddForm.ptmsx045.disabled=false;
    AddForm.ptmsx045.className="Mandatory";
    AddForm.ptmsx045.focus();
  }
}
function enableMedicare() {
  if(isWhitespace(AddForm.ptmas023.value)) {
    AddForm.ptmsx045.disabled=false;
    AddForm.ptmsx045.value="";
  }
}
function ValMedicare05() {
  var mon;
  Input=document.AddForm.ptmas017.value
  day= Input.substring(0,2)
  year= Input.substring(6,11)
  monstr= Input.substring(3,6)
  if (monstr=="Jan" || monstr=="JAN" || monstr=="jan") mon=00
  if (monstr=="Feb" || monstr=="FEB" || monstr=="feb") mon=01
  if (monstr=="Mar" || monstr=="MAR" || monstr=="mar") mon=02
  if (monstr=="Apr" || monstr=="APR" || monstr=="apr") mon=03
  if (monstr=="May" || monstr=="MAY" || monstr=="may") mon=04
  if (monstr=="Jun" || monstr=="JUN" || monstr=="jun") mon=05
  if (monstr=="Jul" || monstr=="JUL" || monstr=="jul") mon=06
  if (monstr=="Aug" || monstr=="AUG" || monstr=="aug") mon=07
  if (monstr=="Sep" || monstr=="SEP" || monstr=="sep") mon=08
  if (monstr=="Oct" || monstr=="OCT" || monstr=="oct") mon=09
  if (monstr=="Nov" || monstr=="NOV" || monstr=="nov") mon=10
  if (monstr=="Dec" || monstr=="DEC" || monstr=="dec") mon=11

  ans = "true";
  Today = new Date();
  Bday = new Date();
  Bday.setFullYear(year);
  Bday.setMonth(mon);
  Bday.setDate(day);
  difference = "0";

  if (Today.getTime() > Bday.getTime()) {
    difference = Today.getTime() - Bday.getTime();
    difference = Math.floor(difference / (1000 * 60 * 60 * 24));
    ageyears = (difference/365);
  }
  i=document.AddForm.ptmas021.selectedIndex
  ind=document.AddForm.ptmas021.options[i].value.substring(3,4)
  if (difference > "180") {
    if (!isWhitespace(document.AddForm.ptmas023.value)) {
      if (document.AddForm.ptmsx045.value=="0" ||
          document.AddForm.ptmsx045.value==" 0") {
      ans=confirm("Warning : patient greater than 6 months, zero medicare reference");
      if (ans==false) {
          document.AddForm.ptmsx045.value="";
          document.AddForm.ptmsx045.focus();
          return; }
          }
        }
     }
// Residents only
  if (ind=="1") {
// Less than 180 days old
    if (difference <= "180") {
      if (isWhitespace(document.AddForm.ptmas023.value)) {
          alert("Warning : Resident with no medicare number");
      }
    }
// Older than 180 days
    if (difference > "180") {
      if (isWhitespace(document.AddForm.ptmas023.value)) {
         alert("Warning : Resident with no medicare number");
      }
    }
  }
}
function checkContactCorrespondence() {
  if (document.AddForm.quickreg.checked == true) {
    document.AddForm.ptmas013.className="";
    document.AddForm.ptmsx039.className="";
    document.AddForm.ptmas014.className="";
    return;
  }

  if (document.AddForm.pmpmi095.value.substring(3,4)=='H') {
     document.AddForm.ptmas013.className="Mandatory";
  } else {
     document.AddForm.ptmas013.className="";
  }

  if (document.AddForm.pmpmi095.value.substring(3,4)=='M') {
     document.AddForm.ptmsx039.className="Mandatory";
  } else {
    if (document.AddForm.pmpmi095.value.substring(3,4)=='S') {
       document.AddForm.ptmsx039.className="Mandatory";
    } else {
       document.AddForm.ptmsx039.className="";
    }
  }

  if (document.AddForm.pmpmi095.value.substring(3,4)=='W') {
     document.AddForm.ptmas014.className="Mandatory";
  } else {
     document.AddForm.ptmas014.className="";
  }

}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);checkMedicareWa();displayPrefNames(document.AddForm.ptcnnmpr.value);">
<form name=AddForm action="patweb89.pbl" method=post
 onsubmit='return validateMandatory(this)'>
<input type=hidden name=reportno value="05">
<input type=hidden name=formactn value="NR">
<input type=hidden name=updttype value="">
<input type=hidden name=chckname>
<input type=hidden name=redirflg value="1">
<input type=hidden name=nextpage value="3">
<input type=hidden name=updateky value="%PATWEB89.05.700">
<input type=hidden name=redirect value="patweb98.pbl?reportno=1&template=001">
<input type=hidden name=dummy value="">
<input type=hidden name=pmpmi076 value="">
<input type=hidden name=praflag value="0">
<input type=hidden name=temporar value="1">
<input type=hidden name=sesskeys value="%PATWEB89.05.918">
<input type=hidden name=noofdays value="%PATWEB89.05.919">
<input type=hidden name=theaflag value="%PATWEB89.05.920">
<input type=hidden name=admissno value="%PATWEB89.05.081">
<input type=hidden name=hidsname id=hidsname value="%PATWEB89.05.009">
<input type=hidden name=hidgname id=hidgname value="%PATWEB89.05.010">
<input type=hidden name=otptflag value="%PATWEB89.05.942">
<input type=hidden name=casekeys value="%PATWEB89.05.907">
<input type=hidden name=ptcnusgn value="%STANDARD.01.025.114.219.0.1">
<input type=hidden name=ptcnnmpr value="%STANDARD.01.025.128.226.1.1">
<input type=hidden name="d_cwebDDOB" value="%STANDARD.01.025.101.098.0.8">
<input type=hidden name=ptcnhdps id=ptcnhdps 
       value="%STANDARD.01.025.080.250.1.1">

<table align=center width=100% border=1 cellspacing=0 cellpadding=0>
<tr><td class=HeadingCell colspan=6 align=center>
     New Patient Details </td></tr>
</table>

<table align=center width=100% border=0 cellspacing=0 cellpadding=1>
<tr><td colspan=2>
    <div id=URField></div>
    </td>
    <td class=DataLabel>Overseas Address</td>
    <td><input type=checkbox name=oseasflg tabindex=6
         onclick='setAddrLine4(AddForm);'>
    </td>
    <td class=DataLabel><font color=red> QUICK REGISTRATION </font></td>
    <td><input type=checkbox name=quickreg tabindex=-1 value="1"
         onclick='clrMandatory(hidsname,hidgname,"%PATWEB89.05.019",
                               "%PATWEB89.05.020");'></td></tr>

<tr><td class=DataLabel>Title</td>
    <td><select title="Patient Title" name=ptmas001 id=ptmas001 tabindex=1>
        <option></option>
        %STANDARD.01.029
        </select></td>
    <td class=DataLabel>Address</td>
    <td><input type=text size=25 maxlength=25  tabindex=6
         name="ptmas008" title="Address Line 1" class=Mandatory 
         onchange="UpCase(this)"></td>
    <td class=DataLabel>Home Phone</td>
    <td><input type=text size=23 maxlength=20 name=ptmas013 
         title="Home Phone Number" tabindex=9></td></tr>

<tr><td class=DataLabel> Surname</td>
    <td><input type=text size=40 name=ptmas005 value="%PATWEB89.05.009"
         title="Patient Surname" maxlength=40 class=Mandatory
         tabindex=2 onblur="UpCase(this)"></td>
    <td class=DataLabel></td>
    <td><input type=text size=25 maxlength=25 name=ptmas009 tabindex=7
         title="Address Line 2" onchange="UpCase(this)"></td>
    <td class=DataLabel>Work Phone</td>
    <td><input type=text size=23 maxlength=20 name=ptmas014  tabindex=10
         title="Work Phone Number"></td></tr>

<tr id=PrefSurname style="display:none">
  <td class=DataLabel>Preferred Surname</td>
  <td><input type=text size=20 maxlength=20 name=pmpmi082
       title="Preferred Surname"
       tabindex=2 onchange="UpCase(this);"></td>
  <td>&nbsp;</td><td>&nbsp;</td>
  <td>&nbsp;</td><td>&nbsp;</td>
</tr>

<!--tr><td class=DataLabel>Given Names</td>
    <td><input type=text size=25 maxlength=25 value="PATWEB89.05.010"
        title="Patient Given Names" class=Mandatory
        name=ptmas006 tabindex=3 onblur="UpCase(this)"></td-->

<tr><td class=DataLabel id="givenNameLabel">Given Names</td>
    <td><input type=hidden name=ptmas006 title="Given Name"
         value="%PATWEB89.05.010">
        <input type=text size=42 maxlength=30 title="First Given Name" 
         tabindex=3 class="Mandatory AlphanumSpec3" name=pmpmi084 
         value="%PATWEB89.05.010" onchange="UpCase(this)"> </td>
    <td class=DataLabel> Suburb</td>
    <td><input type=text size=25 maxlength=25 name=ptmas010 
         title="Address Line 3" Class=Mandatory tabindex=8 
         value="%PATWEB89.05.015"
         onchange="LookupPostCode(AddForm.ptmas010.value);"></td>
    <td class=DataLabel>Mobile Phone</td>
    <td><input type=text size=23 maxlength=20 class=MobilePhone
         name=ptmsx039 title="Mobile Phone Number" tabindex=11></td></tr>

<tr><td class=DataLabel id="secondGivenNameLabel">Second Given Name</td>
    <td><input type=text size=42 maxlength=30 id="secondGivenName"
         title="Second Given Name" tabindex=4 class="AlphanumSpec3"
         name=pmpmi085 value="" onchange="UpCase(this);"></td>
    <td class=DataLabel><div id=AddressLine4H></div></td>
    <td><div id=AddressLine4></div></td>
    <td class=DataLabel>%STANDARD.01.035.Pn </td>
    <td><select name=pmpmi095 class="SelectBig" tabindex=11
         onchange="checkContactCorrespondence();">
        <option></option>
        %STANDARD.01.007.Pn
        </select></td></tr>

<tr id=PrefGivenName style="display:none">
  <td class=DataLabel>Preferred Given Name</td>
  <td><input type=text size=25 maxlength=25 name=pmpmi083
       title="Preferred Given Name"
       tabindex=4 onchange="UpCase(this);"></td>
  <td>&nbsp;</td><td>&nbsp;</td>
  <td>&nbsp;</td><td>&nbsp;</td>
</tr>

<tr><td class=DataLabel>%STANDARD.01.017.G </td>
    <td><select name="ptmas015" tabindex=4 class=Mandatory 
         title="%STANDARD.01.017.G " onchange="checkGenderInd(this);" >
         <option></option>
         %PATWEB89.05.086.099.061.9.1.19.3.H 
         </select></td>
    <td class=DataLabel>Post Code</td>
    <td><input type=text size=4 maxlength=4 name=ptmas012 title="Post Code" 
         Class=Mandatory tabindex=8 value="%PATWEB89.05.016" 
         onchange="LookupSuburb(ptmas012.value);checkOverseas();"></td>
    <td class=DataLabel>%STANDARD.01.035.Pr </td>
    <td><select name=pmpmi096 class="SelectBig" tabindex=11
         onchange="checkContactCorrespondence();">
        <option></option>
        %STANDARD.01.007.Pr
        </select></td></tr>

<tr><td class=DataLabel>Date of Birth</td>
    <td><input type=text size=12 name=ptmas017 title="Date of Birth"
         value="%PATWEB89.05.020" tabindex=5 class=Mandatory
        onblur="checkDate(this,'Date of Birth');" ></td></tr>

<tr><td class=HeadingCell colspan=6 width=100% align=center>
    PMI Details</td></tr>

<tr><td class=DataLabel>Marital Status</td>
    <td><select name=ptmas016 tabindex=12 class="select120"
         title="Marital Status">
        <option></option>
         %PATWEB89.05.069.2
        </select></td>
    <td></td><td></td>
    <td class=DataLabel></td>
<td><input type=hidden name=pmpmi067 value="%PATWEB89.01.867.0"></td></tr>

<tr><td class=DataLabel>Religion</td>
    <td><select  name=ptmas020 tabindex=13 class=select120>
        <option></option>
        %PATWEB89.05.023.2
        </select></td>
    <td class=DataLabel>Health Fund </td>
    <td><input type=hidden name="ptmas036" id=ptmas036>
        <input type=text size=25 name="funddesc" id=funddesc maxlength="30"
         readonly onblur="UpCase(this)"></td>
    <td class=DataLabel>Privacy Indicator</td>
    <td><select name=pmpmi066 class=select120 tabindex=28>
        <option></option>
        %STANDARD.01.007.PV
        </select></td></tr>

<tr><td class=DataLabel>Country of Birth</td>
    <td><select name="ptmas019" tabindex=14 class=select120>
        <option></option>
        </select></td>
    <td class=DataLabel>Health Fund Level </td>
    <td width=22%><input type=hidden name="ptmas037" id=ptmas037>
        <input type="text" size=15 maxlength=17 name="tabldesc" id=tabldesc
         readonly>
        <img src=../images/SearchIcon.gif class=Icon
         onclick="HealthFundSearchFrameNoFocus(ptmas036,funddesc,
                                               ptmas037,tabldesc);">
        <img src="../images/erase.gif" class=Icon
         onclick="clrHealthFund(ptmas036,funddesc,ptmas037,tabldesc);"></td>
    <td class=DataLabel>Local GP </td>
    <td width=20%><input type=hidden name=pmpmi059 id=pmpmi059>
        <input type=text readonly name=genpname id=genpname>
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="GPHCPSearchFrame(pmpmi059,genpname,genpprov,pmpmi060,
                  genpprac,pmpmi061,3)">
        <img src="../images/erase.gif" class=Icon
         onclick="clrFields(pmpmi059,genpname);"></td></tr>

<tr><td class=DataLabel>Indigenous Status</td>
    <td><select name=pmpmi065 tabindex=15 class=select120>
        <option></option>
        %STANDARD.01.007.VA
        </select></td>
    <td class=DataLabel>Member Number </td>
    <td><input type=text size=20 maxlength=19 name=ptmas038 tabindex=24></td>
    <td class=DataLabel>Practice</td>
    <td width=20%><input type=hidden name=pmpmi060 id=pmpmi060
         value="%PATWEB89.05.885.001">
        <input type=hidden name=pmpmi061 id=pmpmi061 value="%PATWEB89.05.861">
        <input type=hidden name=genpprov id=genpprov value="">
        <input type=text readonly name=genpprac id=genpprac
         value="%PATWEB89.05.885.005">
        <img src="../images/SearchIcon.gif" class=Icon
         onclick="GPHCGSearchFrame(pmpmi059,genpname,genpprov,pmpmi060,
                                   genpprac,pmpmi061)">
        <img src="../images/erase.gif" class=Icon 
         onclick="clrFields(pmpmi060,genpprac,pmpmi061,genpprov);"></td></tr>

<tr><td class=DataLabel>Interpreter Required</td>
    <td><select title="Interpreter Required" name=pmpmi001
        onchange="ShowSpan(this);" tabindex=17>
        <option value="0" selected>No</option>
        <option value="1">Yes</option>
        </select></td>
    <td><div id=divLangHed></div></td>
    <td><div id=divLangSel></div></td>
    <td class=DataLabel>Resident</td>
    <td><select name=ptmas021 tabindex=19>
         <option></option>
         %PATWEB89.05.024.2
        </select></td></tr>

<tr><td class=DataLabel>Medicare Number</td>
    <td><input type=text size=10 maxlength=10 tabindex=20 name=ptmas023
         id=ptmas023 onblur="checkMedicareWa();">
        <input type=text size=5 maxlength=2 name=ptmsx045 tabindex=21
         title="Medicare Reference Number"></td>
    <td class=DataLabel>Health Fund Contributor Name</td>
    <td><input type=text size=42 maxlength=40 name=pmpmi093 
         title="Health Fund Contributor Name" tabindex=26></td></tr>

<tr><td colspan=6 class=HeadingCell align=center > 
  <script type="text/javascript">URDesc();</script> Comments </td></tr>

<tr><td colspan=6 align=center>
      <textarea wrap=hard name=urcommnt rows=4 cols=70></textarea>
    </td></tr>

</table>

<table width=100% border=0>
<tr><td align=center>
    <input type=button value="Register" class="button" tabindex=47 
     name=RegisterButton onclick="clickRegisterButton();">
    <input type=button value="Cancel" class="button" tabindex=48
     onclick="history.go(-1);">
    </td></tr>
</table>

<div id=SelectHeading></div>
<div id=SelectLocation></div>

</form>

<span id=LanguageHed style="display:none">
Language
</span>

<span id=LanguageNoHead style="display:none">&nbsp;</span>

<span id=LanguageSel style="display:none;">
  <select name=pmpmi002 id=pmpmi002 class="select120 Mandatory" tabindex=18
   title="Preferred Language">
    <option></option>
  </select>
</span>
     
<span id=LanguageNul style="display:none;">
  <input type=hidden name=pmpmi002 id=pmpmi002 value="">
</span>

<script type="text/javascript">
   UsualPRFA="%PATWEB89.05.909"
</script>

<span id=AustStateH style="display:none">&nbsp;</span>

<span id=AustState style="display:none">
  <input type=text size=35 maxlength=35 name=ptmas011 id=ptmas011 
   title="Address Line 4" tabindex=8 onchange="UpCase(this);">
</span>

<span id=OseasCountryH style="display:none">Country</span>

<span id=OseasCountry style="display:none">
  <select name="ptmas011" id=ptmas011 tabindex=8 class="Mandatory"
   title="Country Address">
    <option></option>
    %PATWEB89.05.085.060
  </select>
</span>
