<meta name="TemplateVersion" content="V12.01.02">
<meta name="TemplateHome" content="wahealth">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<link rel="stylesheet" href="../html/postcode.css" type="text/css">
<script type="text/javascript" src="../js/IBA_Category_C_.js"></script>
<script type="text/javascript" src="../js/IBA_Category_LA.js"></script>
<script type="text/javascript" src="../js/AutoPostCode.js"></script>
<script type="text/javascript" src="../js/EmrRegistration.js"></script>
<script type="text/javascript" src="../js/emrweb0201102.js"></script>
<script type="text/javascript" src="../js/CustomMyhrConsent.js"></script>
<script type="text/javascript">
function ReadDocOnly(OptionNumber,OptionType,ReturnCode,ReturnName) {
  ReturnName.value="";
  if (isWhitespace(ReturnCode.value)) return;;
  var serverURL  = "../cgi-bin/patweb80.pbl?reportno=" + OptionNumber +
               "&returnfm=2" + "&valdtype=" + OptionType +
               "&valdcode=" + ReturnCode.value.replace(/ /g,"+")

  var returnValue = RSExecute(serverURL);

  if (returnValue.status==0) {
    ReturnValue=returnValue.return_value.split("|");
    ReturnName.value=trim(ReturnValue[0]); }
 else {
    ReturnCode.value="";
    ReturnCode.select();
    return false; }
}
// Copy of HCPSearchFrame without all clears that effect GPHCGSearchFrame //
function HCPSearchFrame(ReturnCode,ReturnName,ReturnProv,ReturnPrac,ReturnDesc,ReturnCntr) {
  DFrameStart()
  SearchType="" ;
  window.ReturnFunction="" ;
  for (var i=6; i < HCPSearchFrame.arguments.length; i++) {
    if (typeof(HCPSearchFrame.arguments[i]) == 'function') {
      window.ReturnFunction=HCPSearchFrame.arguments[i] }
    else {
      SearchType=HCPSearchFrame.arguments[i]
    } }

  window.ReturnCode=ReturnCode ;
  window.ReturnName=ReturnName ;
  window.ReturnProv=ReturnProv ;
  window.ReturnPrac=ReturnPrac ;
  window.ReturnDesc=ReturnDesc ;
  window.ReturnCntr=ReturnCntr ;
  document.getElementById('PopUpFrame').src="../lookups/HCPSearchFrame"+SearchType+".html"
  SearchFrameShow()
}
function init() {
  SetFields();
  InitPostCodes();
  SetCategoryC_(document.UpdateForm.ptmas018,HiddenFields.cob.value);
  ShowSpan(document.UpdateForm.pmpxi001);
  if (isWhitespace(top.menu.location.search)) { }
  else {
  PageLocation="?reportno=1&template=4" +
               "&urnumber=" + PatientURN.replace(/ /g,"+") +
               "&admissno=" + PatientVIS.replace(/ /g,"+") 
  if (top.content.location.search!=PageLocation) {
    if(!top.content.location.search.match(/regiflag/)) {
      top.content.location.href="emrweb02.pbl" + PageLocation }
    } 
  }
  checkReferred();
  CheckAmbType();
  CheckAccom();
}
function ShowSpan(showoption) {
  if (showoption.value=="1") {
    document.getElementById("LanguageBoxHeading").innerHTML=
    document.getElementById("LanguageHeading").innerHTML
    document.getElementById("LanguageBox").innerHTML=
    document.getElementById("LanguageSel").innerHTML
    SetCategoryLA(document.UpdateForm.pmpxi002,HiddenFields.pl1.value);
  } else {
    document.getElementById("LanguageBoxHeading").innerHTML=
    document.getElementById("LanguageHeadingNul").innerHTML
    document.getElementById("LanguageBox").innerHTML=
    document.getElementById("LanguageNul").innerHTML
  }
}

function valClaimCode() {
// Do not default the claim code if one has already been entered
  if(!isWhitespace(document.UpdateForm.deftclam.value)) {
    return;                      
  }
  validateCode(41,UpdateForm.urnumber,UpdateForm.claimc);
  for (var i =0 ; i < document.UpdateForm.emvis008.length; i++) {
    if (document.UpdateForm.claimc.value==
        trim(document.UpdateForm.emvis008.options[i].value.substr(0,3))){
          document.UpdateForm.emvis008.selectedIndex=i;
    }
  }
}
// Do VEMD Error 132 check
//   If Referred by is a 5 - Emergency department review from this hospital
//   then Type of visit must be either 2 - return visit-planned
//                                  or 4 - outpatient/outpatient clinic
//   AND vis versa
//   Do VEMD E142
//   Display warning if Type of visit is 10 - Dead on Arrival
//
function valEmrVisit() {
  if(document.UpdateForm.offdutyb!=undefined){
    if(document.UpdateForm.offdutyb.checked==true){
      alert("Error: Claim Type invalid for 'Off Duty' personnel.")
      return;
    }
  }
   checkSecondName(document.UpdateForm.ptcnusgn,document.UpdateForm.ptmas006,
                  document.UpdateForm.pmpxi084,document.UpdateForm.pmpxi085);

  validateSuspension(UpdateForm.urnumber,UpdateForm.emvis001,UpdateForm.datefrom,UpdateForm.dateto);

  if( UpdateForm.datefrom.value != "0" ){
         if(!confirm("Error : Patient has a Suspension record for period \n" +
               "\t" + UpdateForm.datefrom.value  + " - " + UpdateForm.dateto.value + "\n" +
               "\nWould you like to continue with the Registration?")) {
          return;
        }
  }

  i=document.UpdateForm.emvis061.selectedIndex;
  SrcInd=trim(document.UpdateForm.emvis061.options[i].value.substr(14,4));
  j=document.UpdateForm.emvis053.selectedIndex;
  TypInd=trim(document.UpdateForm.emvis053.options[j].value.substr(14,4));
  if (TypInd=="10") {
    if (!confirm("Warning: Patient is Dead on Arrival.")) {
      return;
    }
  }

  validateDemographicsConfirmedDate();

  if(!CheckValidGPAndPractice()) {
     return;
  }

  if (!ValMedicare01())
     { return; }
    if(!CheckValPostCode()) {
      return;
    }
  enableMedicare();

  if(p.prevhosp.checked==true){
    if (document.UpdateForm.prvhosdn.value!="1") {
      document.UpdateForm.redirect.value="patweb07.pbl?reportno=15&template=001"
      SetCookie("prevhospCookie",'2');
    }
  }

  p=document.UpdateForm;
  if(checkLastUpdate(p.urnumber,p.opendate,p.opentime)) {
    UpdatePage();
  }
}

function validateDemographicsConfirmedDate() {
  f = document.UpdateForm;
  if (f.ptcnavcd.value == "1") {
//alert(hasFormChanged());
    if (hasFormChanged()) {
      f.ptmas086.value = f.currdate.value;
    }
    return;
  }
  else {
    if (f.ptcnavcd.value == "2") {
      if (!isWhitespace(f.ptmas086.value)) {
        if (f.ptmas086.value != f.currdate.value ) {
          alert("Warning: Confirm Demographics date has not been updated");
          f.ptmas086.value =
          f.ptmas086.defaultValue;
        }
      }
    }
    return;
  }
}

function hasFormChanged() {
    var has_changed = false;
    var elements = getAllFormElements();

    for (var i = 0; i < elements.length; i++) {
        if (elements[i].type != 'hidden' &&
            elements[i].name != 'ptmas086' &&
//            elements[i].name != 'ptmas029' &&
            trim(elements[i].value) != trim(initial_values[i])) {
//alert(elements[i].name+"|"+trim(elements[i].value)+"|"+trim(initial_values[i]));
            has_changed = true;
            break;
        }
    }

    return has_changed;
}

var initial_values = new Array();

// Gets all form elements from the entire document.
function getAllFormElements() {
    // Return variable.
    var all_form_elements = Array();

    // The form.
    //var form_activity_report = document.getElementById('UpdateForm');
    var form_activity_report = document.forms["UpdateForm"];

    // Different types of form elements.
    var inputs = form_activity_report.getElementsByTagName('input');
    var textareas = form_activity_report.getElementsByTagName('textarea');
    var selects = form_activity_report.getElementsByTagName('select');

    // We do it this way because we want to return an Array, not a NodeList.
    var i;
    for (i = 0; i < inputs.length; i++) {
        all_form_elements.push(inputs[i]);
    }
    for (i = 0; i < textareas.length; i++) {
        all_form_elements.push(textareas[i]);
    }
    for (i = 0; i < selects.length; i++) {
        all_form_elements.push(selects[i]);
    }

    return all_form_elements;
}

function setAddrLine4(theForm) {
  if (theForm.oseasflg.checked==1) {
     document.getElementById("AddressLine4H").innerHTML=
     document.getElementById("OseasCountryH").innerHTML;
     document.getElementById("AddressLine4").innerHTML=
     document.getElementById("OseasCountry").innerHTML;
     if (trim(theForm.ptmas011.value)!="8888") {
         theForm.ptmas085.value="";
         theForm.ptmas011.value="8888";
     }
  } else {
     document.getElementById("AddressLine4H").innerHTML= 
     document.getElementById("AustStateH").innerHTML;
     document.getElementById("AddressLine4").innerHTML=
     document.getElementById("AustState").innerHTML;
     if (trim(theForm.ptmas011.value)=="8888") {
         theForm.ptmas085.value="";
         theForm.ptmas011.value="";
     }
  }
  state = theForm.ptmas085;
}
function SetPostCode01() {
 suburb   = document.UpdateForm.ptmas010;
 state    = document.UpdateForm.ptmas085;
 postcode = document.UpdateForm.ptmas011;
 if (document.UpdateForm.oseasflg!=undefined) {
    if (trim(postcode.value)=="8888") {
       document.UpdateForm.oseasflg.checked=true;
    } else {
       document.UpdateForm.oseasflg.checked=false;
    }
    setAddrLine4(UpdateForm)
 }
}
function showFundingSource() {
  i=document.UpdateForm.emvis008.selectedIndex;
  ind=document.UpdateForm.emvis008.options[i].value.substring(3,4)
  if (ind=="A") {
    document.getElementById("FundingHeading").innerHTML=
    document.getElementById("offdutyhd").innerHTML;
    document.getElementById("FundingId").innerHTML=
    document.getElementById("offdutyid").innerHTML;
  } else {
    if (ind=="P") {
      document.getElementById("FundingHeading").innerHTML=
      document.getElementById("fundinghd").innerHTML;
      document.getElementById("FundingId").innerHTML=
      document.getElementById("fundingidshown").innerHTML;
      document.getElementById("pmsvx141").className="Mandatory";
    } else {
      document.getElementById("FundingHeading").innerHTML="";
      document.getElementById("FundingId").innerHTML=
      document.getElementById("fundingidblank").innerHTML;;
    }
  }
}
function displayDisasterID() {
  p=document.UpdateForm
  if (!isWhitespace(document.UpdateForm.dispt001.value)) {
    document.getElementById("disasteridnumbertitleDIV").innerHTML=
    document.getElementById("disasteridnumbertitleSPAN").innerHTML;
    document.getElementById("disasteridnumberDIV").innerHTML=
    document.getElementById("disasteridnumberSPAN").innerHTML;
  } else {
    document.getElementById("disasteridnumbertitleDIV").innerHTML="";
    document.getElementById("disasteridnumberDIV").innerHTML="";
  }

  if (!isWhitespace(document.getElementById("disasteridnumberDIV").innerHTML)) {
    var serverURL   = "../cgi-bin/patweb80.pbl?reportno=98" +
                    "&valdcode=" + UpdateForm.urnumber.value.replace(/ /g,"+") +
                    UpdateForm.dispt001.value.replace(/ /g,"+");
    var returnValue = RSExecute(serverURL);
    if (returnValue.status==0) {
      ReturnValue=returnValue.return_value.split("|");
      if (!isWhitespace(ReturnValue[0])) {
        p.dispt002.value=ReturnValue;
        p.dispt002.className="Readonly";
        p.dispt002.readOnly=true;
      }
    }
  }
}
function defaultDisasterCode() {
  if (document.UpdateForm.urnumber.value=="       0") {
     document.UpdateForm.dispt001.disabled=true;
     return;
  }

  if (!isWhitespace(document.UpdateForm.disacode.value)) {
  for (var i =0 ; i < document.UpdateForm.dispt001.length; i++) {
     if (document.UpdateForm.dispt001.options[i].value==
         document.UpdateForm.disacode.value) {
         document.UpdateForm.dispt001.selectedIndex=i
     }
    }
  }

  displayDisasterID();

  if (!isWhitespace(document.UpdateForm.dispt001.value)) {
    document.UpdateForm.dispt001.className = "Readonly";
    document.UpdateForm.dispt001.onfocus =
    function () {this.defaultIndex=this.selectedIndex};
    document.UpdateForm.dispt001.onchange =
    function () {this.selectedIndex=this.defaultIndex};
  }

}
function checkMedRef() {
  if((!isWhitespace(UpdateForm.ptmas022.value)) &&
     (isWhitespace(UpdateForm.ptmsx048.value))) {
     if (!confirm("WARNING: Medicare reference Number is required field. \n" +
             "Click OK to enter it now, or CANCEL to return to the " +
             "medicare number field")) {
         UpdateForm.ptmas022.focus();
         return;
     } else {
         UpdateForm.ptmsx048.focus();
         return;
     }
  }
  checkRefNumber(UpdateForm.ptmsx048);
}
function checkRefNumber(ref) {
  if (isWhitespace(ref.value)) { return true; }

  chknum=ref.value - 0; 
  if (chknum > 0 && chknum <= 9) {
     return; }

  if (chknum == 0 ) {
    alert(ref.title + " must be greater than 0 and less than 9");
    ref.focus();
  } else {
    alert(ref.title + " must be numeric");
    ref.focus();
  }
}
function checkMedicareWa() {
  if(isWhitespace(UpdateForm.ptmas022.value)) {
    UpdateForm.ptmsx048.value="";
    UpdateForm.ptmsx048.disabled=true;
    UpdateForm.ptmsx048.className="ReadOnly";
    return;
  }
  if(checkMedicare(UpdateForm.ptmas022,UpdateForm.pmpxi016)) {
    UpdateForm.ptmsx048.disabled=false;
    UpdateForm.ptmsx048.className="Mandatory";
    UpdateForm.ptmsx048.focus();
  }
}
function enableMedicare() {
  if(isWhitespace(UpdateForm.ptmas022.value)) {
    UpdateForm.ptmsx048.disabled=false;
    UpdateForm.ptmsx048.value="";
  }
}
function SetFocus() {
  document.UpdateForm.ptmas001.focus();
}
function checkOverseas() {
  if (trim(document.UpdateForm.ptmas011.value)=="8888") {
    document.UpdateForm.oseasflg.checked=true;
  } else {
    document.UpdateForm.oseasflg.checked=false;
  }
  setAddrLine4(UpdateForm);
}
function CancelButton () {
  if (top.TogglePanel==null) {
    fnPatientLink(PatientLinks.urnumber.value,PatientLinks.admissno.value);
  } else {
    top.TogglePanel();
  }
}
function MandatoryGP() {
  if(isWhitespace(document.UpdateForm.pmpxi059.value) &&
     isWhitespace(document.UpdateForm.pmpxi060.value)) {
     document.UpdateForm.genpname.className="Mandatory";
     document.UpdateForm.genpprac.className="Mandatory";
     return;
  }
  if(!isWhitespace(document.UpdateForm.pmpxi059.value)) {
    document.UpdateForm.genpname.className="Mandatory";
    document.UpdateForm.genpprac.className="";
    return;
  }
  if(!isWhitespace(document.UpdateForm.pmpxi060.value)) {
    document.UpdateForm.genpname.className="";
    document.UpdateForm.genpprac.className="Mandatory";
    return;
  }
}

function displayPrev(){
  p=document.UpdateForm
  if(!isWhitespace(p.dispprev.value)&&p.dispprev.value!="0   "){
    document.getElementById('prevhospxx').style.display="";
    document.getElementById('prevhosp').checked=false;
  } else {
    document.getElementById('prevhospxx').style.display="none";
    document.getElementById('prevhosp').checked="";
  }
}
function getprevhospdoneCookie() {
  document.UpdateForm.prvhosdn.value=GetCookieData("prevhospdoneCookie");
  ExpireCookiePath("prevhospdoneCookie");
}

function UpdatePage() {
  //determine if the current health fund table active or not
  if (!isWhitespace(document.UpdateForm.emvis017.value)) {
    Hfund = document.UpdateForm.emvis017;
    Hfunddesc = document.UpdateForm.funddesc;
    Htable = document.UpdateForm.emvis018;
    Htabledesc = document.UpdateForm.tabldesc;
    saveHfndDsc = document.UpdateForm.funddesc.value;
    saveHtblDsc = document.UpdateForm.tabldesc.value;

    if  (!validateHftable(20,Hfund,Htable,Hfunddesc,Htabledesc)) {
      ans=confirm("Select another active health fund table? ");
      if (ans==true) {
        document.UpdateForm.funddesc.value = saveHfndDsc;
        document.UpdateForm.tabldesc.value = saveHtblDsc;
        return;
      }
    }
  }

  if (validateMandatory(UpdateForm)) {
    if (document.UpdateForm.preaddset.value==1) {
      ans=confirm("Do you want to update the Previous Address details?");
      if (ans) {
        document.UpdateForm.prevaddr.value="1";
      }
      document.UpdateForm.preaddset.value=1;
    }
    UpdInterpreter();
//
    if (document.UpdateForm.aliasset.value==1) {
      ans=confirm("Save as an Alias ?");
      if (ans) {
        document.UpdateForm.savealia.value="1";
        document.UpdateForm.aliassts.value="S";
      }
      else {
        document.UpdateForm.aliassts.value="N";
      }
      document.UpdateForm.aliasset.value="1";
    }
    setRedirectAdm();
    document.UpdateForm.UpdateButton.disabled=true;
    document.UpdateForm.formactn.value="C1"
    document.UpdateForm.updttype.value="REGIS"
    document.UpdateForm.target="PopUpFrame";

// this checks to see if it is being used outside the MAPVIEW
    if (isWhitespace(top.menu.location.search)) {
      document.UpdateForm.nextpage.value=9
    }

    if(p.prevhosp.checked==true){
      if (document.UpdateForm.prvhosdn.value!="1") {
        document.UpdateForm.redirect.value="patweb07.pbl?reportno=15&template=001"
      if(document.UpdateForm.pmext049.value == "1") {
        document.UpdateForm.redirect.value+= "&mvithmva=1"+
        "&chckcomp="+document.UpdateForm.emvis008.value.substr(3,1);
      }
      if(document.UpdateForm.emclcin1.value == "M") {
        document.UpdateForm.redirect.value+= "&mvitrdir=1"+
        "&chckcomp="+document.UpdateForm.emvis008.value.substr(3,1);
      }
        SetCookie("prevhospCookie",'2');
      }
    } else {
      if(document.UpdateForm.pmext049.value == "1" ||
         document.UpdateForm.emclcin1.value == "M") {
        document.UpdateForm.redirect.value = "patweb89.pbl?reportno=01&" +
        "template=342&mvmedrec=" + document.UpdateForm.mvmedrec.value+
        "&chckcomp="+document.UpdateForm.emvis008.value.substr(3,1);
        if (document.UpdateForm.pmext049.value == 1) {
          document.UpdateForm.redirect.value+= "&pmext049=" +
          document.UpdateForm.pmext049.value;
        }
      }
    }
    setTimeout('document.UpdateForm.UpdateButton.disabled=false',1000);
    
    if (trim(document.UpdateForm.pmsvx125.value) != ""){
      document.UpdateForm.pmpxi110.value = document.UpdateForm.pmsvx125.value;
    }
    document.UpdateForm.submit()
  }
}

function valAgeMaritalStatus() {
  p=document.UpdateForm
  var serverURL = "../cgi-bin/comweb80.pbl?reportno=77" +
                  "&valddobe="+p.ptmas016.value.replace(/ /g,"+") +
                  "&valdcod2="+p.ptmas015.value.replace(/ /g,"+") +
                  "&valddate="+p.currdate.value.replace(/ /g,"+")
  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0){
    ReturnValue=returnValue.return_value.split("|");
    if((parseInt(ReturnValue[0])<=parseInt(ReturnValue[1]))&&
       (parseInt(ReturnValue[2])!="1")){
      alert("Please check marital status for age of this patient. ");
    }
    return true;
  } else {
    return false;
  }
}

function CheckValidGPAndPractice(){

  p=document.UpdateForm;
  var check=false;

  if(isWhitespace(trim(document.UpdateForm.pmpxi059.value)) &&
        isWhitespace(trim(document.UpdateForm.pmpxi060.value))){
    return true;
  }

  var serverURL = "../cgi-bin/comweb81.pbl?reportno=38" +
                  "&valddctr="+p.pmpxi059.value.replace(/ /g,"+") +
                  "&valdcode="+p.pmpxi060.value.replace(/ /g,"+")
  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0){
    ReturnValue=returnValue.return_value;
    switch(ReturnValue){
      case "0":
        check=true;
        break;
      case "1":
        alert("The Local GP is inactive. " +
              "Please ensure a valid GP is recorded.");
        break;
      case "2":
        alert("The Local GP has an End Date prior to today. " +
              "Please ensure a valid GP is recorded.");
        break;
      case "3":
        alert("The GP Practice is inactive. Please ensure a valid GP Practice "
          + "is recorded.");
        break;
      case "4":
        alert("The GP Practice has a Dissolved Date prior to today. " +
            "Please ensure a valid GP Practice is recorded.");
        break;
      case "5":
        alert("The GP is no longer at this Practice. " +
          "Please ensure a valid GP and Practice are recorded.");
        break;
      case "6":
        alert("The GP is no longer at this Practice. "+
            "Please ensure a valid GP and Practice are recorded.");
        break;
    }
  }
  return check;
}

function checkContactCorrespondence() {

  if (document.UpdateForm.pmpxi095.value.substring(3,4)=='E') {
     document.UpdateForm.pmpxi005.className="Mandatory";
  } else {
    if (document.UpdateForm.pmpxi096.value.substring(3,4)=='E') {
       document.UpdateForm.pmpxi005.className="Mandatory";
    } else {
       document.UpdateForm.pmpxi005.className="";
    }
  }

  if (document.UpdateForm.pmpxi095.value.substring(3,4)=='H') {
     document.UpdateForm.ptmas012.className="Mandatory";
  } else {
     document.UpdateForm.ptmas012.className="";
  }

  if (document.UpdateForm.pmpxi095.value.substring(3,4)=='M') {
     document.UpdateForm.ptmsx042.className="Mandatory";
  } else {
    if (document.UpdateForm.pmpxi095.value.substring(3,4)=='S') {
       document.UpdateForm.ptmsx042.className="Mandatory";
    } else {
       document.UpdateForm.ptmsx042.className="";
    }
  }

  if (document.UpdateForm.pmpxi095.value.substring(3,4)=='W') {
     document.UpdateForm.ptmas013.className="Mandatory";
  } else {
     document.UpdateForm.ptmas013.className="";
  }

}
function displayReferralFields() {
//Display referral fields only if Eclipse Store and Forward parameter is
//turned on and the Source of Referral (cat em) has indicator4 = R
  if (document.getElementById('ptcnuesf') != null &&
      document.getElementById('ptcnuesf').value == "1" &&
      document.UpdateForm.emvis061.value.substr(6,1) == "R") {
      document.getElementById("emvis174TitleDIV").innerHTML = 
      document.getElementById("emvis174TitleSPAN").innerHTML;
//    emvis175TitleDIV.innerHTML = emvis175TitleSPAN.innerHTML;
      document.getElementById("emvis176TitleDIV").innerHTML = 
      document.getElementById("emvis176TitleSPAN").innerHTML;
      document.getElementById("emvis174FieldDIV").innerHTML = 
      document.getElementById("emvis174FieldSPAN").innerHTML;
//    emvis175FieldDIV.innerHTML = emvis175FieldSPAN.innerHTML;
      document.getElementById("emvis176FieldDIV").innerHTML = 
      document.getElementById("emvis176FieldSPAN").innerHTML;
      document.getElementById("emvis020TitleDIV").innerHTML = 
      document.getElementById("emvis020TitleSPAN").innerHTML;
      document.getElementById("emvis020FieldDIV").innerHTML = 
      document.getElementById("emvis020FieldSPAN").innerHTML;

      displaycatRF();
  }
  else {
       document.getElementById("emvis174TitleDIV").innerHTML = "";
       document.getElementById("emvis175TitleDIV").innerHTML = "";
       document.getElementById("emvis176TitleDIV").innerHTML = "";
       document.getElementById("emvis174FieldDIV").innerHTML = "";
       document.getElementById("emvis175FieldDIV").innerHTML = "";
       document.getElementById("emvis176FieldDIV").innerHTML = "";
       document.getElementById("emvis020TitleDIV").innerHTML = "";
       document.getElementById("emvis020FieldDIV").innerHTML = "";
  }
}
function displaycatRF() {
    if (document.UpdateForm.emvis174.value.substr(3,1) == "N") {
      document.getElementById("emvis175TitleDIV").innerHTML = 
      document.getElementById("emvis175TitleSPAN").innerHTML;
      document.getElementById("emvis175FieldDIV").innerHTML = 
      document.getElementById("emvis175FieldSPAN").innerHTML;
    } else {
      document.getElementById("emvis175TitleDIV").innerHTML = "";
      document.getElementById("emvis175FieldDIV").innerHTML = "";
    }
}
function EthnicityLanguageSpokenAtHome() {
  f = document.UpdateForm;
  if (VariableNameExists('Ethnicity1Mandatory')) {
    if (Ethnicity1Mandatory == true) {
      AddClassName(f.pmpxi139,"Mandatory");
    }
  }
  if (VariableNameExists('HomeLanguage1Mandatory')) {
    if (HomeLanguage1Mandatory == true) {
      AddClassName(f.pmpxi141,"Mandatory");
    }
  }
}
</script>
%START.OF.PAGE
<body onLoad="PageLoad(event);valClaimCode();SetPostCode01();
              showFundingSource();
              ChkIdentifyGenderPronounTitle(document.UpdateForm);
              defaultDisasterCode();
              turnOnSecondGivenName(document.UpdateForm.ptcnusgn.value,
                                    document.UpdateForm.ptmas006,
                                    document.UpdateForm.pmpxi084,
                                    document.UpdateForm.pmpxi085);SetFocus();
              valAgeMaritalStatus();SetFocus();
              displayPrev();getprevhospdoneCookie();
              checkContactCorrespondence();displayReferralFields();
              EthnicityLanguageSpokenAtHome();
              displayPrefNames(document.UpdateForm.ptcnnmpr.value);">
<div id=PatientHeading></div>
<script type="text/javascript">
PatientURN="%EMRWEB02.01.003";
PatientVIS="%EMRWEB02.01.081";
PatientNAM="%EMRWEB02.01.002";
PatientSTA="%EMRWEB02.01.086.078";
PatientALT="%EMRWEB02.01.084";
PatientSEX="%EMRWEB02.01.019";
PatientDOB="%EMRWEB02.01.020";
PatientAGE="%EMRWEB02.01.021";
PatientLOC="%EMRWEB02.01.083";
PatientPRI="%EMRWEB02.01.086.066.1";
PatientUNT="%EMRWEB02.01.066.0";
PatientIND="%EMRWEB02.01.086.091";
GpCOD="%EMRWEB02.01.086.084.001";
GpNAM="%EMRWEB02.01.086.084.081";
GpPRAC="%EMRWEB02.01.086.085.001";
GpPRACCNT="%EMRWEB02.01.086.085.002";
GpPRACNAM="%EMRWEB02.01.086.085.005";
PatientARR="%EMRWEB02.01.101.0 %EMRWEB02.01.102";
PatientSEE="%EMRWEB02.01.130.0 %EMRWEB02.01.131";
PatientTRI="%EMRWEB02.01.103.3";
PatientECLC="%EMRWEB02.01.484.1";
PatientCLH="%STANDARD.01.017.CL";
PatientEHFT="%EMRWEB02.01.485";
InsertEmergencyHeader()
</script>
<div id=PatientMenu></div>
<div id=PageBodySection>

<form name=UpdateForm action="emrweb02.pbl" method=post style="margin:0">
  <input type=hidden name=reportno value="01">
  <input type=hidden name=updatety value="4">
  <input type=hidden name=opendate value="%STANDARD.01.015">
  <input type=hidden name=opentime value="%STANDARD.01.016">
  <input type=hidden name=wahealth value="1">
  <input type=hidden name=formactn value="C1">
  <input type=hidden name=updttype value="TRIAG">
  <input type=hidden name=updateky value="%EMRWEB02.01.404">
  <input type=hidden name=admissno value="%EMRWEB02.01.146">
  <input type=hidden name=urnumber value="%EMRWEB02.01.003">
  <input type=hidden name=emvis118 value="%EMRWEB02.01.003">
  <input type=hidden name=emvis147>
  <input type=hidden name=dummyadm><input type=hidden name=fpatname>
  <input type=hidden name=chckname><input type=hidden name=redirflg value="1">
  <input type=hidden name=mvmedrec>
  <input type=hidden name=datefrom>
  <input type=hidden name=dateto>
  <input type=hidden name=dontchec value=1>
  <input type=hidden name=nextpage value="11"><input type=hidden name=redirect>
  <input type=hidden name=ptcnueoc value="%EMRWEB02.01.454">
  <input type=hidden name=ptcnxcom value="%STANDARD.01.025.116.222.0.1">
  <input type=hidden name="savealia" value="0">
  <input type=hidden name="aliasset" value="0">
  <input type=hidden name="prevaddr" value="0">
  <input type=hidden name="preaddset" value="0">
  <input type=hidden name="claimc">
  <input type=hidden name=deftclam value="%EMRWEB02.01.108.1">
  <input type=hidden name=ptcnhdps id="ptcnhdps"
         value="%STANDARD.01.025.080.250.1.1">
  <input type=hidden name="ptcnusgn"  value="%STANDARD.01.025.114.219.0.1">
  <input type=hidden name="disacode" value="%EMRWEB02.01.498">
  <input type=hidden name=confdemo value="0">
  <input type=hidden name=dispprev value="%EMRWEB02.01.535">
  <input type=hidden name=prvhosdn value="">
  <input type=hidden name=currdate value="%STANDARD.01.015">
  <input type=hidden name=ptcnnmpr value="%STANDARD.01.025.128.226.1.1">
  <input type=hidden name=emvis096 value="">
  <input type=hidden name="stfrefin" id="stfrefin"
         value="%EMRWEB02.01.919">
  <input type=hidden name=dummx value="">
  <input type=hidden name="ptcnuesf" id="ptcnuesf"
         value="%STANDARD.01.025.124.222.0.1">
  <input type=hidden name=multbrth value="%EMRWEB02.01.939"> 
  <input type=hidden name=ptcnavcd value="%STANDARD.01.025.125.183.0.1">
  <input type=hidden name=sjogaudt value="1">
  <input type=hidden name=aliassts value="">
  <input type=hidden name=emclcin1 value="">
  <input type=hidden name=pmpxi110 value="%EMRWEB02.01.699.046">
  <table align=center width=100% border=0 cellspacing=0 cellpadding=0>
  <tr>
    <td class=HeadingCell colspan=6 align=center>Demographics Details</td>
  </tr>
  <tr>
    <td class=DataLabel>Title </td>
    <td><select title="Title" name=ptmas001 tabindex=1 id=ptmas001>
       <option></option>
       %STANDARD.01.029
       </select>
    </td>
    <td class=DataLabel>Overseas Address</td>
    <td><input type=checkbox name=oseasflg tabindex=6
         onclick="setAddrLine4(UpdateForm);">
    </td>
    <td class=DataLabel>Home Phone</td>
    <td><input type="text" size="23" maxlength="20" name="ptmas012"
           title="Home Phone" value="%EMRWEB02.01.017" tabindex=11
           onchange="checkAdd01();">
    </td>
  </tr>
  <tr>
    <td class=DataLabel>Surname </td>
    <td><input type=text size=40 maxlength=40 name=ptmas005 
	      class="Mandatory AlphanumSpec3"
          title="Surname" value="%EMRWEB02.01.009" tabindex=2
          onchange="UpCase(this);checkAlias01();">
    </td>
    <td class=DataLabel>Address</td>
    <td><input type="text" size="25" maxlength="35" name="ptmas008" tabindex=6
               class="Mandatory" title="Address" value="%EMRWEB02.01.012"
               onchange="checkAdd01();UpCase(this);">
    </td>
    <td class=DataLabel>Work Phone</td>
    <td><input type="text" size="23" maxlength="20" name="ptmas013"
          title="Work Phone" value="%EMRWEB02.01.018" tabindex=12
          onchange="checkAdd01();">
    </td>
  </tr>

  <tr id=PrefSurname style="display:none">
  <td class=DataLabel>Preferred Surname</td>
  <td><input type=text size=20 maxlength=20 name=pmpxi082
       title="Preferred Surname" value="%EMRWEB02.01.697"
       tabindex=2 onchange="UpCase(this);"></td>
  <td>&nbsp;</td><td>&nbsp;</td>
  <td>&nbsp;</td><td>&nbsp;</td>
  </tr>

  <tr><td class=DataLabel id="givenNameLabel">Given Names</td>
      <td><input type=hidden name=ptmas006 title="Given Name"
           value="%EMRWEB02.01.010">
          <input type=text size=30 maxlength=40
           title="First Given Name" class="Mandatory AlphanumSpec3" tabindex=3
           name=pmpxi084 value="%EMRWEB02.01.699.001"
           onchange="checkAlias01();UpCase(this);">
      </td>
      <td class=DataLabel></td>
      <td><input type="text" size="25" maxlength="35" name="ptmas009"
           value="%EMRWEB02.01.013" tabindex=7
           onchange="checkAdd01();UpCase(this);"></td>
      <td class=DataLabel>Mobile Phone</td>
      <td><input type="text" size="23" maxlength="20" name="ptmsx042"
           title="Mob. Phone" value="%EMRWEB02.01.343" tabindex=13
           class=MobilePhone onchange="checkAdd01();"></td></tr>

 <tr>

<td class=DataLabel id="secondGivenNameLabel">Second Given Name</td>
    <td><input type=text size=30 maxlength=40 id="secondGivenName"
        title="Second Given Name" tabindex=4 class="AlphanumSpec3"
        name=pmpxi085 value="%EMRWEB02.01.699.002"
        onchange="checkAlias01();UpCase(this);">
    </td>
     <td class=DataLabel>Suburb</td>
     <td><input type="text" size="25" maxlength="35" name="ptmas010"
          class=Mandatory title="Suburb" value="%EMRWEB02.01.014" tabindex=8
          onchange="LookupPostCode(UpdateForm.ptmas010.value);checkAdd01();">
     </td>
       <td class=DataLabel>E-Mail</td>
    <td><input type=text size=23 maxlength=80 onchange="checkAdd01();"
        name=pmpxi005 title="E-Mail" tabindex=13
        value="%EMRWEB02.01.605" ></td>
</tr>

<tr id=PrefGivenName style="display:none">
  <td class=DataLabel>Preferred Given Name</td>
  <td><input type=text size=25 maxlength=25 name=pmpxi083
       title="Preferred Given Name" value="%EMRWEB02.01.698"
       tabindex=4 onchange="UpCase(this);"></td>
  <td>&nbsp;</td><td>&nbsp;</td>
  <td>&nbsp;</td><td>&nbsp;</td>
</tr>

<tr>
<td class=DataLabel>%STANDARD.01.017.G </td>
     <td><select name="ptmas014" size="1" tabindex=5 class=Mandatory 
          title="%STANDARD.01.017.G "
          onchange="ChkIdentifyGenderPronounTitle(document.UpdateForm);">
         <option></option>
           %EMRWEB02.01.086.099.061.9.1.19.3.H
         </select></td>
    <td><div id=AddressLine4H></div></td>
    <td><div id=AddressLine4></div></td>

    <td class=DataLabel>%STANDARD.01.035.Pn </td>
    <td><select name=pmpxi095 class="SelectBig" tabindex=14
         onchange="checkContactCorrespondence();">
        <option></option>
         %EMRWEB02.01.699. 12.2
        </select></td>
</tr>
<tr>
<td class=DataLabel>Date of Birth</td>
     <td><input type="text" size="12" name="ptmas016" class="Mandatory PastDate"
          title="Date of Birth" value="%EMRWEB02.01.020" tabindex=5
          onchange="valAgeMaritalStatus();">
         <img notab src="../images/DateLookup.gif" class="Icon"
          alt="Show Calendar" date="UpdateForm.ptmas016">
         <img notab src="../images/DateTimeStamp.gif" class="Icon"
          alt="Current" date="UpdateForm.ptmas016">
     </td>
     <td class=DataLabel>Post Code</td>
     <td><input type="text" size="4" maxlength="4" name="ptmas011"
         class=Mandatory title="Post Code" value="%EMRWEB02.01.016" tabindex=10
         onchange="checkOverseas();LookupSuburb(UpdateForm.ptmas011.value)">
    </td>
    <td class=DataLabel>%STANDARD.01.035.Pr </td>
    <td><select name=pmpxi096 class="SelectBig" tabindex=15
         onchange="checkContactCorrespondence();">
        <option></option>
         %EMRWEB02.01.699. 13.2
        </select></td>
</tr>

<tr>
    <td><div id=MultBirthLblSpan></div></td>
    <td><div id=MultBirthTxtSpan></div></td>
    <td></td>
    <td></td>
    <td class=DataLabel><font color=red>Demographics Confirmed Date</font></td>
    <td><input type="text" class="PastDate" name="ptmas086"
       title="Demographics Confirmed Date" tabindex=16
       onblur="checkDate(this,this.title);document.UpdateForm.confdemo.value=1;"
       value="%EMRWEB02.01.085.059">
        <img notab src="../images/DateTimeStamp.gif"
         class=Icon onclick="SetCurrentDateTime(UpdateForm.ptmas086,null);
                             CheckValidGPAndPractice();" />
          </td>
  </tr>

<tr id=GenderExtra>
  <td><div id=IdenGenLbl></div></td>
  <td><div id=IdenGenDetail></div></td>
  <td><div id=IdenProLbl></div></td>
  <td><div id=IdenProDetail></div></td>
</tr>

<tr><td class=HeadingCell colspan=6 align=center>
     PMI Details </td></tr>
<tr><td class=DataLabel>Marital Status</td>
    <td><select  name=ptmas015 tabindex=16 class=Mandatory select120
         title="Marital Status" onblur="valAgeMaritalStatus();">
        <option></option>
         %EMRWEB02.01.069.2
        </select></td>
    <td class=DataLabel>Medicare Number</td>
    <td><input type=text size=12 maxlength=50 name=ptmas022 tabindex=22
        onblur="checkMedicareWa(UpdateForm.ptmas022,UpdateForm.pmpxi016);" 
        value="%EMRWEB02.01.027">
        <input type=text size=1 maxlength=1 name=ptmsx048 tabindex=22
         onblur="checkMedRef();"
         value="%EMRWEB02.01.349" title="Medicare Reference Number"></td>
    <td></td>
    <td><input type=hidden name=pmpxi067 value="%EMRWEB02.01.667.0"></td>
    </tr>

<tr><td class=DataLabel>Religion</td>
      <td><select select120 name=ptmas019 tabindex=16 
           title="Religion">
        <option></option>
        %EMRWEB02.01.023.2
        </select></td>
    <td class=DataLabel>Valid to</td>
    <td><input type=text size=12 name=pmpxi016 title="Valid to"
         value="%EMRWEB02.01.616" tabindex=23
       onblur="checkDateSV(this,'Valid to');" ></td>
    <td class=DataLabel>Privacy Indicator</td>
    <td><select name=pmpxi066 class=select120 tabindex=27>
        <option></option>
         %EMRWEB02.01.666.2
        </select></td></tr>

  <tr><td class=DataLabel>Country of Birth</td>
      <td><select class="Mandatory SelectMed" name="ptmas018" tabindex=16
           title="Country of Birth">
          <option></option>
          </select>
      </td>
    <td class=DataLabel>Health Fund </td>
    <td><input type=hidden name=emvis017 value="%EMRWEB02.01.040.0">
        <input type=text size=31 name="funddesc" maxlength="30" notab
         readonly value="%EMRWEB02.01.040.1" ></td>
    <td class=DataLabel>Local GP </td>
    <td><input type=hidden name=pmpxi059 value="%EMRWEB02.01.684.001">
        <input type=text readonly name=genpname title="Local GP"
         value="%EMRWEB02.01.684.081">
        <img src="../images/SearchIcon.gif" class=Icon tabindex=28
         onclick="GPHCPSearchFrame(UpdateForm.pmpxi059,UpdateForm.genpname,
                  UpdateForm.genpprov,UpdateForm.pmpxi060,
                  UpdateForm.genpprac,UpdateForm.pmpxi061,3,MandatoryGP);">
       <img src="../images/erase.gif" class=Icon
        onclick="clrFields(UpdateForm.pmpxi059,UpdateForm.genpname);
                 MandatoryGP();">
    </td>
    </tr>

  <tr><td class=DataLabel>Indigenous Status</td>
      <td><select class="Mandatory SelectMed" name=pmpxi065 tabindex=17
           title="Indigenous Status">
          <option></option>
          %EMRWEB02.01.665.2
          </select></td>
    <td class=DataLabel>Health Fund Level</td>
    <td width=22%><input type=hidden name=emvis018
        value="%EMRWEB02.01.041.0" >
        <input type="text" size=15 maxlength=22 name="tabldesc" notab
         readonly value="%EMRWEB02.01.041.1">
        <img src=../images/SearchIcon.gif class=Icon tabindex=24
        onclick="HealthFundSearchFrameNoFocus(UpdateForm.emvis017,
                UpdateForm.funddesc,UpdateForm.emvis018,UpdateForm.tabldesc);">
        <img src="../images/erase.gif" class=Icon
          onclick="clrDoc(UpdateForm.funddesc,UpdateForm.tabldesc);
                   clrDoc(UpdateForm.emvis017,UpdateForm.emvis018);"></td>
    <td class=DataLabel>Practice</td>
    <td ><input type=hidden name=pmpxi060 value="%EMRWEB02.01.685.001">
        <input type=text readonly name=genpprac value="%EMRWEB02.01.685.005"
         title="Practice">
        <input type=hidden name=pmpxi061 value="%EMRWEB02.01.661">
        <input type=hidden name=genpprov value="">
        <img src="../images/SearchIcon.gif" class=Icon tabindex=29
         onclick="GPHCGSearchFrame(UpdateForm.pmpxi059,UpdateForm.genpname,
                  UpdateForm.genpprov,UpdateForm.pmpxi060,
                  UpdateForm.genpprac,UpdateForm.pmpxi061,MandatoryGP)">
       <img src="../images/erase.gif" class=Icon
       onclick="clrFields(UpdateForm.pmpxi060,UpdateForm.genpprac,
                UpdateForm.pmpxi061,UpdateForm.genpprov);MandatoryGP();">
    </td>
    </tr>  

<tr><td class=DataLabel>Resident</td>
    <td><select name=ptmas020 tabindex=18 class=Mandatory title="Resident"
         onchange="CheckAccom();">
         <option></option>
         %EMRWEB02.01.024.2
        </select></td>
      <td class=DataLabel> Member Number </td>
      <td><input type=text size=20 maxlength=19 name=emvis124
           value="%EMRWEB02.01.042" tabindex=24></td>
        <td class=DataLabel>Folder Selection</td>
    <td><select name=pmpxi077 tabindex=30 title="Folder Selection">
         <option></option>
         %EMRWEB02.01.679.2
         </select></td>
    </tr>

  <tr><td class=DataLabel>Interpreter Required</td>
      <td><select name=pmpxi001 title="Interpreter Required" tabindex=19
           onchange="ShowSpan(this);">
          %EMRWEB02.01.601.2
          </select></td>
    <td class=DataLabel>Health Fund Contributor Name</td>
    <td><input type=text size=42 maxlength=40
        name=pmpxi093 title="Health Fund Contributor Name" tabindex=25
        value="%EMRWEB02.01.699.010"></td>
      <td class=DataLabel></td>
      <td></td>
     </tr>

<tr><td><span id=LanguageBoxHeading></span> </td>
    <td><span id=LanguageBox></span> </td>
    <td class=DataLabel>&nbsp;</td>
    <td></td>
    <td class=DataLabel>&nbsp;</td>
    <td></td>
    </tr>

<tr><td class=DataLabel>Ancestry/Ethnicity 1</td>
    <td><select name=pmpxi139 id=pmpxi139 tabindex=21
         title="Ancestry/Ethnicity 1">
         <option></option>
          %EMRWEB02.01.699.082.9.5
        </select>
    </td>
    <td class=DataLabel>Main Language Spoken at Home 1</td>
    <td><select name=pmpxi141 id=pmpxi141 tabindex=26
         title="Main Language Spoken at Home 1">
         <option></option>
          %EMRWEB02.01.699.084.9.5
        </select>
    </td>
    <td></td>
    <td></td>
</tr>
<tr><td class=DataLabel>Ancestry/Ethnicity 2</td>
    <td><select name=pmpxi140 id=pmpxi140 tabindex=21
         title="Ancestry/Ethnicity 2">
         <option></option>
          %EMRWEB02.01.699.083.9.2
        </select>
    </td>
    <td class=DataLabel>Main Language Spoken at Home 2</td>
    <td><select name=pmpxi142 id=pmpxi142 tabindex=26
         title="Main Language Spoken at Home 2">
         <option></option>
          %EMRWEB02.01.699.085.9.2
        </select>
    </td>
    <td></td>
    <td></td>
</tr>
     
<tr><td class=HeadingCell colspan=6 align=center>
     Emergency Visit Details </td></tr>
    <tr><td class=DataLabel>Arrival Date/Time </td>
        <td><input type=text size=11 max=11 name="emvis001" tabindex=-1
             value="%EMRWEB02.01.101.0" readonly> 
            <input type=text size=8 max=8 name="emvis002" tabindex=-1
             value="%EMRWEB02.01.102" readonly></td>
     <td class=DataLabel>%STANDARD.01.017.CL</td>
     <td><select class="Mandatory SelectMed" name=emvis008 tabindex=36
          title="%STANDARD.01.017.CL"  onchange="showFundingSource();">
     <option></option>
     %EMRWEB02.01.108.2
     </select></td>
    <td><div id=FundingHeading></div></td>
    <td><div id=FundingId></div>
    </tr>

<tr>
    <td class=DataLabel>
      Has this patient been in a Motor Vehicle Accident?
    </td>
    <td>
      <select class="Mandatory" name=pmext049 tabindex=37
       title="Has this patient been in a Motor Vehicle Accident?">
       %EMRWEB02.01.936.099.050
      </select>
    </td>
  </tr>

<tr><td class=DataLabel>Arrival Transport</td>
    <td><select name=emvis013 tabindex=38 class="Mandatory SelectMed"
         title="Arrival Transport"
         onchange="document.UpdateForm.emvis034.disabled=0;CheckAmbType();">
     <option></option>
     %EMRWEB02.01.113.2
     </select></td>
     <td class=DataLabel>Amb Case No</td>
     <td><input type=text size=20 maxlength=15 name=emvis034 tabindex=39
         onFocus="CheckAmbType();" value="%EMRWEB02.01.134" title="Amb Case No"
         onblur="ValidateAmbCase();"></td>
    <td class=DataLabel>Attendance Type</td>
    <td><select class="Mandatory SelectMed" name=emvis053 tabindex=40
         title="Attendance Type">
     <option></option>
     %EMRWEB02.01.213.2
     </select></td>
     </tr>

<tr><td class=DataLabel>Attendance Source</td>
    <td><select class="Mandatory SelectMed" name=emvis061 tabindex=41 
         title="Attendance Source" 
         onchange="checkReferred();displayReferralFields();">
         <option></option>
         %EMRWEB02.01.221.2
         </select></td>
    <td class=DataLabel>%STANDARD.01.017.cw</td>
    <td><select name=pmsvx135 class="Mandatory SelectMed" tabindex=42
       title="%STANDARD.01.017.cw">
         <option></option>
           %EMRWEB02.01.513.2
      </select>
    </td>
    <td class=DataLabel>%STANDARD.01.017.eh</td>
    <td><select name=emvis056 tabindex=43 title="%STANDARD.01.017.eh"
         class="SelectBig">
        <option></option>
        %EMRWEB02.01.216.2
        </select></td>
     </tr>

<tr><td><div id=TranSrcHeading></div></td>
    <td><div id=TranSrc></div></td>

    <td class=DataLabel>Disaster Code</td>
    <td><select name=dispt001 title="Disaster Code"
         onchange="displayDisasterID();" tabindex=50>
        <option></option>
        %EMRWEB02.01.497
        </select>
    </td>

    <td class=DataLabel>Inform GP</td>
    <td><select name=pmsvx010 title="Inform GP" class="Mandatory" tabindex=51>
    <option value=" "></option>
    <option value="0">No</option>
    <option value="1">Yes</option>
    <option value="2">Unknown</option>
    </select></td>
    </tr>

<tr>
  <td align=left>Hospital Last 7 Days</td>
  <td>
    <table>
      <tr><td align=left>
        <input type="checkbox" name="prevhosp" id="prevhosp" 
               value="1" tabindex=52>
      </td>
      <td id="prevhospxx" style="display:none" class=DataLabel>
        <b>Yes</b>
      </td></tr>
    </table>
  </td>

  <td class=DataLabel><div id=disasteridnumbertitleDIV></div></td>
  <td><div id=disasteridnumberDIV></div></td>

  <td class=DataLabel id=MyHRConsentTitle></td>
  <td><select name=pmsvx125 id=pmsvx125 tabindex=53 class=DataField 
              title="Consent upload to My Health Record?">
           <option value=" "></option>
           <option value="0">No</option>
           <option value="1">Yes</option>
       </select>&nbsp;(<a href="javascript:patientMyhrConsentForm();">form</a>)
  </td>
</tr>

<tr>
  <td></td>
  <td></td>
  <td class=DataLabel>
      %STANDARD.01.017.KD
   </td>
   <td>
     <select class="Mandatory SelectMed" name=pmsvx079 tabindex=54
      title="%STANDARD.01.017.KD">
        <option></option>
          %EMRWEB02.01.536.2
     </select>
   </td>
  <td></td>
  <td></td>
</tr>

<tr><td class=DataLabel></td>
     <td>
     </td>
     <td class=DataLabel>
       <div id="emvis174TitleDIV">
       </div>
     </td>
     <td>
       <div id="emvis174FieldDIV">
       </div>
     </td>
     <td class=DataLabel>
       <div id="emvis176TitleDIV">
       </div>
     </td>
     <td>
       <div id="emvis176FieldDIV">
       </div>
     </td>
     </tr>

<tr><td class=DataLabel></td>
     <td></td>
     <td class=DataLabel>
       <div id="emvis175TitleDIV">
       </div>
     </td>
     <td>
       <div id="emvis175FieldDIV">
       </div>
     </td>
     <td class=DataLabel>
       <div id="emvis020TitleDIV">
       </div>
     </td>
     <td>
       <div id="emvis020FieldDIV">
       </div>
     </td>
     </tr>

<tr><td colspan=6 align=center class=DataLabel><br>
    <input type=button name=UpdateButton value="Update" tabindex=90
     onclick="valEmrVisit1()" class="button">
    <input type=button value="Cancel" class="button" tabindex=91
    onclick='CancelButton();'>
    </td></tr>
</table>
</form>
</div>
<div id=SelectHeading></div>
<div id=SelectLocation></div>
<script type="text/javascript">

 for (var i=0; i < document.UpdateForm.ptmas001.length; i++) {
  if (document.UpdateForm.ptmas001.options[i].value=="%EMRWEB02.01.005.0"){
      document.UpdateForm.ptmas001.selectedIndex=i; } }

/* PatientSex="%EMRWEB02.01.019"
 for (var i =0 ; i < document.UpdateForm.ptmas014.length; i++) {
   if (document.UpdateForm.ptmas014.options[i].value==PatientSex.substr(0,1)) {
       document.UpdateForm.ptmas014.selectedIndex=i } };
*/
 CTypeAdm="%EMRWEB02.01.252";
 if ( CTypeAdm == "Yes") {
   document.UpdateForm.emvis147.value=1; }
 else { 
   document.UpdateForm.emvis147.value=0; }

 ChgClaim="%EMRWEB02.01.488"
 if ( ChgClaim == "1") {
   document.UpdateForm.emvis008.disabled=true;
   document.UpdateForm.emvis008.className="Readonly"; }
 else {
   document.UpdateForm.emvis008.disabled=false;
   document.UpdateForm.emvis008.className="Mandatory"; }

 InterpReq="%PATWEB89.01.801.0";
 for (var i =0 ; i < document.UpdateForm.pmpxi001.length; i++) {
  if (document.UpdateForm.pmpxi001.options[i].value==InterpReq.substr(0,1)) {
       document.UpdateForm.pmpxi001.selectedIndex=i } };

 Discharged="%EMRWEB02.01.147";
 if(Discharged=="4") {
   alert("Warning: This visit is cancelled");
 }

 var codeList = document.UpdateForm.emvis008.options;
  var codeVal = document.UpdateForm.deftclam.value;
  for (var i = 0; i < codeList.length; i++) {
    if (isWhitespace(codeList[i].value)) continue;
    var codeSingle = codeList[i].value.substr(3, 5);
    var codeVal2 = codeList[i].value.substr(0, 3);
    if (!isWhitespace(codeVal)) {
      if (codeVal == codeVal2) {
        if (codeSingle.match(/M/g) != null) {
          document.UpdateForm.emclcin1.value = "M";
        }
        continue;
      }
    }
    if (codeSingle.match(/M/g) != null) {
      document.UpdateForm.emvis008.options[i].remove(i);
      i--;
    }
  } 

document.getElementById("MyHRConsentTitle").innerHTML = ScreenLabelMyHRConsent;
document.getElementById("pmsvx125").title = ScreenLabelMyHRConsent;
document.getElementById("pmsvx125").value = trim("%EMRWEB02.01.599.001");

</script>
<form name=HiddenFields method=get>
<input type=hidden name=cob value="%EMRWEB02.01.022.1">
<input type=hidden name=pl1 value="%EMRWEB02.01.602.1">
<input type=hidden name=pl2 value="%EMRWEB02.01.603.1">
</form>
<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=regexstm value=102>
<input type=hidden name=newstand value=1>
<input type=hidden name=urnumber value="%EMRWEB02.01.003">
<input type=hidden name=admissno value="%EMRWEB02.01.081">
<input type=hidden name=MenuType value="%EMRWEB02.01.088">
<input type=hidden name=emrgflag value="Y">
<input type=hidden name=nextpage value="4">
</form>

<span class=DataLabel id=transferhd style="display:none">
Transfer Source
</span>

<span id=transferblank style="display:none">
   <input type=hidden name=emvis032 value="" notab>
</span>

<span id=transfersrc style="display:none">
<input type="text" size=8 maxlength=6 name="emvis032" tabindex=41
     value="%EMRWEB02.01.132.1" title="Transfer Source" class=Mandatory
     onchange='validateCode(9,UpdateForm.emvis032,UpdateForm.trnsfsrc);'>
     <input type=text  size=25 name=trnsfsrc value="%EMRWEB02.01.132.0"
      readonly notab>
     <img src="../images/SearchIcon.gif" notab class=Icon
     onclick=" TransferSourceFrame(UpdateForm.emvis032,UpdateForm.trnsfsrc)">
</span>

<span id=AustStateH style="display:none">
<table colspan=1 width=100% height=100% border=0 cellspacing=2 cellpadding=0>
    <tr><td class=DataLabel>State</td></tr>
</table>
</span>
<span id=AustState style="display:none">
<table colspan=1 width=100% height=100% border=0 cellspacing=2 cellpadding=0>
    <tr><td><input type=text size=25 maxlength=25
       name=ptmas085 title="State" tabindex=9
       value="%EMRWEB02.01.015"
       onchange="checkAdd01();UpCase(this);">
    </td></tr>
</table>
</span>
<span id=OseasCountryH style="display:none">
<table colspan=1 width=100% height=100% border=0 cellspacing=2 cellpadding=0>
    <tr><td class=DataLabel>Country</td></tr>
</table>
</span>
<span id=OseasCountry style="display:none">
<table colspan=1 width=100% height=100% border=0 cellspacing=2 cellpadding=0>
    <td><select name="ptmas085" tabindex=10 class="select120 Mandatory"
                 title="Country Address">
        <option></option>
        %EMRWEB02.01.085.060
        </select></td>
</table>
</span>

<span id=blanklabel style="display:none">&nbsp;</span>
<span id=fundinghd style="display:none">
&nbsp;Funding Source
</span>

<span id=fundingidshown style="display:none">
  <select name=pmsvx141 id=pmsvx141 title="%STANDARD.01.017.cx"
          tabindex=37>
          <option> </option>
             %EMRWEB02.01.514.5
  </select>
</span>

<span id=fundingidblank style="display:none">
  <input type=hidden name=pmsvx141 id=pmsvx141 value=" ">
</span>

<span id=disasteridnumbertitleSPAN style="display:none">
Disaster Identification #
</span>

<span id=disasteridnumberSPAN style="display:none">
<input type="text" name=dispt002 size=20 maxlength=19 tabindex=51
   title="Disaster Identification Number">
</span>

<span class=DataLabel id=LanguageHeading style="display:none;">
    Language
</span>

<span id=LanguageSel style="display:none;">
    <select class="Mandatory SelectMed" name=pmpxi002 tabindex=20
         title="Preferred Language">
        <option></option>
        </select>
</span>

<span id=LanguageHeadingNul style="display:none;">
</span>
<span id=LanguageNul style="display:none;">
    <input type=hidden name=pmpxi002 value="">
</span>

<span id=offdutyhd style="display:none">
 Off Duty
</span>

<span id=offdutyid style="display:none">
 <input type="checkbox" name="offdutyb" value="0" tabindex=37>
</span>

<span id="emvis174TitleSPAN" style="display:none">
      %STANDARD.01.017.RF
</span>
<span id="emvis174FieldSPAN" style="display:none">
       <select name="emvis174" tabindex=38 class="SelectMed"
        title="%STANDARD.01.017.RF" onchange="displaycatRF();">
         <option></option>
         %EMRWEB02.01.293.2
         </select>
</span>
<span id="emvis176TitleSPAN" style="display:none">
         Referral Date
</span>
<span id="emvis176FieldSPAN" style="display:none">
         <input type=text size=12 name=emvis176 title="Referral Date"
          value="%EMRWEB02.01.295" tabindex=41
          onblur="checkDateSV(this,'Valid to');" >
         <img notab src="../images/DateLookup.gif" class="Icon"
           alt="Show Calendar" date="UpdateForm.emvis176">
</span>
<span id="emvis175TitleSPAN" style="display:none">
         Referral Period (Months)
</span>
<span id="emvis175FieldSPAN" style="display:none">
         <input type=text name=emvis175 title="Referral Period (Months)"
          class=Number size=15 maxlength=2 min=1 max=98
          value="%EMRWEB02.01.294">
</span>

<span id="emvis020TitleSPAN" style="display:none">
 Referring HCP
</span>

<span id="emvis020FieldSPAN" style="display:none">
 <input type="text" size=8 maxlength=10 name=emvis020 tabindex=47
              value="%EMRWEB02.01.120.001"
              onchange="ReadDocOnly(18,0,UpdateForm.emvis020,
                        UpdateForm.doctnam1);">
          <input type=text size=20 readonly name=doctnam1 tabindex=-1
              value="%EMRWEB02.01.120.081">
          <img src="../images/SearchIcon.gif" class=Icon
           onclick="HCPSearchFrame(UpdateForm.emvis020,UpdateForm.doctnam1,
                    UpdateForm.dummx,UpdateForm.dummx,
                    UpdateForm.dummx,UpdateForm.dummx);">
          <img src="../images/erase.gif" class=Icon
           onclick="clrFields(UpdateForm.emvis020,UpdateForm.doctnam1);">
</span>
<span class=DataLabel id=lblMultBirth style="display:none">
%STANDARD.01.035.mX
</span>
<span class=DataLabel id=txtMultBirth style="display:none">
<b>%EMRWEB02.01.940</b>
</span>

<span id=idenGenLblShow style="display:none">
  <td class=DataLabel>%STANDARD.01.035.Gi</td>
</span>
<span id=idenGenDetailShow style="display:none">
  <td><select name=pmpxi125 id=pmpxi125 class=Mandatory tabindex=5
       title="%STANDARD.01.035.Gi"
       onchange="IdenGenderChange(document.UpdateForm);">
      <option></option>
       %EMRWEB02.01.086.099.063.9.2
      </select><br>
      <span id=IdenGenFreeTxt></span>
  </td>
</span>
<span id=idenGenDetailBlank style="display:none">
  <td><input type=hidden name=pmpxi125 id=pmpxi125 value=""></td>
  <td><input type=hidden name=pmpxi126 id=pmpxi126 value=""></td>
</span>
<span id=idenGenFreeTxtShow style="display:none">
  <input type=text name=pmpxi126 id=pmpxi126 size=80 maxlength=80
   class=Mandatory tabindex=5
   title="Identifying Gender Free Text"
   value="%EMRWEB02.01.086.099.065">
</span>
<span id=idenGenFreeTxtBlank style="display:none">
  <td><input type=hidden name=pmpxi126 id=pmpxi126 value=""></td>
</span>

<span id=idenProLblShow style="display:none">
  <td class=DataLabel>%STANDARD.01.035.Gp</td>
</span>
<span id=idenProDetailShow style="display:none">
  <td><select name=pmpxi127 id=pmpxi127 class=Mandatory tabindex=10
       title="%STANDARD.01.035.Gp"
       onchange="IdenPronounChange(document.UpdateForm);">
      <option></option>
       %EMRWEB02.01.086.099.064.9.2
      </select><br>
      <span id=IdenProFreeTxt></span>
  </td>
</span>
<span id=idenProDetailBlank style="display:none">
  <td><input type=hidden name=pmpxi127 id=pmpxi127 value=""></td>
  <td><input type=hidden name=pmpxi128 id=pmpxi128 value=""></td>
</span>
<span id=idenProFreeTxtShow style="display:none">
  <input type=text name=pmpxi128 id=pmpxi128 size=80 maxlength=80
   class=Mandatory tabindex=10
   title="Identifying Pronoun Free Text"
   value="%EMRWEB02.01.086.099.066">
</span>
<span id=idenProFreeTxtBlank style="display:none">
  <td><input type=hidden name=pmpxi128 id=pmpxi128 value=""></td>
</span>

<script type="text/javascript">
 RegiFlag="%EMRWEB02.01.461";
 if(RegiFlag=="1") {
   var new_regiflag = document.createElement("input");
       new_regiflag.setAttribute("type", "hidden");
       new_regiflag.setAttribute("name", "regiflag");
       new_regiflag.setAttribute("id", "regiflag");
       new_regiflag.setAttribute("value", "1");
  document.getElementById("PatientLinks").appendChild(new_regiflag);
 }

 InformGP="%EMRWEB02.01.510";
 if(InformGP=="0") {
   document.UpdateForm.pmsvx010.selectedIndex=1;
 } else {
     if(InformGP=="1") {
       document.UpdateForm.pmsvx010.selectedIndex=2;
   } else {
       document.UpdateForm.pmsvx010.selectedIndex=3;
   }
 }

  DrugAlcohol="%EMRWEB02.01.256";
  if(DrugAlcohol=="No") {
    document.UpdateForm.emvis096.value=0;
  } else {
      if(DrugAlcohol=="Yes") {
        document.UpdateForm.emvis096.value=1;
    } else {
        document.UpdateForm.emvis096.value=2;
    }
 }
 TriageCat="%EMRWEB02.01.103.1";
 if(isWhitespace(TriageCat)) {
   document.UpdateForm.emvis096.value=2;
   if(isWhitespace(InformGP)) {
     document.UpdateForm.pmsvx010.selectedIndex=0;
   }
 }

 f = document.UpdateForm;
 if (f.multbrth.value=="1") {
   MultBirthLblSpan.innerHTML = lblMultBirth.innerHTML;
   MultBirthTxtSpan.innerHTML = txtMultBirth.innerHTML;
 }
 else {
   MultBirthLblSpan.innerHTML = "";
   MultBirthTxtSpan.innerHTML = "";
 }

</script>
