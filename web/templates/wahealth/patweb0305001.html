<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome" content="wahealth">
<meta name="HelpFileName" content="NoContextSet.html">
<meta name="CrossBrowser" content="true">
<script type="text/javascript">
function submitButton() {
 p=document.AddForm
// validate responsible clinician
 if(!isWhitespace(p.pmdtc002.value)){
 if(!ValidateHCPDateHospital(18,1,p.pmdtc002,p.d_pmdtc002,p.pmdtc004,p.wbsehosp)){
    return;
  }
 }
 if (document.getElementById('pmdtc002').value.replace(/ /g,"")==
     document.getElementById('pridoctr').value.replace(/ /g,"")) {
   alert('Attending Doctor and Secondary Doctor cannot be the same.');
   return;
 }
 if(AddForm.chkSecDoc.checked) {
    AddForm.setsecdt.value = "1";  // set as Secondary Doctor
 } else {
   AddForm.setsecdt.value = "0";  // don't se
 }
 SubmitHiddenNew(AddForm);
}

function valDoctorUnit() {
  validateCode(31,AddForm.pmdtc002,AddForm.d_pmdtc002);
  selectOptions4("45",AddForm.pmdtc002,AddForm.dummy,AddForm.pmdtc003);
  setTimeout(function(){selectUnit()},100);
  setTimeout(function(){valDoctorUnitTeam()},100);
}

function valDoctorUnitTeam() {
  selectOptions4("46",AddForm.pmdtc002,AddForm.pmdtc003,AddForm.pmdtc008);
  setTimeout(function(){selectTeam()},100);
}

function selectUnit(){
  var defaultUnit = document.AddForm.deftunit.value.substr(0,3);
  for (var i =0 ; i < document.AddForm.pmdtc003.length; i++) {
    if (document.AddForm.pmdtc003.options[i].value.substr(0,3) == defaultUnit ) {
       document.AddForm.pmdtc003.selectedIndex=i;
       break;
     } 
   }
   
   if (document.AddForm.deftunit.value.replace(/ /g,"").length == 0 ) {
      if (AddForm.pmdtc003.length==2) {
        AddForm.pmdtc003.selectedIndex=1; 
      } 
   }
}

function selectTeam(){
  var defaultTeam = document.AddForm.deftteam.value.substr(0,5);

  for (var i =0 ; i < document.AddForm.pmdtc008.length; i++) {
    if (document.AddForm.pmdtc008.options[i].value.substr(0,5)== defaultTeam ) {
       document.AddForm.pmdtc008.selectedIndex=i 
    } 
  }
  
  if (document.AddForm.deftteam.value.replace(/ /g,"").length == 0 ) {
    if (AddForm.pmdtc008.length==2) {
      AddForm.pmdtc008.selectedIndex=1; 
    } 
  }

  if (AddForm.pmdtc008.length > 1 ) {
    AddForm.pmdtc008.className = "Mandatory"; 
  }else { 
    AddForm.pmdtc008.className = ""; 
  }
}
</script>
</head>
%START.OF.PAGE
<body onload="PageLoad(event);valDoctorUnit();">
<span class=DFrameTitleBar>
<img align="right" alt="Exit" class="MenuIcon" 
 src="../images/ExitIcon.gif" onclick="DFrameExit();">
<script type="text/javascript">document.write(self.document.title);</script>
</span>

<form name=AddForm method=post action=patweb03.pbl style="margin:0">
   <input type=hidden name=reportno value="5">
   <input type=hidden name=template value="001">
   <input type=hidden name=updttype value="A">
   <input type=hidden name=urnumber value="%PATWEB03.05.003">
   <input type=hidden name=admissno value="%PATWEB03.05.081">
   <input type=hidden name=redirect value="%PATWEB03.05.001.patweb03.04.001">
   <input type=hidden name=wbsehosp value="%STANDARD.01.032">
   <input type=hidden name=deftunit value=" ">
   <input type=hidden name=deftteam value=" ">
   <input type=hidden name=nextpage value="5">
   <input type=hidden name=dummy value=" ">
   <input type=hidden name=pridoctr id=pridoctr value="%PATWEB03.05.230">
   <input type=hidden name=caredoct value="%PATWEB03.05.115">
   <input type=hidden name=setsecdt value="0">

<table align=center width=90% border=0>
<tr><td class=DataLabel>Secondary Doctor</td>
    <td><input type=text name=pmdtc002 id=pmdtc002 class=Mandatory 
     title="Secondary Doctor"
     size=10 maxlength=10 
     onblur="UpCase(this);
             ValidateHCP(18,
                         14,
                         AddForm.pmdtc002,AddForm.d_pmdtc002);
             valDoctorUnit();">
    <input type=text name=d_pmdtc002 readonly class=ReadOnly 
     title="Secondary Doctor" size=24 maxlength=24 >
    <img src="../images/SearchIcon.gif" class=Icon
     onclick="HCPSearchFrame(AddForm.pmdtc002,AddForm.d_pmdtc002,1);">
</td></tr>

<tr><td class=DataLabel>Secondary Unit</td>
    <td><select name=pmdtc003 title="Unit" 
                class=Mandatory onchange="valDoctorUnitTeam();">
         <option> </option>
           %PATWEB03.05.103.2
         </select>
</td></tr>

<tr><td class=DataLabel>Secondary Team</td>
    <td><select name=pmdtc008 title="Team">
         <option> </option>
           %PATWEB03.05.114.2
         </select>
</td></tr>

<tr><td class=DataLabel>Start Date </td>
    <td><input type=text size=12 name=pmdtc004 
        class="Mandatory Date" title="Start Date" 
        value="%STANDARD.01.015">
        <img notab src="../images/DateLookup.gif" class=Icon
         onclick="DateLookupFrame(AddForm.pmdtc004);">
        Time
        <input class=Mandatory type=text name=pmdtc005 size=8
         value="%STANDARD.01.016" title="Start Time">
        <img notab src="../images/DateTimeStamp.gif" class=Icon
         onclick="SetCurrentDateTime(AddForm.pmdtc004,AddForm.pmdtc005);">
       <img notab src="../images/TimeLookup.gif" class=Icon
        onclick="TimeLookupFrame(AddForm.pmdtc005);">
</td></tr>

<tr><td class=DataLabel>End Date </td>
    <td><input type=text size=12 name=pmdtc006 
        class="PastDate" title="End Date">
        <img notab src="../images/DateLookup.gif" class=Icon
         onclick="DateLookupFrame(AddForm.pmdtc006);">
        Time
        <input type=text name=pmdtc007 size=8 title="End Time">
        <img notab src="../images/DateTimeStamp.gif" class=Icon
         onclick="SetCurrentDateTime(AddForm.pmdtc006,AddForm.pmdtc007);">
       <img notab src="../images/TimeLookup.gif" class=Icon
        onclick="TimeLookupFrame(AddForm.pmdtc007);">
</td></tr>

<tr><td class=DataLabel>Update Secondary Doctor </td>
    <td><input type=checkbox name=chkSecDoc></td>
</tr>

<tr><td colspan=2 align=center><br>
    <input type=button value="Add" class=button id=btnAdd
     onclick="tempDisable(this);submitButton();">
    <input type=button value=Close class=button
     onclick="DFrameCloseRefresh()">
</td></tr>

</table>
</form>

<script>
if (AddForm.caredoct.value == "") {
  AddForm.chkSecDoc.checked = true;
  AddForm.chkSecDoc.disabled = true;
}
</script>
