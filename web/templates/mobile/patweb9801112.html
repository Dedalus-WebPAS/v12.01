Content-Type: text/html
Cache-Control: no-cache

<!DOCTYPE HTML>
%START.OF.PAGE
<head>
<title>Leave Request</title>
<meta name="ServerID"        content="%STANDARD.01.004">
<meta name="ServerName"      content="%STANDARD.01.005">
<meta name="ServerVersion"   content="%STANDARD.01.006">
<meta name="ServerOption"    content="%STANDARD.01.002">
<meta name="ServerTemplate"  content="%STANDARD.01.003">
<meta name="TemplateFile"    content="patweb9801209.html">
<meta name="TemplateVersion" content="V12.01.00">
<meta name="TemplateHome"    content="mobile">
<meta name="HelpFileName"    content="NoContextSet.html">
<link rel="stylesheet" href="../html/ipad/ipad.css" type="text/css" />
<link rel="stylesheet" href="../html/ipad/AutoSuggestionPopup/AutoSuggestionPopup.css" type="text/css">
<script type="text/javascript" src="../html/ipad/ipad.js"></script>
<script type="text/javascript" src="../html/ipad/ipadform.js"></script>
<script type="text/javascript" 
 src="../html/ipad/AutoSuggestionPopup/AutoSuggestionPopup.class.js"></script>
<script type="text/javascript">
function init() {
  dateSelection(document.UpdateForm.selectReturndte,document.UpdateForm.currdate.value,7)
  var defaultTime=document.UpdateForm.currtime.value;
  timeSelection(document.UpdateForm.selectReturntim,defaultTime,15)

  dateSelection(document.UpdateForm.selectOrderdte,document.UpdateForm.currdate.value,7)
  var defaultTime=document.UpdateForm.currtime.value;
  timeSelection(document.UpdateForm.selectOrdertim,defaultTime,15)

  var actionBtn = parent.document.getElementById('actionButton');
  if(actionBtn) {
    actionBtn.className = actionBtn.className.replace(/SpanButton/g,"");
    actionBtn.className = actionBtn.className.replace(/Blue/g,"");
    actionBtn.className = actionBtn.className + " SpanButtonBlue";
    actionBtn.innerText = "Save";
    actionBtn.onclick = function() { SaveForm(); }
  }
}
function dateSelection(el,defaultDate,noDays) {
  var now = new Date();
  defaultDay=defaultDate.substr(0,2)
  defaultMonth=Mth3Num(defaultDate.substr(3,3))-1 
  defaultYear=defaultDate.substr(7,4) 
  now = new Date(defaultYear,defaultMonth,defaultDay,0,0,0);       // midnight
  var today = new Date(defaultYear,defaultMonth,defaultDay,0,0,0); // midnight
  var tomorrow = new Date(today.getTime()+(1*24*60*60*1000));
  var weekday=new Array(7);
  weekday[0]="Sun";
  weekday[1]="Mon";
  weekday[2]="Tue";
  weekday[3]="Wed";
  weekday[4]="Thu";
  weekday[5]="Fri";
  weekday[6]="Sat";
  for (var i=0;i<noDays;i++) {
     var theDay = new Date(now.getTime()+(i*24*60*60*1000));
     dayVal = "0"+theDay.getDate();
     mthVal = "0"+(theDay.getMonth()+1);
     dayVal=dayVal.substr(dayVal.length-2,2);
     mthVal=mth3Name(mthVal.substr(mthVal.length-2,2));
     dateVal = dayVal+' ' + mthVal + ' ' +  theDay.getFullYear();
     dateName=weekday[theDay.getDay()] + ' ' + dateVal;
     if (i==0) { dateName="Today"; }
     if (i==1) { dateName="Tomorrow"; }
     el.options[el.options.length]=new Option(dateName,dateVal);
  }
  var maxIndex=1;
  for (i=0;i<7;i++) {
    cookieName="orderSelectDateIndex"+i;
    usageCount=parseInt(getCookie(cookieName),10);
    if (isNaN(usageCount)) {
      usageCount=0;
      setCookie(cookieName,"0",90);
    }
    if (usageCount>maxIndex) {
      maxIndex=usageCount;
      document.UpdateForm.selectOrderdte.selectedIndex=i;
    }
  }
}
function setDefaultTime(el,defaultTime) {
  for (i=el.options.length-1;i>0;i--) {
    if (el.options[i].value>defaultTime) {
      el.selectedIndex=i
    }
  }
}
function timeSelection(el,defaultTime,timeInterval) {
  var hr=0;
  var mn=0;
  var defaultOption=0;
  var setCurrent=true;
  for (var hr=0;hr<24;hr++) {
    for (var mi=0;mi<60;mi=mi+timeInterval) {
      hrVal="00"+hr;
      miVal="00"+mi;
      timeVal=hrVal.substr(hrVal.length-2,2)+":"+miVal.substr(miVal.length-2,2)
      if (timeVal!="00:00") {
        el.options[el.options.length]=new Option(timeVal,timeVal);
        if ((timeVal>defaultTime.substr(0,5))&&setCurrent) {
          defaultOption=el.options.length-1;
          setCurrent=false;
        }
      }
    }
  }
  el.selectedIndex=defaultOption;
}
function SaveForm() {
  ShowSaving();
  setTimeout(function () {SubmitForm()},100)
}
function SubmitForm() {
  alert("test");
  HideSaving();
}
function ShowSaving() {
  var SaveDiv=document.getElementById("DisplaySaving");
  SaveDiv.style.display="inline-block";
}
function HideSaving() {
  var SaveDiv=document.getElementById("DisplaySaving");
  SaveDiv.style.display="none";
}

</script>
<style type=text/css>
.searchOrderDiv {
  display:none;
  margin-top:5px;
  padding-top:3px;
  padding-bottom:3px;
  padding-left:12px;
  border:#ccc 1px solid;
  width:236px;
  background-color: white;
  border-radius: 8px;
}
</style>
</head>
<body onload='init()'>
<form name=UpdateForm method=post action="patweb92.php" >
<input type=hidden name=reportno value="1"> 
<input type=hidden name=template value="1"> 
<input type=hidden name=nextpage value="5"> 
<input type=hidden name=urnumber value="%PATWEB98.01.003"> 
<input type=hidden name=admissno value="%PATWEB98.01.081"> 
<input type=hidden name=ordertyp value="1"> 
<input type=hidden name=formtype value=""> 
<input type=hidden name=statncod value="CLIORD"> 
<input type=hidden name=patientSex value="%PATWEB98.01.019"> 
<input type=hidden name=patientAge value="%PATWEB98.01.021"> 
<input type=hidden name=currdate value="%STANDARD.01.015">
<input type=hidden name=currtime value="%STANDARD.01.016">
<input type=hidden name=orderdte value="%STANDARD.01.015">
<input type=hidden name=ordertim value="%STANDARD.01.016">
<input type=hidden name=optfld15 value="">
<input type=hidden name=optnam15 value="">
<input type=hidden name=r_userdoct value="%STANDARD.01.010">
<input type=hidden name=r_doctcode value="%PATWEB98.01.082.003">
<input type=hidden name=r_doctname value="%PATWEB98.01.082.002">
<input type=hidden name=r_exptdisc value="%PATWEB98.01.825.4">

<ul class='sectionList' style="margin-bottom:0px;">
  <li class='sectionItem'
   onclick='location.reload()'>
    <div style='text-align:center;font-family:Arial;'>
      %PATWEB98.01.002
      (%PATWEB98.01.019,  %PATWEB98.01.020,  %PATWEB98.01.021, %PATWEB98.01.003) <br />
    </div>
  </li>
</ul>

<table border="0" cellspacing=0 cellpadding=1 width=100%>
<tr valign=top>
<td>
  <ul class='sectionList'>
    <li class='sectionItem'>
      <p class="subheading">Leave Request</p><br />
    <span class=labelText>leave type</span>
    <span class=sectionText>
        <select name="clnot006" class=Mandatory title='Leave Type'>
        <option></option>
        %STANDARD.01.007.TL.1
        </select>
    </span>
    </li>

    <li class='sectionItem'>
    <span class=labelText>status</span>
    <span class=sectionText>
        <select name="clnot006" class=Mandatory title=Status>
        <option></option>
        <option value=1>Approved</option>
        <option value=2>Active Patient Onleave</option>
        <option value=3>Absconded</option>
        <option value=4>Rejected/Disallowed</option>
        <option value=5>Returned from Leave</option>
        </select>
    </span>
    </li>


    <li class='sectionItem'>
      <span class="labelText">leave start</span>
      <span class="sectionText">
      <select class="Mandatory" name=selectOrderdte onchange='checkEDD(this);'>
      </select>
      <select class="Mandatory" name=selectOrdertim>
      </select>
      </span>
    </li>

    <li class='sectionItem'>
      <span class="labelText">expected return</span>
      <span class="sectionText">
      <select class="Mandatory" name=selectReturndte onchange='checkEDD(this);'>
      </select>
      <select class="Mandatory" name=selectReturntim>
      </select>
      </span>
    </li>

    <li class='sectionItem'>
    <span class=labelText>risk rating</span>
    <span class=sectionText>
        <select name="clnot006" >
        <option value="L1">Low Unaccompanied</option>
        <option value="L2">Low Accompanied</option>
        <option value="M">Moderate</option>
        <option value="H">High - No Leave </option>
        </select>
    </span>
    </li>

    <li class='sectionItem'>
    <span class=labelText>medications</span>
    <span class=sectionText>
        <select name="clnot006" >
        <option></option>
        <option value="NO">No</option>
        <option value="YES">Yes</option>
        </select>
    </span>
    </li>

    <li class='sectionItem'>
     <span class=labelText>destination </span>
     <span class=sectionText>
      <input type=text size=30 name=pmnut004 value="">
     </span>
    </li>

    <li class='sectionItem'>
     <span class=labelText>contact number </span>
     <span class=sectionText>
      <input type=text size=20 name=pmnut004 value="">
     </span>
    </li>

    <li class='sectionItem'>
    <span class=labelText>carer</span>
    <span class=sectionText>
      <input type=text size=30 name=pmnut004 value="">
    </span>
    </li>
    <li class='sectionItem'>
     <span class=labelText>carer contact </span>
     <span class=sectionText>
      <input type=text size=20 name=pmnut004 value="">
     </span>
    </li>

    <li class='sectionItem'>
    <span class=labelText>Leave Conditions</span>
    <span class=sectionText>
    <textarea title='clinical details' name="notetext" 
     onfocus='listNoteText();'
     oninput='notesText(this,300,event);'
     cols=30 rows=3></textarea>
    </span>
    </li>
    <li class='sectionItem' style='text-align:center'>
    <span class=stdButton>Patient Signature</span>
    <span class=stdButton>Carer Signature</span>
    </li>
     
    <li id=signaturePanel class='sectionItem' style='display:none'>
       <img class=pictureBase id="pictureBase" src='../images/loading.gif'>
       <canvas id="pictureThis" width="400" height="150"  
         style='background-color:rgba(0,0,0,0);border:1px solid #ccc;'>
         Your browser does not support the canvas element.
       </canvas>
    </li>
    </ul>
  </td>
  <td width=35%>
    <div id='leaveList'>
      <div id=LeaveResults>
      <ul class='sectionList'>
	<li class=sectionItem >
         <span style='font-weight:bold;'>
         Requests</span>
         <span style='position: absolute;right:30px;'>
         Today : 2 / 3.5hrs
         </span>
        </li> 
	<li class=sectionItem >
         <span>24 May at 16:00 </span>
         <span style='position: absolute;right:30px;'>
	 24 May at 19:00
	 </span>
         <br><span style='font-size:12px;line-height:12px;'>Daytime Leave</span>
         <span style='font-size:12px;line-height:25px;position:absolute;right:30px;'>
	 Returned</span>
        </li> 
	<li class=sectionItem >
         <span>23 May at 16:00 </span>
         <span style='position: absolute;right:30px;'>
	 23 May at 19:00
	 </span>
         <br><span style='font-size:12px;line-height:12px;'>Daytime Leave</span>
         <span style='font-size:12px;line-height:25px;position:absolute;right:30px;'>
	 Returned</span>
        </li> 
      </div>
    </div>
  </td>
  </tr>
  </table>
</form>

<span id=DisplaySaving class=SavingData>
<img class=SavingImage src=../images/loading.gif>
<p id=SaveText>Saving</p>
</span>

<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=urnumber value="%PATWEB98.01.003">
<input type=hidden name=admissno value="%PATWEB98.01.081">
<input type=hidden name=wardcode value="%PATWEB98.01.105.1">
</form>

<div id='-suggestion-panel-wrapper' style='display:none;'>
 <div id='-suggestion-panel-wrapper2' style='width:100%'>
  <ul id='-suggestion-table' style='width:100%'></ul>
 </div>
</div>
