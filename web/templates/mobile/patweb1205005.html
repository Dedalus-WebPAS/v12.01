Content-Type: text/html
Cache-Control: no-cache

<!DOCTYPE HTML>
<head>
<!--"TemplateVersion"  : "V12.01.00"
    "TemplateHome"     : "mobile"-->
<title>Housekeeping Requests</title>
<script type="text/javascript" src="../html/ipad/ipad.js"> </script>
<link   rel="stylesheet" href="../html/ipad/ipad.css" type="text/css">
<script type="text/javascript">
//------------------------------------------------------------
//  List Housekeeping Requests
//------------------------------------------------------------
function FormatTime(datetime) {
   if (isWhitespace(datetime)) { return "" }
   time = datetime.substr(8,5);
   return("<span style='color:red'>"+FormatCommentAge(datetime)+' at '+time+"</span>");
}
function SetPeriod(el) {
  if (el.vyearmth) el.vyearmth.options[el.vyearmth.selectedIndex].value=' ';
  if (el.lastdate) el.lastdate.options[el.lastdate.selectedIndex].value=' ';
  el.submit();
}
function InitTable() {
 var ShowPending=getCookie("patweb1205005-ShowPending");
 var el=document.SelectPeriod.ShowPending;
 for (i=0;i<el.options.length;i++) {
   if (el.options[i].value==ShowPending) el.selectedIndex=i;
 }
 TableRecords = new Table("patient-list","patient-item");
 t=TableRecords;
 PatientList();
 SortOrderBy=6;
 TableRecords.rows.sort(StringSort);
 ShowList();
 MaxRowNo=t.rows.length;
}
function ShowList() {
 var OS = "<div class=sectionDiv>" +
          "<ul class=sectionList>";
 var el=document.getElementById("ShowPending");
 var ShowPending=el.options[el.selectedIndex].value;
 setCookie("patweb1205005-ShowPending",ShowPending);
 var Completed="";
 var Cleaner="";
 var Satisfactory="";
 var rowcount=0;
 for(var i = 0; i < TableRecords.rows.length; i++) {
   if (ShowPending=="0"||(ShowPending=="1" && isWhitespace(TableRecords.rows[i][13]))) {
     linkTo=TableRecords.rows[i][0].replace(/javascript:/,"");
     Completed="";
     Satisfactory="";
     if (!isWhitespace(TableRecords.rows[i][13])) {
        Completed="<span class=subscriptRight>Completed : "+
                   FormatDateTime(TableRecords.rows[i][13]) + " ("+
                   TableRecords.rows[i][10]+")</span>"
     }
     if (!isWhitespace(TableRecords.rows[i][15])) {
        Satisfactory="<span class=subscriptRight>Satisfactory: "+TableRecords.rows[i][15] + "</span>";
     }
     OS += "<li class=sectionItem style='line-height:20px;' onclick=\""+linkTo+"\");\">"+
           "<span class=subscriptLeft style='font-size:17px'>Ward :<strong>" +
           TableRecords.rows[i][19] +"</strong></span>"+
           "<span class=subscriptRight style='font-size:17px'>Bed : <strong>"+
           TableRecords.rows[i][3] + "</strong></span>" +
           "<br>"+
           "<span class=subscriptLeft>Requested : "+ FormatTime(TableRecords.rows[i][6])+" ("+
           TableRecords.rows[i][8]+")</span>"  +
           Completed + "<br>" +
           "<span class=subscriptLeft>Cleaner: "+TableRecords.rows[i][18] + "</span>" +
           Satisfactory + "<br>"+
           "<span class=subscriptCenter>"+TableRecords.rows[i][16]+ "</span>" +
           "</li>";
     rowcount++
   }
 }
 if (rowcount==0) {
   OS += "<li class=sectionItem style='text-align:center;'>" +
         "No Matching Housekeeping Requests Found</li>";
 }
 OS += "</ul><div>";
 el=document.getElementById("ListLocation");
 el.innerHTML=OS;
}
function FormatPatientIcon(Indicators) {
  ImageStr="<span class=PatientFolder"+ Indicators.substr(0,3) + "></span>"
  return ImageStr;
}
function SortTable(el) {
 SortOrderBy=el.options[el.selectedIndex].value;
 TableRecords.rows.sort(StringSort);
 ShowList();
}
function init() {
 viewFlag=document.SelectPeriod.viewperd.value;
/* for (var i =0 ; i < document.SelectPeriod.viewtype.length; i++) {
  if (document.SelectPeriod.viewtype.options[i].value==viewFlag) {
     document.SelectPeriod.viewtype.selectedIndex=i } };
*/
 InitTable();

 document.SelectPeriod.ShowPending.focus();
 document.SelectPeriod.ShowPending.blur();
}
function UpdateHouse(bedreqky) {
  theURL="../../cgi-bin/patweb12.pbl?reportno=5&template=6&bedreqky=" + bedreqky.replace(/ /g,"+") 
  openDocumentNonZoomable(theURL,"Update Housekeeping Request");
}
function AddHouse() {
  theURL="../../cgi-bin/patweb12.pbl?reportno=5&template=7";
  openDocumentNonZoomable(theURL,"Create Housekeeping Request");
}
%START.OF.PAGE
function PatientList() {
 %PATWEB12.05.033
}
</script>
<body onload=init();>
<div class=subMenu>
<form name=SelectPeriod action=patweb12.pbl method=get>
<input type=hidden name=reportno value=5>
<input type=hidden name=template value=5>
<input type=hidden name=viewperd value="%PATWEB12.05.032">
<input type=hidden name=showflag value="1">
<input type=hidden name=viewtype value="0">

%PATWEB12.05.028

   <select name=filtward class=selectMenu 
   onchange="document.SelectPeriod.submit();">
   <option value="   ">All Wards</option>
   %PATWEB12.05.034
   </select>

   <select name=ShowPending class=selectMenu 
    id=ShowPending onchange="ShowList()">
   <option value="1">Pending Requests</option>
   <option value="0">All Requests</option>
   </select>

   <span class=SpanButtonBlue onclick='AddHouse();'>Add</span>

<!--
   <select name="orderby" onchange="SortTable(this);" title="Order By" class="selectMenu">
   <option value="6">Order By Time</option>
   <option value="0">Order By Bed</option>
   <option value="8">Order By Status</option>
   </select>

   <select name=filtrsta class=selectMenu 
   onchange="document.SelectPeriod.submit();">
   <option value="   ">Request State</option>
   PATWEB12.05.031.2
   </select>


   <select name=filtcsta class=selectMenu 
   onchange="document.SelectPeriod.submit();">
   <option value="   ">Complete State</option>
   PATWEB12.05.036.2
   </select>

   <select class=selectMenu name=viewtype  title="Date Range"
    onchange='SetPeriod(this.form);'>
   <option value=0>View by Day</option>
   <option value=1>View by Week</option>
   <option value=2>View by Month</option>
   </select>
-->

</form>
</div>

<div id=ListLocation>
<div id=ListContent class=sectionDiv></div>
</div>

<div id="noResults" style="display:none;margin-top:45px;" >
<ul class=sectionList>
<li style='text-align:center;color:darkred;' class=sectionItem>
No Results for Search Criteria
</li></ul>
</div>

<form name=linkForm action=patweb98.pbl method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=81>
<input type=hidden name=urnumber value="  ">
<input type=hidden name=admissno value="  ">
</form>
</body>
