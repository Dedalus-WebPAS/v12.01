Content-Type: text/html
Cache-Control: no-cache

<!DOCTYPE HTML>
<head>
<!--"TemplateVersion"  : "V12.01.00"
    "TemplateHome"     : "mobile"-->
<title>Ward Patient List</title>
<script type="text/javascript"  src="../html/ipad/ipad.js"> </script>
<link   rel="stylesheet"        href="../html/ipad/ipad.css" type="text/css">
<script type="text/javascript">
// Source Code:  ./ipad/patweb9301023.js
//
// Modification 
//
// Version   Date       Responsible/Changes Made
//------------------------------------------------------------------------------
// V10.03.01 09.09.2013 B.G.Ackland   CAR 289383
//                      Incorporate Empty Beds
//
var s;
var h;
function InitTable() {
 PatientRecords = new Table("patient-list","patient-item");
 t=PatientRecords;
 el=document.SelectWard
 wardcode=el.wardcode.options[el.wardcode.selectedIndex].value;
 theURL="patweb93.php"+
        "?reportno=1" +
        "&wardcode="+wardcode
 var xmlHttp = createHttpObject();
 xmlHttp.open("GET", theURL, false);
 xmlHttp.send();
 if (xmlHttp.responseText!=""&&xmlHttp.status == 200) {
    h = document.getElementsByTagName("head")[0];
    s = document.createElement("script");
    s.type="text/javascript";
    h.appendChild(s);
    s.text=xmlHttp.responseText;
    AddRows();
 }
 SortOrderBy=15;
 PatientRecords.rows.sort(StringSort);
 CurrentDiv=document.getElementById("ListLocation");
 ShowWardList();
 MaxRowNo=t.rows.length;
}
function SortPatients(el) {
 SortOrderBy=el.options[el.selectedIndex].value;
 PatientRecords.rows.sort(StringSort);
 CurrentDiv=document.getElementById("ListLocation");
 RemovePatDiv();
 ShowWardList();
}
function ShowWardList() {
 var OS = "<div class=sectionDiv>" +
          "<ul class=sectionList>";
 for(var i = 0; i < PatientRecords.rows.length; i++) {
   BedStr="";
   if (!isWhitespace(PatientRecords.rows[i][15])) {
       BedStr='Bed : '+PatientRecords.rows[i][15]  }
   strFolder=FormatPatientIcon(PatientRecords.rows[i][2])
   OS += "<li class=sectionItem onclick='LinkPatient(\""+i+"\");'>" + 
         "<span style='display:inline-block;width:70%;'>" + 
         strFolder + PatientRecords.rows[i][3]
   if (!isWhitespace(PatientRecords.rows[i][13])) OS +="<span class='showCondition_"+PatientRecords.rows[i][13]+"'></span>" 
   OS += "</span>"+
         "<span class=subscriptRight style='width:29%;font-weight:bold;'>" + BedStr +
         "</span>" +
         "<br><span class=subscriptLeft>Admitted :"   +FormatDate(PatientRecords.rows[i][5]) + "</span>" +
         "<span class=subscriptRight>Exp. Discharge :"+FormatDate(PatientRecords.rows[i][6]) + "</span>" +
         "<br>"+
         "<span class=subscriptLeft>Doctor : "+PatientRecords.rows[i][17] + "</span>" +
         "<span class=subscriptRight>Unit : "+PatientRecords.rows[i][16] + "</span>" +
         "<span class=subscriptLeft>Diet : "+PatientRecords.rows[i][14] + "</span>" +
         "<span class=subscriptRight>Condition : " +  PatientRecords.rows[i][12]   
   if (!isWhitespace(PatientRecords.rows[i][20])) OS += " ("+PatientRecords.rows[i][20].substr(6,2)+"/"+
                                                            PatientRecords.rows[i][20].substr(4,2)+" "+ PatientRecords.rows[i][21]+")"
   OS += "</span>" +
         "<span class=subscriptLeft>Diagnosis : "+PatientRecords.rows[i][4] + "</span>" +
         "</li>";
 }
 if (PatientRecords.rows.length==0) {
    OS+="<li style='text-align:center;color:darkred;' class=sectionItem>"+
        "No Patients Currently in this Ward."+
        "</li>";
 }
 OS += "</ul><div>";
 CurrentDiv.innerHTML=OS;
}
function FormatPatientIcon(Indicators) {
  ImageStr="<span class=PatientFolder"+ Indicators.substr(0,3) + "></span>"
  return ImageStr;
}
</script>
</head>
%START.OF.PAGE
<body onload="InitTable();">
<div class=subMenu>
<form name=SelectWard action=patweb93.pbl method=get>
<input type=hidden name=reportno value="1">
<input type=hidden name=template value="18">
  <select name=wardcode onchange="this.form.submit();" 
  title="Select Ward" class=selectMenu>
  %PATWEB93.01.001
  </select>
  <select name=orderby onchange="SortPatients(this);" 
  title="Order By" class=selectMenu>
  <option value=15>Order By Bed</option>
  <option value=18>Order by Name</option>
  <option value=16>Order by Unit</option>
  <option value=17>Order by Doctor</option>
  </select>
  <span class=MenuLogo></span>
</form>
</div>
<div id=ListLocation></div>
</body>
