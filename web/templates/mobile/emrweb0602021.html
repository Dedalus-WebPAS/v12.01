Content-Type: text/html
Cache-Control: no-cache

<!DOCTYPE HTML>
<head>
<!--"TemplateVersion"  : "V12.01.00"
    "TemplateHome"     : "mobile"-->
<title>Add Diagnosis</title>
<script type="text/javascript" src="../html/iphone/iphone.js"> </script>
<script type="text/javascript" src="../html/iphone/iphone-emr.js"> </script>
<link   rel="stylesheet" href="../html/iphone/iphone.css" type="text/css">
<script type="text/javascript"> 
function init() {
 document.AddDiagnosis.redirect.value=document.location.href;
 InitList();
}
function getDiagnosis(SearchField,ReturnSelect) {
  var serverURL   = "../cgi-bin/emrweb08.pbl?reportno=1" +
                    "&valdcode=" + SearchField.value.replace(/ /g,"+")
  var returnValue = RSExecute(serverURL);
  if (returnValue.status==0) {
    ReturnSelect.options.length=0
    ReturnValue=returnValue.return_value.split("|");
    for (var j=0; j < ReturnValue.length; j++) {
       if (!isWhitespace(ReturnValue[j])) {
         SelectValue=ReturnValue[j].split(",");
         ReturnSelect.options[ReturnSelect.options.length]=
          new Option(SelectValue[1],SelectValue[0]); } } }
}
function newDiagnosis() {
  if (isWhitespace(document.Dummy.diagselt.value)) {
      alertify.alert("No Diagnosis selected !");
      return;;
  }
  document.AddDiagnosis.emvcd005.value=Dummy.diagselt.value
  if (document.AddDiagnosis.emvcd005.value.substr(0,4)=="Z099") {
      alertify.alert("Please enter an additional diagnosis for this patient !");
  }
  document.AddDiagnosis.submit();
}
function ShowDetail(urnumber,recordky,type) {
 theURL="emrweb06.pbl?reportno=2&template=031" + 
         "&urnumber=" + urnumber.replace(/ /g,"+") +
         "&recordky=" + recordky.replace(/ /g,"+");
 el=parent.document.getElementById("sectionFormTitle")
 el.innerHTML="Update Diagnosis";
 document.location.href=theURL;
}
</script>
</head>
%START.OF.PAGE
<body onload="init();">
<form name=Dummy>
<ul class=sectionList>
<li class=sectionItem>
<input type=text oninput='getDiagnosis(this,Dummy.diagselt);'
 placeholder="Search" size=25 style='width:270px'><br>
<select name=diagselt class=Select270 tabindex=2>
</select>
<input type=button class="green" value="Add" onclick='newDiagnosis();' tabindex=3>
<input type=button class="red" value="Exit" onClick="parent.document.location.reload();">
</ul>
</form>
<div id="TableLocation">
</div>
<script type="text/javascript">
function InitList() {
 t = new Table("sectionList","ItemRes");
 t.addColumn("Description","String",11,11,"","","10");
 t.addColumn("Type","LeftSubscript",0,0,"","","");
 t.addColumn("Entered By","RightSubscript",7,7,"","","");
 t.addColumn("Extract","CenterSubscript",6,6,"","","");
 ListLocation=document.getElementById("TableLocation");
 var TB5=t;
 %EMRWEB06.02.134.TB5.005;
 OrderColumn=1;
 AscDsc=2;
 lastOrderColumn=OrderColumn;
 TableOutput(OrderColumn,AscDsc);
}
</script>
<form name=AddDiagnosis method=post action=emrweb06.pbl>
<input type=hidden name=reportno value="2">
<input type=hidden name=template value="002">
<input type=hidden name=updatety value="A">
<input type=hidden name=nextpage value="1">
<input type=hidden name=redirect value="">     
<input type=hidden name=urnumber value="%EMRWEB06.02.003">
<input type=hidden name=admissno value="%EMRWEB06.02.081">
<input type=hidden name=emvcd001 value="%EMRWEB06.02.081">
<input type=hidden name=emvcd002 value="005">
<input type=hidden name=emvcd004 value="5">
<input type=hidden name=emuty001 value="EMRD">
<input type=hidden name=emvcd005 value="">
<input type=hidden name=emvcd006 value="   ">
<input type=hidden name=emvcd031 value="1">
</form>
<form name=PatientLinks method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=004>
<input type=hidden name=regexstm value=102>
<input type=hidden name=newstand value=1>
<input type=hidden name=urnumber value="%EMRWEB06.02.003">
<input type=hidden name=admissno value="%EMRWEB06.02.081">
<input type=hidden name=MenuType value="%EMRWEB06.02.088">
</form>
