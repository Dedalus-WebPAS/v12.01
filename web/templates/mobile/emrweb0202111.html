Content-Type: text/html
Cache-Control: no-cache

<!DOCTYPE HTML>
<head>
<!--"TemplateVersion"  : "V12.01.00"
    "TemplateHome"     : "mobile"-->
<title>Update Expected Patient</title>
<script type="text/javascript" src="../html/iphone/iphone.js"> </script>
<script type="text/javascript" src="../html/iphone/spinningwheel.js"></script>
<link rel="stylesheet" href="../html/iphone/spinningwheel.css" type="text/css" media="all" />
<link   rel="stylesheet" href="../html/iphone/iphone.css" type="text/css">
<script type="text/javascript" src="../js/EmrMandatory.js"></script>
<script type="text/javascript" src="../js/emrweb0202010.js"></script>
<script type="text/javascript">
function setTriage() {
  document.UpdateForm.checkTri.value=1;
  if (validateMandatory(UpdateForm)) {
    document.UpdateForm.formactn.value="SP"
    tmp=document.UpdateForm.emexp001.value;
    document.UpdateForm.emexp001.value=tmp.replace(/ /g,"+") 
    document.UpdateForm.submit()
    }
}
function setDelete() {
  confirmMsg="Are you sure you want to Delete this record ?";
  alertify.confirm(confirmMsg, function (e) {    
    if (e) { 
      if (validateMandatory(UpdateForm)) {
        document.UpdateForm.checksen.value=1;
        document.UpdateForm.formactn.value="AD"
        document.UpdateForm.nextpage.value="2"
        document.UpdateForm.redirect.value="emrweb01.pbl?reportno=1&template=109"
        tmp=document.UpdateForm.emexp001.value;
        document.UpdateForm.emexp001.value=tmp.replace(/ /g,"+") 
        document.UpdateForm.submit()
      }
    }   
  });
}
function setUpdate() {
  document.UpdateForm.checksen.value=1;
  if (validateMandatory(UpdateForm)) {
    document.UpdateForm.formactn.value="AU"
    document.UpdateForm.nextpage.value="2"
    document.UpdateForm.redirect.value="emrweb01.pbl?reportno=1&template=109"
    tmp=document.UpdateForm.emexp001.value;
    document.UpdateForm.emexp001.value=tmp.replace(/ /g,"+") 
    document.UpdateForm.submit()
  }
}
function FN(Name) {
NameFields=Name.split(" ");
 if (NameFields.length > 1) {
  Surname=NameFields[2].substr(0,25);
  FName=NameFields[1].substr(0,25);
  Title=NameFields[0].substr(0,1) + NameFields[0].substr(1,5).toLowerCase()
  document.UpdateForm.emexp002.value=trim(Surname);
  document.UpdateForm.emexp003.value=trim(FName);
 }
}
function CheckCode(code,selectlist)  {
 var found=0
 strvar=code.value+"   "         // format as three characters space filled
 code.value=strvar.substr(0,3)
 for (var i =0 ; i < selectlist.length; i++) {
   if (selectlist.options[i].value.substr(0,3)==code.value) {
     found=1; selectlist.selectedIndex=i } }
 if (found==0) { alertify.alert("Invalid Code Entered");code.focus() }
}
function UpdateCode(code,selectlist) {
  code.value=selectlist.value.substr(0,3)
  UpdateForm.comptext.focus()
}
function setRedirect() {
  if (window.name == "content") {
     document.UpdateForm.redirect.value="emrweb01.pbl?reportno=1&template=2"
   }
  else {
     document.UpdateForm.redirect.value="emrweb01.pbl?reportno=1&template=1"
  }
}
function setFormactn() {
  if (validateMandatory(UpdateForm)) {
    document.UpdateForm.formactn.value="N1"
    document.UpdateForm.updttype.value="REGIS"
    UpdateWin=window.open("","HideUpdateWindow",
    "width=10,height=10,top=1024,directories=no,location=no" +
    ",scrollbars=no,status=no,toolbar=no,menubar=no,resizable=no")
    document.UpdateForm.target="HideUpdateWindow";
    document.UpdateForm.submit()
    }
}
function dispSex(){
for (var i =0 ; i < document.UpdateForm.emexp004.length; i++) {
if  (document.UpdateForm.emexp004.options[i].value==UpdateForm.selsex.value.substr(0,1)) {
       document.UpdateForm.emexp004.selectedIndex=i } };
}
function submitFormRedirect() {
 if (IsDirty(UpdateForm)){
   if(document.UpdateForm.checksen.value==1) {return;;}
   if(document.UpdateForm.checkTri.value==1) {return;;}
   SubmitForm()
 }
}
function SubmitForm() {
   setUpdate()
}
function IsDirty(eForm) {
  for (var i=0; i < eForm.length; i++) {
    var eElem = eForm.elements[i];
    if ("text" == eElem.type || "textarea" == eElem.tagName)
    {
      if (trim(eElem.value) != trim(eElem.defaultValue))  {
        if(eElem.name=="prcom001") {
          if (UpdateForm.prcom001.value == UpdateForm.savdesc1.value) {
              return false; }
        }
        return true;}
    }
  }
  return false;
}
function checkWhite(UR) {
var URnumber=UR;
if (isWhitespace(URnumber.value)) { return;;}
if (UpdateForm.emexp018.value != UpdateForm.emexp018.defaultValue)  {
  justifyRight(URnumber);
  PatientReturn();
 }
}
function Validateprecom001() {
  onblurHandler()
  var formatedtext=formateText(UpdateForm.prcom001,'50')
  if ((formatedtext.split(/[\r\n]/).length>6) || 
        (UpdateForm.prcom001.value.length > 300)) {
    alertify.alert("Presenting Complaint comments - Max 6 lines."
           +"<br>Please remove extra rows to continue.");
    document.UpdateForm.prcom001.focus();
    return; }
}
</script>
<style type=text/css>
.subhead {
 font-weight:bold;
 font-size:15px;
 margin-top:0px;
 margin-bottom:0px;
 margin-left:15px;
}
.sectionText {
 position:absolute;
 right:8px;
 margin-top:-5px;
 margin-right:10px;
 vertical-align:top;
}
.displayText {
 margin-top:-5px;
 margin-right:10px;
 vertical-align:top;
}
</style>
</head>
%START.OF.PAGE
<body onload="init();">
<div class=HeadingDiv>
<table border=0 padding=0 style='width:100%;border:0;margin:0;padding:4px 0px'>
<tr><td class=HeadLeft><span class="goBack"
    onclick="location.href=backButton();">Back</span></td>
    <td class=HeadTitle>Expected</td>
    <td class=HeadRight>
    </td>
</tr></table>
</div>

<div id=pageBucket>
<form name=UpdateForm action="emrweb02.pbl" method=post
 onsubmit='return validateMandatory(this);'>
  <input type=hidden name=reportno value="02">
  <input type=hidden name=template value="012">
  <input type=hidden name=formactn>
  <input type=hidden name=updttype>
  <input type=hidden name=updateky value="">
  <input type=hidden name=nextpage value="1">
  <input type=hidden name=redirect>
  <input type=hidden name=emexp001 value="%EMRWEB02.02.410">
  <input type=hidden name=selsex>
  <input type=hidden name=dummyadm>
  <input type=hidden name=dummsrch value="1">
  <input type=hidden name=gname>
  <input type=hidden name=sname>
  <input type=hidden name=savdesc1>
  <input type=hidden name=dummy>
  <input type=hidden name=dummy1>
  <input type=hidden name=dummy2>
  <input type=hidden name=checksen value="0">
  <input type=hidden name=checkTri value="0">
  <input type=hidden name=patsname value="%EMRWEB02.02.411">
  <input type=hidden name=patgname value="%EMRWEB02.02.412">
  <input type=hidden name=deceased>
  <input type=hidden name=emexp018 value="%EMRWEB02.02.435">

<ul class=sectionList>
<!--
<li class=sectionItem onclick='javsscript:location.reload();'> ur
<span class=sectionText>
    <input type=text size=10 maxlength=8 name=emexp018 tabindex=4 
     onclick="patientSearch(this,this.form.emexp002,this.form.emexp003,this.form.emexp004,this.form.emexp004);"
      value="EMRWEB02.02.435" onblur="checkWhite(this);"> 
</span></li>
-->
<li class=sectionItem onclick='javsscript:location.reload();'>surname
<span class=sectionText>
  <input type=text size=15 maxlength=25 name=emexp002 tabindex=5
         value="%EMRWEB02.02.411">
</span></li>

<li class=sectionItem>given name
<span class=sectionText>
    <input type="text" size=15 maxlength=25 name=emexp003 tabindex=6
        value="%EMRWEB02.02.412">
</span></li>

<li class=sectionItem onclick="openDate(UpdateForm.emexp005);">date of birth
<span class=sectionText>
    <input type="text" size=12 max=11 name=emexp005 readonly
    value="%EMRWEB02.02.414" tabindex=10
    title="Date of Birth" class="Past Date">
</span></li>

<li class=sectionItem>sex
<span class=sectionText>
    <select name=emexp004 class=Select120 tabindex=9>
    <option> </option>
    <option value="R">Intersex</option>
    <option value="U">Unknown</option>
    <option value="I">Indeterminate</option>
    <option value="M">Male</option>
    <option value="F">Female</option>
    </select>
</span></li>


<li class=sectionItem>ambulance case no
<span class=sectionText>
    <input type=text size=10 maxlength=15 name=emexp026 tabindex=7
     value="%EMRWEB02.02.469" title="Amb Case No">
</span></li>


<li class=sectionItem>accepting source
<span class=commentText><br>
    <select name=emexp020 class=Select270 tabindex=11>
    <option></option>
    %EMRWEB02.02.463.2
    </select>
</span></li>

<li class=sectionItem>transport
<span class=commentText><br>
    <select name=emexp014 tabindex=29 class="Select270"
    title="Arrival Transport">
     <option></option>
     %EMRWEB02.02.423.2
     </select>
</span></li>

<li class=sectionItem onclick="openDate(UpdateForm.emexp015);">date notified
<span class=sectionText>
    <input type="text" name=emexp015 size="12"  tabindex=12 readonly
    class="Mandatory Date" title="Triage Date" value="%EMRWEB02.02.424"
    onblur="checkDate(emexp015,'Triage Date')" >
</span></li>

<li class=sectionItem onclick="openTime(UpdateForm.emexp016);">time notified
<span class=sectionText>
    <input type="text" name=emexp016 size="8"  tabindex=13 class=Time
    class=Mandatory title="Triage Time" value="%EMRWEB02.02.425" readonly
    onblur="checkTime(emexp016,'Triage Time')">
</span></li>

<li class=sectionItem onclick="openDate(UpdateForm.emexp022);">ETA date
<span class=sectionText>
    <input type="text" name=emexp022 size="12"  tabindex=14
    class="Date" title="Triage Date" value="%EMRWEB02.02.465" readonly
    onblur="checkDate(emexp022,'ETA Date')" >
</span></li>

<li class=sectionItem onclick="openTime(UpdateForm.emexp023);">ETA time
<span class=sectionText>
    <input type="text" name=emexp023 size="8"  tabindex=15
    title="ETA Time" value="%EMRWEB02.02.466" readonly class=Time
    onblur="checkTime(emexp023,'Triage Time')">
</span></li>

<li class=sectionItem>expected location
<span class=commentText><br>
    <select class=Select270 name=emexp025 tabindex=16 title="Expected Location">
    <option></option>
     %EMRWEB02.02.468
    </select>
</span></li>

<li class=sectionItem>presenting complaint
<span class=commentText><br>
    <input type=hidden name=emrviscat value="el">
    <select name=emexp007 class=Select270>
    <option></option>
    %EMRWEB02.02.416.2
    </select><br>
    <textarea type=text valign=top name=prcom001 tabindex=18
     onblur="Validateprecom001();" 
     wrap=hard cols=26 rows=3></textarea>
</span></li>
</ul>

<input type=button value="Update" class="green" tabindex=20 onClick="setUpdate();">
<input type=button value="Cancel" class="red"   tabindex=22 onClick="top.hidePatient();">
</form>
</div>
<div id=footer>
</div>
<script type="text/javascript">
function init(){
for (var i =0 ; i < document.UpdateForm.emexp004.length; i++) {
if  (document.UpdateForm.emexp004.options[i].value== "%EMRWEB02.02.413") {
       document.UpdateForm.emexp004.selectedIndex=i } 
 }
var str1= trim("%EMRWEB02.02.417")
var str2= trim("%EMRWEB02.02.418")
var str3= trim("%EMRWEB02.02.419")
var str4= trim("%EMRWEB02.02.420")
var str5= trim("%EMRWEB02.02.421")
var str6= trim("%EMRWEB02.02.422")
UpdateForm.prcom001.value=str1+'\n'+str2+'\n'+str3+'\n'+str4+'\n'+str5+'\n'+str6
UpdateForm.savdesc1.value=str1+'\n'+str2+'\n'+str3+'\n'+str4+'\n'+str5+'\n'+str6
}
</script>
