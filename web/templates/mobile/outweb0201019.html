Content-Type: text/html
Cache-Control: no-cache

<!DOCTYPE HTML>
<head>
<!--"TemplateVersion"  : "V12.01.00"
    "TemplateHome"     : "mobile"-->
<title>Clinic List</title>
<script type="text/javascript" src="../html/ipad/ipad.js"> </script>
<link   rel="stylesheet"       href="../html/ipad/ipad.css" type="text/css">
<script type="text/javascript">
// Source Code:  ./ipad/outweb0201019.js
// Modification 
// Version         Date                         Responsible/Changes Made
//------------------------------------------------------------------------------
var ClinicRecords;
var FilterColumn = new Array();
var FilterValue = new Array();
function SetPeriod(el) {
  if (el.vyearmth) el.vyearmth.options[el.vyearmth.selectedIndex].value=' ';
  if (el.lastdate) el.lastdate.options[el.lastdate.selectedIndex].value=' ';
  el.submit();
}
function SortClinics(el) {
 SortOrderBy=el.options[el.selectedIndex].value;
 ClinicRecords.rows.sort(StringSort);
 CurrentDiv=document.getElementById("ListLocation");
 ShowClinicList();
}
function InitTable() {
  viewFlag=document.SelectPeriod.viewperd.value;
  for (var i =0 ; i < document.SelectPeriod.viewtype.length; i++) {
    if (document.SelectPeriod.viewtype.options[i].value==viewFlag) {
      document.SelectPeriod.viewtype.selectedIndex=i } };
  ClinicRecords = new Table("patient-list","patient-item");
  t=ClinicRecords;
  ClinicList();
  SortOrderBy=2;
  ClinicRecords.rows.sort(StringSort);
  CurrentDiv=document.getElementById("ListLocation");
  ShowFilter("doctorFilter","12");
  ShowFilter("typeFilter","4");
  ShowFilter("locationFilter","6");
  ShowClinicList();
  MaxRowNo=t.rows.length;
}
function ShowFilter(FilterName,ColumnNo) {
 var FilterList = new Array();
 var FilterCount = new Array();
 FilterColumn[FilterColumn.length]=ColumnNo;
 FilterValue[FilterValue.length]='';
 for(var i = 0; i < ClinicRecords.rows.length; i++) {
   if (!isWhitespace(ClinicRecords.rows[i][ColumnNo])) {
     addItem=true;
     for(var j = 0; j < FilterList.length; j++) {
       if (ClinicRecords.rows[i][ColumnNo]==FilterList[j]) {
         FilterCount[j]++;
         addItem=false;
       }
     }
     if (addItem) {
       FilterList[FilterList.length]=ClinicRecords.rows[i][ColumnNo];
       FilterCount[FilterCount.length]=1;
     }
   }
 }
 el=document.getElementById(FilterName)
 if (FilterList.length==0) el.style.display="none";
 for(var j = 0; j < FilterList.length; j++) {
   FilterList[j]=FilterList[j]+"("+FilterCount[j]+")";
 }
 FilterList.sort();
 for(var j = 0; j < FilterList.length; j++) {
   optionVal=FilterList[j].replace(/\(.\)$/,"").replace(/\(..\)$/,"").replace(/\(...\)$/,"");
   el.options[el.options.length] = new Option(FilterList[j],optionVal);
 }
}
function LinkClinic(rowNo) {
  top.setCookie("returnClinicList",document.location.href);
  location.href=ClinicRecords.rows[rowNo][0];
}
function ShowFilterList(el,ColumnNo) {
  for(var f = 0; f < FilterColumn.length; f++) {
    if (FilterColumn[f]==ColumnNo) {
       FilterValue[f]=el.options[el.selectedIndex].value;
    }
  }
 CurrentDiv=document.getElementById("ListLocation");
 ShowClinicList();
}
function ShowClinicList() {
 var OS = "<div class=sectionDiv>" +
          "<ul class=sectionList>";
 for(var i = 0; i < ClinicRecords.rows.length; i++) {
   if (ListFilter(ClinicRecords.rows[i])) {
     OS += "<li class=sectionItem onclick='LinkClinic(\""+i+"\");'>" + 
           ClinicRecords.rows[i][5] +
           "<br><span class=ntTimeframe>Type : "+ClinicRecords.rows[i][4] + "</span>" +
           "<span class=ntWhen>"+FormatDateTime(ClinicRecords.rows[i][2]) + "</span>" +
           "<br><span class=ntTimeframe>Doctor : "+ClinicRecords.rows[i][12] + "</span>" +
           "<span class=ntWhen>Patients : "+(parseInt(ClinicRecords.rows[i][9])+
                                         parseInt(ClinicRecords.rows[i][10]))+ "</span>" +
           "<br><span class=ntTimeframe>Location :"+ ClinicRecords.rows[i][6] + "</span>" +
           "<span class=ntWhen>Available : "+(parseInt(ClinicRecords.rows[i][18])+
                                         parseInt(ClinicRecords.rows[i][19]))+ "</span>" +
           "</li>";
   }
 }
 if (ClinicRecords.rows.length==0) {
   OS += "<li class=sectionItem style='text-align:center;'>" +
         "No clinics found in this period.</span>";
 }
 OS += "</ul><div>";
 CurrentDiv.innerHTML=OS;
}
function ListFilter(el) {
  for(var f = 0; f < FilterValue.length; f++) {
    if (FilterValue[f]!='') {
      if (FilterValue[f]!=el[FilterColumn[f]]) {
        return false;
      }
    }
  }
  return true;
}
</script>
</head>
%START.OF.PAGE
<body onload="InitTable();">
<div class=subMenu>
<form name=SelectPeriod action=outweb02.pbl method=get>
<input type=hidden name=reportno value=1>
<input type=hidden name=template value=19>
<input type=hidden name=viewperd value="%OUTWEB02.01.011">
<input type=hidden name=viewtype value=0>
   %OUTWEB02.01.007
   <select onchange='SortClinics(this);' 
   class=selectMenu title='Sort Order' id=sortOrder>
   <option value=2>Sort By Date/Time </option>
   <option value=5>Sort By Clinic Name </option>
   <option value=4>Sort By Clinic Type </option>
   <option value=6>Sort By Location </option>
   <option value=12>Sort By Doctor </option>
   </select>
   <select onchange='ShowFilterList(this,"12");'  style='max-width:160px'
   class=selectMenu title='Doctor' id=doctorFilter>
   <option value="">All Doctors</option>
   </select>
   <select onchange='ShowFilterList(this,"4");'  style='max-width:160px'
   class=selectMenu title='Clinic Type' id=typeFilter>
   <option value="">All Clinic Types</option>
   </select>
   <select onchange='ShowFilterList(this,"6");'  style='max-width:160px'
   class=selectMenu title='Location' id=locationFilter>
   <option value="">All Locations</option>
   </select>
<span class=MenuLogo></span>
</form>
</div>
<div id=ListLocation></div>
<script type="text/javascript">
function ClinicList() {
%OUTWEB02.01.019.outweb02.02.021
}
</script>
</body>
